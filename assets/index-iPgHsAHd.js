(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GL={exports:{}},gv={},HL={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=Symbol.for("react.element"),g3=Symbol.for("react.portal"),y3=Symbol.for("react.fragment"),v3=Symbol.for("react.strict_mode"),_3=Symbol.for("react.profiler"),w3=Symbol.for("react.provider"),b3=Symbol.for("react.context"),T3=Symbol.for("react.forward_ref"),E3=Symbol.for("react.suspense"),x3=Symbol.for("react.memo"),S3=Symbol.for("react.lazy"),dC=Symbol.iterator;function I3(t){return t===null||typeof t!="object"?null:(t=dC&&t[dC]||t["@@iterator"],typeof t=="function"?t:null)}var WL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KL=Object.assign,JL={};function Cc(t,e,n){this.props=t,this.context=e,this.refs=JL,this.updater=n||WL}Cc.prototype.isReactComponent={};Cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YL(){}YL.prototype=Cc.prototype;function wx(t,e,n){this.props=t,this.context=e,this.refs=JL,this.updater=n||WL}var bx=wx.prototype=new YL;bx.constructor=wx;KL(bx,Cc.prototype);bx.isPureReactComponent=!0;var fC=Array.isArray,QL=Object.prototype.hasOwnProperty,Tx={current:null},XL={key:!0,ref:!0,__self:!0,__source:!0};function ZL(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)QL.call(e,r)&&!XL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:np,type:t,key:o,ref:s,props:i,_owner:Tx.current}}function A3(t,e){return{$$typeof:np,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ex(t){return typeof t=="object"&&t!==null&&t.$$typeof===np}function P3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hC=/\/+/g;function S0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P3(""+t.key):e.toString(36)}function jm(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case np:case g3:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+S0(s,0):r,fC(i)?(n="",t!=null&&(n=t.replace(hC,"$&/")+"/"),jm(i,e,n,"",function(u){return u})):i!=null&&(Ex(i)&&(i=A3(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(hC,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",fC(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+S0(o,a);s+=jm(o,e,n,l,i)}else if(l=I3(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+S0(o,a++),s+=jm(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Xp(t,e,n){if(t==null)return t;var r=[],i=0;return jm(t,r,"","",function(o){return e.call(n,o,i++)}),r}function C3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zn={current:null},zm={transition:null},R3={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:zm,ReactCurrentOwner:Tx};function e$(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Xp,forEach:function(t,e,n){Xp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xp(t,function(){e++}),e},toArray:function(t){return Xp(t,function(e){return e})||[]},only:function(t){if(!Ex(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=Cc;ke.Fragment=y3;ke.Profiler=_3;ke.PureComponent=wx;ke.StrictMode=v3;ke.Suspense=E3;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R3;ke.act=e$;ke.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=KL({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Tx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)QL.call(e,l)&&!XL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:np,type:t.type,key:i,ref:o,props:r,_owner:s}};ke.createContext=function(t){return t={$$typeof:b3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:w3,_context:t},t.Consumer=t};ke.createElement=ZL;ke.createFactory=function(t){var e=ZL.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:T3,render:t}};ke.isValidElement=Ex;ke.lazy=function(t){return{$$typeof:S3,_payload:{_status:-1,_result:t},_init:C3}};ke.memo=function(t,e){return{$$typeof:x3,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=zm.transition;zm.transition={};try{t()}finally{zm.transition=e}};ke.unstable_act=e$;ke.useCallback=function(t,e){return Zn.current.useCallback(t,e)};ke.useContext=function(t){return Zn.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return Zn.current.useDeferredValue(t)};ke.useEffect=function(t,e){return Zn.current.useEffect(t,e)};ke.useId=function(){return Zn.current.useId()};ke.useImperativeHandle=function(t,e,n){return Zn.current.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return Zn.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return Zn.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return Zn.current.useMemo(t,e)};ke.useReducer=function(t,e,n){return Zn.current.useReducer(t,e,n)};ke.useRef=function(t){return Zn.current.useRef(t)};ke.useState=function(t){return Zn.current.useState(t)};ke.useSyncExternalStore=function(t,e,n){return Zn.current.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return Zn.current.useTransition()};ke.version="18.3.1";HL.exports=ke;var $=HL.exports;const V=tt($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3=$,k3=Symbol.for("react.element"),O3=Symbol.for("react.fragment"),M3=Object.prototype.hasOwnProperty,D3=N3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L3={key:!0,ref:!0,__self:!0,__source:!0};function t$(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)M3.call(e,r)&&!L3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:k3,type:t,key:o,ref:s,props:i,_owner:D3.current}}gv.Fragment=O3;gv.jsx=t$;gv.jsxs=t$;GL.exports=gv;var w=GL.exports,rb={},n$={exports:{}},Cr={},r$={exports:{}},i$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,J){var Q=U.length;U.push(J);e:for(;0<Q;){var le=Q-1>>>1,ne=U[le];if(0<i(ne,J))U[le]=J,U[Q]=ne,Q=le;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var J=U[0],Q=U.pop();if(Q!==J){U[0]=Q;e:for(var le=0,ne=U.length,fe=ne>>>1;le<fe;){var Ce=2*(le+1)-1,Ue=U[Ce],st=Ce+1,Ut=U[st];if(0>i(Ue,Q))st<ne&&0>i(Ut,Ue)?(U[le]=Ut,U[st]=Q,le=st):(U[le]=Ue,U[Ce]=Q,le=Ce);else if(st<ne&&0>i(Ut,Q))U[le]=Ut,U[st]=Q,le=st;else break e}}return J}function i(U,J){var Q=U.sortIndex-J.sortIndex;return Q!==0?Q:U.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,d=null,f=3,g=!1,y=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var J=n(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=U)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(u)}}function C(U){if(_=!1,x(U),!y)if(n(l)!==null)y=!0,Y(E);else{var J=n(u);J!==null&&X(C,J.startTime-U)}}function E(U,J){y=!1,_&&(_=!1,b(P),P=-1),g=!0;var Q=f;try{for(x(J),d=n(l);d!==null&&(!(d.expirationTime>J)||U&&!O());){var le=d.callback;if(typeof le=="function"){d.callback=null,f=d.priorityLevel;var ne=le(d.expirationTime<=J);J=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(l)&&r(l),x(J)}else r(l);d=n(l)}if(d!==null)var fe=!0;else{var Ce=n(u);Ce!==null&&X(C,Ce.startTime-J),fe=!1}return fe}finally{d=null,f=Q,g=!1}}var A=!1,S=null,P=-1,R=5,k=-1;function O(){return!(t.unstable_now()-k<R)}function M(){if(S!==null){var U=t.unstable_now();k=U;var J=!0;try{J=S(!0,U)}finally{J?D():(A=!1,S=null)}}else A=!1}var D;if(typeof T=="function")D=function(){T(M)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=M,D=function(){q.postMessage(null)}}else D=function(){v(M,0)};function Y(U){S=U,A||(A=!0,D())}function X(U,J){P=v(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Y(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var Q=f;f=J;try{return U()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=f;f=U;try{return J()}finally{f=Q}},t.unstable_scheduleCallback=function(U,J,Q){var le=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,U){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Q+ne,U={id:c++,callback:J,priorityLevel:U,startTime:Q,expirationTime:ne,sortIndex:-1},Q>le?(U.sortIndex=Q,e(u,U),n(l)===null&&U===n(u)&&(_?(b(P),P=-1):_=!0,X(C,Q-le))):(U.sortIndex=ne,e(l,U),y||g||(y=!0,Y(E))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var J=f;return function(){var Q=f;f=J;try{return U.apply(this,arguments)}finally{f=Q}}}})(i$);r$.exports=i$;var $3=r$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3=$,Sr=$3;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o$=new Set,kf={};function ml(t,e){Lu(t,e),Lu(t+"Capture",e)}function Lu(t,e){for(kf[t]=e,t=0;t<e.length;t++)o$.add(e[t])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ib=Object.prototype.hasOwnProperty,F3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pC={},mC={};function U3(t){return ib.call(mC,t)?!0:ib.call(pC,t)?!1:F3.test(t)?mC[t]=!0:(pC[t]=!0,!1)}function B3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j3(t,e,n,r){if(e===null||typeof e>"u"||B3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function er(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tn[t]=new er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tn[e]=new er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tn[t]=new er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tn[t]=new er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tn[t]=new er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tn[t]=new er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tn[t]=new er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tn[t]=new er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tn[t]=new er(t,5,!1,t.toLowerCase(),null,!1,!1)});var xx=/[\-:]([a-z])/g;function Sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xx,Sx);Tn[e]=new er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xx,Sx);Tn[e]=new er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xx,Sx);Tn[e]=new er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tn[t]=new er(t,1,!1,t.toLowerCase(),null,!1,!1)});Tn.xlinkHref=new er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tn[t]=new er(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ix(t,e,n,r){var i=Tn.hasOwnProperty(e)?Tn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j3(e,n,i,r)&&(n=null),r||i===null?U3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ro=V3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zp=Symbol.for("react.element"),Ql=Symbol.for("react.portal"),Xl=Symbol.for("react.fragment"),Ax=Symbol.for("react.strict_mode"),ob=Symbol.for("react.profiler"),s$=Symbol.for("react.provider"),a$=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),sb=Symbol.for("react.suspense"),ab=Symbol.for("react.suspense_list"),Cx=Symbol.for("react.memo"),Xo=Symbol.for("react.lazy"),l$=Symbol.for("react.offscreen"),gC=Symbol.iterator;function bd(t){return t===null||typeof t!="object"?null:(t=gC&&t[gC]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,I0;function Yd(t){if(I0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);I0=e&&e[1]||""}return`
`+I0+t}var A0=!1;function P0(t,e){if(!t||A0)return"";A0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{A0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yd(t):""}function z3(t){switch(t.tag){case 5:return Yd(t.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return t=P0(t.type,!1),t;case 11:return t=P0(t.type.render,!1),t;case 1:return t=P0(t.type,!0),t;default:return""}}function lb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xl:return"Fragment";case Ql:return"Portal";case ob:return"Profiler";case Ax:return"StrictMode";case sb:return"Suspense";case ab:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a$:return(t.displayName||"Context")+".Consumer";case s$:return(t._context.displayName||"Context")+".Provider";case Px:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cx:return e=t.displayName||null,e!==null?e:lb(t.type)||"Memo";case Xo:e=t._payload,t=t._init;try{return lb(t(e))}catch{}}return null}function q3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lb(e);case 8:return e===Ax?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function u$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G3(t){var e=u$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function em(t){t._valueTracker||(t._valueTracker=G3(t))}function c$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=u$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ub(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function d$(t,e){e=e.checked,e!=null&&Ix(t,"checked",e,!1)}function cb(t,e){d$(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?db(t,e.type,n):e.hasOwnProperty("defaultValue")&&db(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function db(t,e,n){(e!=="number"||mg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qd=Array.isArray;function gu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _C(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(Qd(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function f$(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function h$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?h$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tm,p$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tm=tm||document.createElement("div"),tm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Of(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H3=["Webkit","ms","Moz","O"];Object.keys(uf).forEach(function(t){H3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uf[e]=uf[t]})});function m$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uf.hasOwnProperty(t)&&uf[t]?(""+e).trim():e+"px"}function g$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=m$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var W3=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pb(t,e){if(e){if(W3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function mb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gb=null;function Rx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yb=null,yu=null,vu=null;function bC(t){if(t=op(t)){if(typeof yb!="function")throw Error(re(280));var e=t.stateNode;e&&(e=bv(e),yb(t.stateNode,t.type,e))}}function y$(t){yu?vu?vu.push(t):vu=[t]:yu=t}function v$(){if(yu){var t=yu,e=vu;if(vu=yu=null,bC(t),e)for(t=0;t<e.length;t++)bC(e[t])}}function _$(t,e){return t(e)}function w$(){}var C0=!1;function b$(t,e,n){if(C0)return t(e,n);C0=!0;try{return _$(t,e,n)}finally{C0=!1,(yu!==null||vu!==null)&&(w$(),v$())}}function Mf(t,e){var n=t.stateNode;if(n===null)return null;var r=bv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var vb=!1;if(yo)try{var Td={};Object.defineProperty(Td,"passive",{get:function(){vb=!0}}),window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{vb=!1}function K3(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var cf=!1,gg=null,yg=!1,_b=null,J3={onError:function(t){cf=!0,gg=t}};function Y3(t,e,n,r,i,o,s,a,l){cf=!1,gg=null,K3.apply(J3,arguments)}function Q3(t,e,n,r,i,o,s,a,l){if(Y3.apply(this,arguments),cf){if(cf){var u=gg;cf=!1,gg=null}else throw Error(re(198));yg||(yg=!0,_b=u)}}function gl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function TC(t){if(gl(t)!==t)throw Error(re(188))}function X3(t){var e=t.alternate;if(!e){if(e=gl(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return TC(i),t;if(o===r)return TC(i),e;o=o.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function E$(t){return t=X3(t),t!==null?x$(t):null}function x$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=x$(t);if(e!==null)return e;t=t.sibling}return null}var S$=Sr.unstable_scheduleCallback,EC=Sr.unstable_cancelCallback,Z3=Sr.unstable_shouldYield,e5=Sr.unstable_requestPaint,Lt=Sr.unstable_now,t5=Sr.unstable_getCurrentPriorityLevel,Nx=Sr.unstable_ImmediatePriority,I$=Sr.unstable_UserBlockingPriority,vg=Sr.unstable_NormalPriority,n5=Sr.unstable_LowPriority,A$=Sr.unstable_IdlePriority,yv=null,Oi=null;function r5(t){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(yv,t,void 0,(t.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:s5,i5=Math.log,o5=Math.LN2;function s5(t){return t>>>=0,t===0?32:31-(i5(t)/o5|0)|0}var nm=64,rm=4194304;function Xd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _g(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Xd(a):(o&=s,o!==0&&(r=Xd(o)))}else s=n&~i,s!==0?r=Xd(s):o!==0&&(r=Xd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ui(e),i=1<<n,r|=t[n],e&=~i;return r}function a5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ui(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=a5(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function wb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P$(){var t=nm;return nm<<=1,!(nm&4194240)&&(nm=64),t}function R0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ui(e),t[e]=n}function u5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ui(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function kx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ui(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ke=0;function C$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R$,Ox,N$,k$,O$,bb=!1,im=[],fs=null,hs=null,ps=null,Df=new Map,Lf=new Map,ts=[],c5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xC(t,e){switch(t){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Df.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(e.pointerId)}}function Ed(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=op(e),e!==null&&Ox(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function d5(t,e,n,r,i){switch(e){case"focusin":return fs=Ed(fs,t,e,n,r,i),!0;case"dragenter":return hs=Ed(hs,t,e,n,r,i),!0;case"mouseover":return ps=Ed(ps,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Df.set(o,Ed(Df.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lf.set(o,Ed(Lf.get(o)||null,t,e,n,r,i)),!0}return!1}function M$(t){var e=ba(t.target);if(e!==null){var n=gl(e);if(n!==null){if(e=n.tag,e===13){if(e=T$(n),e!==null){t.blockedOn=e,O$(t.priority,function(){N$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gb=r,n.target.dispatchEvent(r),gb=null}else return e=op(n),e!==null&&Ox(e),t.blockedOn=n,!1;e.shift()}return!0}function SC(t,e,n){qm(t)&&n.delete(e)}function f5(){bb=!1,fs!==null&&qm(fs)&&(fs=null),hs!==null&&qm(hs)&&(hs=null),ps!==null&&qm(ps)&&(ps=null),Df.forEach(SC),Lf.forEach(SC)}function xd(t,e){t.blockedOn===e&&(t.blockedOn=null,bb||(bb=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,f5)))}function $f(t){function e(i){return xd(i,t)}if(0<im.length){xd(im[0],t);for(var n=1;n<im.length;n++){var r=im[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fs!==null&&xd(fs,t),hs!==null&&xd(hs,t),ps!==null&&xd(ps,t),Df.forEach(e),Lf.forEach(e),n=0;n<ts.length;n++)r=ts[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)M$(n),n.blockedOn===null&&ts.shift()}var _u=Ro.ReactCurrentBatchConfig,wg=!0;function h5(t,e,n,r){var i=Ke,o=_u.transition;_u.transition=null;try{Ke=1,Mx(t,e,n,r)}finally{Ke=i,_u.transition=o}}function p5(t,e,n,r){var i=Ke,o=_u.transition;_u.transition=null;try{Ke=4,Mx(t,e,n,r)}finally{Ke=i,_u.transition=o}}function Mx(t,e,n,r){if(wg){var i=Tb(t,e,n,r);if(i===null)U0(t,e,r,bg,n),xC(t,r);else if(d5(i,t,e,n,r))r.stopPropagation();else if(xC(t,r),e&4&&-1<c5.indexOf(t)){for(;i!==null;){var o=op(i);if(o!==null&&R$(o),o=Tb(t,e,n,r),o===null&&U0(t,e,r,bg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else U0(t,e,r,null,n)}}var bg=null;function Tb(t,e,n,r){if(bg=null,t=Rx(r),t=ba(t),t!==null)if(e=gl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bg=t,null}function D$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t5()){case Nx:return 1;case I$:return 4;case vg:case n5:return 16;case A$:return 536870912;default:return 16}default:return 16}}var ss=null,Dx=null,Gm=null;function L$(){if(Gm)return Gm;var t,e=Dx,n=e.length,r,i="value"in ss?ss.value:ss.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Gm=i.slice(t,1<r?1-r:void 0)}function Hm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function om(){return!0}function IC(){return!1}function Rr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?om:IC,this.isPropagationStopped=IC,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=om)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=om)},persist:function(){},isPersistent:om}),e}var Rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lx=Rr(Rc),ip=St({},Rc,{view:0,detail:0}),m5=Rr(ip),N0,k0,Sd,vv=St({},ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$x,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sd&&(Sd&&t.type==="mousemove"?(N0=t.screenX-Sd.screenX,k0=t.screenY-Sd.screenY):k0=N0=0,Sd=t),N0)},movementY:function(t){return"movementY"in t?t.movementY:k0}}),AC=Rr(vv),g5=St({},vv,{dataTransfer:0}),y5=Rr(g5),v5=St({},ip,{relatedTarget:0}),O0=Rr(v5),_5=St({},Rc,{animationName:0,elapsedTime:0,pseudoElement:0}),w5=Rr(_5),b5=St({},Rc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T5=Rr(b5),E5=St({},Rc,{data:0}),PC=Rr(E5),x5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I5[t])?!!e[t]:!1}function $x(){return A5}var P5=St({},ip,{key:function(t){if(t.key){var e=x5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$x,charCode:function(t){return t.type==="keypress"?Hm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C5=Rr(P5),R5=St({},vv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CC=Rr(R5),N5=St({},ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$x}),k5=Rr(N5),O5=St({},Rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),M5=Rr(O5),D5=St({},vv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),L5=Rr(D5),$5=[9,13,27,32],Vx=yo&&"CompositionEvent"in window,df=null;yo&&"documentMode"in document&&(df=document.documentMode);var V5=yo&&"TextEvent"in window&&!df,$$=yo&&(!Vx||df&&8<df&&11>=df),RC=" ",NC=!1;function V$(t,e){switch(t){case"keyup":return $5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zl=!1;function F5(t,e){switch(t){case"compositionend":return F$(e);case"keypress":return e.which!==32?null:(NC=!0,RC);case"textInput":return t=e.data,t===RC&&NC?null:t;default:return null}}function U5(t,e){if(Zl)return t==="compositionend"||!Vx&&V$(t,e)?(t=L$(),Gm=Dx=ss=null,Zl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $$&&e.locale!=="ko"?null:e.data;default:return null}}var B5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!B5[t.type]:e==="textarea"}function U$(t,e,n,r){y$(r),e=Tg(e,"onChange"),0<e.length&&(n=new Lx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ff=null,Vf=null;function j5(t){Q$(t,0)}function _v(t){var e=nu(t);if(c$(e))return t}function z5(t,e){if(t==="change")return e}var B$=!1;if(yo){var M0;if(yo){var D0="oninput"in document;if(!D0){var OC=document.createElement("div");OC.setAttribute("oninput","return;"),D0=typeof OC.oninput=="function"}M0=D0}else M0=!1;B$=M0&&(!document.documentMode||9<document.documentMode)}function MC(){ff&&(ff.detachEvent("onpropertychange",j$),Vf=ff=null)}function j$(t){if(t.propertyName==="value"&&_v(Vf)){var e=[];U$(e,Vf,t,Rx(t)),b$(j5,e)}}function q5(t,e,n){t==="focusin"?(MC(),ff=e,Vf=n,ff.attachEvent("onpropertychange",j$)):t==="focusout"&&MC()}function G5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _v(Vf)}function H5(t,e){if(t==="click")return _v(e)}function W5(t,e){if(t==="input"||t==="change")return _v(e)}function K5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pi=typeof Object.is=="function"?Object.is:K5;function Ff(t,e){if(pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ib.call(e,i)||!pi(t[i],e[i]))return!1}return!0}function DC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function LC(t,e){var n=DC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DC(n)}}function z$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q$(){for(var t=window,e=mg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mg(t.document)}return e}function Fx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function J5(t){var e=q$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z$(n.ownerDocument.documentElement,n)){if(r!==null&&Fx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=LC(n,o);var s=LC(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y5=yo&&"documentMode"in document&&11>=document.documentMode,eu=null,Eb=null,hf=null,xb=!1;function $C(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xb||eu==null||eu!==mg(r)||(r=eu,"selectionStart"in r&&Fx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hf&&Ff(hf,r)||(hf=r,r=Tg(Eb,"onSelect"),0<r.length&&(e=new Lx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=eu)))}function sm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var tu={animationend:sm("Animation","AnimationEnd"),animationiteration:sm("Animation","AnimationIteration"),animationstart:sm("Animation","AnimationStart"),transitionend:sm("Transition","TransitionEnd")},L0={},G$={};yo&&(G$=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function wv(t){if(L0[t])return L0[t];if(!tu[t])return t;var e=tu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G$)return L0[t]=e[n];return t}var H$=wv("animationend"),W$=wv("animationiteration"),K$=wv("animationstart"),J$=wv("transitionend"),Y$=new Map,VC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){Y$.set(t,e),ml(e,[t])}for(var $0=0;$0<VC.length;$0++){var V0=VC[$0],Q5=V0.toLowerCase(),X5=V0[0].toUpperCase()+V0.slice(1);Ds(Q5,"on"+X5)}Ds(H$,"onAnimationEnd");Ds(W$,"onAnimationIteration");Ds(K$,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(J$,"onTransitionEnd");Lu("onMouseEnter",["mouseout","mouseover"]);Lu("onMouseLeave",["mouseout","mouseover"]);Lu("onPointerEnter",["pointerout","pointerover"]);Lu("onPointerLeave",["pointerout","pointerover"]);ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zd));function FC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q3(r,e,void 0,t),t.currentTarget=null}function Q$(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;FC(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;FC(i,a,u),o=l}}}if(yg)throw t=_b,yg=!1,_b=null,t}function ct(t,e){var n=e[Cb];n===void 0&&(n=e[Cb]=new Set);var r=t+"__bubble";n.has(r)||(X$(e,t,2,!1),n.add(r))}function F0(t,e,n){var r=0;e&&(r|=4),X$(n,t,r,e)}var am="_reactListening"+Math.random().toString(36).slice(2);function Uf(t){if(!t[am]){t[am]=!0,o$.forEach(function(n){n!=="selectionchange"&&(Z5.has(n)||F0(n,!1,t),F0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[am]||(e[am]=!0,F0("selectionchange",!1,e))}}function X$(t,e,n,r){switch(D$(e)){case 1:var i=h5;break;case 4:i=p5;break;default:i=Mx}n=i.bind(null,e,n,t),i=void 0,!vb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function U0(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ba(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}b$(function(){var u=o,c=Rx(n),d=[];e:{var f=Y$.get(t);if(f!==void 0){var g=Lx,y=t;switch(t){case"keypress":if(Hm(n)===0)break e;case"keydown":case"keyup":g=C5;break;case"focusin":y="focus",g=O0;break;case"focusout":y="blur",g=O0;break;case"beforeblur":case"afterblur":g=O0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=AC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=y5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=k5;break;case H$:case W$:case K$:g=w5;break;case J$:g=M5;break;case"scroll":g=m5;break;case"wheel":g=L5;break;case"copy":case"cut":case"paste":g=T5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=CC}var _=(e&4)!==0,v=!_&&t==="scroll",b=_?f!==null?f+"Capture":null:f;_=[];for(var T=u,x;T!==null;){x=T;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,b!==null&&(C=Mf(T,b),C!=null&&_.push(Bf(T,C,x)))),v)break;T=T.return}0<_.length&&(f=new g(f,y,null,n,c),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==gb&&(y=n.relatedTarget||n.fromElement)&&(ba(y)||y[vo]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?ba(y):null,y!==null&&(v=gl(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(_=AC,C="onMouseLeave",b="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(_=CC,C="onPointerLeave",b="onPointerEnter",T="pointer"),v=g==null?f:nu(g),x=y==null?f:nu(y),f=new _(C,T+"leave",g,n,c),f.target=v,f.relatedTarget=x,C=null,ba(c)===u&&(_=new _(b,T+"enter",y,n,c),_.target=x,_.relatedTarget=v,C=_),v=C,g&&y)t:{for(_=g,b=y,T=0,x=_;x;x=Ml(x))T++;for(x=0,C=b;C;C=Ml(C))x++;for(;0<T-x;)_=Ml(_),T--;for(;0<x-T;)b=Ml(b),x--;for(;T--;){if(_===b||b!==null&&_===b.alternate)break t;_=Ml(_),b=Ml(b)}_=null}else _=null;g!==null&&UC(d,f,g,_,!1),y!==null&&v!==null&&UC(d,v,y,_,!0)}}e:{if(f=u?nu(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var E=z5;else if(kC(f))if(B$)E=W5;else{E=G5;var A=q5}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=H5);if(E&&(E=E(t,u))){U$(d,E,n,c);break e}A&&A(t,f,u),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&db(f,"number",f.value)}switch(A=u?nu(u):window,t){case"focusin":(kC(A)||A.contentEditable==="true")&&(eu=A,Eb=u,hf=null);break;case"focusout":hf=Eb=eu=null;break;case"mousedown":xb=!0;break;case"contextmenu":case"mouseup":case"dragend":xb=!1,$C(d,n,c);break;case"selectionchange":if(Y5)break;case"keydown":case"keyup":$C(d,n,c)}var S;if(Vx)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Zl?V$(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&($$&&n.locale!=="ko"&&(Zl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Zl&&(S=L$()):(ss=c,Dx="value"in ss?ss.value:ss.textContent,Zl=!0)),A=Tg(u,P),0<A.length&&(P=new PC(P,t,null,n,c),d.push({event:P,listeners:A}),S?P.data=S:(S=F$(n),S!==null&&(P.data=S)))),(S=V5?F5(t,n):U5(t,n))&&(u=Tg(u,"onBeforeInput"),0<u.length&&(c=new PC("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=S))}Q$(d,e)})}function Bf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Mf(t,n),o!=null&&r.unshift(Bf(t,o,i)),o=Mf(t,e),o!=null&&r.push(Bf(t,o,i))),t=t.return}return r}function Ml(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UC(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Mf(n,o),l!=null&&s.unshift(Bf(n,l,a))):i||(l=Mf(n,o),l!=null&&s.push(Bf(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var eH=/\r\n?/g,tH=/\u0000|\uFFFD/g;function BC(t){return(typeof t=="string"?t:""+t).replace(eH,`
`).replace(tH,"")}function lm(t,e,n){if(e=BC(e),BC(t)!==e&&n)throw Error(re(425))}function Eg(){}var Sb=null,Ib=null;function Ab(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pb=typeof setTimeout=="function"?setTimeout:void 0,nH=typeof clearTimeout=="function"?clearTimeout:void 0,jC=typeof Promise=="function"?Promise:void 0,rH=typeof queueMicrotask=="function"?queueMicrotask:typeof jC<"u"?function(t){return jC.resolve(null).then(t).catch(iH)}:Pb;function iH(t){setTimeout(function(){throw t})}function B0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$f(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$f(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),Ei="__reactFiber$"+Nc,jf="__reactProps$"+Nc,vo="__reactContainer$"+Nc,Cb="__reactEvents$"+Nc,oH="__reactListeners$"+Nc,sH="__reactHandles$"+Nc;function ba(t){var e=t[Ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vo]||n[Ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zC(t);t!==null;){if(n=t[Ei])return n;t=zC(t)}return e}t=n,n=t.parentNode}return null}function op(t){return t=t[Ei]||t[vo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function nu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function bv(t){return t[jf]||null}var Rb=[],ru=-1;function Ls(t){return{current:t}}function pt(t){0>ru||(t.current=Rb[ru],Rb[ru]=null,ru--)}function it(t,e){ru++,Rb[ru]=t.current,t.current=e}var xs={},$n=Ls(xs),fr=Ls(!1),ja=xs;function $u(t,e){var n=t.type.contextTypes;if(!n)return xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hr(t){return t=t.childContextTypes,t!=null}function xg(){pt(fr),pt($n)}function qC(t,e,n){if($n.current!==xs)throw Error(re(168));it($n,e),it(fr,n)}function Z$(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,q3(t)||"Unknown",i));return St({},n,r)}function Sg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xs,ja=$n.current,it($n,t),it(fr,fr.current),!0}function GC(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=Z$(t,e,ja),r.__reactInternalMemoizedMergedChildContext=t,pt(fr),pt($n),it($n,t)):pt(fr),it(fr,n)}var eo=null,Tv=!1,j0=!1;function eV(t){eo===null?eo=[t]:eo.push(t)}function aH(t){Tv=!0,eV(t)}function $s(){if(!j0&&eo!==null){j0=!0;var t=0,e=Ke;try{var n=eo;for(Ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}eo=null,Tv=!1}catch(i){throw eo!==null&&(eo=eo.slice(t+1)),S$(Nx,$s),i}finally{Ke=e,j0=!1}}return null}var iu=[],ou=0,Ig=null,Ag=0,$r=[],Vr=0,za=null,to=1,no="";function sa(t,e){iu[ou++]=Ag,iu[ou++]=Ig,Ig=t,Ag=e}function tV(t,e,n){$r[Vr++]=to,$r[Vr++]=no,$r[Vr++]=za,za=t;var r=to;t=no;var i=32-ui(r)-1;r&=~(1<<i),n+=1;var o=32-ui(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,to=1<<32-ui(e)+i|n<<i|r,no=o+t}else to=1<<o|n<<i|r,no=t}function Ux(t){t.return!==null&&(sa(t,1),tV(t,1,0))}function Bx(t){for(;t===Ig;)Ig=iu[--ou],iu[ou]=null,Ag=iu[--ou],iu[ou]=null;for(;t===za;)za=$r[--Vr],$r[Vr]=null,no=$r[--Vr],$r[Vr]=null,to=$r[--Vr],$r[Vr]=null}var xr=null,Tr=null,gt=!1,si=null;function nV(t,e){var n=Ur(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function HC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xr=t,Tr=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xr=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=za!==null?{id:to,overflow:no}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ur(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xr=t,Tr=null,!0):!1;default:return!1}}function Nb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kb(t){if(gt){var e=Tr;if(e){var n=e;if(!HC(t,e)){if(Nb(t))throw Error(re(418));e=ms(n.nextSibling);var r=xr;e&&HC(t,e)?nV(r,n):(t.flags=t.flags&-4097|2,gt=!1,xr=t)}}else{if(Nb(t))throw Error(re(418));t.flags=t.flags&-4097|2,gt=!1,xr=t}}}function WC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xr=t}function um(t){if(t!==xr)return!1;if(!gt)return WC(t),gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ab(t.type,t.memoizedProps)),e&&(e=Tr)){if(Nb(t))throw rV(),Error(re(418));for(;e;)nV(t,e),e=ms(e.nextSibling)}if(WC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tr=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=xr?ms(t.stateNode.nextSibling):null;return!0}function rV(){for(var t=Tr;t;)t=ms(t.nextSibling)}function Vu(){Tr=xr=null,gt=!1}function jx(t){si===null?si=[t]:si.push(t)}var lH=Ro.ReactCurrentBatchConfig;function Id(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function cm(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function KC(t){var e=t._init;return e(t._payload)}function iV(t){function e(b,T){if(t){var x=b.deletions;x===null?(b.deletions=[T],b.flags|=16):x.push(T)}}function n(b,T){if(!t)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function r(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function i(b,T){return b=_s(b,T),b.index=0,b.sibling=null,b}function o(b,T,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<T?(b.flags|=2,T):x):(b.flags|=2,T)):(b.flags|=1048576,T)}function s(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,T,x,C){return T===null||T.tag!==6?(T=J0(x,b.mode,C),T.return=b,T):(T=i(T,x),T.return=b,T)}function l(b,T,x,C){var E=x.type;return E===Xl?c(b,T,x.props.children,C,x.key):T!==null&&(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xo&&KC(E)===T.type)?(C=i(T,x.props),C.ref=Id(b,T,x),C.return=b,C):(C=Zm(x.type,x.key,x.props,null,b.mode,C),C.ref=Id(b,T,x),C.return=b,C)}function u(b,T,x,C){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=Y0(x,b.mode,C),T.return=b,T):(T=i(T,x.children||[]),T.return=b,T)}function c(b,T,x,C,E){return T===null||T.tag!==7?(T=Da(x,b.mode,C,E),T.return=b,T):(T=i(T,x),T.return=b,T)}function d(b,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=J0(""+T,b.mode,x),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Zp:return x=Zm(T.type,T.key,T.props,null,b.mode,x),x.ref=Id(b,null,T),x.return=b,x;case Ql:return T=Y0(T,b.mode,x),T.return=b,T;case Xo:var C=T._init;return d(b,C(T._payload),x)}if(Qd(T)||bd(T))return T=Da(T,b.mode,x,null),T.return=b,T;cm(b,T)}return null}function f(b,T,x,C){var E=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(b,T,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zp:return x.key===E?l(b,T,x,C):null;case Ql:return x.key===E?u(b,T,x,C):null;case Xo:return E=x._init,f(b,T,E(x._payload),C)}if(Qd(x)||bd(x))return E!==null?null:c(b,T,x,C,null);cm(b,x)}return null}function g(b,T,x,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(x)||null,a(T,b,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Zp:return b=b.get(C.key===null?x:C.key)||null,l(T,b,C,E);case Ql:return b=b.get(C.key===null?x:C.key)||null,u(T,b,C,E);case Xo:var A=C._init;return g(b,T,x,A(C._payload),E)}if(Qd(C)||bd(C))return b=b.get(x)||null,c(T,b,C,E,null);cm(T,C)}return null}function y(b,T,x,C){for(var E=null,A=null,S=T,P=T=0,R=null;S!==null&&P<x.length;P++){S.index>P?(R=S,S=null):R=S.sibling;var k=f(b,S,x[P],C);if(k===null){S===null&&(S=R);break}t&&S&&k.alternate===null&&e(b,S),T=o(k,T,P),A===null?E=k:A.sibling=k,A=k,S=R}if(P===x.length)return n(b,S),gt&&sa(b,P),E;if(S===null){for(;P<x.length;P++)S=d(b,x[P],C),S!==null&&(T=o(S,T,P),A===null?E=S:A.sibling=S,A=S);return gt&&sa(b,P),E}for(S=r(b,S);P<x.length;P++)R=g(S,b,P,x[P],C),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?P:R.key),T=o(R,T,P),A===null?E=R:A.sibling=R,A=R);return t&&S.forEach(function(O){return e(b,O)}),gt&&sa(b,P),E}function _(b,T,x,C){var E=bd(x);if(typeof E!="function")throw Error(re(150));if(x=E.call(x),x==null)throw Error(re(151));for(var A=E=null,S=T,P=T=0,R=null,k=x.next();S!==null&&!k.done;P++,k=x.next()){S.index>P?(R=S,S=null):R=S.sibling;var O=f(b,S,k.value,C);if(O===null){S===null&&(S=R);break}t&&S&&O.alternate===null&&e(b,S),T=o(O,T,P),A===null?E=O:A.sibling=O,A=O,S=R}if(k.done)return n(b,S),gt&&sa(b,P),E;if(S===null){for(;!k.done;P++,k=x.next())k=d(b,k.value,C),k!==null&&(T=o(k,T,P),A===null?E=k:A.sibling=k,A=k);return gt&&sa(b,P),E}for(S=r(b,S);!k.done;P++,k=x.next())k=g(S,b,P,k.value,C),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?P:k.key),T=o(k,T,P),A===null?E=k:A.sibling=k,A=k);return t&&S.forEach(function(M){return e(b,M)}),gt&&sa(b,P),E}function v(b,T,x,C){if(typeof x=="object"&&x!==null&&x.type===Xl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Zp:e:{for(var E=x.key,A=T;A!==null;){if(A.key===E){if(E=x.type,E===Xl){if(A.tag===7){n(b,A.sibling),T=i(A,x.props.children),T.return=b,b=T;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xo&&KC(E)===A.type){n(b,A.sibling),T=i(A,x.props),T.ref=Id(b,A,x),T.return=b,b=T;break e}n(b,A);break}else e(b,A);A=A.sibling}x.type===Xl?(T=Da(x.props.children,b.mode,C,x.key),T.return=b,b=T):(C=Zm(x.type,x.key,x.props,null,b.mode,C),C.ref=Id(b,T,x),C.return=b,b=C)}return s(b);case Ql:e:{for(A=x.key;T!==null;){if(T.key===A)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(b,T.sibling),T=i(T,x.children||[]),T.return=b,b=T;break e}else{n(b,T);break}else e(b,T);T=T.sibling}T=Y0(x,b.mode,C),T.return=b,b=T}return s(b);case Xo:return A=x._init,v(b,T,A(x._payload),C)}if(Qd(x))return y(b,T,x,C);if(bd(x))return _(b,T,x,C);cm(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(b,T.sibling),T=i(T,x),T.return=b,b=T):(n(b,T),T=J0(x,b.mode,C),T.return=b,b=T),s(b)):n(b,T)}return v}var Fu=iV(!0),oV=iV(!1),Pg=Ls(null),Cg=null,su=null,zx=null;function qx(){zx=su=Cg=null}function Gx(t){var e=Pg.current;pt(Pg),t._currentValue=e}function Ob(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wu(t,e){Cg=t,zx=su=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function Wr(t){var e=t._currentValue;if(zx!==t)if(t={context:t,memoizedValue:e,next:null},su===null){if(Cg===null)throw Error(re(308));su=t,Cg.dependencies={lanes:0,firstContext:t}}else su=su.next=t;return e}var Ta=null;function Hx(t){Ta===null?Ta=[t]:Ta.push(t)}function sV(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hx(e)):(n.next=i.next,i.next=n),e.interleaved=n,_o(t,r)}function _o(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zo=!1;function Wx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function co(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_o(t,n)}return i=r.interleaved,i===null?(e.next=e,Hx(r)):(e.next=i.next,i.next=e),r.interleaved=e,_o(t,n)}function Wm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kx(t,n)}}function JC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rg(t,e,n,r){var i=t.updateQueue;Zo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,c=u=l=null,a=o;do{var f=a.lane,g=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(f=e,g=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=St({},d,f);break e;case 2:Zo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ga|=s,t.lanes=s,t.memoizedState=d}}function YC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var sp={},Mi=Ls(sp),zf=Ls(sp),qf=Ls(sp);function Ea(t){if(t===sp)throw Error(re(174));return t}function Kx(t,e){switch(it(qf,e),it(zf,t),it(Mi,sp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hb(e,t)}pt(Mi),it(Mi,e)}function Uu(){pt(Mi),pt(zf),pt(qf)}function lV(t){Ea(qf.current);var e=Ea(Mi.current),n=hb(e,t.type);e!==n&&(it(zf,t),it(Mi,n))}function Jx(t){zf.current===t&&(pt(Mi),pt(zf))}var bt=Ls(0);function Ng(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var z0=[];function Yx(){for(var t=0;t<z0.length;t++)z0[t]._workInProgressVersionPrimary=null;z0.length=0}var Km=Ro.ReactCurrentDispatcher,q0=Ro.ReactCurrentBatchConfig,qa=0,Et=null,Yt=null,an=null,kg=!1,pf=!1,Gf=0,uH=0;function An(){throw Error(re(321))}function Qx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pi(t[n],e[n]))return!1;return!0}function Xx(t,e,n,r,i,o){if(qa=o,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Km.current=t===null||t.memoizedState===null?hH:pH,t=n(r,i),pf){o=0;do{if(pf=!1,Gf=0,25<=o)throw Error(re(301));o+=1,an=Yt=null,e.updateQueue=null,Km.current=mH,t=n(r,i)}while(pf)}if(Km.current=Og,e=Yt!==null&&Yt.next!==null,qa=0,an=Yt=Et=null,kg=!1,e)throw Error(re(300));return t}function Zx(){var t=Gf!==0;return Gf=0,t}function bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Et.memoizedState=an=t:an=an.next=t,an}function Kr(){if(Yt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=an===null?Et.memoizedState:an.next;if(e!==null)an=e,Yt=t;else{if(t===null)throw Error(re(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},an===null?Et.memoizedState=an=t:an=an.next=t}return an}function Hf(t,e){return typeof e=="function"?e(t):e}function G0(t){var e=Kr(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=Yt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((qa&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Et.lanes|=c,Ga|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,pi(r,e.memoizedState)||(ar=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Et.lanes|=o,Ga|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function H0(t){var e=Kr(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);pi(o,e.memoizedState)||(ar=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function uV(){}function cV(t,e){var n=Et,r=Kr(),i=e(),o=!pi(r.memoizedState,i);if(o&&(r.memoizedState=i,ar=!0),r=r.queue,eS(hV.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||an!==null&&an.memoizedState.tag&1){if(n.flags|=2048,Wf(9,fV.bind(null,n,r,i,e),void 0,null),cn===null)throw Error(re(349));qa&30||dV(n,e,i)}return i}function dV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fV(t,e,n,r){e.value=n,e.getSnapshot=r,pV(e)&&mV(t)}function hV(t,e,n){return n(function(){pV(e)&&mV(t)})}function pV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pi(t,n)}catch{return!0}}function mV(t){var e=_o(t,1);e!==null&&ci(e,t,1,-1)}function QC(t){var e=bi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:t},e.queue=t,t=t.dispatch=fH.bind(null,Et,t),[e.memoizedState,t]}function Wf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gV(){return Kr().memoizedState}function Jm(t,e,n,r){var i=bi();Et.flags|=t,i.memoizedState=Wf(1|e,n,void 0,r===void 0?null:r)}function Ev(t,e,n,r){var i=Kr();r=r===void 0?null:r;var o=void 0;if(Yt!==null){var s=Yt.memoizedState;if(o=s.destroy,r!==null&&Qx(r,s.deps)){i.memoizedState=Wf(e,n,o,r);return}}Et.flags|=t,i.memoizedState=Wf(1|e,n,o,r)}function XC(t,e){return Jm(8390656,8,t,e)}function eS(t,e){return Ev(2048,8,t,e)}function yV(t,e){return Ev(4,2,t,e)}function vV(t,e){return Ev(4,4,t,e)}function _V(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wV(t,e,n){return n=n!=null?n.concat([t]):null,Ev(4,4,_V.bind(null,e,t),n)}function tS(){}function bV(t,e){var n=Kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TV(t,e){var n=Kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function EV(t,e,n){return qa&21?(pi(n,e)||(n=P$(),Et.lanes|=n,Ga|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=n)}function cH(t,e){var n=Ke;Ke=n!==0&&4>n?n:4,t(!0);var r=q0.transition;q0.transition={};try{t(!1),e()}finally{Ke=n,q0.transition=r}}function xV(){return Kr().memoizedState}function dH(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SV(t))IV(e,n);else if(n=sV(t,e,n,r),n!==null){var i=Hn();ci(n,t,r,i),AV(n,e,r)}}function fH(t,e,n){var r=vs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SV(t))IV(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,pi(a,s)){var l=e.interleaved;l===null?(i.next=i,Hx(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sV(t,e,i,r),n!==null&&(i=Hn(),ci(n,t,r,i),AV(n,e,r))}}function SV(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function IV(t,e){pf=kg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kx(t,n)}}var Og={readContext:Wr,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},hH={readContext:Wr,useCallback:function(t,e){return bi().memoizedState=[t,e===void 0?null:e],t},useContext:Wr,useEffect:XC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jm(4194308,4,_V.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jm(4,2,t,e)},useMemo:function(t,e){var n=bi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dH.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=bi();return t={current:t},e.memoizedState=t},useState:QC,useDebugValue:tS,useDeferredValue:function(t){return bi().memoizedState=t},useTransition:function(){var t=QC(!1),e=t[0];return t=cH.bind(null,t[1]),bi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,i=bi();if(gt){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),cn===null)throw Error(re(349));qa&30||dV(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,XC(hV.bind(null,r,o,t),[t]),r.flags|=2048,Wf(9,fV.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=bi(),e=cn.identifierPrefix;if(gt){var n=no,r=to;n=(r&~(1<<32-ui(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uH++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pH={readContext:Wr,useCallback:bV,useContext:Wr,useEffect:eS,useImperativeHandle:wV,useInsertionEffect:yV,useLayoutEffect:vV,useMemo:TV,useReducer:G0,useRef:gV,useState:function(){return G0(Hf)},useDebugValue:tS,useDeferredValue:function(t){var e=Kr();return EV(e,Yt.memoizedState,t)},useTransition:function(){var t=G0(Hf)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:uV,useSyncExternalStore:cV,useId:xV,unstable_isNewReconciler:!1},mH={readContext:Wr,useCallback:bV,useContext:Wr,useEffect:eS,useImperativeHandle:wV,useInsertionEffect:yV,useLayoutEffect:vV,useMemo:TV,useReducer:H0,useRef:gV,useState:function(){return H0(Hf)},useDebugValue:tS,useDeferredValue:function(t){var e=Kr();return Yt===null?e.memoizedState=t:EV(e,Yt.memoizedState,t)},useTransition:function(){var t=H0(Hf)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:uV,useSyncExternalStore:cV,useId:xV,unstable_isNewReconciler:!1};function ri(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xv={isMounted:function(t){return(t=t._reactInternals)?gl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=vs(t),o=co(r,i);o.payload=e,n!=null&&(o.callback=n),e=gs(t,o,i),e!==null&&(ci(e,t,i,r),Wm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=vs(t),o=co(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=gs(t,o,i),e!==null&&(ci(e,t,i,r),Wm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hn(),r=vs(t),i=co(n,r);i.tag=2,e!=null&&(i.callback=e),e=gs(t,i,r),e!==null&&(ci(e,t,r,n),Wm(e,t,r))}};function ZC(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ff(n,r)||!Ff(i,o):!0}function PV(t,e,n){var r=!1,i=xs,o=e.contextType;return typeof o=="object"&&o!==null?o=Wr(o):(i=hr(e)?ja:$n.current,r=e.contextTypes,o=(r=r!=null)?$u(t,i):xs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function eR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xv.enqueueReplaceState(e,e.state,null)}function Db(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wx(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Wr(o):(o=hr(e)?ja:$n.current,i.context=$u(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Mb(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xv.enqueueReplaceState(i,i.state,null),Rg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bu(t,e){try{var n="",r=e;do n+=z3(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function W0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gH=typeof WeakMap=="function"?WeakMap:Map;function CV(t,e,n){n=co(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dg||(Dg=!0,Hb=r),Lb(t,e)},n}function RV(t,e,n){n=co(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lb(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Lb(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function tR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gH;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RH.bind(null,t,e,n),e.then(t,t))}function nR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=co(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var yH=Ro.ReactCurrentOwner,ar=!1;function jn(t,e,n,r){e.child=t===null?oV(e,null,n,r):Fu(e,t.child,n,r)}function iR(t,e,n,r,i){n=n.render;var o=e.ref;return wu(e,i),r=Xx(t,e,n,r,o,i),n=Zx(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wo(t,e,i)):(gt&&n&&Ux(e),e.flags|=1,jn(t,e,r,i),e.child)}function oR(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!uS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,NV(t,e,o,r,i)):(t=Zm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ff,n(s,r)&&t.ref===e.ref)return wo(t,e,i)}return e.flags|=1,t=_s(o,r),t.ref=e.ref,t.return=e,e.child=t}function NV(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ff(o,r)&&t.ref===e.ref)if(ar=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,wo(t,e,i)}return $b(t,e,n,r,i)}function kV(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(lu,vr),vr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(lu,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,it(lu,vr),vr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,it(lu,vr),vr|=r;return jn(t,e,i,n),e.child}function OV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $b(t,e,n,r,i){var o=hr(n)?ja:$n.current;return o=$u(e,o),wu(e,i),n=Xx(t,e,n,r,o,i),r=Zx(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wo(t,e,i)):(gt&&r&&Ux(e),e.flags|=1,jn(t,e,n,i),e.child)}function sR(t,e,n,r,i){if(hr(n)){var o=!0;Sg(e)}else o=!1;if(wu(e,i),e.stateNode===null)Ym(t,e),PV(e,n,r),Db(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wr(u):(u=hr(n)?ja:$n.current,u=$u(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&eR(e,s,r,u),Zo=!1;var f=e.memoizedState;s.state=f,Rg(e,r,s,i),l=e.memoizedState,a!==r||f!==l||fr.current||Zo?(typeof c=="function"&&(Mb(e,n,c,r),l=e.memoizedState),(a=Zo||ZC(e,n,a,r,f,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,aV(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ri(e.type,a),s.props=u,d=e.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wr(l):(l=hr(n)?ja:$n.current,l=$u(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&eR(e,s,r,l),Zo=!1,f=e.memoizedState,s.state=f,Rg(e,r,s,i);var y=e.memoizedState;a!==d||f!==y||fr.current||Zo?(typeof g=="function"&&(Mb(e,n,g,r),y=e.memoizedState),(u=Zo||ZC(e,n,u,r,f,y,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Vb(t,e,n,r,o,i)}function Vb(t,e,n,r,i,o){OV(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&GC(e,n,!1),wo(t,e,o);r=e.stateNode,yH.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Fu(e,t.child,null,o),e.child=Fu(e,null,a,o)):jn(t,e,a,o),e.memoizedState=r.state,i&&GC(e,n,!0),e.child}function MV(t){var e=t.stateNode;e.pendingContext?qC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qC(t,e.context,!1),Kx(t,e.containerInfo)}function aR(t,e,n,r,i){return Vu(),jx(i),e.flags|=256,jn(t,e,n,r),e.child}var Fb={dehydrated:null,treeContext:null,retryLane:0};function Ub(t){return{baseLanes:t,cachePool:null,transitions:null}}function DV(t,e,n){var r=e.pendingProps,i=bt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),it(bt,i&1),t===null)return kb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Av(s,r,0,null),t=Da(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ub(n),e.memoizedState=Fb,t):nS(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return vH(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_s(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=_s(a,o):(o=Da(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Ub(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Fb,r}return o=t.child,t=o.sibling,r=_s(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nS(t,e){return e=Av({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dm(t,e,n,r){return r!==null&&jx(r),Fu(e,t.child,null,n),t=nS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vH(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=W0(Error(re(422))),dm(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Av({mode:"visible",children:r.children},i,0,null),o=Da(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Fu(e,t.child,null,s),e.child.memoizedState=Ub(s),e.memoizedState=Fb,o);if(!(e.mode&1))return dm(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(re(419)),r=W0(o,r,void 0),dm(t,e,s,r)}if(a=(s&t.childLanes)!==0,ar||a){if(r=cn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,_o(t,i),ci(r,t,i,-1))}return lS(),r=W0(Error(re(421))),dm(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NH.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Tr=ms(i.nextSibling),xr=e,gt=!0,si=null,t!==null&&($r[Vr++]=to,$r[Vr++]=no,$r[Vr++]=za,to=t.id,no=t.overflow,za=e),e=nS(e,r.children),e.flags|=4096,e)}function lR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ob(t.return,e,n)}function K0(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function LV(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(jn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lR(t,n,e);else if(t.tag===19)lR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ng(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),K0(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ng(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}K0(e,!0,n,null,o);break;case"together":K0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ym(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ga|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=_s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _H(t,e,n){switch(e.tag){case 3:MV(e),Vu();break;case 5:lV(e);break;case 1:hr(e.type)&&Sg(e);break;case 4:Kx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;it(Pg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?DV(t,e,n):(it(bt,bt.current&1),t=wo(t,e,n),t!==null?t.sibling:null);it(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return LV(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,kV(t,e,n)}return wo(t,e,n)}var $V,Bb,VV,FV;$V=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bb=function(){};VV=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ea(Mi.current);var o=null;switch(n){case"input":i=ub(t,i),r=ub(t,r),o=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),o=[];break;case"textarea":i=fb(t,i),r=fb(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eg)}pb(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kf.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ct("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};FV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ad(t,e){if(!gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wH(t,e,n){var r=e.pendingProps;switch(Bx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(e),null;case 1:return hr(e.type)&&xg(),Pn(e),null;case 3:return r=e.stateNode,Uu(),pt(fr),pt($n),Yx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(um(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,si!==null&&(Jb(si),si=null))),Bb(t,e),Pn(e),null;case 5:Jx(e);var i=Ea(qf.current);if(n=e.type,t!==null&&e.stateNode!=null)VV(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Pn(e),null}if(t=Ea(Mi.current),um(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ei]=e,r[jf]=o,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(i=0;i<Zd.length;i++)ct(Zd[i],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":yC(r,o),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ct("invalid",r);break;case"textarea":_C(r,o),ct("invalid",r)}pb(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&lm(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&lm(r.textContent,a,t),i=["children",""+a]):kf.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ct("scroll",r)}switch(n){case"input":em(r),vC(r,o,!0);break;case"textarea":em(r),wC(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Eg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=h$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ei]=e,t[jf]=r,$V(t,e,!1,!1),e.stateNode=t;e:{switch(s=mb(n,r),n){case"dialog":ct("cancel",t),ct("close",t),i=r;break;case"iframe":case"object":case"embed":ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zd.length;i++)ct(Zd[i],t);i=r;break;case"source":ct("error",t),i=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),i=r;break;case"details":ct("toggle",t),i=r;break;case"input":yC(t,r),i=ub(t,r),ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),ct("invalid",t);break;case"textarea":_C(t,r),i=fb(t,r),ct("invalid",t);break;default:i=r}pb(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?g$(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p$(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Of(t,l):typeof l=="number"&&Of(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kf.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ct("scroll",t):l!=null&&Ix(t,o,l,s))}switch(n){case"input":em(t),vC(t,r,!1);break;case"textarea":em(t),wC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?gu(t,!!r.multiple,o,!1):r.defaultValue!=null&&gu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Eg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pn(e),null;case 6:if(t&&e.stateNode!=null)FV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=Ea(qf.current),Ea(Mi.current),um(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ei]=e,(o=r.nodeValue!==n)&&(t=xr,t!==null))switch(t.tag){case 3:lm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ei]=e,e.stateNode=r}return Pn(e),null;case 13:if(pt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gt&&Tr!==null&&e.mode&1&&!(e.flags&128))rV(),Vu(),e.flags|=98560,o=!1;else if(o=um(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(re(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(re(317));o[Ei]=e}else Vu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pn(e),o=!1}else si!==null&&(Jb(si),si=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Qt===0&&(Qt=3):lS())),e.updateQueue!==null&&(e.flags|=4),Pn(e),null);case 4:return Uu(),Bb(t,e),t===null&&Uf(e.stateNode.containerInfo),Pn(e),null;case 10:return Gx(e.type._context),Pn(e),null;case 17:return hr(e.type)&&xg(),Pn(e),null;case 19:if(pt(bt),o=e.memoizedState,o===null)return Pn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ad(o,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ng(t),s!==null){for(e.flags|=128,Ad(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(bt,bt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Lt()>ju&&(e.flags|=128,r=!0,Ad(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ng(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ad(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!gt)return Pn(e),null}else 2*Lt()-o.renderingStartTime>ju&&n!==1073741824&&(e.flags|=128,r=!0,Ad(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Lt(),e.sibling=null,n=bt.current,it(bt,r?n&1|2:n&1),e):(Pn(e),null);case 22:case 23:return aS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vr&1073741824&&(Pn(e),e.subtreeFlags&6&&(e.flags|=8192)):Pn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function bH(t,e){switch(Bx(e),e.tag){case 1:return hr(e.type)&&xg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Uu(),pt(fr),pt($n),Yx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jx(e),null;case 13:if(pt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Vu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(bt),null;case 4:return Uu(),null;case 10:return Gx(e.type._context),null;case 22:case 23:return aS(),null;case 24:return null;default:return null}}var fm=!1,Nn=!1,TH=typeof WeakSet=="function"?WeakSet:Set,pe=null;function au(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pt(t,e,r)}else n.current=null}function jb(t,e,n){try{n()}catch(r){Pt(t,e,r)}}var uR=!1;function EH(t,e){if(Sb=wg,t=q$(),Fx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=s),f===o&&++c===r&&(l=s),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ib={focusedElem:t,selectionRange:n},wg=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,v=y.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?_:ri(e.type,_),v);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(C){Pt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return y=uR,uR=!1,y}function mf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&jb(e,n,o)}i=i.next}while(i!==r)}}function Sv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UV(t){var e=t.alternate;e!==null&&(t.alternate=null,UV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ei],delete e[jf],delete e[Cb],delete e[oH],delete e[sH])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BV(t){return t.tag===5||t.tag===3||t.tag===4}function cR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eg));else if(r!==4&&(t=t.child,t!==null))for(qb(t,e,n),t=t.sibling;t!==null;)qb(t,e,n),t=t.sibling}function Gb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Gb(t,e,n),t=t.sibling;t!==null;)Gb(t,e,n),t=t.sibling}var gn=null,ii=!1;function Ho(t,e,n){for(n=n.child;n!==null;)jV(t,e,n),n=n.sibling}function jV(t,e,n){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(yv,n)}catch{}switch(n.tag){case 5:Nn||au(n,e);case 6:var r=gn,i=ii;gn=null,Ho(t,e,n),gn=r,ii=i,gn!==null&&(ii?(t=gn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gn.removeChild(n.stateNode));break;case 18:gn!==null&&(ii?(t=gn,n=n.stateNode,t.nodeType===8?B0(t.parentNode,n):t.nodeType===1&&B0(t,n),$f(t)):B0(gn,n.stateNode));break;case 4:r=gn,i=ii,gn=n.stateNode.containerInfo,ii=!0,Ho(t,e,n),gn=r,ii=i;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&jb(n,e,s),i=i.next}while(i!==r)}Ho(t,e,n);break;case 1:if(!Nn&&(au(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pt(n,e,a)}Ho(t,e,n);break;case 21:Ho(t,e,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,Ho(t,e,n),Nn=r):Ho(t,e,n);break;default:Ho(t,e,n)}}function dR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TH),e.forEach(function(r){var i=kH.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ti(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:gn=a.stateNode,ii=!1;break e;case 3:gn=a.stateNode.containerInfo,ii=!0;break e;case 4:gn=a.stateNode.containerInfo,ii=!0;break e}a=a.return}if(gn===null)throw Error(re(160));jV(o,s,i),gn=null,ii=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Pt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zV(e,t),e=e.sibling}function zV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ti(e,t),wi(t),r&4){try{mf(3,t,t.return),Sv(3,t)}catch(_){Pt(t,t.return,_)}try{mf(5,t,t.return)}catch(_){Pt(t,t.return,_)}}break;case 1:ti(e,t),wi(t),r&512&&n!==null&&au(n,n.return);break;case 5:if(ti(e,t),wi(t),r&512&&n!==null&&au(n,n.return),t.flags&32){var i=t.stateNode;try{Of(i,"")}catch(_){Pt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&d$(i,o),mb(a,s);var u=mb(a,o);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?g$(i,d):c==="dangerouslySetInnerHTML"?p$(i,d):c==="children"?Of(i,d):Ix(i,c,d,u)}switch(a){case"input":cb(i,o);break;case"textarea":f$(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?gu(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?gu(i,!!o.multiple,o.defaultValue,!0):gu(i,!!o.multiple,o.multiple?[]:"",!1))}i[jf]=o}catch(_){Pt(t,t.return,_)}}break;case 6:if(ti(e,t),wi(t),r&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(_){Pt(t,t.return,_)}}break;case 3:if(ti(e,t),wi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$f(e.containerInfo)}catch(_){Pt(t,t.return,_)}break;case 4:ti(e,t),wi(t);break;case 13:ti(e,t),wi(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(oS=Lt())),r&4&&dR(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Nn=(u=Nn)||c,ti(e,t),Nn=u):ti(e,t),wi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(pe=t,c=t.child;c!==null;){for(d=pe=c;pe!==null;){switch(f=pe,g=f.child,f.tag){case 0:case 11:case 14:case 15:mf(4,f,f.return);break;case 1:au(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Pt(r,n,_)}}break;case 5:au(f,f.return);break;case 22:if(f.memoizedState!==null){hR(d);continue}}g!==null?(g.return=f,pe=g):hR(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=m$("display",s))}catch(_){Pt(t,t.return,_)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){Pt(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ti(e,t),wi(t),r&4&&dR(t);break;case 21:break;default:ti(e,t),wi(t)}}function wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BV(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Of(i,""),r.flags&=-33);var o=cR(t);Gb(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=cR(t);qb(t,a,s);break;default:throw Error(re(161))}}catch(l){Pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xH(t,e,n){pe=t,qV(t)}function qV(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var i=pe,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||fm;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Nn;a=fm;var u=Nn;if(fm=s,(Nn=l)&&!u)for(pe=i;pe!==null;)s=pe,l=s.child,s.tag===22&&s.memoizedState!==null?pR(i):l!==null?(l.return=s,pe=l):pR(i);for(;o!==null;)pe=o,qV(o),o=o.sibling;pe=i,fm=a,Nn=u}fR(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,pe=o):fR(t)}}function fR(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nn||Sv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ri(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&YC(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}YC(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&$f(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Nn||e.flags&512&&zb(e)}catch(f){Pt(e,e.return,f)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function hR(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function pR(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sv(4,e)}catch(l){Pt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pt(e,i,l)}}var o=e.return;try{zb(e)}catch(l){Pt(e,o,l)}break;case 5:var s=e.return;try{zb(e)}catch(l){Pt(e,s,l)}}}catch(l){Pt(e,e.return,l)}if(e===t){pe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,pe=a;break}pe=e.return}}var SH=Math.ceil,Mg=Ro.ReactCurrentDispatcher,rS=Ro.ReactCurrentOwner,zr=Ro.ReactCurrentBatchConfig,Ve=0,cn=null,Gt=null,wn=0,vr=0,lu=Ls(0),Qt=0,Kf=null,Ga=0,Iv=0,iS=0,gf=null,or=null,oS=0,ju=1/0,Qi=null,Dg=!1,Hb=null,ys=null,hm=!1,as=null,Lg=0,yf=0,Wb=null,Qm=-1,Xm=0;function Hn(){return Ve&6?Lt():Qm!==-1?Qm:Qm=Lt()}function vs(t){return t.mode&1?Ve&2&&wn!==0?wn&-wn:lH.transition!==null?(Xm===0&&(Xm=P$()),Xm):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:D$(t.type)),t):1}function ci(t,e,n,r){if(50<yf)throw yf=0,Wb=null,Error(re(185));rp(t,n,r),(!(Ve&2)||t!==cn)&&(t===cn&&(!(Ve&2)&&(Iv|=n),Qt===4&&ns(t,wn)),pr(t,r),n===1&&Ve===0&&!(e.mode&1)&&(ju=Lt()+500,Tv&&$s()))}function pr(t,e){var n=t.callbackNode;l5(t,e);var r=_g(t,t===cn?wn:0);if(r===0)n!==null&&EC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&EC(n),e===1)t.tag===0?aH(mR.bind(null,t)):eV(mR.bind(null,t)),rH(function(){!(Ve&6)&&$s()}),n=null;else{switch(C$(r)){case 1:n=Nx;break;case 4:n=I$;break;case 16:n=vg;break;case 536870912:n=A$;break;default:n=vg}n=XV(n,GV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GV(t,e){if(Qm=-1,Xm=0,Ve&6)throw Error(re(327));var n=t.callbackNode;if(bu()&&t.callbackNode!==n)return null;var r=_g(t,t===cn?wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$g(t,r);else{e=r;var i=Ve;Ve|=2;var o=WV();(cn!==t||wn!==e)&&(Qi=null,ju=Lt()+500,Ma(t,e));do try{PH();break}catch(a){HV(t,a)}while(!0);qx(),Mg.current=o,Ve=i,Gt!==null?e=0:(cn=null,wn=0,e=Qt)}if(e!==0){if(e===2&&(i=wb(t),i!==0&&(r=i,e=Kb(t,i))),e===1)throw n=Kf,Ma(t,0),ns(t,r),pr(t,Lt()),n;if(e===6)ns(t,r);else{if(i=t.current.alternate,!(r&30)&&!IH(i)&&(e=$g(t,r),e===2&&(o=wb(t),o!==0&&(r=o,e=Kb(t,o))),e===1))throw n=Kf,Ma(t,0),ns(t,r),pr(t,Lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:aa(t,or,Qi);break;case 3:if(ns(t,r),(r&130023424)===r&&(e=oS+500-Lt(),10<e)){if(_g(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pb(aa.bind(null,t,or,Qi),e);break}aa(t,or,Qi);break;case 4:if(ns(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ui(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SH(r/1960))-r,10<r){t.timeoutHandle=Pb(aa.bind(null,t,or,Qi),r);break}aa(t,or,Qi);break;case 5:aa(t,or,Qi);break;default:throw Error(re(329))}}}return pr(t,Lt()),t.callbackNode===n?GV.bind(null,t):null}function Kb(t,e){var n=gf;return t.current.memoizedState.isDehydrated&&(Ma(t,e).flags|=256),t=$g(t,e),t!==2&&(e=or,or=n,e!==null&&Jb(e)),t}function Jb(t){or===null?or=t:or.push.apply(or,t)}function IH(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!pi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~iS,e&=~Iv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ui(e),r=1<<n;t[n]=-1,e&=~r}}function mR(t){if(Ve&6)throw Error(re(327));bu();var e=_g(t,0);if(!(e&1))return pr(t,Lt()),null;var n=$g(t,e);if(t.tag!==0&&n===2){var r=wb(t);r!==0&&(e=r,n=Kb(t,r))}if(n===1)throw n=Kf,Ma(t,0),ns(t,e),pr(t,Lt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,or,Qi),pr(t,Lt()),null}function sS(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(ju=Lt()+500,Tv&&$s())}}function Ha(t){as!==null&&as.tag===0&&!(Ve&6)&&bu();var e=Ve;Ve|=1;var n=zr.transition,r=Ke;try{if(zr.transition=null,Ke=1,t)return t()}finally{Ke=r,zr.transition=n,Ve=e,!(Ve&6)&&$s()}}function aS(){vr=lu.current,pt(lu)}function Ma(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nH(n)),Gt!==null)for(n=Gt.return;n!==null;){var r=n;switch(Bx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xg();break;case 3:Uu(),pt(fr),pt($n),Yx();break;case 5:Jx(r);break;case 4:Uu();break;case 13:pt(bt);break;case 19:pt(bt);break;case 10:Gx(r.type._context);break;case 22:case 23:aS()}n=n.return}if(cn=t,Gt=t=_s(t.current,null),wn=vr=e,Qt=0,Kf=null,iS=Iv=Ga=0,or=gf=null,Ta!==null){for(e=0;e<Ta.length;e++)if(n=Ta[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ta=null}return t}function HV(t,e){do{var n=Gt;try{if(qx(),Km.current=Og,kg){for(var r=Et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kg=!1}if(qa=0,an=Yt=Et=null,pf=!1,Gf=0,rS.current=null,n===null||n.return===null){Qt=1,Kf=e,Gt=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=nR(s);if(g!==null){g.flags&=-257,rR(g,s,a,o,e),g.mode&1&&tR(o,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){tR(o,u,e),lS();break e}l=Error(re(426))}}else if(gt&&a.mode&1){var v=nR(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),rR(v,s,a,o,e),jx(Bu(l,a));break e}}o=l=Bu(l,a),Qt!==4&&(Qt=2),gf===null?gf=[o]:gf.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=CV(o,l,e);JC(o,b);break e;case 1:a=l;var T=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ys===null||!ys.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=RV(o,a,e);JC(o,C);break e}}o=o.return}while(o!==null)}JV(n)}catch(E){e=E,Gt===n&&n!==null&&(Gt=n=n.return);continue}break}while(!0)}function WV(){var t=Mg.current;return Mg.current=Og,t===null?Og:t}function lS(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),cn===null||!(Ga&268435455)&&!(Iv&268435455)||ns(cn,wn)}function $g(t,e){var n=Ve;Ve|=2;var r=WV();(cn!==t||wn!==e)&&(Qi=null,Ma(t,e));do try{AH();break}catch(i){HV(t,i)}while(!0);if(qx(),Ve=n,Mg.current=r,Gt!==null)throw Error(re(261));return cn=null,wn=0,Qt}function AH(){for(;Gt!==null;)KV(Gt)}function PH(){for(;Gt!==null&&!Z3();)KV(Gt)}function KV(t){var e=QV(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?JV(t):Gt=e,rS.current=null}function JV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bH(n,e),n!==null){n.flags&=32767,Gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Gt=null;return}}else if(n=wH(n,e,vr),n!==null){Gt=n;return}if(e=e.sibling,e!==null){Gt=e;return}Gt=e=t}while(e!==null);Qt===0&&(Qt=5)}function aa(t,e,n){var r=Ke,i=zr.transition;try{zr.transition=null,Ke=1,CH(t,e,n,r)}finally{zr.transition=i,Ke=r}return null}function CH(t,e,n,r){do bu();while(as!==null);if(Ve&6)throw Error(re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(u5(t,o),t===cn&&(Gt=cn=null,wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hm||(hm=!0,XV(vg,function(){return bu(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=zr.transition,zr.transition=null;var s=Ke;Ke=1;var a=Ve;Ve|=4,rS.current=null,EH(t,n),zV(n,t),J5(Ib),wg=!!Sb,Ib=Sb=null,t.current=n,xH(n),e5(),Ve=a,Ke=s,zr.transition=o}else t.current=n;if(hm&&(hm=!1,as=t,Lg=i),o=t.pendingLanes,o===0&&(ys=null),r5(n.stateNode),pr(t,Lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dg)throw Dg=!1,t=Hb,Hb=null,t;return Lg&1&&t.tag!==0&&bu(),o=t.pendingLanes,o&1?t===Wb?yf++:(yf=0,Wb=t):yf=0,$s(),null}function bu(){if(as!==null){var t=C$(Lg),e=zr.transition,n=Ke;try{if(zr.transition=null,Ke=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,Lg=0,Ve&6)throw Error(re(331));var i=Ve;for(Ve|=4,pe=t.current;pe!==null;){var o=pe,s=o.child;if(pe.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(pe=u;pe!==null;){var c=pe;switch(c.tag){case 0:case 11:case 15:mf(8,c,o)}var d=c.child;if(d!==null)d.return=c,pe=d;else for(;pe!==null;){c=pe;var f=c.sibling,g=c.return;if(UV(c),c===u){pe=null;break}if(f!==null){f.return=g,pe=f;break}pe=g}}}var y=o.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}pe=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,pe=s;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mf(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,pe=b;break e}pe=o.return}}var T=t.current;for(pe=T;pe!==null;){s=pe;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,pe=x;else e:for(s=T;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sv(9,a)}}catch(E){Pt(a,a.return,E)}if(a===s){pe=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,pe=C;break e}pe=a.return}}if(Ve=i,$s(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(yv,t)}catch{}r=!0}return r}finally{Ke=n,zr.transition=e}}return!1}function gR(t,e,n){e=Bu(n,e),e=CV(t,e,1),t=gs(t,e,1),e=Hn(),t!==null&&(rp(t,1,e),pr(t,e))}function Pt(t,e,n){if(t.tag===3)gR(t,t,n);else for(;e!==null;){if(e.tag===3){gR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=Bu(n,t),t=RV(e,t,1),e=gs(e,t,1),t=Hn(),e!==null&&(rp(e,1,t),pr(e,t));break}}e=e.return}}function RH(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hn(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(wn&n)===n&&(Qt===4||Qt===3&&(wn&130023424)===wn&&500>Lt()-oS?Ma(t,0):iS|=n),pr(t,e)}function YV(t,e){e===0&&(t.mode&1?(e=rm,rm<<=1,!(rm&130023424)&&(rm=4194304)):e=1);var n=Hn();t=_o(t,e),t!==null&&(rp(t,e,n),pr(t,n))}function NH(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YV(t,n)}function kH(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),YV(t,n)}var QV;QV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fr.current)ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ar=!1,_H(t,e,n);ar=!!(t.flags&131072)}else ar=!1,gt&&e.flags&1048576&&tV(e,Ag,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ym(t,e),t=e.pendingProps;var i=$u(e,$n.current);wu(e,n),i=Xx(null,e,r,t,i,n);var o=Zx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hr(r)?(o=!0,Sg(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wx(e),i.updater=xv,e.stateNode=i,i._reactInternals=e,Db(e,r,t,n),e=Vb(null,e,r,!0,o,n)):(e.tag=0,gt&&o&&Ux(e),jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ym(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MH(r),t=ri(r,t),i){case 0:e=$b(null,e,r,t,n);break e;case 1:e=sR(null,e,r,t,n);break e;case 11:e=iR(null,e,r,t,n);break e;case 14:e=oR(null,e,r,ri(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),$b(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),sR(t,e,r,i,n);case 3:e:{if(MV(e),t===null)throw Error(re(387));r=e.pendingProps,o=e.memoizedState,i=o.element,aV(t,e),Rg(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Bu(Error(re(423)),e),e=aR(t,e,r,n,i);break e}else if(r!==i){i=Bu(Error(re(424)),e),e=aR(t,e,r,n,i);break e}else for(Tr=ms(e.stateNode.containerInfo.firstChild),xr=e,gt=!0,si=null,n=oV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vu(),r===i){e=wo(t,e,n);break e}jn(t,e,r,n)}e=e.child}return e;case 5:return lV(e),t===null&&kb(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Ab(r,i)?s=null:o!==null&&Ab(r,o)&&(e.flags|=32),OV(t,e),jn(t,e,s,n),e.child;case 6:return t===null&&kb(e),null;case 13:return DV(t,e,n);case 4:return Kx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fu(e,null,r,n):jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),iR(t,e,r,i,n);case 7:return jn(t,e,e.pendingProps,n),e.child;case 8:return jn(t,e,e.pendingProps.children,n),e.child;case 12:return jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,it(Pg,r._currentValue),r._currentValue=s,o!==null)if(pi(o.value,s)){if(o.children===i.children&&!fr.current){e=wo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=co(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ob(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(re(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ob(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wu(e,n),i=Wr(i),r=r(i),e.flags|=1,jn(t,e,r,n),e.child;case 14:return r=e.type,i=ri(r,e.pendingProps),i=ri(r.type,i),oR(t,e,r,i,n);case 15:return NV(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ri(r,i),Ym(t,e),e.tag=1,hr(r)?(t=!0,Sg(e)):t=!1,wu(e,n),PV(e,r,i),Db(e,r,i,n),Vb(null,e,r,!0,t,n);case 19:return LV(t,e,n);case 22:return kV(t,e,n)}throw Error(re(156,e.tag))};function XV(t,e){return S$(t,e)}function OH(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,e,n,r){return new OH(t,e,n,r)}function uS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MH(t){if(typeof t=="function")return uS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Px)return 11;if(t===Cx)return 14}return 2}function _s(t,e){var n=t.alternate;return n===null?(n=Ur(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zm(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")uS(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Xl:return Da(n.children,i,o,e);case Ax:s=8,i|=8;break;case ob:return t=Ur(12,n,e,i|2),t.elementType=ob,t.lanes=o,t;case sb:return t=Ur(13,n,e,i),t.elementType=sb,t.lanes=o,t;case ab:return t=Ur(19,n,e,i),t.elementType=ab,t.lanes=o,t;case l$:return Av(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case s$:s=10;break e;case a$:s=9;break e;case Px:s=11;break e;case Cx:s=14;break e;case Xo:s=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Ur(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Da(t,e,n,r){return t=Ur(7,t,r,e),t.lanes=n,t}function Av(t,e,n,r){return t=Ur(22,t,r,e),t.elementType=l$,t.lanes=n,t.stateNode={isHidden:!1},t}function J0(t,e,n){return t=Ur(6,t,null,e),t.lanes=n,t}function Y0(t,e,n){return e=Ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DH(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=R0(0),this.expirationTimes=R0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=R0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cS(t,e,n,r,i,o,s,a,l){return t=new DH(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ur(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wx(o),t}function LH(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZV(t){if(!t)return xs;t=t._reactInternals;e:{if(gl(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(hr(n))return Z$(t,n,e)}return e}function e2(t,e,n,r,i,o,s,a,l){return t=cS(n,r,!0,t,i,o,s,a,l),t.context=ZV(null),n=t.current,r=Hn(),i=vs(n),o=co(r,i),o.callback=e??null,gs(n,o,i),t.current.lanes=i,rp(t,i,r),pr(t,r),t}function Pv(t,e,n,r){var i=e.current,o=Hn(),s=vs(i);return n=ZV(n),e.context===null?e.context=n:e.pendingContext=n,e=co(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(i,e,s),t!==null&&(ci(t,i,s,o),Wm(t,i,s)),s}function Vg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dS(t,e){yR(t,e),(t=t.alternate)&&yR(t,e)}function $H(){return null}var t2=typeof reportError=="function"?reportError:function(t){console.error(t)};function fS(t){this._internalRoot=t}Cv.prototype.render=fS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Pv(t,e,null,null)};Cv.prototype.unmount=fS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ha(function(){Pv(null,t,null,null)}),e[vo]=null}};function Cv(t){this._internalRoot=t}Cv.prototype.unstable_scheduleHydration=function(t){if(t){var e=k$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&M$(t)}};function hS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vR(){}function VH(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Vg(s);o.call(u)}}var s=e2(e,r,t,0,null,!1,!1,"",vR);return t._reactRootContainer=s,t[vo]=s.current,Uf(t.nodeType===8?t.parentNode:t),Ha(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Vg(l);a.call(u)}}var l=cS(t,0,!1,null,null,!1,!1,"",vR);return t._reactRootContainer=l,t[vo]=l.current,Uf(t.nodeType===8?t.parentNode:t),Ha(function(){Pv(e,l,n,r)}),l}function Nv(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Vg(s);a.call(l)}}Pv(e,s,t,i)}else s=VH(n,e,t,i,r);return Vg(s)}R$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xd(e.pendingLanes);n!==0&&(kx(e,n|1),pr(e,Lt()),!(Ve&6)&&(ju=Lt()+500,$s()))}break;case 13:Ha(function(){var r=_o(t,1);if(r!==null){var i=Hn();ci(r,t,1,i)}}),dS(t,1)}};Ox=function(t){if(t.tag===13){var e=_o(t,134217728);if(e!==null){var n=Hn();ci(e,t,134217728,n)}dS(t,134217728)}};N$=function(t){if(t.tag===13){var e=vs(t),n=_o(t,e);if(n!==null){var r=Hn();ci(n,t,e,r)}dS(t,e)}};k$=function(){return Ke};O$=function(t,e){var n=Ke;try{return Ke=t,e()}finally{Ke=n}};yb=function(t,e,n){switch(e){case"input":if(cb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bv(r);if(!i)throw Error(re(90));c$(r),cb(r,i)}}}break;case"textarea":f$(t,n);break;case"select":e=n.value,e!=null&&gu(t,!!n.multiple,e,!1)}};_$=sS;w$=Ha;var FH={usingClientEntryPoint:!1,Events:[op,nu,bv,y$,v$,sS]},Pd={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UH={bundleType:Pd.bundleType,version:Pd.version,rendererPackageName:Pd.rendererPackageName,rendererConfig:Pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E$(t),t===null?null:t.stateNode},findFiberByHostInstance:Pd.findFiberByHostInstance||$H,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pm.isDisabled&&pm.supportsFiber)try{yv=pm.inject(UH),Oi=pm}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FH;Cr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hS(e))throw Error(re(200));return LH(t,e,null,n)};Cr.createRoot=function(t,e){if(!hS(t))throw Error(re(299));var n=!1,r="",i=t2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cS(t,1,!1,null,null,n,!1,r,i),t[vo]=e.current,Uf(t.nodeType===8?t.parentNode:t),new fS(e)};Cr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=E$(e),t=t===null?null:t.stateNode,t};Cr.flushSync=function(t){return Ha(t)};Cr.hydrate=function(t,e,n){if(!Rv(e))throw Error(re(200));return Nv(null,t,e,!0,n)};Cr.hydrateRoot=function(t,e,n){if(!hS(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=t2;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=e2(e,null,t,1,n??null,i,!1,o,s),t[vo]=e.current,Uf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cv(e)};Cr.render=function(t,e,n){if(!Rv(e))throw Error(re(200));return Nv(null,t,e,!1,n)};Cr.unmountComponentAtNode=function(t){if(!Rv(t))throw Error(re(40));return t._reactRootContainer?(Ha(function(){Nv(null,null,t,!1,function(){t._reactRootContainer=null,t[vo]=null})}),!0):!1};Cr.unstable_batchedUpdates=sS;Cr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rv(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Nv(t,e,n,!1,r)};Cr.version="18.3.1-next-f1338f8080-20240426";function n2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n2)}catch(t){console.error(t)}}n2(),n$.exports=Cr;var BH=n$.exports,_R=BH;rb.createRoot=_R.createRoot,rb.hydrateRoot=_R.hydrateRoot;var wR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},i2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=o>>2,d=(o&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,s||(f=64)),r.push(n[c],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||d==null)throw new zH;const f=o<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qH=function(t){const e=r2(t);return i2.encodeByteArray(e,!0)},Fg=function(t){return qH(t).replace(/\./g,"")},o2=function(t){try{return i2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ug(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!GH(n)||(t[n]=Ug(t[n],e[n]));return t}function GH(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH=()=>s2().__FIREBASE_DEFAULTS__,WH=()=>{if(typeof process>"u"||typeof wR>"u")return;const t=wR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o2(t[1]);return e&&JSON.parse(e)},pS=()=>{try{return HH()||WH()||KH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a2=()=>{var t;return(t=pS())===null||t===void 0?void 0:t.config},JH=t=>{var e;return(e=pS())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fg(JSON.stringify(n)),Fg(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function mS(){var t;const e=(t=pS())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZH(){return typeof window<"u"||l2()}function l2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function e6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c2(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d2(){return!mS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wa(){try{return typeof indexedDB=="object"}catch{return!1}}function t6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function n6(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="FirebaseError";class Ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=r6,Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}}class Gi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?i6(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ln(i,a,r)}}function i6(t,e){return t.replace(o6,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const o6=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(TR(o)&&TR(s)){if(!Jf(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function TR(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ef(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function f2(t,e){const n=new a6(t,e);return n.subscribe.bind(n)}class a6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l6(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Q0),i.error===void 0&&(i.error=Q0),i.complete===void 0&&(i.complete=Q0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class Vn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d6(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c6(t){return t===la?void 0:t}function d6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new u6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=[];var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const p2={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},f6=Re.INFO,h6={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},p6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=h6[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=f6,this._logHandler=p6,this._userLogHandler=null,yS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}function m6(t){yS.forEach(e=>{e.setLogLevel(t)})}function g6(t,e){for(const n of yS){let r=null;e&&e.level&&(r=p2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const a=s.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");o>=(r??i.logLevel)&&t({level:Re[o].toLowerCase(),message:a,args:s,type:i.name})}}}const y6=(t,e)=>e.some(n=>t instanceof n);let ER,xR;function v6(){return ER||(ER=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _6(){return xR||(xR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m2=new WeakMap,Yb=new WeakMap,g2=new WeakMap,X0=new WeakMap,vS=new WeakMap;function w6(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(fo(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&m2.set(n,t)}).catch(()=>{}),vS.set(e,t),e}function b6(t){if(Yb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Yb.set(t,e)}let Qb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T6(t){Qb=t(Qb)}function E6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Z0(this),e,...n);return g2.set(r,e.sort?e.sort():[e]),fo(r)}:_6().includes(t)?function(...e){return t.apply(Z0(this),e),fo(m2.get(this))}:function(...e){return fo(t.apply(Z0(this),e))}}function x6(t){return typeof t=="function"?E6(t):(t instanceof IDBTransaction&&b6(t),y6(t,v6())?new Proxy(t,Qb):t)}function fo(t){if(t instanceof IDBRequest)return w6(t);if(X0.has(t))return X0.get(t);const e=x6(t);return e!==t&&(X0.set(t,e),vS.set(e,t)),e}const Z0=t=>vS.get(t);function Oc(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=fo(s);return r&&s.addEventListener("upgradeneeded",l=>{r(fo(s.result),l.oldVersion,l.newVersion,fo(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function Tu(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),fo(n).then(()=>{})}const S6=["get","getKey","getAll","getAllKeys","count"],I6=["put","add","delete","clear"],ew=new Map;function SR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ew.get(e))return ew.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=I6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S6.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return ew.set(e,o),o}T6(t=>({...t,get:(e,n,r)=>SR(e,n)||t.get(e,n,r),has:(e,n)=>!!SR(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(P6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function P6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bg="@firebase/app",Xb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new kv("@firebase/app"),C6="@firebase/app-compat",R6="@firebase/analytics-compat",N6="@firebase/analytics",k6="@firebase/app-check-compat",O6="@firebase/app-check",M6="@firebase/auth",D6="@firebase/auth-compat",L6="@firebase/database",$6="@firebase/data-connect",V6="@firebase/database-compat",F6="@firebase/functions",U6="@firebase/functions-compat",B6="@firebase/installations",j6="@firebase/installations-compat",z6="@firebase/messaging",q6="@firebase/messaging-compat",G6="@firebase/performance",H6="@firebase/performance-compat",W6="@firebase/remote-config",K6="@firebase/remote-config-compat",J6="@firebase/storage",Y6="@firebase/storage-compat",Q6="@firebase/firestore",X6="@firebase/vertexai-preview",Z6="@firebase/firestore-compat",eW="firebase",tW="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]",nW={[Bg]:"fire-core",[C6]:"fire-core-compat",[N6]:"fire-analytics",[R6]:"fire-analytics-compat",[O6]:"fire-app-check",[k6]:"fire-app-check-compat",[M6]:"fire-auth",[D6]:"fire-auth-compat",[L6]:"fire-rtdb",[$6]:"fire-data-connect",[V6]:"fire-rtdb-compat",[F6]:"fire-fn",[U6]:"fire-fn-compat",[B6]:"fire-iid",[j6]:"fire-iid-compat",[z6]:"fire-fcm",[q6]:"fire-fcm-compat",[G6]:"fire-perf",[H6]:"fire-perf-compat",[W6]:"fire-rc",[K6]:"fire-rc-compat",[J6]:"fire-gcs",[Y6]:"fire-gcs-compat",[Q6]:"fire-fst",[Z6]:"fire-fst-compat",[X6]:"fire-vertex","fire-js":"fire-js",[eW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Map,zu=new Map,qu=new Map;function Yf(t,e){try{t.container.addComponent(e)}catch(n){bo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function y2(t,e){t.container.addOrOverwriteComponent(e)}function Ir(t){const e=t.name;if(qu.has(e))return bo.debug(`There were multiple attempts to register component ${e}.`),!1;qu.set(e,t);for(const n of Is.values())Yf(n,t);for(const n of zu.values())Yf(n,t);return!0}function Ov(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rW(t,e,n=Ss){Ov(t,e).clearInstance(n)}function v2(t){return t.options!==void 0}function Rt(t){return t.settings!==void 0}function iW(){qu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Gi("app","Firebase",oW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _2=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW extends _2{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const a=e;super(a.options,s,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Wn(Bg,Xb,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw qr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=tW;function _S(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ss,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=a2()),!n)throw qr.create("no-options");const o=Is.get(i);if(o){if(Jf(n,o.options)&&Jf(r,o.config))return o;throw qr.create("duplicate-app",{appName:i})}const s=new h2(i);for(const l of qu.values())s.addComponent(l);const a=new _2(n,r,s);return Is.set(i,a),a}function aW(t,e){if(ZH()&&!l2())throw qr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;v2(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((c,d)=>Math.imul(31,c)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw qr.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(r)),s=zu.get(o);if(s)return s.incRefCount(e.releaseOnDeref),s;const a=new h2(o);for(const u of qu.values())a.addComponent(u);const l=new sW(n,e,o,a);return zu.set(o,l),l}function lW(t=Ss){const e=Is.get(t);if(!e&&t===Ss&&a2())return _S();if(!e)throw qr.create("no-app",{appName:t});return e}function uW(){return Array.from(Is.values())}async function wS(t){let e=!1;const n=t.name;Is.has(n)?(e=!0,Is.delete(n)):zu.has(n)&&t.decRefCount()<=0&&(zu.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Wn(t,e,n){var r;let i=(r=nW[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bo.warn(a.join(" "));return}Ir(new Vn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function w2(t,e){if(t!==null&&typeof t!="function")throw qr.create("invalid-log-argument");g6(t,e)}function b2(t){m6(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW="firebase-heartbeat-database",dW=1,Qf="firebase-heartbeat-store";let tw=null;function T2(){return tw||(tw=Oc(cW,dW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qf)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),tw}async function fW(t){try{const n=(await T2()).transaction(Qf),r=await n.objectStore(Qf).get(E2(t));return await n.done,r}catch(e){if(e instanceof Ln)bo.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bo.warn(n.message)}}}async function IR(t,e){try{const r=(await T2()).transaction(Qf,"readwrite");await r.objectStore(Qf).put(e,E2(t)),await r.done}catch(n){if(n instanceof Ln)bo.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bo.warn(r.message)}}}function E2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=1024,pW=30*24*60*60*1e3;class mW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=AR();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=pW}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AR(),{heartbeatsToSend:r,unsentEntries:i}=gW(this._heartbeatsCache.heartbeats),o=Fg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return bo.warn(n),""}}}function AR(){return new Date().toISOString().substring(0,10)}function gW(t,e=hW){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),PR(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class yW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wa()?t6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return IR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return IR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PR(t){return Fg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){Ir(new Vn("platform-logger",e=>new A6(e),"PRIVATE")),Ir(new Vn("heartbeat",e=>new mW(e),"PRIVATE")),Wn(Bg,Xb,t),Wn(Bg,Xb,"esm2017"),Wn("fire-js","")}vW("");const _W=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ln,SDK_VERSION:Vs,_DEFAULT_ENTRY_NAME:Ss,_addComponent:Yf,_addOrOverwriteComponent:y2,_apps:Is,_clearComponents:iW,_components:qu,_getProvider:Ov,_isFirebaseApp:v2,_isFirebaseServerApp:Rt,_registerComponent:Ir,_removeServiceInstance:rW,_serverApps:zu,deleteApp:wS,getApp:lW,getApps:uW,initializeApp:_S,initializeServerApp:aW,onLog:w2,registerVersion:Wn,setLogLevel:b2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e,n){this._delegate=e,this.firebase=n,Yf(e,new Vn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wS(this._delegate)))}_getService(e,n=Ss){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ss){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Yf(this._delegate,e)}_addOrOverwriteComponent(e){y2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},CR=new Gi("app-compat","Firebase",bW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:Wn,setLogLevel:b2,onLog:w2,apps:null,SDK_VERSION:Vs,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:_W}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(u){delete e[u]}function i(u){if(u=u||Ss,!bR(e,u))throw CR.create("no-app",{appName:u});return e[u]}i.App=t;function o(u,c={}){const d=_S(u,c);if(bR(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function s(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(Ir(u)&&u.type==="PUBLIC"){const f=(g=i())=>{if(typeof g[d]!="function")throw CR.create("invalid-app-argument",{appName:c});return g[d]()};u.serviceProps!==void 0&&Ug(f,u.serviceProps),n[d]=f,t.prototype[d]=function(...g){return this._getService.bind(this,c).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){const t=TW(wW);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:x2,extendNamespace:e,createSubscribe:f2,ErrorFactory:Gi,deepExtend:Ug});function e(n){Ug(t,n)}return t}const EW=x2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new kv("@firebase/app-compat"),xW="@firebase/app-compat",SW="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IW(t){Wn(xW,SW,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=s2();if(t.firebase!==void 0){RR.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&RR.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const gi=EW;IW();var AW="firebase",PW="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi.registerVersion(AW,PW,"app-compat");var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var La,S2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,P){function R(){}R.prototype=P.prototype,S.D=P.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(k,O,M){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return P.prototype[O].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,P,R){R||(R=0);var k=Array(16);if(typeof P=="string")for(var O=0;16>O;++O)k[O]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(O=0;16>O;++O)k[O]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=S.g[0],R=S.g[1],O=S.g[2];var M=S.g[3],D=P+(M^R&(O^M))+k[0]+3614090360&4294967295;P=R+(D<<7&4294967295|D>>>25),D=M+(O^P&(R^O))+k[1]+3905402710&4294967295,M=P+(D<<12&4294967295|D>>>20),D=O+(R^M&(P^R))+k[2]+606105819&4294967295,O=M+(D<<17&4294967295|D>>>15),D=R+(P^O&(M^P))+k[3]+3250441966&4294967295,R=O+(D<<22&4294967295|D>>>10),D=P+(M^R&(O^M))+k[4]+4118548399&4294967295,P=R+(D<<7&4294967295|D>>>25),D=M+(O^P&(R^O))+k[5]+1200080426&4294967295,M=P+(D<<12&4294967295|D>>>20),D=O+(R^M&(P^R))+k[6]+2821735955&4294967295,O=M+(D<<17&4294967295|D>>>15),D=R+(P^O&(M^P))+k[7]+4249261313&4294967295,R=O+(D<<22&4294967295|D>>>10),D=P+(M^R&(O^M))+k[8]+1770035416&4294967295,P=R+(D<<7&4294967295|D>>>25),D=M+(O^P&(R^O))+k[9]+2336552879&4294967295,M=P+(D<<12&4294967295|D>>>20),D=O+(R^M&(P^R))+k[10]+4294925233&4294967295,O=M+(D<<17&4294967295|D>>>15),D=R+(P^O&(M^P))+k[11]+2304563134&4294967295,R=O+(D<<22&4294967295|D>>>10),D=P+(M^R&(O^M))+k[12]+1804603682&4294967295,P=R+(D<<7&4294967295|D>>>25),D=M+(O^P&(R^O))+k[13]+4254626195&4294967295,M=P+(D<<12&4294967295|D>>>20),D=O+(R^M&(P^R))+k[14]+2792965006&4294967295,O=M+(D<<17&4294967295|D>>>15),D=R+(P^O&(M^P))+k[15]+1236535329&4294967295,R=O+(D<<22&4294967295|D>>>10),D=P+(O^M&(R^O))+k[1]+4129170786&4294967295,P=R+(D<<5&4294967295|D>>>27),D=M+(R^O&(P^R))+k[6]+3225465664&4294967295,M=P+(D<<9&4294967295|D>>>23),D=O+(P^R&(M^P))+k[11]+643717713&4294967295,O=M+(D<<14&4294967295|D>>>18),D=R+(M^P&(O^M))+k[0]+3921069994&4294967295,R=O+(D<<20&4294967295|D>>>12),D=P+(O^M&(R^O))+k[5]+3593408605&4294967295,P=R+(D<<5&4294967295|D>>>27),D=M+(R^O&(P^R))+k[10]+38016083&4294967295,M=P+(D<<9&4294967295|D>>>23),D=O+(P^R&(M^P))+k[15]+3634488961&4294967295,O=M+(D<<14&4294967295|D>>>18),D=R+(M^P&(O^M))+k[4]+3889429448&4294967295,R=O+(D<<20&4294967295|D>>>12),D=P+(O^M&(R^O))+k[9]+568446438&4294967295,P=R+(D<<5&4294967295|D>>>27),D=M+(R^O&(P^R))+k[14]+3275163606&4294967295,M=P+(D<<9&4294967295|D>>>23),D=O+(P^R&(M^P))+k[3]+4107603335&4294967295,O=M+(D<<14&4294967295|D>>>18),D=R+(M^P&(O^M))+k[8]+1163531501&4294967295,R=O+(D<<20&4294967295|D>>>12),D=P+(O^M&(R^O))+k[13]+2850285829&4294967295,P=R+(D<<5&4294967295|D>>>27),D=M+(R^O&(P^R))+k[2]+4243563512&4294967295,M=P+(D<<9&4294967295|D>>>23),D=O+(P^R&(M^P))+k[7]+1735328473&4294967295,O=M+(D<<14&4294967295|D>>>18),D=R+(M^P&(O^M))+k[12]+2368359562&4294967295,R=O+(D<<20&4294967295|D>>>12),D=P+(R^O^M)+k[5]+4294588738&4294967295,P=R+(D<<4&4294967295|D>>>28),D=M+(P^R^O)+k[8]+2272392833&4294967295,M=P+(D<<11&4294967295|D>>>21),D=O+(M^P^R)+k[11]+1839030562&4294967295,O=M+(D<<16&4294967295|D>>>16),D=R+(O^M^P)+k[14]+4259657740&4294967295,R=O+(D<<23&4294967295|D>>>9),D=P+(R^O^M)+k[1]+2763975236&4294967295,P=R+(D<<4&4294967295|D>>>28),D=M+(P^R^O)+k[4]+1272893353&4294967295,M=P+(D<<11&4294967295|D>>>21),D=O+(M^P^R)+k[7]+4139469664&4294967295,O=M+(D<<16&4294967295|D>>>16),D=R+(O^M^P)+k[10]+3200236656&4294967295,R=O+(D<<23&4294967295|D>>>9),D=P+(R^O^M)+k[13]+681279174&4294967295,P=R+(D<<4&4294967295|D>>>28),D=M+(P^R^O)+k[0]+3936430074&4294967295,M=P+(D<<11&4294967295|D>>>21),D=O+(M^P^R)+k[3]+3572445317&4294967295,O=M+(D<<16&4294967295|D>>>16),D=R+(O^M^P)+k[6]+76029189&4294967295,R=O+(D<<23&4294967295|D>>>9),D=P+(R^O^M)+k[9]+3654602809&4294967295,P=R+(D<<4&4294967295|D>>>28),D=M+(P^R^O)+k[12]+3873151461&4294967295,M=P+(D<<11&4294967295|D>>>21),D=O+(M^P^R)+k[15]+530742520&4294967295,O=M+(D<<16&4294967295|D>>>16),D=R+(O^M^P)+k[2]+3299628645&4294967295,R=O+(D<<23&4294967295|D>>>9),D=P+(O^(R|~M))+k[0]+4096336452&4294967295,P=R+(D<<6&4294967295|D>>>26),D=M+(R^(P|~O))+k[7]+1126891415&4294967295,M=P+(D<<10&4294967295|D>>>22),D=O+(P^(M|~R))+k[14]+2878612391&4294967295,O=M+(D<<15&4294967295|D>>>17),D=R+(M^(O|~P))+k[5]+4237533241&4294967295,R=O+(D<<21&4294967295|D>>>11),D=P+(O^(R|~M))+k[12]+1700485571&4294967295,P=R+(D<<6&4294967295|D>>>26),D=M+(R^(P|~O))+k[3]+2399980690&4294967295,M=P+(D<<10&4294967295|D>>>22),D=O+(P^(M|~R))+k[10]+4293915773&4294967295,O=M+(D<<15&4294967295|D>>>17),D=R+(M^(O|~P))+k[1]+2240044497&4294967295,R=O+(D<<21&4294967295|D>>>11),D=P+(O^(R|~M))+k[8]+1873313359&4294967295,P=R+(D<<6&4294967295|D>>>26),D=M+(R^(P|~O))+k[15]+4264355552&4294967295,M=P+(D<<10&4294967295|D>>>22),D=O+(P^(M|~R))+k[6]+2734768916&4294967295,O=M+(D<<15&4294967295|D>>>17),D=R+(M^(O|~P))+k[13]+1309151649&4294967295,R=O+(D<<21&4294967295|D>>>11),D=P+(O^(R|~M))+k[4]+4149444226&4294967295,P=R+(D<<6&4294967295|D>>>26),D=M+(R^(P|~O))+k[11]+3174756917&4294967295,M=P+(D<<10&4294967295|D>>>22),D=O+(P^(M|~R))+k[2]+718787259&4294967295,O=M+(D<<15&4294967295|D>>>17),D=R+(M^(O|~P))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+P&4294967295,S.g[1]=S.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,P){P===void 0&&(P=S.length);for(var R=P-this.blockSize,k=this.B,O=this.h,M=0;M<P;){if(O==0)for(;M<=R;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<P;)if(k[O++]=S.charCodeAt(M++),O==this.blockSize){i(this,k),O=0;break}}else for(;M<P;)if(k[O++]=S[M++],O==this.blockSize){i(this,k),O=0;break}}this.h=O,this.o+=P},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var P=1;P<S.length-8;++P)S[P]=0;var R=8*this.o;for(P=S.length-8;P<S.length;++P)S[P]=R&255,R/=256;for(this.u(S),S=Array(16),P=R=0;4>P;++P)for(var k=0;32>k;k+=8)S[R++]=this.g[P]>>>k&255;return S};function o(S,P){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=P(S)}function s(S,P){this.h=P;for(var R=[],k=!0,O=S.length-1;0<=O;O--){var M=S[O]|0;k&&M==P||(R[O]=M,k=!1)}this.g=R}var a={};function l(S){return-128<=S&&128>S?o(S,function(P){return new s([P|0],0>P?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return v(u(-S));for(var P=[],R=1,k=0;S>=R;k++)P[k]=S/R|0,R*=4294967296;return new s(P,0)}function c(S,P){if(S.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S.charAt(0)=="-")return v(c(S.substring(1),P));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(P,8)),k=d,O=0;O<S.length;O+=8){var M=Math.min(8,S.length-O),D=parseInt(S.substring(O,O+M),P);8>M?(M=u(Math.pow(P,M)),k=k.j(M).add(u(D))):(k=k.j(R),k=k.add(u(D)))}return k}var d=l(0),f=l(1),g=l(16777216);t=s.prototype,t.m=function(){if(_(this))return-v(this).m();for(var S=0,P=1,R=0;R<this.g.length;R++){var k=this.i(R);S+=(0<=k?k:4294967296+k)*P,P*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(_(this))return"-"+v(this).toString(S);for(var P=u(Math.pow(S,6)),R=this,k="";;){var O=C(R,P).g;R=b(R,O.j(P));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=O,y(R))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var P=0;P<S.g.length;P++)if(S.g[P]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=b(this,S),_(S)?-1:y(S)?0:1};function v(S){for(var P=S.g.length,R=[],k=0;k<P;k++)R[k]=~S.g[k];return new s(R,~S.h).add(f)}t.abs=function(){return _(this)?v(this):this},t.add=function(S){for(var P=Math.max(this.g.length,S.g.length),R=[],k=0,O=0;O<=P;O++){var M=k+(this.i(O)&65535)+(S.i(O)&65535),D=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);k=D>>>16,M&=65535,D&=65535,R[O]=D<<16|M}return new s(R,R[R.length-1]&-2147483648?-1:0)};function b(S,P){return S.add(v(P))}t.j=function(S){if(y(this)||y(S))return d;if(_(this))return _(S)?v(this).j(v(S)):v(v(this).j(S));if(_(S))return v(this.j(v(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var P=this.g.length+S.g.length,R=[],k=0;k<2*P;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<S.g.length;O++){var M=this.i(k)>>>16,D=this.i(k)&65535,j=S.i(O)>>>16,q=S.i(O)&65535;R[2*k+2*O]+=D*q,T(R,2*k+2*O),R[2*k+2*O+1]+=M*q,T(R,2*k+2*O+1),R[2*k+2*O+1]+=D*j,T(R,2*k+2*O+1),R[2*k+2*O+2]+=M*j,T(R,2*k+2*O+2)}for(k=0;k<P;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=P;k<2*P;k++)R[k]=0;return new s(R,0)};function T(S,P){for(;(S[P]&65535)!=S[P];)S[P+1]+=S[P]>>>16,S[P]&=65535,P++}function x(S,P){this.g=S,this.h=P}function C(S,P){if(y(P))throw Error("division by zero");if(y(S))return new x(d,d);if(_(S))return P=C(v(S),P),new x(v(P.g),v(P.h));if(_(P))return P=C(S,v(P)),new x(v(P.g),P.h);if(30<S.g.length){if(_(S)||_(P))throw Error("slowDivide_ only works with positive integers.");for(var R=f,k=P;0>=k.l(S);)R=E(R),k=E(k);var O=A(R,1),M=A(k,1);for(k=A(k,2),R=A(R,2);!y(k);){var D=M.add(k);0>=D.l(S)&&(O=O.add(R),M=D),k=A(k,1),R=A(R,1)}return P=b(S,O.j(P)),new x(O,P)}for(O=d;0<=S.l(P);){for(R=Math.max(1,Math.floor(S.m()/P.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=u(R),D=M.j(P);_(D)||0<D.l(S);)R-=k,M=u(R),D=M.j(P);y(M)&&(M=f),O=O.add(M),S=b(S,D)}return new x(O,S)}t.A=function(S){return C(this,S).h},t.and=function(S){for(var P=Math.max(this.g.length,S.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)&S.i(k);return new s(R,this.h&S.h)},t.or=function(S){for(var P=Math.max(this.g.length,S.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)|S.i(k);return new s(R,this.h|S.h)},t.xor=function(S){for(var P=Math.max(this.g.length,S.g.length),R=[],k=0;k<P;k++)R[k]=this.i(k)^S.i(k);return new s(R,this.h^S.h)};function E(S){for(var P=S.g.length+1,R=[],k=0;k<P;k++)R[k]=S.i(k)<<1|S.i(k-1)>>>31;return new s(R,S.h)}function A(S,P){var R=P>>5;P%=32;for(var k=S.g.length-R,O=[],M=0;M<k;M++)O[M]=0<P?S.i(M+R)>>>P|S.i(M+R+1)<<32-P:S.i(M+R);return new s(O,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,S2=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=c,La=s}).apply(typeof NR<"u"?NR:typeof self<"u"?self:typeof window<"u"?window:{});var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I2,tf,A2,eg,Zb,P2,C2,R2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,I,N){return m==Array.prototype||m==Object.prototype||(m[I]=N.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof mm=="object"&&mm];for(var I=0;I<m.length;++I){var N=m[I];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(m,I){if(I)e:{var N=r;m=m.split(".");for(var L=0;L<m.length-1;L++){var F=m[L];if(!(F in N))break e;N=N[F]}m=m[m.length-1],L=N[m],I=I(L),I!=L&&I!=null&&e(N,m,{configurable:!0,writable:!0,value:I})}}function o(m,I){m instanceof String&&(m+="");var N=0,L=!1,F={next:function(){if(!L&&N<m.length){var W=N++;return{value:I(W,m[W]),done:!1}}return L=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}i("Array.prototype.values",function(m){return m||function(){return o(this,function(I,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(m){var I=typeof m;return I=I!="object"?I:m?Array.isArray(m)?"array":I:"null",I=="array"||I=="object"&&typeof m.length=="number"}function u(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function c(m,I,N){return m.call.apply(m.bind,arguments)}function d(m,I,N){if(!m)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,L),m.apply(I,F)}}return function(){return m.apply(I,arguments)}}function f(m,I,N){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function g(m,I){var N=Array.prototype.slice.call(arguments,1);return function(){var L=N.slice();return L.push.apply(L,arguments),m.apply(this,L)}}function y(m,I){function N(){}N.prototype=I.prototype,m.aa=I.prototype,m.prototype=new N,m.prototype.constructor=m,m.Qb=function(L,F,W){for(var se=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)se[Ze-2]=arguments[Ze];return I.prototype[F].apply(L,se)}}function _(m){const I=m.length;if(0<I){const N=Array(I);for(let L=0;L<I;L++)N[L]=m[L];return N}return[]}function v(m,I){for(let N=1;N<arguments.length;N++){const L=arguments[N];if(l(L)){const F=m.length||0,W=L.length||0;m.length=F+W;for(let se=0;se<W;se++)m[F+se]=L[se]}else m.push(L)}}class b{constructor(I,N){this.i=I,this.j=N,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function T(m){return/^[\s\xa0]*$/.test(m)}function x(){var m=a.navigator;return m&&(m=m.userAgent)?m:""}function C(m){return C[" "](m),m}C[" "]=function(){};var E=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function A(m,I,N){for(const L in m)I.call(N,m[L],L,m)}function S(m,I){for(const N in m)I.call(void 0,m[N],N,m)}function P(m){const I={};for(const N in m)I[N]=m[N];return I}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(m,I){let N,L;for(let F=1;F<arguments.length;F++){L=arguments[F];for(N in L)m[N]=L[N];for(let W=0;W<R.length;W++)N=R[W],Object.prototype.hasOwnProperty.call(L,N)&&(m[N]=L[N])}}function O(m){var I=1;m=m.split(":");const N=[];for(;0<I&&m.length;)N.push(m.shift()),I--;return m.length&&N.push(m.join(":")),N}function M(m){a.setTimeout(()=>{throw m},0)}function D(){var m=J;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class j{constructor(){this.h=this.g=null}add(I,N){const L=q.get();L.set(I,N),this.h?this.h.next=L:this.g=L,this.h=L}}var q=new b(()=>new Y,m=>m.reset());class Y{constructor(){this.next=this.g=this.h=null}set(I,N){this.h=I,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let X,U=!1,J=new j,Q=()=>{const m=a.Promise.resolve(void 0);X=()=>{m.then(le)}};var le=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(N){M(N)}var I=q;I.j(m),100>I.h&&(I.h++,m.next=I.g,I.g=m)}U=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const N=()=>{};a.addEventListener("test",N,I),a.removeEventListener("test",N,I)}catch{}return m}();function Ue(m,I){if(fe.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var N=this.type=m.type,L=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget){if(E){e:{try{C(I.nodeName);var F=!0;break e}catch{}F=!1}F||(I=null)}}else N=="mouseover"?I=m.fromElement:N=="mouseout"&&(I=m.toElement);this.relatedTarget=I,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:st[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ue.aa.h.call(this)}}y(Ue,fe);var st={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),Wt=0;function ce(m,I,N,L,F){this.listener=m,this.proxy=null,this.src=I,this.type=N,this.capture=!!L,this.ha=F,this.key=++Wt,this.da=this.fa=!1}function be(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m){this.src=m,this.g={},this.h=0}Te.prototype.add=function(m,I,N,L,F){var W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);var se=He(m,I,L,F);return-1<se?(I=m[se],N||(I.fa=!1)):(I=new ce(I,this.src,W,!!L,F),I.fa=N,m.push(I)),I};function Z(m,I){var N=I.type;if(N in m.g){var L=m.g[N],F=Array.prototype.indexOf.call(L,I,void 0),W;(W=0<=F)&&Array.prototype.splice.call(L,F,1),W&&(be(I),m.g[N].length==0&&(delete m.g[N],m.h--))}}function He(m,I,N,L){for(var F=0;F<m.length;++F){var W=m[F];if(!W.da&&W.listener==I&&W.capture==!!N&&W.ha==L)return F}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),at={};function lt(m,I,N,L,F){if(Array.isArray(I)){for(var W=0;W<I.length;W++)lt(m,I[W],N,L,F);return null}return N=Qs(N),m&&m[Ut]?m.K(I,N,u(L)?!!L.capture:!1,F):nn(m,I,N,!1,L,F)}function nn(m,I,N,L,F,W){if(!I)throw Error("Invalid event type");var se=u(F)?!!F.capture:!!F,Ze=Dt(m);if(Ze||(m[Ie]=Ze=new Te(m)),N=Ze.add(I,N,L,se,W),N.proxy)return N;if(L=Nr(),N.proxy=L,L.src=m,L.listener=N,m.addEventListener)Ce||(F=se),F===void 0&&(F=!1),m.addEventListener(I.toString(),L,F);else if(m.attachEvent)m.attachEvent(Or(I.toString()),L);else if(m.addListener&&m.removeListener)m.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Nr(){function m(N){return I.call(m.src,m.listener,N)}const I=tr;return m}function kr(m,I,N,L,F){if(Array.isArray(I))for(var W=0;W<I.length;W++)kr(m,I[W],N,L,F);else L=u(L)?!!L.capture:!!L,N=Qs(N),m&&m[Ut]?(m=m.i,I=String(I).toString(),I in m.g&&(W=m.g[I],N=He(W,N,L,F),-1<N&&(be(W[N]),Array.prototype.splice.call(W,N,1),W.length==0&&(delete m.g[I],m.h--)))):m&&(m=Dt(m))&&(I=m.g[I.toString()],m=-1,I&&(m=He(I,N,L,F)),(N=-1<m?I[m]:null)&&_i(N))}function _i(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[Ut])Z(I.i,m);else{var N=m.type,L=m.proxy;I.removeEventListener?I.removeEventListener(N,L,m.capture):I.detachEvent?I.detachEvent(Or(N),L):I.addListener&&I.removeListener&&I.removeListener(L),(N=Dt(I))?(Z(N,m),N.h==0&&(N.src=null,I[Ie]=null)):be(m)}}}function Or(m){return m in at?at[m]:at[m]="on"+m}function tr(m,I){if(m.da)m=!0;else{I=new Ue(I,this);var N=m.listener,L=m.ha||m.src;m.fa&&_i(m),m=N.call(L,I)}return m}function Dt(m){return m=m[Ie],m instanceof Te?m:null}var Bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(m){return typeof m=="function"?m:(m[Bo]||(m[Bo]=function(I){return m.handleEvent(I)}),m[Bo])}function rn(){ne.call(this),this.i=new Te(this),this.M=this,this.F=null}y(rn,ne),rn.prototype[Ut]=!0,rn.prototype.removeEventListener=function(m,I,N,L){kr(this,m,I,N,L)};function Bt(m,I){var N,L=m.F;if(L)for(N=[];L;L=L.F)N.push(L);if(m=m.M,L=I.type||I,typeof I=="string")I=new fe(I,m);else if(I instanceof fe)I.target=I.target||m;else{var F=I;I=new fe(L,m),k(I,F)}if(F=!0,N)for(var W=N.length-1;0<=W;W--){var se=I.g=N[W];F=Pl(se,L,!0,I)&&F}if(se=I.g=m,F=Pl(se,L,!0,I)&&F,F=Pl(se,L,!1,I)&&F,N)for(W=0;W<N.length;W++)se=I.g=N[W],F=Pl(se,L,!1,I)&&F}rn.prototype.N=function(){if(rn.aa.N.call(this),this.i){var m=this.i,I;for(I in m.g){for(var N=m.g[I],L=0;L<N.length;L++)be(N[L]);delete m.g[I],m.h--}}this.F=null},rn.prototype.K=function(m,I,N,L){return this.i.add(String(m),I,!1,N,L)},rn.prototype.L=function(m,I,N,L){return this.i.add(String(m),I,!0,N,L)};function Pl(m,I,N,L){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();for(var F=!0,W=0;W<I.length;++W){var se=I[W];if(se&&!se.da&&se.capture==N){var Ze=se.listener,pn=se.ha||se.src;se.fa&&Z(m.i,se),F=Ze.call(pn,L)!==!1&&F}}return F&&!L.defaultPrevented}function Dp(m,I,N){if(typeof m=="function")N&&(m=f(m,N));else if(m&&typeof m.handleEvent=="function")m=f(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:a.setTimeout(m,I||0)}function Lp(m){m.g=Dp(()=>{m.g=null,m.i&&(m.i=!1,Lp(m))},m.l);const I=m.h;m.h=null,m.m.apply(null,I)}class c0 extends ne{constructor(I,N){super(),this.m=I,this.l=N,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Lp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(m){ne.call(this),this.h=m,this.g={}}y(Xs,ne);var ld=[];function Zs(m){A(m.g,function(I,N){this.g.hasOwnProperty(N)&&_i(I)},m),m.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),Zs(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cl=a.JSON.stringify,d0=a.JSON.parse,f0=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function ud(){}ud.prototype.h=null;function z(m){return m.h||(m.h=m.i())}function ge(){}var Ee={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){fe.call(this,"d")}y(Xe,fe);function nt(){fe.call(this,"c")}y(nt,fe);var nr={},xn=null;function jo(){return xn=xn||new rn}nr.La="serverreachability";function cd(m){fe.call(this,nr.La,m)}y(cd,fe);function Wi(m){const I=jo();Bt(I,new cd(I))}nr.STAT_EVENT="statevent";function xP(m,I){fe.call(this,nr.STAT_EVENT,m),this.stat=I}y(xP,fe);function Un(m){const I=jo();Bt(I,new xP(I,m))}nr.Ma="timingevent";function SP(m,I){fe.call(this,nr.Ma,m),this.size=I}y(SP,fe);function dd(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},I)}function fd(){this.g=!0}fd.prototype.xa=function(){this.g=!1};function WG(m,I,N,L,F,W){m.info(function(){if(m.g)if(W)for(var se="",Ze=W.split("&"),pn=0;pn<Ze.length;pn++){var Be=Ze[pn].split("=");if(1<Be.length){var Sn=Be[0];Be=Be[1];var In=Sn.split("_");se=2<=In.length&&In[1]=="type"?se+(Sn+"="+Be+"&"):se+(Sn+"=redacted&")}}else se=null;else se=W;return"XMLHTTP REQ ("+L+") [attempt "+F+"]: "+I+`
`+N+`
`+se})}function KG(m,I,N,L,F,W,se){m.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+F+"]: "+I+`
`+N+`
`+W+" "+se})}function Rl(m,I,N,L){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+YG(m,N)+(L?" "+L:"")})}function JG(m,I){m.info(function(){return"TIMEOUT: "+I})}fd.prototype.info=function(){};function YG(m,I){if(!m.g)return I;if(!I)return null;try{var N=JSON.parse(I);if(N){for(m=0;m<N.length;m++)if(Array.isArray(N[m])){var L=N[m];if(!(2>L.length)){var F=L[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var se=1;se<F.length;se++)F[se]=""}}}}return Cl(N)}catch{return I}}var $p={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},IP={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},h0;function Vp(){}y(Vp,ud),Vp.prototype.g=function(){return new XMLHttpRequest},Vp.prototype.i=function(){return{}},h0=new Vp;function zo(m,I,N,L){this.j=m,this.i=I,this.l=N,this.R=L||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AP}function AP(){this.i=null,this.g="",this.h=!1}var PP={},p0={};function m0(m,I,N){m.L=1,m.v=jp(Ki(I)),m.m=N,m.P=!0,CP(m,null)}function CP(m,I){m.F=Date.now(),Fp(m),m.A=Ki(m.v);var N=m.A,L=m.R;Array.isArray(L)||(L=[String(L)]),zP(N.i,"t",L),m.C=0,N=m.j.J,m.h=new AP,m.g=aC(m.j,N?I:null,!m.m),0<m.O&&(m.M=new c0(f(m.Y,m,m.g),m.O)),I=m.U,N=m.g,L=m.ca;var F="readystatechange";Array.isArray(F)||(F&&(ld[0]=F.toString()),F=ld);for(var W=0;W<F.length;W++){var se=lt(N,F[W],L||I.handleEvent,!1,I.h||I);if(!se)break;I.g[se.key]=se}I=m.H?P(m.H):{},m.m?(m.u||(m.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,I)):(m.u="GET",m.g.ea(m.A,m.u,null,I)),Wi(),WG(m.i,m.u,m.A,m.l,m.R,m.m)}zo.prototype.ca=function(m){m=m.target;const I=this.M;I&&Ji(m)==3?I.j():this.Y(m)},zo.prototype.Y=function(m){try{if(m==this.g)e:{const In=Ji(this.g);var I=this.g.Ba();const Ol=this.g.Z();if(!(3>In)&&(In!=3||this.g&&(this.h.h||this.g.oa()||YP(this.g)))){this.J||In!=4||I==7||(I==8||0>=Ol?Wi(3):Wi(2)),g0(this);var N=this.g.Z();this.X=N;t:if(RP(this)){var L=YP(this.g);m="";var F=L.length,W=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ea(this),hd(this);var se="";break t}this.h.i=new a.TextDecoder}for(I=0;I<F;I++)this.h.h=!0,m+=this.h.i.decode(L[I],{stream:!(W&&I==F-1)});L.length=0,this.h.g+=m,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=N==200,KG(this.i,this.u,this.A,this.l,this.R,In,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,pn=this.g;if((Ze=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ze)){var Be=Ze;break t}}Be=null}if(N=Be)Rl(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,y0(this,N);else{this.o=!1,this.s=3,Un(12),ea(this),hd(this);break e}}if(this.P){N=!0;let ei;for(;!this.J&&this.C<se.length;)if(ei=QG(this,se),ei==p0){In==4&&(this.s=4,Un(14),N=!1),Rl(this.i,this.l,null,"[Incomplete Response]");break}else if(ei==PP){this.s=4,Un(15),Rl(this.i,this.l,se,"[Invalid Chunk]"),N=!1;break}else Rl(this.i,this.l,ei,null),y0(this,ei);if(RP(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),In!=4||se.length!=0||this.h.h||(this.s=1,Un(16),N=!1),this.o=this.o&&N,!N)Rl(this.i,this.l,se,"[Invalid Chunked Response]"),ea(this),hd(this);else if(0<se.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),E0(Sn),Sn.M=!0,Un(11))}}else Rl(this.i,this.l,se,null),y0(this,se);In==4&&ea(this),this.o&&!this.J&&(In==4?rC(this.j,this):(this.o=!1,Fp(this)))}else p3(this.g),N==400&&0<se.indexOf("Unknown SID")?(this.s=3,Un(12)):(this.s=0,Un(13)),ea(this),hd(this)}}}catch{}finally{}};function RP(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function QG(m,I){var N=m.C,L=I.indexOf(`
`,N);return L==-1?p0:(N=Number(I.substring(N,L)),isNaN(N)?PP:(L+=1,L+N>I.length?p0:(I=I.slice(L,L+N),m.C=L+N,I)))}zo.prototype.cancel=function(){this.J=!0,ea(this)};function Fp(m){m.S=Date.now()+m.I,NP(m,m.I)}function NP(m,I){if(m.B!=null)throw Error("WatchDog timer not null");m.B=dd(f(m.ba,m),I)}function g0(m){m.B&&(a.clearTimeout(m.B),m.B=null)}zo.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(JG(this.i,this.A),this.L!=2&&(Wi(),Un(17)),ea(this),this.s=2,hd(this)):NP(this,this.S-m)};function hd(m){m.j.G==0||m.J||rC(m.j,m)}function ea(m){g0(m);var I=m.M;I&&typeof I.ma=="function"&&I.ma(),m.M=null,Zs(m.U),m.g&&(I=m.g,m.g=null,I.abort(),I.ma())}function y0(m,I){try{var N=m.j;if(N.G!=0&&(N.g==m||v0(N.h,m))){if(!m.K&&v0(N.h,m)&&N.G==3){try{var L=N.Da.g.parse(I)}catch{L=null}if(Array.isArray(L)&&L.length==3){var F=L;if(F[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<m.F)Kp(N),Hp(N);else break e;T0(N),Un(18)}}else N.za=F[1],0<N.za-N.T&&37500>F[2]&&N.F&&N.v==0&&!N.C&&(N.C=dd(f(N.Za,N),6e3));if(1>=MP(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else na(N,11)}else if((m.K||N.g==m)&&Kp(N),!T(I))for(F=N.Da.g.parse(I),I=0;I<F.length;I++){let Be=F[I];if(N.T=Be[0],Be=Be[1],N.G==2)if(Be[0]=="c"){N.K=Be[1],N.ia=Be[2];const Sn=Be[3];Sn!=null&&(N.la=Sn,N.j.info("VER="+N.la));const In=Be[4];In!=null&&(N.Aa=In,N.j.info("SVER="+N.Aa));const Ol=Be[5];Ol!=null&&typeof Ol=="number"&&0<Ol&&(L=1.5*Ol,N.L=L,N.j.info("backChannelRequestTimeoutMs_="+L)),L=N;const ei=m.g;if(ei){const Yp=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yp){var W=L.h;W.g||Yp.indexOf("spdy")==-1&&Yp.indexOf("quic")==-1&&Yp.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(_0(W,W.h),W.h=null))}if(L.D){const x0=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;x0&&(L.ya=x0,ut(L.I,L.D,x0))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-m.F,N.j.info("Handshake RTT: "+N.R+"ms")),L=N;var se=m;if(L.qa=sC(L,L.J?L.ia:null,L.W),se.K){DP(L.h,se);var Ze=se,pn=L.L;pn&&(Ze.I=pn),Ze.B&&(g0(Ze),Fp(Ze)),L.g=se}else tC(L);0<N.i.length&&Wp(N)}else Be[0]!="stop"&&Be[0]!="close"||na(N,7);else N.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?na(N,7):b0(N):Be[0]!="noop"&&N.l&&N.l.ta(Be),N.v=0)}}Wi(4)}catch{}}var XG=class{constructor(m,I){this.g=m,this.map=I}};function kP(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OP(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function MP(m){return m.h?1:m.g?m.g.size:0}function v0(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function _0(m,I){m.g?m.g.add(I):m.h=I}function DP(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}kP.prototype.cancel=function(){if(this.i=LP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function LP(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let I=m.i;for(const N of m.g.values())I=I.concat(N.D);return I}return _(m.i)}function ZG(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(l(m)){for(var I=[],N=m.length,L=0;L<N;L++)I.push(m[L]);return I}I=[],N=0;for(L in m)I[N++]=m[L];return I}function e3(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(l(m)||typeof m=="string"){var I=[];m=m.length;for(var N=0;N<m;N++)I.push(N);return I}I=[],N=0;for(const L in m)I[N++]=L;return I}}}function $P(m,I){if(m.forEach&&typeof m.forEach=="function")m.forEach(I,void 0);else if(l(m)||typeof m=="string")Array.prototype.forEach.call(m,I,void 0);else for(var N=e3(m),L=ZG(m),F=L.length,W=0;W<F;W++)I.call(void 0,L[W],N&&N[W],m)}var VP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t3(m,I){if(m){m=m.split("&");for(var N=0;N<m.length;N++){var L=m[N].indexOf("="),F=null;if(0<=L){var W=m[N].substring(0,L);F=m[N].substring(L+1)}else W=m[N];I(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function ta(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof ta){this.h=m.h,Up(this,m.j),this.o=m.o,this.g=m.g,Bp(this,m.s),this.l=m.l;var I=m.i,N=new gd;N.i=I.i,I.g&&(N.g=new Map(I.g),N.h=I.h),FP(this,N),this.m=m.m}else m&&(I=String(m).match(VP))?(this.h=!1,Up(this,I[1]||"",!0),this.o=pd(I[2]||""),this.g=pd(I[3]||"",!0),Bp(this,I[4]),this.l=pd(I[5]||"",!0),FP(this,I[6]||"",!0),this.m=pd(I[7]||"")):(this.h=!1,this.i=new gd(null,this.h))}ta.prototype.toString=function(){var m=[],I=this.j;I&&m.push(md(I,UP,!0),":");var N=this.g;return(N||I=="file")&&(m.push("//"),(I=this.o)&&m.push(md(I,UP,!0),"@"),m.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&m.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&m.push("/"),m.push(md(N,N.charAt(0)=="/"?i3:r3,!0))),(N=this.i.toString())&&m.push("?",N),(N=this.m)&&m.push("#",md(N,s3)),m.join("")};function Ki(m){return new ta(m)}function Up(m,I,N){m.j=N?pd(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function Bp(m,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);m.s=I}else m.s=null}function FP(m,I,N){I instanceof gd?(m.i=I,a3(m.i,m.h)):(N||(I=md(I,o3)),m.i=new gd(I,m.h))}function ut(m,I,N){m.i.set(I,N)}function jp(m){return ut(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function pd(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function md(m,I,N){return typeof m=="string"?(m=encodeURI(m).replace(I,n3),N&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function n3(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var UP=/[#\/\?@]/g,r3=/[#\?:]/g,i3=/[#\?]/g,o3=/[#\?@]/g,s3=/#/g;function gd(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function qo(m){m.g||(m.g=new Map,m.h=0,m.i&&t3(m.i,function(I,N){m.add(decodeURIComponent(I.replace(/\+/g," ")),N)}))}t=gd.prototype,t.add=function(m,I){qo(this),this.i=null,m=Nl(this,m);var N=this.g.get(m);return N||this.g.set(m,N=[]),N.push(I),this.h+=1,this};function BP(m,I){qo(m),I=Nl(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function jP(m,I){return qo(m),I=Nl(m,I),m.g.has(I)}t.forEach=function(m,I){qo(this),this.g.forEach(function(N,L){N.forEach(function(F){m.call(I,F,L,this)},this)},this)},t.na=function(){qo(this);const m=Array.from(this.g.values()),I=Array.from(this.g.keys()),N=[];for(let L=0;L<I.length;L++){const F=m[L];for(let W=0;W<F.length;W++)N.push(I[L])}return N},t.V=function(m){qo(this);let I=[];if(typeof m=="string")jP(this,m)&&(I=I.concat(this.g.get(Nl(this,m))));else{m=Array.from(this.g.values());for(let N=0;N<m.length;N++)I=I.concat(m[N])}return I},t.set=function(m,I){return qo(this),this.i=null,m=Nl(this,m),jP(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},t.get=function(m,I){return m?(m=this.V(m),0<m.length?String(m[0]):I):I};function zP(m,I,N){BP(m,I),0<N.length&&(m.i=null,m.g.set(Nl(m,I),_(N)),m.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],I=Array.from(this.g.keys());for(var N=0;N<I.length;N++){var L=I[N];const W=encodeURIComponent(String(L)),se=this.V(L);for(L=0;L<se.length;L++){var F=W;se[L]!==""&&(F+="="+encodeURIComponent(String(se[L]))),m.push(F)}}return this.i=m.join("&")};function Nl(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function a3(m,I){I&&!m.j&&(qo(m),m.i=null,m.g.forEach(function(N,L){var F=L.toLowerCase();L!=F&&(BP(this,L),zP(this,F,N))},m)),m.j=I}function l3(m,I){const N=new fd;if(a.Image){const L=new Image;L.onload=g(Go,N,"TestLoadImage: loaded",!0,I,L),L.onerror=g(Go,N,"TestLoadImage: error",!1,I,L),L.onabort=g(Go,N,"TestLoadImage: abort",!1,I,L),L.ontimeout=g(Go,N,"TestLoadImage: timeout",!1,I,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=m}else I(!1)}function u3(m,I){const N=new fd,L=new AbortController,F=setTimeout(()=>{L.abort(),Go(N,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:L.signal}).then(W=>{clearTimeout(F),W.ok?Go(N,"TestPingServer: ok",!0,I):Go(N,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(F),Go(N,"TestPingServer: error",!1,I)})}function Go(m,I,N,L,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),L(N)}catch{}}function c3(){this.g=new f0}function d3(m,I,N){const L=N||"";try{$P(m,function(F,W){let se=F;u(F)&&(se=Cl(F)),I.push(L+W+"="+encodeURIComponent(se))})}catch(F){throw I.push(L+"type="+encodeURIComponent("_badmap")),F}}function zp(m){this.l=m.Ub||null,this.j=m.eb||!1}y(zp,ud),zp.prototype.g=function(){return new qp(this.l,this.j)},zp.prototype.i=function(m){return function(){return m}}({});function qp(m,I){rn.call(this),this.D=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(qp,rn),t=qp.prototype,t.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=I,this.readyState=1,vd(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(I.body=m),(this.D||a).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yd(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,vd(this)),this.g&&(this.readyState=3,vd(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qP(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function qP(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?yd(this):vd(this),this.readyState==3&&qP(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,yd(this))},t.Qa=function(m){this.g&&(this.response=m,yd(this))},t.ga=function(){this.g&&yd(this)};function yd(m){m.readyState=4,m.l=null,m.j=null,m.v=null,vd(m)}t.setRequestHeader=function(m,I){this.u.append(m,I)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],I=this.h.entries();for(var N=I.next();!N.done;)N=N.value,m.push(N[0]+": "+N[1]),N=I.next();return m.join(`\r
`)};function vd(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(qp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function GP(m){let I="";return A(m,function(N,L){I+=L,I+=":",I+=N,I+=`\r
`}),I}function w0(m,I,N){e:{for(L in N){var L=!1;break e}L=!0}L||(N=GP(N),typeof m=="string"?N!=null&&encodeURIComponent(String(N)):ut(m,I,N))}function At(m){rn.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(At,rn);var f3=/^https?$/i,h3=["POST","PUT"];t=At.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,I,N,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():h0.g(),this.v=this.o?z(this.o):z(h0),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(W){HP(this,W);return}if(m=N||"",N=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var F in L)N.set(F,L[F]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const W of L.keys())N.set(W,L.get(W));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(N.keys()).find(W=>W.toLowerCase()=="content-type"),F=a.FormData&&m instanceof a.FormData,!(0<=Array.prototype.indexOf.call(h3,I,void 0))||L||F||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,se]of N)this.g.setRequestHeader(W,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{JP(this),this.u=!0,this.g.send(m),this.u=!1}catch(W){HP(this,W)}};function HP(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.m=5,WP(m),Gp(m)}function WP(m){m.A||(m.A=!0,Bt(m,"complete"),Bt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Bt(this,"complete"),Bt(this,"abort"),Gp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gp(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KP(this):this.bb())},t.bb=function(){KP(this)};function KP(m){if(m.h&&typeof s<"u"&&(!m.v[1]||Ji(m)!=4||m.Z()!=2)){if(m.u&&Ji(m)==4)Dp(m.Ea,0,m);else if(Bt(m,"readystatechange"),Ji(m)==4){m.h=!1;try{const se=m.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var N;if(!(N=I)){var L;if(L=se===0){var F=String(m.D).match(VP)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),L=!f3.test(F?F.toLowerCase():"")}N=L}if(N)Bt(m,"complete"),Bt(m,"success");else{m.m=6;try{var W=2<Ji(m)?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.Z()+"]",WP(m)}}finally{Gp(m)}}}}function Gp(m,I){if(m.g){JP(m);const N=m.g,L=m.v[0]?()=>{}:null;m.g=null,m.v=null,I||Bt(m,"ready");try{N.onreadystatechange=L}catch{}}}function JP(m){m.I&&(a.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ji(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),d0(I)}};function YP(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function p3(m){const I={};m=(m.g&&2<=Ji(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<m.length;L++){if(T(m[L]))continue;var N=O(m[L]);const F=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const W=I[F]||[];I[F]=W,W.push(N)}S(I,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _d(m,I,N){return N&&N.internalChannelParams&&N.internalChannelParams[m]||I}function QP(m){this.Aa=0,this.i=[],this.j=new fd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_d("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_d("baseRetryDelayMs",5e3,m),this.cb=_d("retryDelaySeedMs",1e4,m),this.Wa=_d("forwardChannelMaxRetries",2,m),this.wa=_d("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new kP(m&&m.concurrentRequestLimit),this.Da=new c3,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=QP.prototype,t.la=8,t.G=1,t.connect=function(m,I,N,L){Un(0),this.W=m,this.H=I||{},N&&L!==void 0&&(this.H.OSID=N,this.H.OAID=L),this.F=this.X,this.I=sC(this,null,this.W),Wp(this)};function b0(m){if(XP(m),m.G==3){var I=m.U++,N=Ki(m.I);if(ut(N,"SID",m.K),ut(N,"RID",I),ut(N,"TYPE","terminate"),wd(m,N),I=new zo(m,m.j,I),I.L=2,I.v=jp(Ki(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(I.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=I.v,N=!0),N||(I.g=aC(I.j,null),I.g.ea(I.v)),I.F=Date.now(),Fp(I)}oC(m)}function Hp(m){m.g&&(E0(m),m.g.cancel(),m.g=null)}function XP(m){Hp(m),m.u&&(a.clearTimeout(m.u),m.u=null),Kp(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&a.clearTimeout(m.s),m.s=null)}function Wp(m){if(!OP(m.h)&&!m.s){m.s=!0;var I=m.Ga;X||Q(),U||(X(),U=!0),J.add(I,m),m.B=0}}function m3(m,I){return MP(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=I.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=dd(f(m.Ga,m,I),iC(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const F=new zo(this,this.j,m);let W=this.o;if(this.S&&(W?(W=P(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var I=0,N=0;N<this.i.length;N++){t:{var L=this.i[N];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(I+=L,4096<I){I=N;break e}if(I===4096||N===this.i.length-1){I=N+1;break e}}I=1e3}else I=1e3;I=eC(this,F,I),N=Ki(this.I),ut(N,"RID",m),ut(N,"CVER",22),this.D&&ut(N,"X-HTTP-Session-Id",this.D),wd(this,N),W&&(this.O?I="headers="+encodeURIComponent(String(GP(W)))+"&"+I:this.m&&w0(N,this.m,W)),_0(this.h,F),this.Ua&&ut(N,"TYPE","init"),this.P?(ut(N,"$req",I),ut(N,"SID","null"),F.T=!0,m0(F,N,null)):m0(F,N,I),this.G=2}}else this.G==3&&(m?ZP(this,m):this.i.length==0||OP(this.h)||ZP(this))};function ZP(m,I){var N;I?N=I.l:N=m.U++;const L=Ki(m.I);ut(L,"SID",m.K),ut(L,"RID",N),ut(L,"AID",m.T),wd(m,L),m.m&&m.o&&w0(L,m.m,m.o),N=new zo(m,m.j,N,m.B+1),m.m===null&&(N.H=m.o),I&&(m.i=I.D.concat(m.i)),I=eC(m,N,1e3),N.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),_0(m.h,N),m0(N,L,I)}function wd(m,I){m.H&&A(m.H,function(N,L){ut(I,L,N)}),m.l&&$P({},function(N,L){ut(I,L,N)})}function eC(m,I,N){N=Math.min(m.i.length,N);var L=m.l?f(m.l.Na,m.l,m):null;e:{var F=m.i;let W=-1;for(;;){const se=["count="+N];W==-1?0<N?(W=F[0].g,se.push("ofs="+W)):W=0:se.push("ofs="+W);let Ze=!0;for(let pn=0;pn<N;pn++){let Be=F[pn].g;const Sn=F[pn].map;if(Be-=W,0>Be)W=Math.max(0,F[pn].g-100),Ze=!1;else try{d3(Sn,se,"req"+Be+"_")}catch{L&&L(Sn)}}if(Ze){L=se.join("&");break e}}}return m=m.i.splice(0,N),I.D=m,L}function tC(m){if(!m.g&&!m.u){m.Y=1;var I=m.Fa;X||Q(),U||(X(),U=!0),J.add(I,m),m.v=0}}function T0(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=dd(f(m.Fa,m),iC(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,nC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=dd(f(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Un(10),Hp(this),nC(this))};function E0(m){m.A!=null&&(a.clearTimeout(m.A),m.A=null)}function nC(m){m.g=new zo(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var I=Ki(m.qa);ut(I,"RID","rpc"),ut(I,"SID",m.K),ut(I,"AID",m.T),ut(I,"CI",m.F?"0":"1"),!m.F&&m.ja&&ut(I,"TO",m.ja),ut(I,"TYPE","xmlhttp"),wd(m,I),m.m&&m.o&&w0(I,m.m,m.o),m.L&&(m.g.I=m.L);var N=m.g;m=m.ia,N.L=1,N.v=jp(Ki(I)),N.m=null,N.P=!0,CP(N,m)}t.Za=function(){this.C!=null&&(this.C=null,Hp(this),T0(this),Un(19))};function Kp(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function rC(m,I){var N=null;if(m.g==I){Kp(m),E0(m),m.g=null;var L=2}else if(v0(m.h,I))N=I.D,DP(m.h,I),L=1;else return;if(m.G!=0){if(I.o)if(L==1){N=I.m?I.m.length:0,I=Date.now()-I.F;var F=m.B;L=jo(),Bt(L,new SP(L,N)),Wp(m)}else tC(m);else if(F=I.s,F==3||F==0&&0<I.X||!(L==1&&m3(m,I)||L==2&&T0(m)))switch(N&&0<N.length&&(I=m.h,I.i=I.i.concat(N)),F){case 1:na(m,5);break;case 4:na(m,10);break;case 3:na(m,6);break;default:na(m,2)}}}function iC(m,I){let N=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(N*=2),N*I}function na(m,I){if(m.j.info("Error code "+I),I==2){var N=f(m.fb,m),L=m.Xa;const F=!L;L=new ta(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Up(L,"https"),jp(L),F?l3(L.toString(),N):u3(L.toString(),N)}else Un(2);m.G=0,m.l&&m.l.sa(I),oC(m),XP(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Un(2)):(this.j.info("Failed to ping google.com"),Un(1))};function oC(m){if(m.G=0,m.ka=[],m.l){const I=LP(m.h);(I.length!=0||m.i.length!=0)&&(v(m.ka,I),v(m.ka,m.i),m.h.i.length=0,_(m.i),m.i.length=0),m.l.ra()}}function sC(m,I,N){var L=N instanceof ta?Ki(N):new ta(N);if(L.g!="")I&&(L.g=I+"."+L.g),Bp(L,L.s);else{var F=a.location;L=F.protocol,I=I?I+"."+F.hostname:F.hostname,F=+F.port;var W=new ta(null);L&&Up(W,L),I&&(W.g=I),F&&Bp(W,F),N&&(W.l=N),L=W}return N=m.D,I=m.ya,N&&I&&ut(L,N,I),ut(L,"VER",m.la),wd(m,L),L}function aC(m,I,N){if(I&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Ca&&!m.pa?new At(new zp({eb:N})):new At(m.pa),I.Ha(m.J),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lC(){}t=lC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jp(){}Jp.prototype.g=function(m,I){return new gr(m,I)};function gr(m,I){rn.call(this),this.g=new QP(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(m?m["X-WebChannel-Client-Profile"]=I.va:m={"X-WebChannel-Client-Profile":I.va}),this.g.S=m,(m=I&&I.Sb)&&!T(m)&&(this.g.m=m),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!T(I)&&(this.g.D=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new kl(this)}y(gr,rn),gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){b0(this.g)},gr.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var N={};N.__data__=m,m=N}else this.u&&(N={},N.__data__=Cl(m),m=N);I.i.push(new XG(I.Ya++,m)),I.G==3&&Wp(I)},gr.prototype.N=function(){this.g.l=null,delete this.j,b0(this.g),delete this.g,gr.aa.N.call(this)};function uC(m){Xe.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(const N in I){m=N;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}y(uC,Xe);function cC(){nt.call(this),this.status=1}y(cC,nt);function kl(m){this.g=m}y(kl,lC),kl.prototype.ua=function(){Bt(this.g,"a")},kl.prototype.ta=function(m){Bt(this.g,new uC(m))},kl.prototype.sa=function(m){Bt(this.g,new cC)},kl.prototype.ra=function(){Bt(this.g,"b")},Jp.prototype.createWebChannel=Jp.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,R2=function(){return new Jp},C2=function(){return jo()},P2=nr,Zb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$p.NO_ERROR=0,$p.TIMEOUT=8,$p.HTTP_ERROR=6,eg=$p,IP.COMPLETE="complete",A2=IP,ge.EventType=Ee,Ee.OPEN="a",Ee.CLOSE="b",Ee.ERROR="c",Ee.MESSAGE="d",rn.prototype.listen=rn.prototype.K,tf=ge,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,I2=At}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});const kR="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new kv("@firebase/firestore");function Gl(){return As.logLevel}function CW(t){As.setLogLevel(t)}function te(t,...e){if(As.logLevel<=Re.DEBUG){const n=e.map(bS);As.debug(`Firestore (${Mc}): ${t}`,...n)}}function $t(t,...e){if(As.logLevel<=Re.ERROR){const n=e.map(bS);As.error(`Firestore (${Mc}): ${t}`,...n)}}function Ui(t,...e){if(As.logLevel<=Re.WARN){const n=e.map(bS);As.warn(`Firestore (${Mc}): ${t}`,...n)}}function bS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: `+t;throw $t(e),new Error(e)}function ye(t,e){t||he()}function RW(t,e){t||he()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class kW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OW{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bn)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new N2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new ln(e)}}class MW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $W{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=o=>{o.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,te("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new LW(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VW(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Gu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function O2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new wt(0,0))}static max(){return new ve(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Xf{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const FW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends Xf{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return FW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ee(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ee(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Oe.fromString(e))}static fromName(e){return new ae(Oe.fromString(e).popFirst(5))}static empty(){return new ae(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function eT(t){return t.fields.find(e=>e.kind===2)}function ua(t){return t.fields.filter(e=>e.kind!==2)}jg.UNKNOWN_ID=-1;class tg{constructor(e,n){this.fieldPath=e,this.kind=n}}class Zf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Zf(0,Ar.min())}}function M2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Ar(i,ae.empty(),e)}function D2(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(ve.min(),ae.empty(),-1)}static max(){return new Ar(ve.max(),ae.empty(),-1)}}function TS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fs(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==L2)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(c=>{s[u]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new vf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ES(r.target.error);this.V.reject(new vf(e,i))}}static open(e,n,r,i){try{return new Mv(n,e.transaction(i,r))}catch(o){throw new vf(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BW(n)}}class Di{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Di.S(It())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),pa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wa())return!1;if(Di.v())return!0;const e=It(),n=Di.S(e),r=0<n&&n<10,i=V2(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new vf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new ee(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new ee(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new vf(e,s))},i.onupgradeneeded=o=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const a=Mv.open(this.db,e,o?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),B.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&s<3;if(te("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function V2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class UW{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return pa(this.B.delete())}}class vf extends ee{constructor(e,n){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Us(t){return t.name==="IndexedDbTransactionError"}class BW{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pa(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next(n=>(n===void 0&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),pa(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new B((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new B((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new B((r,i)=>{n.onerror=o=>{const s=ES(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){const r=[];return new B((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const l=new UW(a),u=n(a.primaryKey,a.value,l);if(u instanceof B){const c=u.catch(d=>(l.done(),B.reject(d)));r.push(c)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>B.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function pa(t){return new B((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=ES(r.target.error);n(i)}})}let OR=!1;function ES(t){const e=Di.S(It());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OR||(OR=!0,setTimeout(()=>{throw r},0)),r}}return t}class jW{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){te("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{te("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Us(n)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Fs(n)}await this.X(6e4)})}}class zW{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,o=!0;return B.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return te("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(te("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=D2(o);TS(s,r)>0&&(r=s)}),new Ar(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lr.oe=-1;function ap(t){return t==null}function eh(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MR(e)),e=qW(t.get(n),e);return MR(e)}function qW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function MR(t){return t+""}function Pi(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Oe.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("",o);switch((s<0||s>n)&&he(),t.charAt(s+1)){case"":const a=t.substring(o,s);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:he()}o=s+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){return[t,Kn(e)]}function U2(t,e,n){return[t,Kn(e),n]}const GW={},HW=["prefixPath","collectionGroup","readTime","documentId"],WW=["prefixPath","collectionGroup","documentId"],KW=["collectionGroup","readTime","prefixPath","documentId"],JW=["canonicalId","targetId"],YW=["targetId","path"],QW=["path","targetId"],XW=["collectionId","parent"],ZW=["indexId","uid"],e9=["uid","sequenceNumber"],t9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n9=["indexId","uid","orderedDocumentKey"],r9=["userId","collectionPath","documentId"],i9=["userId","collectionPath","largestBatchId"],o9=["userId","collectionGroup","largestBatchId"],B2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],s9=[...B2,"documentOverlays"],j2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],z2=j2,xS=[...z2,"indexConfiguration","indexState","indexEntries"],a9=xS,l9=[...xS,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends $2{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function en(t,e){const n=ue(t);return Di.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}}class gm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??yn.RED,this.left=i??yn.EMPTY,this.right=o??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new yn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,o){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $R(this.data.getIterator())}getIteratorFrom(e){return new $R(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class $R{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new ur([])}unionWith(e){let n=new Qe(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new G2("Invalid base64 string: "+o):o}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const c9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(t){if(ye(!!t),typeof t=="string"){let e=0;const n=c9.exec(t);if(ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SS(t){const e=t.mapValue.fields.__previous_value__;return Dv(e)?SS(e):e}function th(t){const e=To(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Cs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Cs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rg={nullValue:"NULL_VALUE"};function Ka(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dv(t)?4:H2(t)?9007199254740991:Lv(t)?10:11:he()}function Bi(t,e){if(t===e)return!0;const n=Ka(t);if(n!==Ka(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return th(t).isEqual(th(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=To(i.timestampValue),a=To(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ps(i.bytesValue).isEqual(Ps(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return mt(i.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return mt(i.integerValue)===mt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=mt(i.doubleValue),a=mt(o.doubleValue);return s===a?eh(s)===eh(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Gu(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(LR(s)!==LR(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Bi(s[l],a[l])))return!1;return!0}(t,e);default:return he()}}function nh(t,e){return(t.values||[]).find(n=>Bi(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=Ka(t),r=Ka(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=mt(o.integerValue||o.doubleValue),l=mt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return VR(t.timestampValue,e.timestampValue);case 4:return VR(th(t),th(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Ps(o),l=Ps(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Se(a[u],l[u]);if(c!==0)return c}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Se(mt(o.latitude),mt(s.latitude));return a!==0?a:Se(mt(o.longitude),mt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return FR(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,c;const d=o.fields||{},f=s.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,_=Se(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0);return _!==0?_:FR(g,y)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ls.mapValue&&s===ls.mapValue)return 0;if(o===ls.mapValue)return 1;if(s===ls.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=Se(l[d],c[d]);if(f!==0)return f;const g=Rs(a[l[d]],u[c[d]]);if(g!==0)return g}return Se(l.length,c.length)}(t.mapValue,e.mapValue);default:throw he()}}function VR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=To(t),r=To(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function FR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Rs(n[i],r[i]);if(o)return o}return Se(n.length,r.length)}function Hu(t){return nT(t)}function nT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=To(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=nT(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${nT(n.fields[s])}`;return i+"}"}(t.mapValue):he()}function Ja(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rT(t){return!!t&&"integerValue"in t}function rh(t){return!!t&&"arrayValue"in t}function UR(t){return!!t&&"nullValue"in t}function BR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ig(t){return!!t&&"mapValue"in t}function Lv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _f(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return yl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_f(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_f(t.arrayValue.values[n]);return e}return Object.assign({},t)}function H2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const W2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function f9(t){return"nullValue"in t?rg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ja(Cs.empty(),ae.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Lv(t)?W2:{mapValue:{}}:he()}function h9(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ja(Cs.empty(),ae.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?W2:"mapValue"in t?Lv(t)?{mapValue:{}}:ls:he()}function jR(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zR(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ig(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_f(n)}setAll(e){let n=yt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=_f(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());ig(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ig(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yl(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new vn(_f(this.value))}}function K2(t){const e=[];return yl(t.fields,(n,r)=>{const i=new yt([n]);if(ig(r)){const o=K2(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ht(e,0,ve.min(),ve.min(),ve.min(),vn.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,ve.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,ve.min(),ve.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ve.min(),ve.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.position=e,this.inclusive=n}}function qR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),n.key):r=Rs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function GR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n="asc"){this.field=e,this.dir=n}}function p9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{}class Me extends J2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m9(e,n,r):n==="array-contains"?new v9(e,r):n==="in"?new tF(e,r):n==="not-in"?new _9(e,r):n==="array-contains-any"?new w9(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new g9(e,r):new y9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&Ka(this.value)===Ka(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends J2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new We(e,n)}matches(e){return Wu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wu(t){return t.op==="and"}function iT(t){return t.op==="or"}function IS(t){return Y2(t)&&Wu(t)}function Y2(t){for(const e of t.filters)if(e instanceof We)return!1;return!0}function oT(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Hu(t.value);if(IS(t))return t.filters.map(e=>oT(e)).join(",");{const e=t.filters.map(n=>oT(n)).join(",");return`${t.op}(${e})`}}function Q2(t,e){return t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&Bi(r.value,i.value)}(t,e):t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Q2(s,i.filters[a]),!0):!1}(t,e):void he()}function X2(t,e){const n=t.filters.concat(e);return We.create(n,t.op)}function Z2(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Hu(n.value)}`}(t):t instanceof We?function(n){return n.op.toString()+" {"+n.getFilters().map(Z2).join(" ,")+"}"}(t):"Filter"}class m9 extends Me{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class g9 extends Me{constructor(e,n){super(e,"in",n),this.keys=eF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class y9 extends Me{constructor(e,n){super(e,"not-in",n),this.keys=eF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class v9 extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rh(n)&&nh(n.arrayValue,this.value)}}class tF extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nh(this.value.arrayValue,n)}}class _9 extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!nh(this.value.arrayValue,n)}}class w9 extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function sT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new b9(t,e,n,r,i,o,s)}function Ya(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hu(r)).join(",")),e.ue=n}return e.ue}function lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Q2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GR(t.startAt,e.startAt)&&GR(t.endAt,e.endAt)}function zg(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function qg(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function HR(t,e,n){let r=rg,i=!0;for(const o of qg(t,e)){let s=rg,a=!0;switch(o.op){case"<":case"<=":s=f9(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=rg}jR({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];jR({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function WR(t,e,n){let r=ls,i=!0;for(const o of qg(t,e)){let s=ls,a=!0;switch(o.op){case">=":case">":s=h9(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ls}zR({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];zR({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nF(t,e,n,r,i,o,s,a){return new No(t,e,n,r,i,o,s,a)}function Dc(t){return new No(t)}function KR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AS(t){return t.collectionGroup!==null}function Eu(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qe(yt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ih(o,r))}),n.has(yt.keyField().canonicalString())||e.ce.push(new ih(yt.keyField(),r))}return e.ce}function Jn(t){const e=ue(t);return e.le||(e.le=T9(e,Eu(t))),e.le}function T9(t,e){if(t.limitType==="F")return sT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ih(i.field,o)});const n=t.endAt?new Ns(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ns(t.startAt.position,t.startAt.inclusive):null;return sT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function aT(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gg(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return lp(Jn(t),Jn(e))&&t.limitType===e.limitType}function rF(t){return`${Ya(Jn(t))}|lt:${t.limitType}`}function Hl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Z2(i)).join(", ")}]`),ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hu(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function cp(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Eu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=qR(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Eu(r),i)||r.endAt&&!function(s,a,l){const u=qR(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Eu(r),i))}(t,e)}function iF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oF(t){return(e,n)=>{let r=!1;for(const i of Eu(t)){const o=E9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function E9(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Rs(l,u):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return q2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=new ot(ae.comparator);function cr(){return x9}const sF=new ot(ae.comparator);function nf(...t){let e=sF;for(const n of t)e=e.insert(n.key,n);return e}function aF(t){let e=sF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ci(){return wf()}function lF(){return wf()}function wf(){return new Bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const S9=new ot(ae.comparator),I9=new Qe(ae.comparator);function Ae(...t){let e=I9;for(const n of t)e=e.add(n);return e}const A9=new Qe(Se);function PS(){return A9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function uF(t){return{integerValue:""+t}}function cF(t,e){return F2(e)?uF(e):CS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this._=void 0}}function P9(t,e,n){return t instanceof Ku?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dv(o)&&(o=SS(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Qa?fF(t,e):t instanceof Xa?hF(t,e):function(i,o){const s=dF(i,o),a=JR(s)+JR(i.Pe);return rT(s)&&rT(i.Pe)?uF(a):CS(i.serializer,a)}(t,e)}function C9(t,e,n){return t instanceof Qa?fF(t,e):t instanceof Xa?hF(t,e):n}function dF(t,e){return t instanceof Ju?function(r){return rT(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ku extends $v{}class Qa extends $v{constructor(e){super(),this.elements=e}}function fF(t,e){const n=pF(e);for(const r of t.elements)n.some(i=>Bi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends $v{constructor(e){super(),this.elements=e}}function hF(t,e){let n=pF(e);for(const r of t.elements)n=n.filter(i=>!Bi(i,r));return{arrayValue:{values:n}}}class Ju extends $v{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function JR(t){return mt(t.integerValue||t.doubleValue)}function pF(t){return rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.field=e,this.transform=n}}function R9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qa&&i instanceof Qa||r instanceof Xa&&i instanceof Xa?Gu(r.elements,i.elements,Bi):r instanceof Ju&&i instanceof Ju?Bi(r.Pe,i.Pe):r instanceof Ku&&i instanceof Ku}(t.transform,e.transform)}class N9{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function og(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vv{}function mF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $c(t.key,vt.none()):new Lc(t.key,t.data,vt.none());{const n=t.data,r=vn.empty();let i=new Qe(yt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ko(t.key,r,new ur(i.toArray()),vt.none())}}function k9(t,e,n){t instanceof Lc?function(i,o,s){const a=i.value.clone(),l=QR(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ko?function(i,o,s){if(!og(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=QR(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(gF(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bf(t,e,n,r){return t instanceof Lc?function(o,s,a,l){if(!og(o.precondition,s))return a;const u=o.value.clone(),c=XR(o.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ko?function(o,s,a,l){if(!og(o.precondition,s))return a;const u=XR(o.fieldTransforms,l,s),c=s.data;return c.setAll(gF(o)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return og(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function O9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=dF(r.transform,i||null);o!=null&&(n===null&&(n=vn.empty()),n.set(r.field,o))}return n||null}function YR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gu(r,i,(o,s)=>R9(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lc extends Vv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ko extends Vv{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function gF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function QR(t,e,n){const r=new Map;ye(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,C9(s,a,n[i]))}return r}function XR(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,P9(o,s,e))}return r}class $c extends Vv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RS extends Vv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&k9(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lF();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=mF(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(n,r)=>YR(n,r))&&Gu(this.baseMutations,e.baseMutations,(n,r)=>YR(n,r))}}class kS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length);let i=function(){return S9}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new kS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,$e;function yF(t){switch(t){default:return he();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function vF(t){if(t===void 0)return $t("GRPC error has no .code"),G.UNKNOWN;switch(t){case jt.OK:return G.OK;case jt.CANCELLED:return G.CANCELLED;case jt.UNKNOWN:return G.UNKNOWN;case jt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case jt.INTERNAL:return G.INTERNAL;case jt.UNAVAILABLE:return G.UNAVAILABLE;case jt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case jt.NOT_FOUND:return G.NOT_FOUND;case jt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case jt.ABORTED:return G.ABORTED;case jt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case jt.DATA_LOSS:return G.DATA_LOSS;default:return he()}}($e=jt||(jt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new La([4294967295,4294967295],0);function ZR(t){const e=_F().encode(t),n=new S2;return n.update(e),new Uint8Array(n.digest())}function e1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new La([n,r],0),new La([i,o],0)]}class MS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rf(`Invalid padding: ${n}`);if(r<0)throw new rf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=La.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(La.fromNumber(r)));return i.compare(D9)===1&&(i=new La([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ZR(e),[r,i]=e1(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new MS(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=ZR(e),[r,i]=e1(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fp(ve.min(),i,new ot(Se),cr(),Ae())}}class hp{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hp(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class wF{constructor(e,n){this.targetId=e,this.me=n}}class bF{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class t1{constructor(){this.fe=0,this.ge=r1(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new hp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=r1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L9{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=n1(),this.Qe=new ot(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(zg(o))if(r===0){const s=new ae(o.path);this.Ue(n,s,ht.newNoDocument(s,ve.min()))}else ye(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Ps(r).toUint8Array()}catch(l){if(l instanceof G2)return Ui("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new MS(s,i,o)}catch(l){return Ui(l instanceof rf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&zg(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,ht.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Ae();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new fp(e,n,this.Qe,this.ke,r);return this.ke=cr(),this.qe=n1(),this.Qe=new ot(Se),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new t1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qe(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function n1(){return new ot(ae.comparator)}function r1(){return new ot(ae.comparator)}const $9={asc:"ASCENDING",desc:"DESCENDING"},V9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},F9={and:"AND",or:"OR"};class U9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lT(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B9(t,e){return Yu(t,e.toTimestamp())}function Vt(t){return ye(!!t),ve.fromTimestamp(function(n){const r=To(n);return new wt(r.seconds,r.nanos)}(t))}function DS(t,e){return uT(t,e).canonicalString()}function uT(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function EF(t){const e=Oe.fromString(t);return ye(OF(e)),e}function oh(t,e){return DS(t.databaseId,e.path)}function Li(t,e){const n=EF(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(IF(n))}function xF(t,e){return DS(t.databaseId,e)}function SF(t){const e=EF(t);return e.length===4?Oe.emptyPath():IF(e)}function cT(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IF(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function i1(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function AF(t,e,n){const r=Li(t,e.name),i=Vt(e.updateTime),o=e.createTime?Vt(e.createTime):ve.min(),s=new vn({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function j9(t,e){return"found"in e?function(r,i){ye(!!i.found),i.found.name,i.found.updateTime;const o=Li(r,i.found.name),s=Vt(i.found.updateTime),a=i.found.createTime?Vt(i.found.createTime):ve.min(),l=new vn({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(o,s,a,l)}(t,e):"missing"in e?function(r,i){ye(!!i.missing),ye(!!i.readTime);const o=Li(r,i.missing),s=Vt(i.readTime);return ht.newNoDocument(o,s)}(t,e):he()}function z9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,c){return u.useProto3Json?(ye(c===void 0||typeof c=="string"),Nt.fromBase64String(c||"")):(ye(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Nt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const c=u.code===void 0?G.UNKNOWN:vF(u.code);return new ee(c,u.message||"")}(s);n=new bF(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Li(t,r.document.name),o=Vt(r.document.updateTime),s=r.document.createTime?Vt(r.document.createTime):ve.min(),a=new vn({mapValue:{fields:r.document.fields}}),l=ht.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new sg(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Li(t,r.document),o=r.readTime?Vt(r.readTime):ve.min(),s=ht.newNoDocument(i,o),a=r.removedTargetIds||[];n=new sg([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Li(t,r.document),o=r.removedTargetIds||[];n=new sg([],o,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new M9(i,o),a=r.targetId;n=new wF(a,s)}}return n}function sh(t,e){let n;if(e instanceof Lc)n={update:i1(t,e.key,e.value)};else if(e instanceof $c)n={delete:oh(t,e.key)};else if(e instanceof ko)n={update:i1(t,e.key,e.data),updateMask:J9(e.fieldMask)};else{if(!(e instanceof RS))return he();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Ku)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ju)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:B9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(t,e.precondition)),n}function dT(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?vt.updateTime(Vt(o.updateTime)):o.exists!==void 0?vt.exists(o.exists):vt.none()}(e.currentDocument):vt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let l=null;if("setToServerValue"in a)ye(a.setToServerValue==="REQUEST_TIME"),l=new Ku;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new Qa(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new Xa(c)}else"increment"in a?l=new Ju(s,a.increment):he();const u=yt.fromServerFormat(a.fieldPath);return new dp(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Li(t,e.update.name),o=new vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=function(l){const u=l.fieldPaths||[];return new ur(u.map(c=>yt.fromServerFormat(c)))}(e.updateMask);return new ko(i,o,s,n,r)}return new Lc(i,o,n,r)}if(e.delete){const i=Li(t,e.delete);return new $c(i,n)}if(e.verify){const i=Li(t,e.verify);return new RS(i,n)}return he()}function q9(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Vt(i.updateTime):Vt(o);return s.isEqual(ve.min())&&(s=Vt(o)),new N9(s,i.transformResults||[])}(n,e))):[]}function PF(t,e){return{documents:[xF(t,e.path)]}}function CF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xF(t,i);const o=function(u){if(u.length!==0)return kF(We.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Wl(f.field),direction:H9(f.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=lT(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function RF(t){let e=SF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];n.where&&(o=function(d){const f=NF(d);return f instanceof We&&IS(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(y){return new ih(Kl(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,ap(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Ns(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new Ns(g,f)}(n.endAt)),nF(e,i,s,o,a,"F",l,u)}function G9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kl(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kl(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Kl(n.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Kl(n.unaryFilter.field);return Me.create(s,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Kl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return We.create(n.compositeFilter.filters.map(r=>NF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function H9(t){return $9[t]}function W9(t){return V9[t]}function K9(t){return F9[t]}function Wl(t){return{fieldPath:t.canonicalString()}}function Kl(t){return yt.fromServerFormat(t.fieldPath)}function kF(t){return t instanceof Me?function(n){if(n.op==="=="){if(BR(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NAN"}};if(UR(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BR(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NAN"}};if(UR(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(n.field),op:W9(n.op),value:n.value}}}(t):t instanceof We?function(n){const r=n.getFilters().map(i=>kF(i));return r.length===1?r[0]:{compositeFilter:{op:K9(n.op),filters:r}}}(t):he()}function J9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function OF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,r,i,o=ve.min(),s=ve.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.ct=e}}function Y9(t,e){let n;if(e.document)n=AF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),i=el(e.noDocument.readTime);n=ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{const r=ae.fromSegments(e.unknownDocument.path),i=el(e.unknownDocument.version);n=ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new wt(i[0],i[1]);return ve.fromTimestamp(o)}(e.readTime)),n}function o1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:oh(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Yu(o,s.version.toTimestamp()),createTime:Yu(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return he();r.unknownDocument={path:n.path.toArray(),version:Za(e.version)}}return r}function Hg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(t){const e=new wt(t.seconds,t.nanoseconds);return ve.fromTimestamp(e)}function ma(t,e){const n=(e.baseMutations||[]).map(o=>dT(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>dT(t.ct,o)),i=wt.fromMillis(e.localWriteTimeMs);return new NS(e.batchId,i,n,r)}function of(t){const e=el(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?el(t.lastLimboFreeSnapshotVersion):ve.min();let r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return ye(o.documents.length===1),Jn(Dc(SF(o.documents[0])))}(t.query):function(o){return Jn(RF(o))}(t.query),new ro(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Nt.fromBase64String(t.resumeToken))}function DF(t,e){const n=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let i;i=zg(e.target)?PF(t.ct,e.target):CF(t.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ya(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function LS(t){const e=RF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gg(e,e.limit,"L"):e}function nw(t,e){return new OS(e.largestBatchId,dT(t.ct,e.overlayMutation))}function s1(t,e){const n=e.path.lastSegment();return[t,Kn(e.path.popLast()),n]}function a1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Za(r.readTime),documentKey:Kn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{getBundleMetadata(e,n){return l1(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:el(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return l1(e).put(function(i){return{bundleId:i.id,createTime:Za(Vt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return u1(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:LS(o.bundledQuery),readTime:el(o.readTime)}}(r)})}saveNamedQuery(e,n){return u1(e).put(function(i){return{name:i.name,readTime:Za(Vt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function l1(t){return en(t,"bundles")}function u1(t){return en(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Fv(e,r)}getOverlay(e,n){return Cd(e).get(s1(this.userId,n)).next(r=>r?nw(this.serializer,r):null)}getOverlays(e,n){const r=Ci();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new OS(n,s);i.push(this.ht(e,a))}),B.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(Kn(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Cd(e).j("collectionPathOverlayIndex",a))}),B.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Ci(),o=Kn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Cd(e).U("collectionPathOverlayIndex",s).next(a=>{for(const l of a){const u=nw(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Ci();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Cd(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=nw(this.serializer,u);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):c.done()}).next(()=>o)}ht(e,n){return Cd(e).put(function(i,o,s){const[a,l,u]=s1(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:sh(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function Cd(t){return en(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{Pt(e){return en(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Nt.fromUint8Array(r):Nt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),eh(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=To(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ps(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?H2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Lv(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):he()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const o=e.fields||{};this.dt(n,53);const s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(mt(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ae.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ga.vt=new ga;function Z9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function c1(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=Z9(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class eK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=c1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=c1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Rd{constructor(){this.jt=new eK,this.Ht=new tK(this.jt),this.Jt=new nK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ya(this.indexId,this.documentKey,this.arrayValue,r)}}function Wo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=d1(t.arrayValue,e.arrayValue),n!==0?n:(n=d1(t.directionalValue,e.directionalValue),n!==0?n:ae.comparator(t.documentKey,e.documentKey)))}function d1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.Xt=new Qe((n,r)=>yt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ye(e.collectionGroup===this.collectionId),this.nn)return!1;const n=eT(e);if(n!==void 0&&!this.sn(n))return!1;const r=ua(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<r.length;++o){const a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Qe(yt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new tg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new tg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new tg(r.field,r.dir==="asc"?0:1)));return new jg(jg.UNKNOWN_ID,this.collectionId,n,Zf.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){var e,n;if(ye(t instanceof Me||t instanceof We),t instanceof Me){if(t instanceof tF){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Me.create(t.field,"==",o)))||[];return We.create(i,"or")}return t}const r=t.filters.map(i=>LF(i));return We.create(r,t.op)}function rK(t){if(t.getFilters().length===0)return[];const e=pT(LF(t));return ye($F(e)),fT(e)||hT(e)?[e]:e.getFilters()}function fT(t){return t instanceof Me}function hT(t){return t instanceof We&&IS(t)}function $F(t){return fT(t)||hT(t)||function(n){if(n instanceof We&&iT(n)){for(const r of n.getFilters())if(!fT(r)&&!hT(r))return!1;return!0}return!1}(t)}function pT(t){if(ye(t instanceof Me||t instanceof We),t instanceof Me)return t;if(t.filters.length===1)return pT(t.filters[0]);const e=t.filters.map(r=>pT(r));let n=We.create(e,t.op);return n=Wg(n),$F(n)?n:(ye(n instanceof We),ye(Wu(n)),ye(n.filters.length>1),n.filters.reduce((r,i)=>$S(r,i)))}function $S(t,e){let n;return ye(t instanceof Me||t instanceof We),ye(e instanceof Me||e instanceof We),n=t instanceof Me?e instanceof Me?function(i,o){return We.create([i,o],"and")}(t,e):h1(t,e):e instanceof Me?h1(e,t):function(i,o){if(ye(i.filters.length>0&&o.filters.length>0),Wu(i)&&Wu(o))return X2(i,o.getFilters());const s=iT(i)?i:o,a=iT(i)?o:i,l=s.filters.map(u=>$S(u,a));return We.create(l,"or")}(t,e),Wg(n)}function h1(t,e){if(Wu(e))return X2(e,t.getFilters());{const n=e.filters.map(r=>$S(t,r));return We.create(n,"or")}}function Wg(t){if(ye(t instanceof Me||t instanceof We),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return Wg(e[0]);if(Y2(t))return t;const n=e.map(i=>Wg(i)),r=[];return n.forEach(i=>{i instanceof Me?r.push(i):i instanceof We&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iK{constructor(){this.un=new VS}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ar.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class VS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(Oe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Uint8Array(0);class oK{constructor(e,n){this.databaseId=n,this.cn=new VS,this.ln=new Bs(r=>Ya(r),(r,i)=>lp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const o={collectionId:r,parent:Kn(i)};return p1(e).put(o)}return B.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[O2(n),""],!1,!0);return p1(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Pi(s.parent))}return r})}addFieldIndex(e,n){const r=Nd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=$l(e);return o.next(a=>{s.put(a1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=Nd(e),i=$l(e),o=Ll(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Nd(e),r=Ll(e),i=$l(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return B.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new f1(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Ll(e);let i=!0;const o=new Map;return B.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Ae();const a=[];return B.forEach(o,(l,u)=>{te("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${Ya(n)}`);const c=function(x,C){const E=eT(C);if(E===void 0)return null;for(const A of qg(x,E.fieldPath))switch(A.op){case"array-contains-any":return A.value.arrayValue.values||[];case"array-contains":return[A.value]}return null}(u,l),d=function(x,C){const E=new Map;for(const A of ua(C))for(const S of qg(x,A.fieldPath))switch(S.op){case"==":case"in":E.set(A.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return E.set(A.fieldPath.canonicalString(),S.value),Array.from(E.values())}return null}(u,l),f=function(x,C){const E=[];let A=!0;for(const S of ua(C)){const P=S.kind===0?HR(x,S.fieldPath,x.startAt):WR(x,S.fieldPath,x.startAt);E.push(P.value),A&&(A=P.inclusive)}return new Ns(E,A)}(u,l),g=function(x,C){const E=[];let A=!0;for(const S of ua(C)){const P=S.kind===0?WR(x,S.fieldPath,x.endAt):HR(x,S.fieldPath,x.endAt);E.push(P.value),A&&(A=P.inclusive)}return new Ns(E,A)}(u,l),y=this.In(l,u,f),_=this.In(l,u,g),v=this.Tn(l,u,d),b=this.En(l.indexId,c,y,f.inclusive,_,g.inclusive,v);return B.forEach(b,T=>r.G(T,n.limit).next(x=>{x.forEach(C=>{const E=ae.fromSegments(C.documentKey);s.has(E)||(s=s.add(E),a.push(E))})}))}).next(()=>a)}return B.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=rK(We.create(e.filters,"and")).map(r=>sT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){const l=(n!=null?n.length:1)*Math.max(r.length,o.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.dn(n[d/u]):ym,g=this.An(e,f,r[d%u],i),y=this.Rn(e,f,o[d%u],s),_=a.map(v=>this.An(e,f,v,!0));c.push(...this.createRange(g,y,_))}return c}An(e,n,r,i){const o=new ya(e,ae.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){const o=new ya(e,ae.empty(),n,r);return i?o.Zt():o}Pn(e,n){const r=new f1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.hn(n);return B.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(l){let u=new Qe(yt.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Rd;for(const i of ua(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Yt(i.kind);ga.vt.It(o,s)}return r.zt()}dn(e){const n=new Rd;return ga.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Rd;return ga.vt.It(Ja(this.databaseId,n),r.Yt(function(o){const s=ua(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Rd);let o=0;for(const s of ua(e)){const a=r[o++];for(const l of i)if(this.fn(n,s.fieldPath)&&rh(a))i=this.gn(i,s,a);else{const u=l.Yt(s.kind);ga.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const l=new Rd;l.seed(a.zt()),ga.vt.It(s,l.Yt(n.kind)),o.push(l)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Nd(e),i=$l(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{const s=[];return B.forEach(o,a=>i.get([a.indexId,this.uid]).next(l=>{s.push(function(c,d){const f=d?new Zf(d.sequenceNumber,new Ar(el(d.readTime),new ae(Pi(d.documentKey)),d.largestBatchId)):Zf.empty(),g=c.fields.map(([y,_])=>new tg(yt.fromServerFormat(y),_));return new jg(c.indexId,c.collectionGroup,g,f)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Nd(e),o=$l(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>B.forEach(a,l=>o.put(a1(l.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return B.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?B.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),B.forEach(a,l=>this.wn(e,i,l).next(u=>{const c=this.Sn(o,l);return u.isEqual(c)?B.resolve():this.bn(e,o,l,u,c)}))))})}Dn(e,n,r,i){return Ll(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Ll(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Ll(e);let o=new Qe(Wo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new ya(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new Qe(Wo);const i=this.Vn(n,e);if(i==null)return r;const o=eT(n);if(o!=null){const s=e.data.field(o.fieldPath);if(rh(s))for(const a of s.arrayValue.values||[])r=r.add(new ya(n.indexId,e.key,this.dn(a),i))}else r=r.add(new ya(n.indexId,e.key,ym,i));return r}bn(e,n,r,i,o){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(l,u,c,d,f){const g=l.getIterator(),y=u.getIterator();let _=Dl(g),v=Dl(y);for(;_||v;){let b=!1,T=!1;if(_&&v){const x=c(_,v);x<0?T=!0:x>0&&(b=!0)}else _!=null?T=!0:b=!0;b?(d(v),v=Dl(y)):T?(f(_),_=Dl(g)):(_=Dl(g),v=Dl(y))}}(i,o,Wo,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),B.waitFor(s)}yn(e){let n=1;return $l(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Wo(s,a)).filter((s,a,l)=>!a||Wo(s,l[a-1])!==0);const i=[];i.push(e);for(const s of r){const a=Wo(s,e),l=Wo(s,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(s),i.push(s.Zt());else if(l>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ym,[]],l=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ym,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(e,n){return Wo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(m1)}getMinOffset(e,n){return B.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||he())).next(m1)}}function p1(t){return en(t,"collectionParents")}function Ll(t){return en(t,"indexEntries")}function Nd(t){return en(t,"indexConfiguration")}function $l(t){return en(t,"indexState")}function m1(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;TS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ar(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rr(e,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:s},(c,d,f)=>(a++,f.delete()));o.push(l.next(()=>{ye(a===1)}));const u=[];for(const c of n.mutations){const d=U2(e,c.key.path,n.batchId);o.push(i.delete(d)),u.push(c.key)}return B.waitFor(o).next(()=>u)}function Kg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw he();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(41943040,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);class Uv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ye(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Uv(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=Jl(e),s=Ko(e);return s.add({}).next(a=>{ye(typeof a=="number");const l=new NS(a,n,r,i),u=function(g,y,_){const v=_.baseMutations.map(T=>sh(g.ct,T)),b=_.mutations.map(T=>sh(g.ct,T));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:v,mutations:b}}(this.serializer,this.userId,l),c=[];let d=new Qe((f,g)=>Se(f.canonicalString(),g.canonicalString()));for(const f of i){const g=U2(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(s.put(u)),c.push(o.put(g,GW))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),B.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ko(e).get(n).next(r=>r?(ye(r.userId===this.userId),ma(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?B.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ko(e).J({index:"userMutationsIndex",range:i},(s,a,l)=>{a.userId===this.userId&&(ye(a.batchId>=r),o=ma(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ko(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ko(e).U("userMutationsIndex",n).next(r=>r.map(i=>ma(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ng(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Jl(e).J({range:i},(s,a,l)=>{const[u,c,d]=s,f=Pi(c);if(u===this.userId&&n.path.isEqual(f))return Ko(e).get(d).next(g=>{if(!g)throw he();ye(g.userId===this.userId),o.push(ma(this.serializer,g))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(Se);const i=[];return n.forEach(o=>{const s=ng(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=Jl(e).J({range:a},(u,c,d)=>{const[f,g,y]=u,_=Pi(g);f===this.userId&&o.path.isEqual(_)?r=r.add(y):d.done()});i.push(l)}),B.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=ng(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Qe(Se);return Jl(e).J({range:s},(l,u,c)=>{const[d,f,g]=l,y=Pi(f);d===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):c.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(Ko(e).get(o).next(s=>{if(s===null)throw he();ye(s.userId===this.userId),r.push(ma(this.serializer,s))}))}),B.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return VF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),B.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Jl(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const l=Pi(o[1]);i.push(l)}else a.done()}).next(()=>{ye(i.length===0)})})}containsKey(e,n){return FF(e,this.userId,n)}Nn(e){return UF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function FF(t,e,n){const r=ng(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Jl(t).J({range:o,H:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(s=!0),u.done()}).next(()=>s)}function Ko(t){return en(t,"mutations")}function Jl(t){return en(t,"documentMutations")}function UF(t){return en(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new tl(0)}static kn(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new tl(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ve.fromTimestamp(new wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Vl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return Vl(e).J((s,a)=>{const l=of(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,o.push(this.removeTargetData(e,l)))}).next(()=>B.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Vl(e).J((r,i)=>{const o=of(i);n(o)})}qn(e){return y1(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}Qn(e,n){return y1(e).put("targetGlobalKey",n)}Kn(e,n){return Vl(e).put(DF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ya(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Vl(e).J({range:i,index:"queryTargetsIndex"},(s,a,l)=>{const u=of(a);lp(n,u.target)&&(o=u,l.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=rs(e);return n.forEach(s=>{const a=Kn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),B.waitFor(i)}removeMatchingKeys(e,n,r){const i=rs(e);return B.forEach(n,o=>{const s=Kn(o.path);return B.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=rs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=rs(e);let o=Ae();return i.J({range:r,H:!0},(s,a,l)=>{const u=Pi(s[1]),c=new ae(u);o=o.add(c)}).next(()=>o)}containsKey(e,n){const r=Kn(n.path),i=IDBKeyRange.bound([r],[O2(r)],!1,!0);let o=0;return rs(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],l,u)=>{s!==0&&(o++,u.done())}).next(()=>o>0)}ot(e,n){return Vl(e).get(n).next(r=>r?of(r):null)}}function Vl(t){return en(t,"targets")}function y1(t){return en(t,"targetGlobal")}function rs(t){return en(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class aK{constructor(e){this.Un=e,this.buffer=new Qe(v1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();v1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Us(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Fs(n)}await this.Hn(3e5)})}}class uK{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(lr.oe);const r=new aK(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(g1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Gl()<=Re.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}function cK(t,e){return new uK(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(e,n){this.db=e,this.garbageCollector=cK(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return vm(e,r)}removeReference(e,n,r){return vm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return vm(e,n)}nr(e,n){return function(i,o){let s=!1;return UF(i).Y(a=>FF(i,a,o).next(l=>(l&&(s=!0),B.resolve(!l)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.tr(e,(s,a)=>{if(a<=n){const l=this.nr(e,s).next(u=>{if(!u)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ve.min()),rs(e).delete(function(d){return[0,Kn(d.path)]}(s))))});i.push(l)}}).next(()=>B.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return vm(e,n)}tr(e,n){const r=rs(e);let i,o=lr.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:u})=>{s===0?(o!==lr.oe&&n(new ae(Pi(i)),o),o=u,i=l):o=lr.oe}).next(()=>{o!==lr.oe&&n(new ae(Pi(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vm(t,e){return rs(t).put(function(r,i){return{targetId:0,path:Kn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ra(e).put(r)}removeEntry(e,n,r){return ra(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Hg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=ht.newInvalidDocument(n);return ra(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kd(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:ht.newInvalidDocument(n)};return ra(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kd(n))},(i,o)=>{r={document:this.ir(n,o),size:Kg(o)}}).next(()=>r)}getEntries(e,n){let r=cr();return this._r(e,n,(i,o)=>{const s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=cr(),i=new ot(ae.comparator);return this._r(e,n,(o,s)=>{const a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Kg(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return B.resolve();let i=new Qe(b1);n.forEach(l=>i=i.add(l));const o=IDBKeyRange.bound(kd(i.first()),kd(i.last())),s=i.getIterator();let a=s.getNext();return ra(e).J({index:"documentKeyIndex",range:o},(l,u,c)=>{const d=ae.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&b1(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,u),a=s.hasNext()?s.getNext():null),a?c.$(kd(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Hg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ra(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{o==null||o.incrementDocumentReadCount(u.length);let c=cr();for(const d of u){const f=this.ir(ae.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(cp(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let o=cr();const s=w1(n,r),a=w1(n,Ar.max());return ra(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,u,c)=>{const d=this.ir(ae.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);o=o.insert(d.key,d),o.size===i&&c.done()}).next(()=>o)}newChangeBuffer(e){return new hK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return _1(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}rr(e,n){return _1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=Y9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ve.min())))return r}return ht.newInvalidDocument(e)}}function jF(t){return new fK(t)}class hK extends BF{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Bs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Qe((o,s)=>Se(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){const l=o1(this.cr.serializer,s);i=i.add(o.path.popLast());const u=Kg(l);r+=u-a.size,n.push(this.cr.addEntry(e,o,l))}else if(r-=a.size,this.trackRemovals){const l=o1(this.cr.serializer,s.convertToNoDocument(ve.min()));n.push(this.cr.addEntry(e,o,l))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),B.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function _1(t){return en(t,"remoteDocumentGlobal")}function ra(t){return en(t,"remoteDocumentsV14")}function kd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function w1(t,e){const n=e.documentKey.path.toArray();return[t,Hg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function b1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Se(n[o],r[o]),i)return i;return i=Se(n.length,r.length),i||(i=Se(n[n.length-2],r[r.length-2]),i||Se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bf(r.mutation,i,ur.empty(),wt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const i=Ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=nf();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=cr();const s=wf(),a=function(){return wf()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ko)?o=o.insert(u.key,u):c!==void 0?(s.set(u.key,c.mutation.getFieldMask()),bf(c.mutation,u,c.mutation.getFieldMask(),wt.now())):s.set(u.key,ur.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,c)=>s.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new pK(c,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=wf();let i=new ot((s,a)=>s-a),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ur.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||Ae()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=lF();c.forEach(f=>{if(!o.has(f)){const g=mF(n.get(f),r.get(f));g!==null&&d.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(Ci());let a=-1,l=o;return s.next(u=>B.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(c)?B.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ae())).next(c=>({batchId:a,changes:aF(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=nf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=nf();return this.indexManager.getCollectionParents(e,o).next(a=>B.forEach(a,l=>{const u=function(d,f){return new No(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,ht.newInvalidDocument(c)))});let a=nf();return s.forEach((l,u)=>{const c=o.get(l);c!==void 0&&bf(c.mutation,u,ur.empty(),wt.now()),cp(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vt(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:LS(i.bundledQuery),readTime:Vt(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(){this.overlays=new ot(ae.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ci();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Ci(),o=n.length+1,s=new ae(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ot((u,c)=>u-c);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=o.get(u.largestBatchId);c===null&&(c=Ci(),o=o.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ci(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new OS(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ae(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.Tr=new Qe(on.Er),this.dr=new Qe(on.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new on(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Oe([])),r=new on(n,e),i=new on(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Oe([])),r=new on(n,e),i=new on(n,e+1);let o=Ae();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new on(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qe(on.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new NS(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new on(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),i=new on(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(Se);return n.forEach(i=>{const o=new on(i,0),s=new on(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ae.isDocumentKey(o)||(o=o.child(""));const s=new on(new ae(o),0);let a=new Qe(Se);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},s),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{const o=new on(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new on(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e){this.Mr=e,this.docs=function(){return new ot(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ht.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr();const s=n.path,a=new ae(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||TS(D2(c),r)<=0||(i.has(c.key)||cp(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){he()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wK(this)}getSize(e){return B.resolve(this.size)}}class wK extends BF{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e){this.persistence=e,this.Nr=new Bs(n=>Ya(n),lp),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new FS,this.targetCount=0,this.kr=tl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lr(0),this.Kr=!1,this.Kr=!0,this.$r=new yK,this.referenceDelegate=e(this),this.Ur=new bK(this),this.indexManager=new iK,this.remoteDocumentCache=function(i){return new _K(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new MF(n),this.Gr=new mK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vK(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new TK(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TK extends $2{constructor(e){super(),this.currentSequenceNumber=e}}class Bv{constructor(e){this.persistence=e,this.Jr=new FS,this.Yr=null}static Zr(e){return new Bv(e)}get Xr(){if(this.Yr)return this.Yr;throw he()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=ae.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ve.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e){this.serializer=e}O(e,n,r,i){const o=new Mv("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DR,{unique:!0}),l.createObjectStore("documentMutations")}(e),T1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let s=B.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),T1(e)),s=s.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(l,u){return u.store("mutations").U().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DR,{unique:!0});const d=u.store("mutations"),f=c.map(g=>d.put(g));return B.waitFor(f)})}(e,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:r9});u.createIndex("collectionPathOverlayIndex",i9,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",o9,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:HW});u.createIndex("documentKeyIndex",WW),u.createIndex("collectionGroupIndex",KW)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:ZW}).createIndex("sequenceNumberIndex",e9,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:t9}).createIndex("documentKeyIndex",n9,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Kg(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>B.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>B.forEach(a,l=>{ye(l.userId===o.userId);const u=ma(this.serializer,l);return VF(e,o.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const l=new Oe(s),u=function(d){return[0,Kn(d)]}(l);o.push(n.get(u).next(c=>c?B.resolve():(d=>n.put({targetId:0,path:Kn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>B.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:XW});const r=n.store("collectionParents"),i=new VS,o=s=>{if(i.add(s)){const a=s.lastSegment(),l=s.popLast();return r.put({collectionId:a,parent:Kn(l)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{const l=new Oe(s);return o(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,l],u)=>{const c=Pi(a);return o(c.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const o=of(i),s=DF(this.serializer,o);return n.put(s)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new ae(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?ae.fromSegments(d.noDocument.path):d.unknownDocument?ae.fromSegments(d.unknownDocument.path):he()}(s).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(u))}).next(()=>B.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=jF(this.serializer),o=new qF(Bv.Zr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:Ae();ma(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),B.forEach(a,(l,u)=>{const c=new ln(u),d=Fv.lt(this.serializer,c),f=o.getIndexManager(c),g=Uv.lt(c,this.serializer,f,o.referenceDelegate);return new zF(i,g,d,f).recalculateAndSaveOverlaysForDocumentKeys(new tT(n,lr.oe),l).next()})})}}function T1(t){t.createObjectStore("targetDocuments",{keyPath:YW}).createIndex("documentTargetsIndex",QW,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JW,{unique:!0}),t.createObjectStore("targetGlobal")}const rw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class US{constructor(e,n,r,i,o,s,a,l,u,c,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=u,this.li=c,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!US.D())throw new ee(G.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dK(this,i),this.Ai=n+"main",this.serializer=new MF(l),this.Ri=new Di(this.Ai,this.hi,new EK(this.serializer)),this.$r=new X9,this.Ur=new sK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jF(this.serializer),this.Gr=new Q9,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,c===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(G.FAILED_PRECONDITION,rw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new lr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_m(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Us(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Od(e).get("owner").next(n=>B.resolve(this.vi(n)))}Ci(e){return _m(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=en(n,"clientMetadata");return r.U().next(i=>{const o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return B.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?B.resolve(!0):Od(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ee(G.FAILED_PRECONDITION,rw);return!1}}return!(!this.networkEnabled||!this.inForeground)||_m(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new tT(e,lr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_m(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Uv.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Fv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=function(l){return l===17?l9:l===16?a9:l===15?xS:l===14?z2:l===13?j2:l===12?s9:l===11?B2:void he()}(this.hi);let s;return this.Ri.runTransaction(e,i,o,a=>(s=new tT(a,this.Qr?this.Qr.next():lr.oe),n==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw $t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ee(G.FAILED_PRECONDITION,L2);return r(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Od(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(G.FAILED_PRECONDITION,rw)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Od(e).put("owner",n)}static D(){return Di.D()}bi(e){const n=Od(e);return n.get("owner").next(r=>this.vi(r)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||($t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;d2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Od(t){return en(t,"owner")}function _m(t){return en(t,"clientMetadata")}function BS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ae(),i=Ae();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new jS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return d2()?8:V2(It())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new xK;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Gl()<=Re.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Hl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Gl()<=Re.DEBUG&&te("QueryEngine","Query:",Hl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gl()<=Re.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Hl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):B.resolve())}Yi(e,n){if(KR(n))return B.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gg(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ae(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,s,l.readTime)?this.Yi(e,Gg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return KR(n)||i.isEqual(ve.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?B.resolve(null):(Gl()<=Re.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hl(n)),this.rs(e,s,n,M2(i,-1)).next(a=>a))})}ts(e,n){let r=new Qe(oF(e));return n.forEach((i,o)=>{cp(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Gl()<=Re.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Hl(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ot(Se),this._s=new Bs(o=>Ya(o),lp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HF(t,e,n,r){return new SK(t,e,n,r)}async function WF(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=Ae();for(const u of i){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of o){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})}function IK(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let g=B.resolve();return f.forEach(y=>{g=g.next(()=>c.getEntry(l,y)).next(_=>{const v=u.docVersions.get(y);ye(v!==null),_.version.compareTo(v)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),c.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KF(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AK(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(o,c.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(o,c.addedDocuments,d)));let g=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Nt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(d,g),function(_,v,b){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,g,c)&&a.push(n.Ur.updateTargetData(o,g))});let l=cr(),u=Ae();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(JF(o,s,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(ve.min())){const c=n.Ur.getLastRemoteSnapshotVersion(o).next(d=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return B.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.os=i,o))}function JF(t,e,n){let r=Ae(),i=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ve.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function PK(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qu(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new ro(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Xu(t,e,n){const r=ue(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Us(s))throw s;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Jg(t,e,n){const r=ue(t);let i=ve.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,c){const d=ue(l),f=d._s.get(c);return f!==void 0?B.resolve(d.os.get(f)):d.Ur.getTargetData(u,c)}(r,s,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ve.min(),n?o:Ae())).next(a=>(XF(r,iF(e),a),{documents:a,Ts:o})))}function YF(t,e){const n=ue(t),r=ue(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function QF(t,e){const n=ue(t),r=n.us.get(e)||ve.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,M2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XF(n,e,i),i))}function XF(t,e,n){let r=t.us.get(e)||ve.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}async function CK(t,e,n,r){const i=ue(t);let o=Ae(),s=cr();for(const u of n){const c=e.Es(u.metadata.name);u.document&&(o=o.add(c));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),s=s.insert(c,d)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await Qu(i,function(c){return Jn(Dc(Oe.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>JF(u,a,s).next(c=>(a.apply(u),c)).next(c=>i.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Ur.addMatchingKeys(u,o,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.Ps,c.Is)).next(()=>c.Ps)))}async function RK(t,e,n=Ae()){const r=await Qu(t,Jn(LS(e.bundledQuery))),i=ue(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Vt(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Gr.saveNamedQuery(o,e);const a=r.withResumeToken(Nt.EMPTY_BYTE_STRING,s);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(o,a).next(()=>i.Ur.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Ur.addMatchingKeys(o,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(o,e))})}function E1(t,e){return`firestore_clients_${t}_${e}`}function x1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iw(t,e){return`firestore_targets_${t}_${e}`}class Yg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new ee(i.error.code,i.error.message))),s?new Yg(e,n,i.state,o):($t("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tf{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new ee(r.error.code,r.error.message))),o?new Tf(e,r.state,i):($t("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=PS();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=F2(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Qg(e,o):($t("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zS{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new zS(n.clientId,n.onlineState):($t("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mT{constructor(){this.activeTargetIds=PS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ow{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ot(Se),this.started=!1,this.bs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=E1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new mT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(E1(this.persistenceKey,r));if(i){const o=Qg.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(iw(this.persistenceKey,e));if(i){const o=Tf.Rs(e,i);o&&(r=o.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return te("SharedClientState","READ",e,n),n}setItem(e,n){te("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(te("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(o){let s=lr.oe;if(o!=null)try{const a=JSON.parse(o);ye(typeof a=="number"),s=a}catch(a){$t("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==lr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Yg(this.currentUser,e,n,r),o=x1(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){const n=x1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=iw(this.persistenceKey,e),o=new Tf(e,n,r);this.setItem(i,o.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Qg.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Yg.Rs(new ln(o),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Tf.Rs(i,n)}Ls(e){return zS.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(l=>{i.has(l)||s.push(l)}),i.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=PS();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class ZF{constructor(){this.so=new mT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm=null;function sw(){return wm===null?wm=function(){return 268435456+Math.round(2147483648*Math.random())}():wm++,"0x"+wm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class MK extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=sw(),l=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,l,u,i).then(c=>(te("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Ui("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=kK[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=sw();return new Promise((s,a)=>{const l=new I2;l.setWithCredentials(!0),l.listenOnce(A2.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case eg.NO_ERROR:const c=l.getResponseJson();te(Cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(c)),s(c);break;case eg.TIMEOUT:te(Cn,`RPC '${e}' ${o} timed out`),a(new ee(G.DEADLINE_EXCEEDED,"Request time out"));break;case eg.HTTP_ERROR:const d=l.getStatus();if(te(Cn,`RPC '${e}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const y=function(v){const b=v.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(b)>=0?b:G.UNKNOWN}(g.status);a(new ee(y,g.message))}else a(new ee(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(G.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{te(Cn,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);te(Cn,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=sw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=R2(),a=C2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=o.join("");te(Cn,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=s.createWebChannel(c,l);let f=!1,g=!1;const y=new OK({Io:v=>{g?te(Cn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(f||(te(Cn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),te(Cn,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},To:()=>d.close()}),_=(v,b,T)=>{v.listen(b,x=>{try{T(x)}catch(C){setTimeout(()=>{throw C},0)}})};return _(d,tf.EventType.OPEN,()=>{g||(te(Cn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),_(d,tf.EventType.CLOSE,()=>{g||(g=!0,te(Cn,`RPC '${e}' stream ${i} transport closed`),y.So())}),_(d,tf.EventType.ERROR,v=>{g||(g=!0,Ui(Cn,`RPC '${e}' stream ${i} transport errored:`,v),y.So(new ee(G.UNAVAILABLE,"The operation could not be completed")))}),_(d,tf.EventType.MESSAGE,v=>{var b;if(!g){const T=v.data[0];ye(!!T);const x=T,C=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(C){te(Cn,`RPC '${e}' stream ${i} received error:`,C);const E=C.status;let A=function(R){const k=jt[R];if(k!==void 0)return vF(k)}(E),S=C.message;A===void 0&&(A=G.INTERNAL,S="Unknown error status: "+E+" with message "+C.message),g=!0,y.So(new ee(A,S)),d.close()}else te(Cn,`RPC '${e}' stream ${i} received:`,T),y.bo(T)}}),_(a,P2.STAT_EVENT,v=>{v.stat===Zb.PROXY?te(Cn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Zb.NOPROXY&&te(Cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof window<"u"?window:null}function ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){return new U9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?($t(n.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ee(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DK extends tU{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=z9(this.serializer,e),r=function(o){if(!("targetChange"in o))return ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ve.min():s.readTime?Vt(s.readTime):ve.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=cT(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=zg(l)?{documents:PF(o,l)}:{query:CF(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=TF(o,s.resumeToken);const u=lT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ve.min())>0){a.readTime=Yu(o,s.snapshotVersion.toTimestamp());const u=lT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=G9(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=cT(this.serializer),n.removeTarget=e,this.a_(n)}}class LK extends tU{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=q9(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=cT(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sh(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,uT(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(G.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,uT(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(G.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($t(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{js(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ue(l);u.L_.add(4),await Vc(u),u.q_.set("Unknown"),u.L_.delete(4),await mp(u)}(this))})}),this.q_=new VK(r,i)}}async function mp(t){if(js(t))for(const e of t.B_)await e(!0)}async function Vc(t){for(const e of t.B_)await e(!1)}function jv(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),WS(n)?HS(n):Uc(n).r_()&&GS(n,e))}function Zu(t,e){const n=ue(t),r=Uc(n);n.N_.delete(e),r.r_()&&nU(n,e),n.N_.size===0&&(r.r_()?r.o_():js(n)&&n.q_.set("Unknown"))}function GS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).A_(e)}function nU(t,e){t.Q_.xe(e),Uc(t).R_(e)}function HS(t){t.Q_=new L9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.q_.v_()}function WS(t){return js(t)&&!Uc(t).n_()&&t.N_.size>0}function js(t){return ue(t).L_.size===0}function rU(t){t.Q_=void 0}async function UK(t){t.q_.set("Online")}async function BK(t){t.N_.forEach((e,n)=>{GS(t,e)})}async function jK(t,e){rU(t),WS(t)?(t.q_.M_(e),HS(t)):t.q_.set("Unknown")}async function zK(t,e,n){if(t.q_.set("Online"),e instanceof bF&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xg(t,r)}else if(e instanceof sg?t.Q_.Ke(e):e instanceof wF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ve.min()))try{const r=await KF(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=o.N_.get(u);c&&o.N_.set(u,c.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const c=o.N_.get(l);if(!c)return;o.N_.set(l,c.withResumeToken(Nt.EMPTY_BYTE_STRING,c.snapshotVersion)),nU(o,l);const d=new ro(c.target,l,u,c.sequenceNumber);GS(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Xg(t,r)}}async function Xg(t,e,n){if(!Us(e))throw e;t.L_.add(1),await Vc(t),t.q_.set("Offline"),n||(n=()=>KF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mp(t)})}function iU(t,e){return e().catch(n=>Xg(t,n,e))}async function Fc(t){const e=ue(t),n=ks(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qK(e);)try{const i=await PK(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,GK(e,i)}catch(i){await Xg(e,i)}oU(e)&&sU(e)}function qK(t){return js(t)&&t.O_.length<10}function GK(t,e){t.O_.push(e);const n=ks(t);n.r_()&&n.V_&&n.m_(e.mutations)}function oU(t){return js(t)&&!ks(t).n_()&&t.O_.length>0}function sU(t){ks(t).start()}async function HK(t){ks(t).p_()}async function WK(t){const e=ks(t);for(const n of t.O_)e.m_(n.mutations)}async function KK(t,e,n){const r=t.O_.shift(),i=kS.from(r,e,n);await iU(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Fc(t)}async function JK(t,e){e&&ks(t).V_&&await async function(r,i){if(function(s){return yF(s)&&s!==G.ABORTED}(i.code)){const o=r.O_.shift();ks(r).s_(),await iU(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Fc(r)}}(t,e),oU(t)&&sU(t)}async function I1(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=js(n);n.L_.add(3),await Vc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mp(n)}async function gT(t,e){const n=ue(t);e?(n.L_.delete(2),await mp(n)):e||(n.L_.add(2),await Vc(n),n.q_.set("Unknown"))}function Uc(t){return t.K_||(t.K_=function(n,r,i){const o=ue(n);return o.w_(),new DK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:UK.bind(null,t),Ro:BK.bind(null,t),mo:jK.bind(null,t),d_:zK.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),WS(t)?HS(t):t.q_.set("Unknown")):(await t.K_.stop(),rU(t))})),t.K_}function ks(t){return t.U_||(t.U_=function(n,r,i){const o=ue(n);return o.w_(),new LK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HK.bind(null,t),mo:JK.bind(null,t),f_:WK.bind(null,t),g_:KK.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Fc(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new KS(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bc(t,e){if($t("AsyncQueue",`${e}: ${t}`),Us(t))return new ee(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=nf(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new xu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.W_=new ot(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):he():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ec{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ec(e,n,xu.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QK{constructor(){this.queries=P1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),o=i.queries;i.queries=P1(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ee(G.ABORTED,"Firestore shutting down"))}}function P1(){return new Bs(t=>rF(t),up)}async function JS(t,e){const n=ue(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new YK,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Bc(s,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&QS(n)}async function YS(t,e){const n=ue(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XK(t,e){const n=ue(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&QS(n)}function ZK(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function QS(t){t.Y_.forEach(e=>{e.next()})}var yT,C1;(C1=yT||(yT={})).ea="default",C1.Cache="cache";class XS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yT.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.serializer=e}Es(e){return Li(this.serializer,e)}ds(e){return e.metadata.exists?AF(this.serializer,e.document,!1):ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Vt(e)}}class t8{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aU(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Oe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new R1(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Es(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Ae()).add(o);n.set(s,a)}}return n}async complete(){const e=await CK(this.localStore,new R1(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await RK(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function aU(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.key=e}}class uU{constructor(e){this.key=e}}class cU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=oF(e),this.Ra=new xu(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new A1,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),g=cp(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;f&&g?f.data.isEqual(g.data)?y!==_&&(r.track({type:3,doc:g}),v=!0):this.ga(f,g)||(r.track({type:2,doc:g}),v=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),v=!0):f&&!g&&(r.track({type:1,doc:f}),v=!0,(l||u)&&(a=!0)),v&&(g?(s=s.add(g),o=_?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((c,d)=>function(g,y){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return _(g)-_(y)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new ec(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new A1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uU(r))}),this.da.forEach(r=>{e.has(r)||n.push(new lU(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ec.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r8{constructor(e){this.key=e,this.va=!1}}class i8{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Bs(a=>rF(a),up),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(ae.comparator),this.Na=new Map,this.La=new FS,this.Ba={},this.ka=new Map,this.qa=tl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function o8(t,e,n=!0){const r=zv(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await dU(r,e,n,!0),i}async function s8(t,e){const n=zv(t);await dU(n,e,!0,!1)}async function dU(t,e,n,r){const i=await Qu(t.localStore,Jn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await ZS(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&jv(t.remoteStore,i),a}async function ZS(t,e,n,r,i){t.Ka=(d,f,g)=>async function(_,v,b,T){let x=v.view.ma(b);x.ns&&(x=await Jg(_.localStore,v.query,!1).then(({documents:S})=>v.view.ma(S,x)));const C=T&&T.targetChanges.get(v.targetId),E=T&&T.targetMismatches.get(v.targetId)!=null,A=v.view.applyChanges(x,_.isPrimaryClient,C,E);return vT(_,v.targetId,A.wa),A.snapshot}(t,d,f,g);const o=await Jg(t.localStore,e,!0),s=new cU(e,o.Ts),a=s.ma(o.documents),l=hp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);vT(t,n,u.wa);const c=new n8(e,n,s);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function a8(t,e,n){const r=ue(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!up(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zu(r.remoteStore,i.targetId),tc(r,i.targetId)}).catch(Fs)):(tc(r,i.targetId),await Xu(r.localStore,i.targetId,!0))}async function l8(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zu(n.remoteStore,r.targetId))}async function u8(t,e,n){const r=rI(t);try{const i=await function(s,a){const l=ue(s),u=wt.now(),c=a.reduce((g,y)=>g.add(y.key),Ae());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=cr(),_=Ae();return l.cs.getEntries(g,c).next(v=>{y=v,y.forEach((b,T)=>{T.isValidDocument()||(_=_.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(v=>{d=v;const b=[];for(const T of a){const x=O9(T,d.get(T.key).overlayedDocument);x!=null&&b.push(new ko(T.key,x,K2(x.value.mapValue),vt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,b,a)}).next(v=>{f=v;const b=v.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(g,v.batchId,b)})}).then(()=>({batchId:f.batchId,changes:aF(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new ot(Se)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await Oo(r,i.changes),await Fc(r.remoteStore)}catch(i){const o=Bc(i,"Failed to persist write");n.reject(o)}}async function fU(t,e){const n=ue(t);try{const r=await AK(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ye(s.va):i.removedDocuments.size>0&&(ye(s.va),s.va=!1))}),await Oo(n,r,e)}catch(r){await Fs(r)}}function N1(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=ue(s);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&QS(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c8(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new ot(ae.comparator);s=s.insert(o,ht.newNoDocument(o,ve.min()));const a=Ae().add(o),l=new fp(ve.min(),new Map,new ot(Se),s,a);await fU(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),nI(r)}else await Xu(r.localStore,e,!1).then(()=>tc(r,e,n)).catch(Fs)}async function d8(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await IK(n.localStore,e);tI(n,r,null),eI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oo(n,i)}catch(i){await Fs(i)}}async function f8(t,e,n){const r=ue(t);try{const i=await function(s,a){const l=ue(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ye(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);tI(r,e,n),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oo(r,i)}catch(i){await Fs(i)}}async function h8(t,e){const n=ue(t);js(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const a=ue(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=Bc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function eI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function tI(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hU(t,r)})}function hU(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zu(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),nI(t))}function vT(t,e,n){for(const r of n)r instanceof lU?(t.La.addReference(r.key,e),p8(t,r)):r instanceof uU?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hU(t,r.key)):he()}function p8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),nI(t))}function nI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Oe.fromString(e)),r=t.qa.next();t.Na.set(r,new r8(n)),t.Oa=t.Oa.insert(n,r),jv(t.remoteStore,new ro(Jn(Dc(n.path)),r,"TargetPurposeLimboResolution",lr.oe))}}async function Oo(t,e,n){const r=ue(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=jS.Wi(l.targetId,u);o.push(d)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,u){const c=ue(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(u,f=>B.forEach(f.$i,g=>c.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>B.forEach(f.Ui,g=>c.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!Us(d))throw d;te("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=c.os.get(f),y=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(y);c.os=c.os.insert(f,_)}}}(r.localStore,o))}async function m8(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await WF(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(G.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oo(n,r.hs)}}function g8(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let i=Ae();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}async function y8(t,e){const n=ue(t),r=await Jg(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&vT(n,e.targetId,i.wa),i}async function v8(t,e){const n=ue(t);return QF(n.localStore,e).then(r=>Oo(n,r))}async function _8(t,e,n,r){const i=ue(t),o=await function(a,l){const u=ue(a),c=ue(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Mn(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):B.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?await Fc(i.remoteStore):n==="acknowledged"||n==="rejected"?(tI(i,e,r||null),eI(i,e),function(a,l){ue(ue(a).mutationQueue).On(l)}(i.localStore,e)):he(),await Oo(i,o)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function w8(t,e){const n=ue(t);if(zv(n),rI(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await k1(n,r.toArray());n.Qa=!0,await gT(n.remoteStore,!0);for(const o of i)jv(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(tc(n,s),Xu(n.localStore,s,!0))),Zu(n.remoteStore,s)}),await i,await k1(n,r),function(s){const a=ue(s);a.Na.forEach((l,u)=>{Zu(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new ot(ae.comparator)}(n),n.Qa=!1,await gT(n.remoteStore,!1)}}async function k1(t,e,n){const r=ue(t),i=[],o=[];for(const s of e){let a;const l=r.Ma.get(s);if(l&&l.length!==0){a=await Qu(r.localStore,Jn(l[0]));for(const u of l){const c=r.Fa.get(u),d=await y8(r,c);d.snapshot&&o.push(d.snapshot)}}else{const u=await YF(r.localStore,s);a=await Qu(r.localStore,u),await ZS(r,pU(u),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i}function pU(t){return nF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function b8(t){return function(n){return ue(ue(n).persistence).Qi()}(ue(t).localStore)}async function T8(t,e,n,r){const i=ue(t);if(i.Qa)return void te("SyncEngine","Ignoring unexpected query state notification.");const o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await QF(i.localStore,iF(o[0])),a=fp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Nt.EMPTY_BYTE_STRING);await Oo(i,s,a);break}case"rejected":await Xu(i.localStore,e,!0),tc(i,e,r);break;default:he()}}async function E8(t,e,n){const r=zv(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){te("SyncEngine","Adding an already active target "+i);continue}const o=await YF(r.localStore,i),s=await Qu(r.localStore,o);await ZS(r,pU(o),s.targetId,!1,s.resumeToken),jv(r.remoteStore,s)}for(const i of n)r.Ma.has(i)&&await Xu(r.localStore,i,!1).then(()=>{Zu(r.remoteStore,i),tc(r,i)}).catch(Fs)}}function zv(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c8.bind(null,e),e.Ca.d_=XK.bind(null,e.eventManager),e.Ca.$a=ZK.bind(null,e.eventManager),e}function rI(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f8.bind(null,e),e}function x8(t,e,n){const r=ue(t);(async function(o,s,a){try{const l=await s.getMetadata();if(await function(g,y){const _=ue(g),v=Vt(y.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",b=>_.Gr.getBundleMetadata(b,y.id)).then(b=>!!b&&b.createTime.compareTo(v)>=0)}(o.localStore,l))return await s.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(aU(l));const u=new t8(l,o.localStore,s.serializer);let c=await s.Ua();for(;c;){const f=await u.la(c);f&&a._updateProgress(f),c=await s.Ua()}const d=await u.complete();return await Oo(o,d.Ia,void 0),await function(g,y){const _=ue(g);return _.persistence.runTransaction("Save bundle","readwrite",v=>_.Gr.saveBundleMetadata(v,y))}(o.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return Ui("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HF(this.persistence,new GF,e.initialUser,this.serializer)}Ga(e){return new qF(Bv.Zr,this.serializer)}Wa(e){return new ZF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class mU extends ah{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await rI(this.Ja.syncEngine),await Fc(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return HF(this.persistence,new GF,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lK(r,e.asyncQueue,n)}Ha(e,n){const r=new zW(n,this.persistence);return new jW(e.asyncQueue,r)}Ga(e){const n=BS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new US(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,eU(),ag(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new ZF}}class S8 extends mU{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof ow&&(this.sharedClientState.syncEngine={no:_8.bind(null,n),ro:T8.bind(null,n),io:E8.bind(null,n),Qi:b8.bind(null,n),eo:v8.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await w8(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=eU();if(!ow.D(n))throw new ee(G.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ow(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class lh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m8.bind(null,this.syncEngine),await gT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QK}()}createDatastore(e){const n=pp(e.databaseInfo.databaseId),r=function(o){return new MK(o)}(e.databaseInfo);return function(o,s,a,l){return new $K(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new FK(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>N1(this.syncEngine,n,0),function(){return S1.D()?new S1:new NK}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,c){const d=new i8(i,o,s,a,l,u);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ue(i);te("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Vc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lh.provider={build:()=>new lh};function O1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new bn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new e8(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const s=ue(i),a={documents:o.map(d=>oh(s.serializer,d))},l=await s.Lo("BatchGetDocuments",s.serializer.databaseId,Oe.emptyPath(),a,o.length),u=new Map;l.forEach(d=>{const f=j9(s.serializer,d);u.set(f.key.toString(),f)});const c=[];return o.forEach(d=>{const f=u.get(d.toString());ye(!!f),c.push(f)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ae.fromPath(r);this.mutations.push(new RS(i,this.precondition(i)))}),await async function(r,i){const o=ue(r),s={writes:i.map(a=>sh(o.serializer,a))};await o.Mo("Commit",o.serializer.databaseId,Oe.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw he();n=ve.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ve.min())?vt.exists(!1):vt.updateTime(n):vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ve.min()))throw new ee(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vt.updateTime(n)}return vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new qS(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new A8(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!ap(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!yF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=k2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{te("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function aw(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function M1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iI(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>I1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>I1(e.remoteStore,i)),t._onlineComponents=e}async function iI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await aw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await aw(t,new ah)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await aw(t,new ah);return t._offlineComponents}async function Gv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await M1(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await M1(t,new lh))),t._onlineComponents}function gU(t){return iI(t).then(e=>e.persistence)}function oI(t){return iI(t).then(e=>e.localStore)}function yU(t){return Gv(t).then(e=>e.remoteStore)}function sI(t){return Gv(t).then(e=>e.syncEngine)}function R8(t){return Gv(t).then(e=>e.datastore)}async function nc(t){const e=await Gv(t),n=e.eventManager;return n.onListen=o8.bind(null,e.syncEngine),n.onUnlisten=a8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l8.bind(null,e.syncEngine),n}function N8(t){return t.asyncQueue.enqueue(async()=>{const e=await gU(t),n=await yU(t);return e.setNetworkEnabled(!0),function(i){const o=ue(i);return o.L_.delete(0),mp(o)}(n)})}function k8(t){return t.asyncQueue.enqueue(async()=>{const e=await gU(t),n=await yU(t);return e.setNetworkEnabled(!1),async function(i){const o=ue(i);o.L_.add(0),await Vc(o),o.q_.set("Offline")}(n)})}function O8(t,e){const n=new bn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const a=await function(u,c){const d=ue(u);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,c))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new ee(G.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Bc(a,`Failed to get document '${o} from cache`);s.reject(l)}}(await oI(t),e,n)),n.promise}function vU(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const c=new qv({next:f=>{c.Za(),s.enqueueAndForget(()=>YS(o,d));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new ee(G.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new ee(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new XS(Dc(a.path),c,{includeMetadataChanges:!0,_a:!0});return JS(o,d)}(await nc(t),t.asyncQueue,e,n,r)),r.promise}function M8(t,e){const n=new bn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const a=await Jg(i,o,!0),l=new cU(o,a.Ts),u=l.ma(a.documents),c=l.applyChanges(u,!1);s.resolve(c.snapshot)}catch(a){const l=Bc(a,`Failed to execute query '${o} against cache`);s.reject(l)}}(await oI(t),e,n)),n.promise}function _U(t,e,n={}){const r=new bn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const c=new qv({next:f=>{c.Za(),s.enqueueAndForget(()=>YS(o,d)),f.fromCache&&l.source==="server"?u.reject(new ee(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new XS(a,c,{includeMetadataChanges:!0,_a:!0});return JS(o,d)}(await nc(t),t.asyncQueue,e,n,r)),r.promise}function D8(t,e){const n=new qv(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,o){ue(i).Y_.add(o),o.next()}(await nc(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,o){ue(i).Y_.delete(o)}(await nc(t),n))}}function L8(t,e,n,r){const i=function(s,a){let l;return l=typeof s=="string"?_F().encode(s):s,function(c,d){return new I8(c,d)}(function(c,d){if(c instanceof Uint8Array)return O1(c,d);if(c instanceof ArrayBuffer)return O1(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,pp(e));t.asyncQueue.enqueueAndForget(async()=>{x8(await sI(t),i,r)})}function $8(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const o=ue(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(await oI(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e,n){if(!n)throw new ee(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bU(t,e,n,r){if(e===!0&&r===!0)throw new ee(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function L1(t){if(!ae.isDocumentKey(t))throw new ee(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $1(t){if(ae.isDocumentKey(t))throw new ee(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function je(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hv(t);throw new ee(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TU(t,e){if(e<=0)throw new ee(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NW;switch(r.type){case"firstParty":return new DW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=D1.get(n);r&&(te("ComponentProvider","Removing Datastore"),D1.delete(n),r.terminate())}(this),Promise.resolve()}}function V8(t,e,n,r={}){var i;const o=(t=je(t,gp))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ln.MOCK_USER;else{a=QH(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ee(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(u)}t._authCredentials=new kW(new N2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qn=class EU{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new EU(this.firestore,e,this._query)}},xt=class xU{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xU(this.firestore,e,this._key)}},ws=class SU extends Qn{constructor(e,n,r){super(e,n,Dc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ae(e))}withConverter(e){return new SU(this.firestore,e,this._path)}};function IU(t,e,...n){if(t=_e(t),aI("collection","path",e),t instanceof gp){const r=Oe.fromString(e,...n);return $1(r),new ws(t,null,r)}{if(!(t instanceof xt||t instanceof ws))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return $1(r),new ws(t.firestore,null,r)}}function F8(t,e){if(t=je(t,gp),aI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qn(t,null,function(r){return new No(Oe.emptyPath(),r)}(e))}function Zg(t,e,...n){if(t=_e(t),arguments.length===1&&(e=k2.newId()),aI("doc","path",e),t instanceof gp){const r=Oe.fromString(e,...n);return L1(r),new xt(t,null,new ae(r))}{if(!(t instanceof xt||t instanceof ws))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return L1(r),new xt(t.firestore,t instanceof ws?t.converter:null,new ae(r))}}function AU(t,e){return t=_e(t),e=_e(e),(t instanceof xt||t instanceof ws)&&(e instanceof xt||e instanceof ws)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function PU(t,e){return t=_e(t),e=_e(e),t instanceof Qn&&e instanceof Qn&&t.firestore===e.firestore&&up(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qS(this,"async_queue_retry"),this.Vu=()=>{const r=ag();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ag();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ag();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Us(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw $t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=KS.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&he()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function _T(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class U8{constructor(){this._progressObserver={},this._taskCompletionResolver=new bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=-1;let Ft=class extends gp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new F1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F1(e),this._firestoreClient=void 0,await e}}};function Fn(t){if(t._terminated)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CU(t),t._firestoreClient}function CU(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,c){return new d9(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,wU(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new C8(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function j8(t,e){Ui("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return RU(t,lh.provider,{build:r=>new mU(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function z8(t){Ui("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();RU(t,lh.provider,{build:n=>new S8(n,e.cacheSizeBytes)})}function RU(t,e,n){if((t=je(t,Ft))._firestoreClient||t._terminated)throw new ee(G.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ee(G.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},CU(t)}function q8(t){if(t._initialized&&!t._terminated)throw new ee(G.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Di.D())return Promise.resolve();const i=r+"main";await Di.delete(i)}(BS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function G8(t){return function(n){const r=new bn;return n.asyncQueue.enqueueAndForget(async()=>h8(await sI(n),r)),r.promise}(Fn(t=je(t,Ft)))}function H8(t){return N8(Fn(t=je(t,Ft)))}function W8(t){return k8(Fn(t=je(t,Ft)))}function K8(t,e){const n=Fn(t=je(t,Ft)),r=new U8;return L8(n,t._databaseId,e,r),r}function J8(t,e){return $8(Fn(t=je(t,Ft)),e).then(n=>n?new Qn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ji(Nt.fromBase64String(e))}catch(n){throw new ee(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ji(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Os=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=/^__.*__$/;class Q8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lc(e,this.data,n,this.fieldTransforms)}}class NU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class Kv{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ey(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(kU(this.Cu)&&Y8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class X8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pp(e)}Qu(e,n,r,i=!1){return new Kv({Cu:e,methodName:n,qu:r,path:yt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _l(t){const e=t._freezeSettings(),n=pp(t._databaseId);return new X8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jv(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);mI("Data must be an object, but it was:",s,r);const a=DU(r,s);let l,u;if(o.merge)l=new ur(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const d of o.mergeFields){const f=wT(e,d,n);if(!s.contains(f))throw new ee(G.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$U(c,f)||c.push(f)}l=new ur(c),u=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=s.fieldTransforms;return new Q8(new vn(a),l,u)}class yp extends vl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}function OU(t,e,n){return new Kv({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uI extends vl{_toFieldTransform(e){return new dp(e.path,new Ku)}isEqual(e){return e instanceof uI}}class cI extends vl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=OU(this,e,!0),r=this.Ku.map(o=>wl(o,n)),i=new Qa(r);return new dp(e.path,i)}isEqual(e){return e instanceof cI&&Jf(this.Ku,e.Ku)}}class dI extends vl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=OU(this,e,!0),r=this.Ku.map(o=>wl(o,n)),i=new Xa(r);return new dp(e.path,i)}isEqual(e){return e instanceof dI&&Jf(this.Ku,e.Ku)}}class fI extends vl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Ju(e.serializer,cF(e.serializer,this.$u));return new dp(e.path,n)}isEqual(e){return e instanceof fI&&this.$u===e.$u}}function hI(t,e,n,r){const i=t.Qu(1,e,n);mI("Data must be an object, but it was:",i,r);const o=[],s=vn.empty();yl(r,(l,u)=>{const c=gI(e,l,n);u=_e(u);const d=i.Nu(c);if(u instanceof yp)o.push(c);else{const f=wl(u,d);f!=null&&(o.push(c),s.set(c,f))}});const a=new ur(o);return new NU(s,a,i.fieldTransforms)}function pI(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[wT(e,r,n)],l=[i];if(o.length%2!=0)throw new ee(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(wT(e,o[f])),l.push(o[f+1]);const u=[],c=vn.empty();for(let f=a.length-1;f>=0;--f)if(!$U(u,a[f])){const g=a[f];let y=l[f];y=_e(y);const _=s.Nu(g);if(y instanceof yp)u.push(g);else{const v=wl(y,_);v!=null&&(u.push(g),c.set(g,v))}}const d=new ur(u);return new NU(c,d,s.fieldTransforms)}function MU(t,e,n,r=!1){return wl(n,t.Qu(r?4:3,e))}function wl(t,e){if(LU(t=_e(t)))return mI("Unsupported field value:",e,t),DU(t,e);if(t instanceof vl)return function(r,i){if(!kU(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=wl(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Yu(i.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yu(i.serializer,o)}}if(r instanceof Wv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ji)return{bytesValue:TF(i.serializer,r._byteString)};if(r instanceof xt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:DS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lI)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return CS(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hv(r)}`)}(t,e)}function DU(t,e){const n={};return q2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(t,(r,i)=>{const o=wl(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function LU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Wv||t instanceof ji||t instanceof xt||t instanceof vl||t instanceof lI)}function mI(t,e,n){if(!LU(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wT(t,e,n){if((e=_e(e))instanceof Os)return e._internalPath;if(typeof e=="string")return gI(t,e);throw ey("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z8=new RegExp("[~\\*/\\[\\]]");function gI(t,e,n){if(e.search(Z8)>=0)throw ey(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Os(...e.split("."))._internalPath}catch{throw ey(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ey(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new ee(G.INVALID_ARGUMENT,a+t+l)}function $U(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e7 extends uh{data(){return super.data()}}function Yv(t,e){return typeof e=="string"?gI(t,e):e instanceof Os?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yI{}class vp extends yI{}function Jo(t,e,...n){let r=[];e instanceof yI&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof vI).length,a=o.filter(l=>l instanceof Qv).length;if(s>1||s>0&&a>0)throw new ee(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qv extends vp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qv(e,n,r)}_apply(e){const n=this._parse(e);return UU(e._query,n),new Qn(e.firestore,e.converter,aT(e._query,n))}_parse(e){const n=_l(e.firestore);return function(o,s,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ee(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){B1(d,c);const g=[];for(const y of d)g.push(U1(l,o,y));f={arrayValue:{values:g}}}else f=U1(l,o,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||B1(d,c),f=MU(a,s,d,c==="in"||c==="not-in");return Me.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function t7(t,e,n){const r=e,i=Yv("where",t);return Qv._create(i,r,n)}class vI extends yI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:We.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)UU(s,l),s=aT(s,l)}(e._query,n),new Qn(e.firestore,e.converter,aT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _I extends vp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _I(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ih(o,s)}(e._query,this._field,this._direction);return new Qn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new No(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function n7(t,e="asc"){const n=e,r=Yv("orderBy",t);return _I._create(r,n)}class Xv extends vp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xv(e,n,r)}_apply(e){return new Qn(e.firestore,e.converter,Gg(e._query,this._limit,this._limitType))}}function r7(t){return TU("limit",t),Xv._create("limit",t,"F")}function i7(t){return TU("limitToLast",t),Xv._create("limitToLast",t,"L")}class Zv extends vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zv(e,n,r)}_apply(e){const n=FU(e,this.type,this._docOrFields,this._inclusive);return new Qn(e.firestore,e.converter,function(i,o){return new No(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}}function o7(...t){return Zv._create("startAt",t,!0)}function s7(...t){return Zv._create("startAfter",t,!1)}class e_ extends vp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new e_(e,n,r)}_apply(e){const n=FU(e,this.type,this._docOrFields,this._inclusive);return new Qn(e.firestore,e.converter,function(i,o){return new No(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}}function a7(...t){return e_._create("endBefore",t,!1)}function l7(...t){return e_._create("endAt",t,!0)}function FU(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof uh)return function(o,s,a,l,u){if(!l)throw new ee(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of Eu(o))if(d.field.isKeyField())c.push(Ja(s,l.key));else{const f=l.data.field(d.field);if(Dv(f))throw new ee(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new ee(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}c.push(f)}return new Ns(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_l(t.firestore);return function(s,a,l,u,c,d){const f=s.explicitOrderBy;if(c.length>f.length)throw new ee(G.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let y=0;y<c.length;y++){const _=c[y];if(f[y].field.isKeyField()){if(typeof _!="string")throw new ee(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!AS(s)&&_.indexOf("/")!==-1)throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const v=s.path.child(Oe.fromString(_));if(!ae.isDocumentKey(v))throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const b=new ae(v);g.push(Ja(a,b))}else{const v=MU(l,u,_);g.push(v)}}return new Ns(g,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function U1(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new ee(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AS(e)&&n.indexOf("/")!==-1)throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ae.isDocumentKey(r))throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ja(t,new ae(r))}if(n instanceof xt)return Ja(t,n._key);throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hv(n)}.`)}function B1(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UU(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wI{convertValue(e,n="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yl(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>mt(s.doubleValue));return new lI(o)}convertGeoPoint(e){return new Wv(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=SS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(th(e));default:return null}}convertTimestamp(e){const n=To(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);ye(OF(r));const i=new Cs(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(n)||$t(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class u7 extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Eo=class extends uh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ef=class extends Eo{data(e={}){return super.data(e)}},Ms=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ef(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Ef(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:c7(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function c7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function BU(t,e){return t instanceof Eo&&e instanceof Eo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ms&&e instanceof Ms&&t._firestore===e._firestore&&PU(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t){t=je(t,xt);const e=je(t.firestore,Ft);return vU(Fn(e),t._key).then(n=>bI(e,t,n))}class bl extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function f7(t){t=je(t,xt);const e=je(t.firestore,Ft),n=Fn(e),r=new bl(e);return O8(n,t._key).then(i=>new Eo(e,r,t._key,i,new xa(i!==null&&i.hasLocalMutations,!0),t.converter))}function h7(t){t=je(t,xt);const e=je(t.firestore,Ft);return vU(Fn(e),t._key,{source:"server"}).then(n=>bI(e,t,n))}function p7(t){t=je(t,Qn);const e=je(t.firestore,Ft),n=Fn(e),r=new bl(e);return VU(t._query),_U(n,t._query).then(i=>new Ms(e,r,t,i))}function m7(t){t=je(t,Qn);const e=je(t.firestore,Ft),n=Fn(e),r=new bl(e);return M8(n,t._query).then(i=>new Ms(e,r,t,i))}function g7(t){t=je(t,Qn);const e=je(t.firestore,Ft),n=Fn(e),r=new bl(e);return _U(n,t._query,{source:"server"}).then(i=>new Ms(e,r,t,i))}function j1(t,e,n){t=je(t,xt);const r=je(t.firestore,Ft),i=t_(t.converter,e,n);return _p(r,[Jv(_l(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vt.none())])}function z1(t,e,n,...r){t=je(t,xt);const i=je(t.firestore,Ft),o=_l(i);let s;return s=typeof(e=_e(e))=="string"||e instanceof Os?pI(o,"updateDoc",t._key,e,n,r):hI(o,"updateDoc",t._key,e),_p(i,[s.toMutation(t._key,vt.exists(!0))])}function y7(t){return _p(je(t.firestore,Ft),[new $c(t._key,vt.none())])}function v7(t,e){const n=je(t.firestore,Ft),r=Zg(t),i=t_(t.converter,e);return _p(n,[Jv(_l(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function jU(t,...e){var n,r,i;t=_e(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_T(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(_T(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof xt)u=je(t.firestore,Ft),c=Dc(t._key.path),l={next:d=>{e[s]&&e[s](bI(u,t,d))},error:e[s+1],complete:e[s+2]};else{const d=je(t,Qn);u=je(d.firestore,Ft),c=d._query;const f=new bl(u);l={next:g=>{e[s]&&e[s](new Ms(u,f,d,g))},error:e[s+1],complete:e[s+2]},VU(t._query)}return function(f,g,y,_){const v=new qv(_),b=new XS(g,v,y);return f.asyncQueue.enqueueAndForget(async()=>JS(await nc(f),b)),()=>{v.Za(),f.asyncQueue.enqueueAndForget(async()=>YS(await nc(f),b))}}(Fn(u),c,a,l)}function _7(t,e){return D8(Fn(t=je(t,Ft)),_T(e)?e:{next:e})}function _p(t,e){return function(r,i){const o=new bn;return r.asyncQueue.enqueueAndForget(async()=>u8(await sI(r),i,o)),o.promise}(Fn(t),e)}function bI(t,e,n){const r=n.docs.get(e._key),i=new bl(t);return new Eo(t,i,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b7=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_l(e)}set(e,n,r){this._verifyNotCommitted();const i=is(e,this._firestore),o=t_(i.converter,n,r),s=Jv(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,vt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=is(e,this._firestore);let s;return s=typeof(n=_e(n))=="string"||n instanceof Os?pI(this._dataReader,"WriteBatch.update",o._key,n,r,i):hI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=is(e,this._firestore);return this._mutations=this._mutations.concat(new $c(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function is(t,e){if((t=_e(t)).firestore!==e)throw new ee(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T7=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=_l(n)}get(n){const r=is(n,this._firestore),i=new u7(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return he();const s=o[0];if(s.isFoundDocument())return new uh(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new uh(this._firestore,i,r._key,null,r.converter);throw he()})}set(n,r,i){const o=is(n,this._firestore),s=t_(o.converter,r,i),a=Jv(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=is(n,this._firestore);let a;return a=typeof(r=_e(r))=="string"||r instanceof Os?pI(this._dataReader,"Transaction.update",s._key,r,i,o):hI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=is(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=is(e,this._firestore),r=new bl(this._firestore);return super.get(e).then(i=>new Eo(this._firestore,r,n._key,i._document,new xa(!1,!1),n.converter))}};function E7(t,e,n){t=je(t,Ft);const r=Object.assign(Object.assign({},w7),n);return function(o){if(o.maxAttempts<1)throw new ee(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const l=new bn;return o.asyncQueue.enqueueAndForget(async()=>{const u=await R8(o);new P8(o.asyncQueue,u,a,s,l).au()}),l.promise}(Fn(t),i=>e(new T7(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(){return new yp("deleteField")}function S7(){return new uI("serverTimestamp")}function I7(...t){return new cI("arrayUnion",t)}function A7(...t){return new dI("arrayRemove",t)}function P7(t){return new fI("increment",t)}(function(e,n=!0){(function(i){Mc=i})(Vs),Ir(new Vn("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ft(new OW(r.getProvider("auth-internal")),new $W(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ee(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(u.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Wn(kR,"4.7.3",e),Wn(kR,"4.7.3","esm2017")})();const C7="@firebase/firestore-compat",R7="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ee("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){if(typeof Uint8Array>"u")throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function G1(){if(!u9())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}let zU=class bT{constructor(e){this._delegate=e}static fromBase64String(e){return G1(),new bT(ji.fromBase64String(e))}static fromUint8Array(e){return q1(),new bT(ji.fromUint8Array(e))}toBase64(){return G1(),this._delegate.toBase64()}toUint8Array(){return q1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){return N7(t,["next","error","complete"])}function N7(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{enableIndexedDbPersistence(e,n){return j8(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return z8(e._delegate)}clearIndexedDbPersistence(e){return q8(e._delegate)}}class qU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ui("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){V8(this._delegate,e,n,r)}enableNetwork(){return H8(this._delegate)}disableNetwork(){return W8(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bU("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return G8(this._delegate)}onSnapshotsInSync(e){return _7(this._delegate,e)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rc(this,IU(this._delegate,e))}catch(n){throw qn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Br(this,Zg(this._delegate,e))}catch(n){throw qn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zn(this,F8(this._delegate,e))}catch(n){throw qn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return E7(this._delegate,n=>e(new GU(this,n)))}batch(){return Fn(this._delegate),new HU(new b7(this._delegate,e=>_p(this._delegate,e)))}loadBundle(e){return K8(this._delegate,e)}namedQuery(e){return J8(this._delegate,e).then(n=>n?new zn(this,n):null)}}class n_ extends wI{constructor(e){super(),this.firestore=e}convertBytes(e){return new zU(new ji(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Br.forKey(n,this.firestore,null)}}function O7(t){CW(t)}class GU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new n_(e)}get(e){const n=Sa(e);return this._delegate.get(n).then(r=>new ch(this._firestore,new Eo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Sa(e);return r?(TI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Sa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Sa(e);return this._delegate.delete(n),this}}class HU{constructor(e){this._delegate=e}set(e,n,r){const i=Sa(e);return r?(TI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Sa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Sa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class nl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Ef(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=nl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new nl(e,new n_(e),n),i.set(n,o)),o}}nl.INSTANCES=new WeakMap;class Br{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new n_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Br(n,new xt(n._delegate,r,new ae(e)))}static forKey(e,n,r){return new Br(n,new xt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rc(this.firestore,IU(this._delegate,e))}catch(n){throw qn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=_e(e),e instanceof xt?AU(this._delegate,e):!1}set(e,n){n=TI("DocumentReference.set",n);try{return n?j1(this._delegate,e,n):j1(this._delegate,e)}catch(r){throw qn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?z1(this._delegate,e):z1(this._delegate,e,n,...r)}catch(i){throw qn(i,"updateDoc()","DocumentReference.update()")}}delete(){return y7(this._delegate)}onSnapshot(...e){const n=WU(e),r=KU(e,i=>new ch(this.firestore,new Eo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=f7(this._delegate):(e==null?void 0:e.source)==="server"?n=h7(this._delegate):n=d7(this._delegate),n.then(r=>new ch(this.firestore,new Eo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Br(this.firestore,e?this._delegate.withConverter(nl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qn(t,e,n){return t.message=t.message.replace(e,n),t}function WU(t){for(const e of t)if(typeof e=="object"&&!TT(e))return e;return{}}function KU(t,e){var n,r;let i;return TT(t[0])?i=t[0]:TT(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class ch{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Br(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return BU(this._delegate,e._delegate)}}class dh extends ch{data(e){const n=this._delegate.data(e);return this._delegate._converter||RW(n!==void 0),n}}class zn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new n_(e)}where(e,n,r){try{return new zn(this.firestore,Jo(this._delegate,t7(e,n,r)))}catch(i){throw qn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new zn(this.firestore,Jo(this._delegate,n7(e,n)))}catch(r){throw qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zn(this.firestore,Jo(this._delegate,r7(e)))}catch(n){throw qn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new zn(this.firestore,Jo(this._delegate,i7(e)))}catch(n){throw qn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zn(this.firestore,Jo(this._delegate,o7(...e)))}catch(n){throw qn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zn(this.firestore,Jo(this._delegate,s7(...e)))}catch(n){throw qn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zn(this.firestore,Jo(this._delegate,a7(...e)))}catch(n){throw qn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zn(this.firestore,Jo(this._delegate,l7(...e)))}catch(n){throw qn(n,"endAt()","Query.endAt()")}}isEqual(e){return PU(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=m7(this._delegate):(e==null?void 0:e.source)==="server"?n=g7(this._delegate):n=p7(this._delegate),n.then(r=>new ET(this.firestore,new Ms(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=WU(e),r=KU(e,i=>new ET(this.firestore,new Ms(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jU(this._delegate,n,r)}withConverter(e){return new zn(this.firestore,e?this._delegate.withConverter(nl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class M7{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new dh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ET{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new zn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new M7(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new dh(this._firestore,r))})}isEqual(e){return BU(this._delegate,e._delegate)}}class rc extends zn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Br(this.firestore,e):null}doc(e){try{return e===void 0?new Br(this.firestore,Zg(this._delegate)):new Br(this.firestore,Zg(this._delegate,e))}catch(n){throw qn(n,"doc()","CollectionReference.doc()")}}add(e){return v7(this._delegate,e).then(n=>new Br(this.firestore,n))}isEqual(e){return AU(this._delegate,e._delegate)}withConverter(e){return new rc(this.firestore,e?this._delegate.withConverter(nl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sa(t){return je(t,xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(...e){this._delegate=new Os(...e)}static documentId(){return new EI(yt.keyField().canonicalString())}isEqual(e){return e=_e(e),e instanceof Os?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._delegate=e}static serverTimestamp(){const e=S7();return e._methodName="FieldValue.serverTimestamp",new va(e)}static delete(){const e=x7();return e._methodName="FieldValue.delete",new va(e)}static arrayUnion(...e){const n=I7(...e);return n._methodName="FieldValue.arrayUnion",new va(n)}static arrayRemove(...e){const n=A7(...e);return n._methodName="FieldValue.arrayRemove",new va(n)}static increment(e){const n=P7(e);return n._methodName="FieldValue.increment",new va(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7={Firestore:qU,GeoPoint:Wv,Timestamp:wt,Blob:zU,Transaction:GU,WriteBatch:HU,DocumentReference:Br,DocumentSnapshot:ch,Query:zn,QueryDocumentSnapshot:dh,QuerySnapshot:ET,CollectionReference:rc,FieldPath:EI,FieldValue:va,setLogLevel:O7,CACHE_SIZE_UNLIMITED:B8};function L7(t,e){t.INTERNAL.registerComponent(new Vn("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},D7)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){L7(t,(e,n)=>new qU(e,n,new k7)),t.registerVersion(C7,R7)}$7(gi);function xI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Md={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Fl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function JU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F7=V7,U7=JU,YU=new Gi("auth","Firebase",JU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new kv("@firebase/auth");function B7(t,...e){ty.logLevel<=Re.WARN&&ty.warn(`Auth (${Vs}): ${t}`,...e)}function lg(t,...e){ty.logLevel<=Re.ERROR&&ty.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw II(t,...e)}function Zt(t,...e){return II(t,...e)}function SI(t,e,n){const r=Object.assign(Object.assign({},U7()),{[e]:n});return new Gi("auth","Firebase",r).create(e,{appName:t.name})}function dn(t){return SI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&En(t,"argument-error"),SI(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function II(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YU.create(t,...e)}function ie(t,e,...n){if(!t)throw II(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lg(e),new Error(e)}function mi(t,e){t||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AI(){return H1()==="http:"||H1()==="https:"}function H1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AI()||u2()||"connection"in navigator)?navigator.onLine:!0}function z7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=XH()||gS()}get(){return j7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7=new wp(3e4,6e4);function Ot(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mt(t,e,n,r,i={}){return XU(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=kc(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return e6()||(u.referrerPolicy="no-referrer"),QU.fetch()(ZU(t,t.config.apiHost,n,a),u)})}async function XU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},q7),e);try{const i=new W7(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw sf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw sf(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw sf(t,"user-disabled",s);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw SI(t,c,u);En(t,c)}}catch(i){if(i instanceof Ln)throw i;En(t,"network-request-failed",{message:String(i)})}}async function Mo(t,e,n,r,i={}){const o=await Mt(t,e,n,r,i);return"mfaPendingCredential"in o&&En(t,"multi-factor-auth-required",{_serverResponse:o}),o}function ZU(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?PI(t.config,i):`${t.config.apiScheme}://${i}`}function H7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zt(this.auth,"network-request-failed")),G7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){return t!==void 0&&t.getResponse!==void 0}function K1(t){return t!==void 0&&t.enterprise!==void 0}class K7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return H7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J7(t){return(await Mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Y7(t,e){return Mt(t,"GET","/v2/recaptchaConfig",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(t,e){return Mt(t,"POST","/v1/accounts:delete",e)}async function X7(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function eB(t,e){return Mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Z7(t,e=!1){const n=_e(t),r=await n.getIdToken(e),i=r_(r);ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:xf(lw(i.auth_time)),issuedAtTime:xf(lw(i.iat)),expirationTime:xf(lw(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function lw(t){return Number(t)*1e3}function r_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lg("JWT malformed, contained fewer than 3 sections"),null;try{const i=o2(n);return i?JSON.parse(i):(lg("Failed to decode base64 JWT payload"),null)}catch(i){return lg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function J1(t){const e=r_(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&eJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xf(this.lastLoginAt),this.creationTime=xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await xo(t,eB(n,{idToken:r}));ie(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?tB(o.providerUserInfo):[],a=rJ(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xT(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function nJ(t){const e=_e(t);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tB(t){return t.map(e=>{var{providerId:n}=e,r=xI(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iJ(t,e){const n=await XU(t,{},async()=>{const r=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=ZU(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",QU.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oJ(t,e){return Mt(t,"POST","/v2/accounts:revokeToken",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=J1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await iJ(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Su;return r&&(ie(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ie(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ie(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Su,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class io{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=xI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xT(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await xo(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Z7(this,e)}reload(){return nJ(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new io(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject(dn(this.auth));const e=await this.getIdToken();return await xo(this,Q7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,y=(s=n.photoURL)!==null&&s!==void 0?s:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:C,isAnonymous:E,providerData:A,stsTokenManager:S}=n;ie(x&&S,e,"internal-error");const P=Su.fromJSON(this.name,S);ie(typeof x=="string",e,"internal-error"),Yo(d,e.name),Yo(f,e.name),ie(typeof C=="boolean",e,"internal-error"),ie(typeof E=="boolean",e,"internal-error"),Yo(g,e.name),Yo(y,e.name),Yo(_,e.name),Yo(v,e.name),Yo(b,e.name),Yo(T,e.name);const R=new io({uid:x,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:E,photoURL:y,phoneNumber:g,tenantId:_,stsTokenManager:P,createdAt:b,lastLoginAt:T});return A&&Array.isArray(A)&&(R.providerData=A.map(k=>Object.assign({},k))),v&&(R._redirectEventId=v),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new Su;i.updateFromServerResponse(n);const o=new io({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hh(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ie(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?tB(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new Su;a.updateFromIdToken(r);const l=new io({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Map;function Er(t){mi(t instanceof Function,"Expected a class definition");let e=Y1.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nB.type="NONE";const ic=nB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){return`firebase:${t}:${e}:${n}`}class Iu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=$a(this.userKey,i.apiKey,o),this.fullPersistenceKey=$a("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?io._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Iu(Er(ic),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Er(ic);const s=$a(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(s);if(c){const d=io._fromJSON(e,c);u!==o&&(a=d),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Iu(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Iu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aB(e))return"Blackberry";if(lB(e))return"Webos";if(iB(e))return"Safari";if((e.includes("chrome/")||oB(e))&&!e.includes("edge/"))return"Chrome";if(bp(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rB(t=It()){return/firefox\//i.test(t)}function iB(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oB(t=It()){return/crios\//i.test(t)}function sB(t=It()){return/iemobile/i.test(t)}function bp(t=It()){return/android/i.test(t)}function aB(t=It()){return/blackberry/i.test(t)}function lB(t=It()){return/webos/i.test(t)}function Tp(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sJ(t=It()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function aJ(t=It()){var e;return Tp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lJ(){return c2()&&document.documentMode===10}function uB(t=It()){return Tp(t)||bp(t)||lB(t)||aB(t)||/windows phone/i.test(t)||sB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t,e=[]){let n;switch(t){case"Browser":n=Q1(It());break;case"Worker":n=`${Q1(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cJ(t,e={}){return Mt(t,"GET","/v2/passwordPolicy",Ot(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ=6;class fJ{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:dJ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X1(this),this.idTokenSubscription=new X1(this),this.beforeStateQueue=new uJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Er(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Iu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eB(this,{idToken:e}),r=await io._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Rt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=z7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rt(this.app))return Promise.reject(dn(this));const n=e?_e(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject(dn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rt(this.app)?Promise.reject(dn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cJ(this),n=new fJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oJ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Er(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await Iu.create(this,[Er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&B7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function kt(t){return _e(t)}class X1{constructor(e){this.auth=e,this.observer=null,this.addObserver=f2(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pJ(t){Ep=t}function CI(t){return Ep.loadJS(t)}function mJ(){return Ep.recaptchaV2Script}function gJ(){return Ep.recaptchaEnterpriseScript}function yJ(){return Ep.gapiScript}function dB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vJ="recaptcha-enterprise",_J="NO_RECAPTCHA";class wJ{constructor(e){this.type=vJ,this.auth=kt(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{Y7(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new K7(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;K1(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(_J)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&K1(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=gJ();l.length!==0&&(l+=a),CI(l).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}}async function Z1(t,e,n,r=!1){const i=new wJ(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function ph(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Z1(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Z1(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}function bJ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TJ(t,e,n){const r=kt(t);ie(r._canInitEmulator,r,"emulator-config-failed"),ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=fB(e),{host:s,port:a}=EJ(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||xJ()}function fB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EJ(t){const e=fB(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:eN(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:eN(s)}}}function eN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hB(t,e){return Mt(t,"POST","/v1/accounts:resetPassword",Ot(t,e))}async function SJ(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function IJ(t,e){return Mt(t,"POST","/v1/accounts:signUp",e)}async function AJ(t,e){return Mt(t,"POST","/v1/accounts:update",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PJ(t,e){return Mo(t,"POST","/v1/accounts:signInWithPassword",Ot(t,e))}async function i_(t,e){return Mt(t,"POST","/v1/accounts:sendOobCode",Ot(t,e))}async function CJ(t,e){return i_(t,e)}async function RJ(t,e){return i_(t,e)}async function NJ(t,e){return i_(t,e)}async function kJ(t,e){return i_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OJ(t,e){return Mo(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}async function MJ(t,e){return Mo(t,"POST","/v1/accounts:signInWithEmailLink",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends zc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new mh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,n,"signInWithPassword",PJ);case"emailLink":return OJ(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ph(e,r,"signUpPassword",IJ);case"emailLink":return MJ(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e){return Mo(t,"POST","/v1/accounts:signInWithIdp",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ="http://localhost";class zi extends zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=xI(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new zi(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ho(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}buildRequest(){const e={requestUri:DJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LJ(t,e){return Mt(t,"POST","/v1/accounts:sendVerificationCode",Ot(t,e))}async function $J(t,e){return Mo(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e))}async function VJ(t,e){const n=await Mo(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,e));if(n.temporaryProof)throw sf(t,"account-exists-with-different-credential",n);return n}const FJ={USER_NOT_FOUND:"user-not-found"};async function UJ(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Mo(t,"POST","/v1/accounts:signInWithPhoneNumber",Ot(t,n),FJ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends zc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Va({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Va({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return $J(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return VJ(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return UJ(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Va({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jJ(t){const e=uu(ef(t)).link,n=e?uu(ef(e)).deep_link_id:null,r=uu(ef(t)).deep_link_id;return(r?uu(ef(r)).link:null)||r||n||e||t}class o_{constructor(e){var n,r,i,o,s,a;const l=uu(ef(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=BJ((i=l.mode)!==null&&i!==void 0?i:null);ie(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=jJ(e);try{return new o_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,n){return mh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=o_.parseLink(n);return ie(r,"argument-error"),mh._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Do{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Au extends qc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ie("providerId"in n&&"signInMethod"in n,"argument-error"),zi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ie(e.idToken||e.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Au.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Au.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=e;if(!r&&!i&&!n&&!o||!a)return null;try{return new Au(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends qc{constructor(){super("facebook.com")}static credential(e){return zi._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zi._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends qc{constructor(){super("github.com")}static credential(e){return zi._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ="http://localhost";class oc extends zc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ho(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ho(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ho(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new oc(r,o)}static _create(e,n){return new oc(e,n)}buildRequest(){return{requestUri:zJ,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ="saml.";class ny extends Do{constructor(e){ie(e.startsWith(qJ),"argument-error"),super(e)}static credentialFromResult(e){return ny.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ny.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=oc.fromJSON(e);return ie(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return oc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends qc{constructor(){super("twitter.com")}static credential(e,n){return zi._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pB(t,e){return Mo(t,"POST","/v1/accounts:signUp",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await io._fromIdTokenResponse(e,r,i),s=tN(r);return new Jr({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tN(r);return new Jr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GJ(t){var e;if(Rt(t.app))return Promise.reject(dn(t));const n=kt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Jr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await pB(n,{returnSecureToken:!0}),i=await Jr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends Ln{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ry.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ry(e,n,r,i)}}function mB(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ry._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HJ(t,e){const n=_e(t);await s_(!0,n,e);const{providerUserInfo:r}=await X7(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=gB(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function RI(t,e,n=!1){const r=await xo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Jr._forOperation(t,"link",r)}async function s_(t,e,n){await hh(e);const r=gB(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ie(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(t,e,n=!1){const{auth:r}=t;if(Rt(r.app))return Promise.reject(dn(r));const i="reauthenticate";try{const o=await xo(t,mB(r,i,e,t),n);ie(o.idToken,r,"internal-error");const s=r_(o.idToken);ie(s,r,"internal-error");const{sub:a}=s;return ie(t.uid===a,r,"user-mismatch"),Jr._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&En(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(t,e,n=!1){if(Rt(t.app))return Promise.reject(dn(t));const r="signIn",i=await mB(t,r,e),o=await Jr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function a_(t,e){return vB(kt(t),e)}async function _B(t,e){const n=_e(t);return await s_(!1,n,e.providerId),RI(n,e)}async function wB(t,e){return yB(_e(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WJ(t,e){return Mo(t,"POST","/v1/accounts:signInWithCustomToken",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KJ(t,e){if(Rt(t.app))return Promise.reject(dn(t));const n=kt(t),r=await WJ(n,{token:e,returnSecureToken:!0}),i=await Jr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?NI._fromServerResponse(e,n):"totpInfo"in n?kI._fromServerResponse(e,n):En(e,"internal-error")}}class NI extends xp{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new NI(n)}}class kI extends xp{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new kI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e,n){var r;ie(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ie(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ie(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ie(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t){const e=kt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JJ(t,e,n){const r=kt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&l_(r,i,n),await ph(r,i,"getOobCode",RJ)}async function YJ(t,e,n){await hB(_e(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}async function QJ(t,e){await AJ(_e(t),{oobCode:e})}async function bB(t,e){const n=_e(t),r=await hB(n,{oobCode:e}),i=r.requestType;switch(ie(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(r.mfaInfo,n,"internal-error");default:ie(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=xp._fromServerResponse(kt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function XJ(t,e){const{data:n}=await bB(_e(t),e);return n.email}async function ZJ(t,e,n){if(Rt(t.app))return Promise.reject(dn(t));const r=kt(t),s=await ph(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pB).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&OI(t),l}),a=await Jr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function eY(t,e,n){return Rt(t.app)?Promise.reject(dn(t)):a_(_e(t),zs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tY(t,e,n){const r=kt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){ie(a.handleCodeInApp,r,"argument-error"),a&&l_(r,s,a)}o(i,n),await ph(r,i,"getOobCode",NJ)}function nY(t,e){const n=o_.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function rY(t,e,n){if(Rt(t.app))return Promise.reject(dn(t));const r=_e(t),i=zs.credentialWithLink(e,n||fh());return ie(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),a_(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iY(t,e){return Mt(t,"POST","/v1/accounts:createAuthUri",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oY(t,e){const n=AI()?fh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await iY(_e(t),r);return i||[]}async function sY(t,e){const n=_e(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&l_(n.auth,i,e);const{email:o}=await CJ(n.auth,i);o!==t.email&&await t.reload()}async function aY(t,e,n){const r=_e(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&l_(r.auth,o,n);const{email:s}=await kJ(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lY(t,e){return Mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uY(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await xo(r,lY(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function cY(t,e){const n=_e(t);return Rt(n.auth.app)?Promise.reject(dn(n.auth)):TB(n,e,null)}function dY(t,e){return TB(_e(t),null,e)}async function TB(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await xo(t,SJ(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const s=(n=(e=r_(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(s){const a=s!=="anonymous"&&s!=="custom"?s:null;return new Pu(o,a)}}if(!r)return null;switch(r){case"facebook.com":return new hY(o,i);case"github.com":return new pY(o,i);case"google.com":return new mY(o,i);case"twitter.com":return new gY(o,i,t.screenName||null);case"custom":case"anonymous":return new Pu(o,null);default:return new Pu(o,r,i)}}class Pu{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class EB extends Pu{constructor(e,n,r,i){super(e,n,r),this.username=i}}class hY extends Pu{constructor(e,n){super(e,"facebook.com",n)}}class pY extends EB{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class mY extends Pu{constructor(e,n){super(e,"google.com",n)}}class gY extends EB{constructor(e,n,r){super(e,"twitter.com",n,r)}}function yY(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:fY(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ia("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ia("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ia._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ia._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=kt(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(a=>xp._fromServerResponse(r,a));ie(i.mfaPendingCredential,r,"internal-error");const s=Ia._fromMfaPendingCredential(i.mfaPendingCredential);return new MI(s,o,async a=>{const l=await a._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Jr._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return ie(n.user,r,"internal-error"),Jr._forOperation(n.user,n.operationType,u);default:En(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function vY(t,e){var n;const r=_e(t),i=e;return ie(e.customData.operationType,r,"argument-error"),ie((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),MI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:start",Ot(t,e))}function wY(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(t,e))}function bY(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(t,e))}class DI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>xp._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new DI(e)}async getSession(){return Ia._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await xo(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await xo(this.user,bY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const uw=new WeakMap;function TY(t){const e=_e(t);return uw.has(e)||uw.set(e,DI._fromUser(e)),uw.get(e)}const iy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iy,"1"),this.storage.removeItem(iy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY=1e3,xY=10;class SB extends xB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);lJ()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SB.type="LOCAL";const LI=SB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB extends xB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IB.type="SESSION";const rl=IB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new u_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await SY(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}u_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=Sp("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(c),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return window}function AY(t){qt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof qt().WorkerGlobalScope<"u"&&typeof qt().importScripts=="function"}async function PY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RY(){return $I()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="firebaseLocalStorageDb",NY=1,oy="firebaseLocalStorage",PB="fbase_key";class Ip{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function c_(t,e){return t.transaction([oy],e?"readwrite":"readonly").objectStore(oy)}function kY(){const t=indexedDB.deleteDatabase(AB);return new Ip(t).toPromise()}function ST(){const t=indexedDB.open(AB,NY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(oy,{keyPath:PB})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(oy)?e(r):(r.close(),await kY(),e(await ST()))})})}async function nN(t,e,n){const r=c_(t,!0).put({[PB]:e,value:n});return new Ip(r).toPromise()}async function OY(t,e){const n=c_(t,!1).get(e),r=await new Ip(n).toPromise();return r===void 0?null:r.value}function rN(t,e){const n=c_(t,!0).delete(e);return new Ip(n).toPromise()}const MY=800,DY=3;class CB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ST(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $I()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=u_._getInstance(RY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PY(),!this.activeServiceWorker)return;this.sender=new IY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ST();return await nN(e,iy,"1"),await rN(e,iy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nN(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=c_(i,!1).getAll();return new Ip(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CB.type="LOCAL";const gh=CB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:start",Ot(t,e))}function $Y(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:finalize",Ot(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=500,FY=6e4,bm=1e12;class UY{constructor(e){this.auth=e,this.counter=bm,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new BY(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||bm;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||bm;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||bm;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class BY{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ie(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jY(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},FY)},VY))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jY(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=dB("rcb"),zY=new wp(3e4,6e4);class qY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=qt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ie(GY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&W1(qt().grecaptcha)?Promise.resolve(qt().grecaptcha):new Promise((r,i)=>{const o=qt().setTimeout(()=>{i(Zt(e,"network-request-failed"))},zY.get());qt()[cw]=()=>{qt().clearTimeout(o),delete qt()[cw];const a=qt().grecaptcha;if(!a||!W1(a)){i(Zt(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const s=`${mJ()}?${kc({onload:cw,render:"explicit",hl:n})}`;CI(s).catch(()=>{clearTimeout(o),i(Zt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=qt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function GY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class HY{async load(e){return new UY(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="recaptcha",WY={theme:"light",type:"image"};let KY=class{constructor(e,n,r=Object.assign({},WY)){this.parameters=r,this.type=RB,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(e),this.isInvisible=this.parameters.size==="invisible",ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ie(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new HY:new qY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=qt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ie(AI()&&!$I(),this.auth,"internal-error"),await JY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await J7(this.auth);ie(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function JY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Va._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function YY(t,e,n){if(Rt(t.app))return Promise.reject(dn(t));const r=kt(t),i=await d_(r,e,_e(n));return new VI(i,o=>a_(r,o))}async function QY(t,e,n){const r=_e(t);await s_(!1,r,"phone");const i=await d_(r.auth,e,_e(n));return new VI(i,o=>_B(r,o))}async function XY(t,e,n){const r=_e(t);if(Rt(r.auth.app))return Promise.reject(dn(r.auth));const i=await d_(r.auth,e,_e(n));return new VI(i,o=>wB(r,o))}async function d_(t,e,n){var r;const i=await n.verify();try{ie(typeof i=="string",t,"argument-error"),ie(n.type===RB,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const s=o.session;if("phoneNumber"in o)return ie(s.type==="enroll",t,"internal-error"),(await _Y(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ie(s.type==="signin",t,"internal-error");const a=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return ie(a,t,"missing-multi-factor-info"),(await LY(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:s}=await LJ(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});return s}}finally{n._reset()}}async function ZY(t,e){const n=_e(t);if(Rt(n.auth.app))return Promise.reject(dn(n.auth));await RI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il=class ug{constructor(e){this.providerId=ug.PROVIDER_ID,this.auth=kt(e)}verifyPhoneNumber(e,n){return d_(this.auth,e,_e(n))}static credential(e,n){return Va._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ug.credentialFromTaggedObject(n)}static credentialFromError(e){return ug.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Va._fromTokenResponse(n,r):null}};il.PROVIDER_ID="phone";il.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return e?Er(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eQ(t){return vB(t.auth,new FI(t),t.bypassAuthState)}function tQ(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),yB(n,new FI(t),t.bypassAuthState)}async function nQ(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),RI(n,new FI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eQ;case"linkViaPopup":case"linkViaRedirect":return nQ;case"reauthViaPopup":case"reauthViaRedirect":return tQ;default:En(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ=new wp(2e3,1e4);async function iQ(t,e,n){if(Rt(t.app))return Promise.reject(Zt(t,"operation-not-supported-in-this-environment"));const r=kt(t);jc(t,e,Do);const i=Tl(r,n);return new oo(r,"signInViaPopup",e,i).executeNotNull()}async function oQ(t,e,n){const r=_e(t);if(Rt(r.auth.app))return Promise.reject(Zt(r.auth,"operation-not-supported-in-this-environment"));jc(r.auth,e,Do);const i=Tl(r.auth,n);return new oo(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function sQ(t,e,n){const r=_e(t);jc(r.auth,e,Do);const i=Tl(r.auth,n);return new oo(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class oo extends NB{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rQ.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ="pendingRedirect",Sf=new Map;class lQ extends NB{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const r=await uQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uQ(t,e){const n=OB(e),r=kB(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function UI(t,e){return kB(t)._set(OB(e),"true")}function cQ(){Sf.clear()}function BI(t,e){Sf.set(t._key(),e)}function kB(t){return Er(t._redirectPersistence)}function OB(t){return $a(aQ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t,e,n){return fQ(t,e,n)}async function fQ(t,e,n){if(Rt(t.app))return Promise.reject(dn(t));const r=kt(t);jc(t,e,Do),await r._initializationPromise;const i=Tl(r,n);return await UI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function hQ(t,e,n){return pQ(t,e,n)}async function pQ(t,e,n){const r=_e(t);if(jc(r.auth,e,Do),Rt(r.auth.app))return Promise.reject(dn(r.auth));await r.auth._initializationPromise;const i=Tl(r.auth,n);await UI(i,r.auth);const o=await MB(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function mQ(t,e,n){return gQ(t,e,n)}async function gQ(t,e,n){const r=_e(t);jc(r.auth,e,Do),await r.auth._initializationPromise;const i=Tl(r.auth,n);await s_(!1,r,e.providerId),await UI(i,r.auth);const o=await MB(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function yQ(t,e){return await kt(t)._initializationPromise,f_(t,e,!1)}async function f_(t,e,n=!1){if(Rt(t.app))return Promise.reject(dn(t));const r=kt(t),i=Tl(r,e),s=await new lQ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function MB(t){const e=Sp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vQ=10*60*1e3;class DB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_Q(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LB(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(iN(e))}saveEventToCache(e){this.cachedEventUids.add(iN(e)),this.lastProcessedEventTime=Date.now()}}function iN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _Q(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e={}){return Mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bQ=/^https?/;async function TQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $B(t);for(const n of e)try{if(EQ(n))return}catch{}En(t,"unauthorized-domain")}function EQ(t){const e=fh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!bQ.test(n))return!1;if(wQ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=new wp(3e4,6e4);function oN(){const t=qt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SQ(t){return new Promise((e,n)=>{var r,i,o;function s(){oN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oN(),n(Zt(t,"network-request-failed"))},timeout:xQ.get()})}if(!((i=(r=qt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=qt().gapi)===null||o===void 0)&&o.load)s();else{const a=dB("iframefcb");return qt()[a]=()=>{gapi.load?s():n(Zt(t,"network-request-failed"))},CI(`${yJ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cg=null,e})}let cg=null;function IQ(t){return cg=cg||SQ(t),cg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ=new wp(5e3,15e3),PQ="__/auth/iframe",CQ="emulator/auth/iframe",RQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kQ(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?PI(e,CQ):`https://${t.config.authDomain}/${PQ}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},i=NQ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${kc(r).slice(1)}`}async function OQ(t){const e=await IQ(t),n=qt().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:kQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RQ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Zt(t,"network-request-failed"),a=qt().setTimeout(()=>{o(s)},AQ.get());function l(){qt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DQ=500,LQ=600,$Q="_blank",VQ="http://localhost";class sN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FQ(t,e,n,r=DQ,i=LQ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},MQ),{width:r.toString(),height:i.toString(),top:o,left:s}),u=It().toLowerCase();n&&(a=oB(u)?$Q:n),rB(u)&&(e=e||VQ,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(aJ(u)&&a!=="_self")return UQ(e||"",a),new sN(null);const d=window.open(e||"",a,c);ie(d,t,"popup-blocked");try{d.focus()}catch{}return new sN(d)}function UQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ="__/auth/handler",jQ="emulator/auth/handler",zQ=encodeURIComponent("fac");async function IT(t,e,n,r,i,o){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:i};if(e instanceof Do){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",s6(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(o||{}))s[c]=d}if(e instanceof qc){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${zQ}=${encodeURIComponent(l)}`:"";return`${qQ(t)}?${kc(a).slice(1)}${u}`}function qQ({config:t}){return t.emulator?PI(t,jQ):`https://${t.authDomain}/${BQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="webStorageSupport";class GQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rl,this._completeRedirectFn=f_,this._overrideRedirectResult=BI}async _openPopup(e,n,r,i){var o;mi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await IT(e,n,r,fh(),i);return FQ(e,s,Sp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await IT(e,n,r,fh(),i);return AY(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await OQ(e),r=new DB(e);return n.register("authEvent",i=>(ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dw,{type:dw},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[dw];s!==void 0&&n(!!s),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uB()||iB()||Tp()}}const HQ=GQ;class WQ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ri("unexpected MultiFactorSessionType")}}}class jI extends WQ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new jI(e)}_finalizeEnroll(e,n,r){return wY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return $Y(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class VB{constructor(){}static assertion(e){return jI._fromCredential(e)}}VB.FACTOR_ID="phone";var aN="@firebase/auth",lN="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YQ(t){Ir(new Vn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ie(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cB(t)},u=new hJ(r,i,o,l);return bJ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new Vn("auth-internal",e=>{const n=kt(e.getProvider("auth").getImmediate());return(r=>new KQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(aN,lN,JQ(t)),Wn(aN,lN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=5*60;JH("authIdTokenMaxAge");function XQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Zt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",XQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YQ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZQ=2e3;async function eX(t,e,n){var r;const{BuildInfo:i}=ol();mi(e.sessionId,"AuthEvent did not contain a session ID");const o=await oX(e.sessionId),s={};return Tp()?s.ibi=i.packageName:bp()?s.apn=i.packageName:En(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,IT(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,s)}async function tX(t){const{BuildInfo:e}=ol(),n={};Tp()?n.iosBundleId=e.packageName:bp()?n.androidPackageName=e.packageName:En(t,"operation-not-supported-in-this-environment"),await $B(t,n)}function nX(t){const{cordova:e}=ol();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,sJ()?"_blank":"_system","location=yes"),n(i)})})}async function rX(t,e,n){const{cordova:r}=ol();let i=()=>{};try{await new Promise((o,s)=>{let a=null;function l(){var d;o();const f=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{s(Zt(t,"redirect-cancelled-by-user"))},ZQ))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),bp()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function iX(t){var e,n,r,i,o,s,a,l,u,c;const d=ol();ie(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ie(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ie(typeof((o=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie(typeof((l=(a=(s=d==null?void 0:d.cordova)===null||s===void 0?void 0:s.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ie(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function oX(t){const e=sX(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function sX(t){if(mi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX=20;class lX extends DB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function uX(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:fX(),postBody:null,tenantId:t.tenantId,error:Zt(t,"no-auth-event")}}function cX(t,e){return AT()._set(PT(t),e)}async function uN(t){const e=await AT()._get(PT(t));return e&&await AT()._remove(PT(t)),e}function dX(t,e){var n,r;const i=pX(e);if(i.includes("/__/auth/callback")){const o=dg(i),s=o.firebaseError?hX(decodeURIComponent(o.firebaseError)):null,a=(r=(n=s==null?void 0:s.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Zt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function fX(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<aX;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function AT(){return Er(LI)}function PT(t){return $a("authEvent",t.config.apiKey,t.name)}function hX(t){try{return JSON.parse(t)}catch{return null}}function pX(t){const e=dg(t),n=e.link?decodeURIComponent(e.link):void 0,r=dg(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return dg(i).link||i||r||n||t}function dg(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return uu(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mX=500;class gX{constructor(){this._redirectPersistence=rl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=f_,this._overrideRedirectResult=BI}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new lX(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){En(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){iX(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),cQ(),await this._originValidation(e);const s=uX(e,r,i);await cX(e,s);const a=await eX(e,s,n),l=await nX(a);return rX(e,o,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tX(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=ol(),s=setTimeout(async()=>{await uN(e),n.onEvent(cN())},mX),a=async c=>{clearTimeout(s);const d=await uN(e);let f=null;d&&(c!=null&&c.url)&&(f=dX(d,c.url)),n.onEvent(f||cN())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${o.packageName.toLowerCase()}://`;ol().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const yX=gX;function cN(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vX(t,e){kt(t)._logFramework(e)}var _X="@firebase/auth-compat",wX="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX=1e3;function If(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function TX(){return If()==="http:"||If()==="https:"}function FB(t=It()){return!!((If()==="file:"||If()==="ionic:"||If()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function EX(){return gS()||mS()}function xX(){return c2()&&(document==null?void 0:document.documentMode)===11}function SX(t=It()){return/Edge\/\d+/.test(t)}function IX(t=It()){return xX()||SX(t)}function UB(){try{const t=self.localStorage,e=Sp();if(t)return t.setItem(e,"1"),t.removeItem(e),IX()?Wa():!0}catch{return zI()&&Wa()}return!1}function zI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fw(){return(TX()||u2()||FB())&&!EX()&&UB()&&!zI()}function BB(){return FB()&&typeof document<"u"}async function AX(){return BB()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},bX);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function PX(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr={LOCAL:"local",NONE:"none",SESSION:"session"},Dd=ie,jB="persistence";function CX(t,e){if(Dd(Object.values(wr).includes(e),t,"invalid-persistence-type"),gS()){Dd(e!==wr.SESSION,t,"unsupported-persistence-type");return}if(mS()){Dd(e===wr.NONE,t,"unsupported-persistence-type");return}if(zI()){Dd(e===wr.NONE||e===wr.LOCAL&&Wa(),t,"unsupported-persistence-type");return}Dd(e===wr.NONE||UB(),t,"unsupported-persistence-type")}async function CT(t){await t._initializationPromise;const e=zB(),n=$a(jB,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function RX(t,e){const n=zB();if(!n)return[];const r=$a(jB,t,e);switch(n.getItem(r)){case wr.NONE:return[ic];case wr.LOCAL:return[gh,rl];case wr.SESSION:return[rl];default:return[]}}function zB(){var t;try{return((t=PX())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NX=ie;class us{constructor(){this.browserResolver=Er(HQ),this.cordovaResolver=Er(yX),this.underlyingResolver=null,this._redirectPersistence=rl,this._completeRedirectFn=f_,this._overrideRedirectResult=BI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return BB()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return NX(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await AX();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){return t.unwrap()}function kX(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OX(t){return GB(t)}function MX(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new DX(t,vY(t,e))}else if(r){const i=GB(e),o=e;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function GB(t){const{_tokenResponse:e}=t instanceof Ln?t.customData:t;if(!e)return null;if(!(t instanceof Ln)&&"temporaryProof"in e&&"phoneNumber"in e)return il.credentialFromResult(t);const n=e.providerId;if(!n||n===Md.PASSWORD)return null;let r;switch(n){case Md.GOOGLE:r=Si;break;case Md.FACEBOOK:r=xi;break;case Md.GITHUB:r=Ii;break;case Md.TWITTER:r=Ai;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:a,nonce:l}=e;return!o&&!s&&!i&&!a?null:a?n.startsWith("saml.")?oc._create(n,a):zi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:o}):new Au(n).credential({idToken:i,accessToken:o,rawNonce:l})}return t instanceof Ln?r.credentialFromError(t):r.credentialFromResult(t)}function ir(t,e){return e.catch(n=>{throw n instanceof Ln&&MX(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:OX(n),additionalUserInfo:yY(n),user:so.getOrCreate(i)}})}async function RT(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>ir(t,n.confirm(r))}}class DX{constructor(e,n){this.resolver=n,this.auth=kX(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ir(qB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._delegate=e,this.multiFactor=TY(e)}static getOrCreate(e){return so.USER_MAP.has(e)||so.USER_MAP.set(e,new so(e)),so.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ir(this.auth,_B(this._delegate,e))}async linkWithPhoneNumber(e,n){return RT(this.auth,QY(this._delegate,e,n))}async linkWithPopup(e){return ir(this.auth,sQ(this._delegate,e,us))}async linkWithRedirect(e){return await CT(kt(this.auth)),mQ(this._delegate,e,us)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ir(this.auth,wB(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return RT(this.auth,XY(this._delegate,e,n))}reauthenticateWithPopup(e){return ir(this.auth,oQ(this._delegate,e,us))}async reauthenticateWithRedirect(e){return await CT(kt(this.auth)),hQ(this._delegate,e,us)}sendEmailVerification(e){return sY(this._delegate,e)}async unlink(e){return await HJ(this._delegate,e),this}updateEmail(e){return cY(this._delegate,e)}updatePassword(e){return dY(this._delegate,e)}updatePhoneNumber(e){return ZY(this._delegate,e)}updateProfile(e){return uY(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return aY(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}so.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=ie;class NT{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ld(r,"invalid-api-key",{appName:e.name}),Ld(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?us:void 0;this._delegate=n.initialize({options:{persistence:LX(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(F7),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?so.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){TJ(this._delegate,e,n)}applyActionCode(e){return QJ(this._delegate,e)}checkActionCode(e){return bB(this._delegate,e)}confirmPasswordReset(e,n){return YJ(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return ir(this._delegate,ZJ(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return oY(this._delegate,e)}isSignInWithEmailLink(e){return nY(this._delegate,e)}async getRedirectResult(){Ld(fw(),this._delegate,"operation-not-supported-in-this-environment");const e=await yQ(this._delegate,us);return e?ir(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){vX(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=dN(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=dN(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return tY(this._delegate,e,n)}sendPasswordResetEmail(e,n){return JJ(this._delegate,e,n||void 0)}async setPersistence(e){CX(this._delegate,e);let n;switch(e){case wr.SESSION:n=rl;break;case wr.LOCAL:n=await Er(gh)._isAvailable()?gh:LI;break;case wr.NONE:n=ic;break;default:return En("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ir(this._delegate,GJ(this._delegate))}signInWithCredential(e){return ir(this._delegate,a_(this._delegate,e))}signInWithCustomToken(e){return ir(this._delegate,KJ(this._delegate,e))}signInWithEmailAndPassword(e,n){return ir(this._delegate,eY(this._delegate,e,n))}signInWithEmailLink(e,n){return ir(this._delegate,rY(this._delegate,e,n))}signInWithPhoneNumber(e,n){return RT(this._delegate,YY(this._delegate,e,n))}async signInWithPopup(e){return Ld(fw(),this._delegate,"operation-not-supported-in-this-environment"),ir(this._delegate,iQ(this._delegate,e,us))}async signInWithRedirect(e){return Ld(fw(),this._delegate,"operation-not-supported-in-this-environment"),await CT(this._delegate),dQ(this._delegate,e,us)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return XJ(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}NT.Persistence=wr;function dN(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&so.getOrCreate(s)),error:e,complete:n}}function LX(t,e){const n=RX(t,e);if(typeof self<"u"&&!n.includes(gh)&&n.push(gh),typeof window<"u")for(const r of[LI,rl])n.includes(r)||n.push(r);return n.includes(ic)||n.push(ic),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.providerId="phone",this._delegate=new il(qB(gi.auth()))}static credential(e,n){return il.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}qI.PHONE_SIGN_IN_METHOD=il.PHONE_SIGN_IN_METHOD;qI.PROVIDER_ID=il.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=ie;class VX{constructor(e,n,r=gi.app()){var i;$X((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new KY(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FX="auth-compat";function UX(t){t.INTERNAL.registerComponent(new Vn(FX,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new NT(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fl.EMAIL_SIGNIN,PASSWORD_RESET:Fl.PASSWORD_RESET,RECOVER_EMAIL:Fl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Fl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Fl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Fl.VERIFY_EMAIL}},EmailAuthProvider:zs,FacebookAuthProvider:xi,GithubAuthProvider:Ii,GoogleAuthProvider:Si,OAuthProvider:Au,SAMLAuthProvider:ny,PhoneAuthProvider:qI,PhoneMultiFactorGenerator:VB,RecaptchaVerifier:VX,TwitterAuthProvider:Ai,Auth:NT,AuthCredential:zc,Error:Ln}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(_X,wX)}UX(gi);const HB="@firebase/installations",GI="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=1e4,KB=`w:${GI}`,JB="FIS_v2",BX="https://firebaseinstallations.googleapis.com/v1",jX=60*60*1e3,zX="installations",qX="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sl=new Gi(zX,qX,GX);function YB(t){return t instanceof Ln&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB({projectId:t}){return`${BX}/projects/${t}/installations`}function XB(t){return{token:t.token,requestStatus:2,expiresIn:WX(t.expiresIn),creationTime:Date.now()}}async function ZB(t,e){const r=(await e.json()).error;return sl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ej({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HX(t,{refreshToken:e}){const n=ej(t);return n.append("Authorization",KX(e)),n}async function tj(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WX(t){return Number(t.replace("s","000"))}function KX(t){return`${JB} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JX({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=QB(t),i=ej(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={fid:n,authVersion:JB,appId:t.appId,sdkVersion:KB},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await tj(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:XB(u.authToken)}}else throw await ZB("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YX(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX=/^[cdef][\w-]{21}$/,kT="";function XX(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ZX(t);return QX.test(n)?n:kT}catch{return kT}}function ZX(t){return YX(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new Map;function ij(t,e){const n=h_(t);oj(n,e),eZ(n,e)}function oj(t,e){const n=rj.get(t);if(n)for(const r of n)r(e)}function eZ(t,e){const n=tZ();n&&n.postMessage({key:t,fid:e}),nZ()}let Aa=null;function tZ(){return!Aa&&"BroadcastChannel"in self&&(Aa=new BroadcastChannel("[Firebase] FID Change"),Aa.onmessage=t=>{oj(t.data.key,t.data.fid)}),Aa}function nZ(){rj.size===0&&Aa&&(Aa.close(),Aa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rZ="firebase-installations-database",iZ=1,al="firebase-installations-store";let hw=null;function HI(){return hw||(hw=Oc(rZ,iZ,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(al)}}})),hw}async function sy(t,e){const n=h_(t),i=(await HI()).transaction(al,"readwrite"),o=i.objectStore(al),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&ij(t,e.fid),e}async function sj(t){const e=h_(t),r=(await HI()).transaction(al,"readwrite");await r.objectStore(al).delete(e),await r.done}async function p_(t,e){const n=h_(t),i=(await HI()).transaction(al,"readwrite"),o=i.objectStore(al),s=await o.get(n),a=e(s);return a===void 0?await o.delete(n):await o.put(a,n),await i.done,a&&(!s||s.fid!==a.fid)&&ij(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t){let e;const n=await p_(t.appConfig,r=>{const i=oZ(r),o=sZ(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===kT?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function oZ(t){const e=t||{fid:XX(),registrationStatus:0};return aj(e)}function sZ(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(sl.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aZ(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lZ(t)}:{installationEntry:e}}async function aZ(t,e){try{const n=await JX(t,e);return sy(t.appConfig,n)}catch(n){throw YB(n)&&n.customData.serverCode===409?await sj(t.appConfig):await sy(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function lZ(t){let e=await fN(t.appConfig);for(;e.registrationStatus===1;)await nj(100),e=await fN(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await WI(t);return r||n}return e}function fN(t){return p_(t,e=>{if(!e)throw sl.create("installation-not-found");return aj(e)})}function aj(t){return uZ(t)?{fid:t.fid,registrationStatus:0}:t}function uZ(t){return t.registrationStatus===1&&t.registrationTime+WB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cZ({appConfig:t,heartbeatServiceProvider:e},n){const r=dZ(t,n),i=HX(t,n),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const s={installation:{sdkVersion:KB,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(s)},l=await tj(()=>fetch(r,a));if(l.ok){const u=await l.json();return XB(u)}else throw await ZB("Generate Auth Token",l)}function dZ(t,{fid:e}){return`${QB(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e=!1){let n;const r=await p_(t.appConfig,o=>{if(!lj(o))throw sl.create("not-registered");const s=o.authToken;if(!e&&pZ(s))return o;if(s.requestStatus===1)return n=fZ(t,e),o;{if(!navigator.onLine)throw sl.create("app-offline");const a=gZ(o);return n=hZ(t,a),a}});return n?await n:r.authToken}async function fZ(t,e){let n=await hN(t.appConfig);for(;n.authToken.requestStatus===1;)await nj(100),n=await hN(t.appConfig);const r=n.authToken;return r.requestStatus===0?KI(t,e):r}function hN(t){return p_(t,e=>{if(!lj(e))throw sl.create("not-registered");const n=e.authToken;return yZ(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function hZ(t,e){try{const n=await cZ(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await sy(t.appConfig,r),n}catch(n){if(YB(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sj(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sy(t.appConfig,r)}throw n}}function lj(t){return t!==void 0&&t.registrationStatus===2}function pZ(t){return t.requestStatus===2&&!mZ(t)}function mZ(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+jX}function gZ(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yZ(t){return t.requestStatus===1&&t.requestTime+WB<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vZ(t){const e=t,{installationEntry:n,registrationPromise:r}=await WI(e);return r?r.catch(console.error):KI(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Z(t,e=!1){const n=t;return await wZ(n),(await KI(n,e)).token}async function wZ(t){const{registrationPromise:e}=await WI(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(t){if(!t||!t.options)throw pw("App Configuration");if(!t.name)throw pw("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw pw(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function pw(t){return sl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="installations",TZ="installations-internal",EZ=t=>{const e=t.getProvider("app").getImmediate(),n=bZ(e),r=Ov(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},xZ=t=>{const e=t.getProvider("app").getImmediate(),n=Ov(e,uj).getImmediate();return{getId:()=>vZ(n),getToken:i=>_Z(n,i)}};function SZ(){Ir(new Vn(uj,EZ,"PUBLIC")),Ir(new Vn(TZ,xZ,"PRIVATE"))}SZ();Wn(HB,GI);Wn(HB,GI,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IZ="/firebase-messaging-sw.js",AZ="/firebase-cloud-messaging-push-scope",cj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",PZ="https://fcmregistrations.googleapis.com/v1",dj="google.c.a.c_id",CZ="google.c.a.c_l",RZ="google.c.a.ts",NZ="google.c.a.e";var pN;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pN||(pN={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var yh;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(yh||(yh={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kZ(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="fcm_token_details_db",OZ=5,mN="fcm_token_object_Store";async function MZ(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(mw))return null;let e=null;return(await Oc(mw,OZ,{upgrade:async(r,i,o,s)=>{var a;if(i<2||!r.objectStoreNames.contains(mN))return;const l=s.objectStore(mN),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Xi(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Xi(c.auth),p256dh:Xi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Xi(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Xi(c.auth),p256dh:Xi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Xi(c.vapidKey)}}}}}})).close(),await Tu(mw),await Tu("fcm_vapid_details_db"),await Tu("undefined"),DZ(e)?e:null}function DZ(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ="firebase-messaging-database",$Z=1,ll="firebase-messaging-store";let gw=null;function JI(){return gw||(gw=Oc(LZ,$Z,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ll)}}})),gw}async function fj(t){const e=QI(t),r=await(await JI()).transaction(ll).objectStore(ll).get(e);if(r)return r;{const i=await MZ(t.appConfig.senderId);if(i)return await YI(t,i),i}}async function YI(t,e){const n=QI(t),i=(await JI()).transaction(ll,"readwrite");return await i.objectStore(ll).put(e,n),await i.done,e}async function VZ(t){const e=QI(t),r=(await JI()).transaction(ll,"readwrite");await r.objectStore(ll).delete(e),await r.done}function QI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FZ={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Yn=new Gi("messaging","Messaging",FZ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UZ(t,e){const n=await ZI(t),r=pj(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(XI(t.appConfig),i)).json()}catch(s){throw Yn.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Yn.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Yn.create("token-subscribe-no-token");return o.token}async function BZ(t,e){const n=await ZI(t),r=pj(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${XI(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw Yn.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw Yn.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Yn.create("token-update-no-token");return o.token}async function hj(t,e){const r={method:"DELETE",headers:await ZI(t)};try{const o=await(await fetch(`${XI(t.appConfig)}/${e}`,r)).json();if(o.error){const s=o.error.message;throw Yn.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Yn.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function XI({projectId:t}){return`${PZ}/projects/${t}/registrations`}async function ZI({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function pj({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==cj&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jZ=7*24*60*60*1e3;async function zZ(t){const e=await HZ(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Xi(e.getKey("auth")),p256dh:Xi(e.getKey("p256dh"))},r=await fj(t.firebaseDependencies);if(r){if(WZ(r.subscriptionOptions,n))return Date.now()>=r.createTime+jZ?GZ(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await hj(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return gN(t.firebaseDependencies,n)}else return gN(t.firebaseDependencies,n)}async function qZ(t){const e=await fj(t.firebaseDependencies);e&&(await hj(t.firebaseDependencies,e.token),await VZ(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function GZ(t,e){try{const n=await BZ(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await YI(t.firebaseDependencies,r),n}catch(n){throw n}}async function gN(t,e){const r={token:await UZ(t,e),createTime:Date.now(),subscriptionOptions:e};return await YI(t,r),r.token}async function HZ(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kZ(e)})}function WZ(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return KZ(e,t),JZ(e,t),YZ(e,t),e}function KZ(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}function JZ(t,e){e.data&&(t.data=e.data)}function YZ(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);const l=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QZ(t){return typeof t=="object"&&!!t&&dj in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZ(t){if(!t||!t.options)throw yw("App Configuration Object");if(!t.name)throw yw("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw yw(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function yw(t){return Yn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZZ=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=XZ(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t){try{t.swRegistration=await navigator.serviceWorker.register(IZ,{scope:AZ}),t.swRegistration.update().catch(()=>{})}catch(e){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eee(t,e){if(!e&&!t.swRegistration&&await mj(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tee(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=cj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t,e){if(!navigator)throw Yn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Yn.create("permission-blocked");return await tee(t,e==null?void 0:e.vapidKey),await eee(t,e==null?void 0:e.serviceWorkerRegistration),zZ(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nee(t,e,n){const r=ree(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[dj],message_name:n[CZ],message_time:n[RZ],message_device_time:Math.floor(Date.now()/1e3)})}function ree(t){switch(t){case yh.NOTIFICATION_CLICKED:return"notification_open";case yh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iee(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===yh.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(yN(n)):t.onMessageHandler.next(yN(n)));const r=n.data;QZ(r)&&r[NZ]==="1"&&await nee(t,n.messageType,r)}const vN="@firebase/messaging",_N="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oee=t=>{const e=new ZZ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>iee(e,n)),e},see=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>gj(e,r)}};function aee(){Ir(new Vn("messaging",oee,"PUBLIC")),Ir(new Vn("messaging-internal",see,"PRIVATE")),Wn(vN,_N),Wn(vN,_N,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lee(t){if(!navigator)throw Yn.create("only-available-in-window");return t.swRegistration||await mj(t),qZ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uee(t,e){if(!navigator)throw Yn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function yj(t,e){return t=_e(t),gj(t,e)}function cee(t){return t=_e(t),lee(t)}function vj(t,e){return t=_e(t),uee(t,e)}aee();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dee="https://fcmregistrations.googleapis.com/v1",wj="FCM_MSG",fee="google.c.a.c_id",hee=3,pee=1;var ay;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ay||(ay={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ly;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ly||(ly={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mee(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="fcm_token_details_db",gee=5,wN="fcm_token_object_Store";async function yee(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(vw))return null;let e=null;return(await Oc(vw,gee,{upgrade:async(r,i,o,s)=>{var a;if(i<2||!r.objectStoreNames.contains(wN))return;const l=s.objectStore(wN),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(i===2){const c=u;if(!c.auth||!c.p256dh||!c.endpoint)return;e={token:c.fcmToken,createTime:(a=c.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Zi(c.vapidKey)}}}else if(i===3){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Zi(c.auth),p256dh:Zi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Zi(c.vapidKey)}}}else if(i===4){const c=u;e={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Zi(c.auth),p256dh:Zi(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Zi(c.vapidKey)}}}}}})).close(),await Tu(vw),await Tu("fcm_vapid_details_db"),await Tu("undefined"),vee(e)?e:null}function vee(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee="firebase-messaging-database",wee=1,ul="firebase-messaging-store";let _w=null;function eA(){return _w||(_w=Oc(_ee,wee,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ul)}}})),_w}async function tA(t){const e=rA(t),r=await(await eA()).transaction(ul).objectStore(ul).get(e);if(r)return r;{const i=await yee(t.appConfig.senderId);if(i)return await nA(t,i),i}}async function nA(t,e){const n=rA(t),i=(await eA()).transaction(ul,"readwrite");return await i.objectStore(ul).put(e,n),await i.done,e}async function bee(t){const e=rA(t),r=(await eA()).transaction(ul,"readwrite");await r.objectStore(ul).delete(e),await r.done}function rA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tee={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},$i=new Gi("messaging","Messaging",Tee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eee(t,e){const n=await oA(t),r=Tj(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(iA(t.appConfig),i)).json()}catch(s){throw $i.create("token-subscribe-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw $i.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw $i.create("token-subscribe-no-token");return o.token}async function xee(t,e){const n=await oA(t),r=Tj(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${iA(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw $i.create("token-update-failed",{errorInfo:s==null?void 0:s.toString()})}if(o.error){const s=o.error.message;throw $i.create("token-update-failed",{errorInfo:s})}if(!o.token)throw $i.create("token-update-no-token");return o.token}async function bj(t,e){const r={method:"DELETE",headers:await oA(t)};try{const o=await(await fetch(`${iA(t.appConfig)}/${e}`,r)).json();if(o.error){const s=o.error.message;throw $i.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw $i.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function iA({projectId:t}){return`${dee}/projects/${t}/registrations`}async function oA({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Tj({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==_j&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const See=7*24*60*60*1e3;async function Iee(t){const e=await Pee(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Zi(e.getKey("auth")),p256dh:Zi(e.getKey("p256dh"))},r=await tA(t.firebaseDependencies);if(r){if(Cee(r.subscriptionOptions,n))return Date.now()>=r.createTime+See?Aee(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await bj(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return TN(t.firebaseDependencies,n)}else return TN(t.firebaseDependencies,n)}async function bN(t){const e=await tA(t.firebaseDependencies);e&&(await bj(t.firebaseDependencies,e.token),await bee(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function Aee(t,e){try{const n=await xee(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await nA(t.firebaseDependencies,r),n}catch(n){throw n}}async function TN(t,e){const r={token:await Eee(t,e),createTime:Date.now(),subscriptionOptions:e};return await nA(t,r),r.token}async function Pee(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mee(e)})}function Cee(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ree(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Nee(e,t),kee(e,t),Oee(e,t),e}function Nee(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}function kee(t,e){e.data&&(t.data=e.data)}function Oee(t,e){var n,r,i,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);const l=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mee(t){return typeof t=="object"&&!!t&&fee in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(t){return new Promise(e=>{setTimeout(e,t)})}async function Lee(t,e){const n=$ee(e,await t.firebaseDependencies.installations.getId());Vee(t,n,e.productId)}function $ee(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=ay.DISPLAY_NOTIFICATION.toString():i.message_type=ay.DATA_MESSAGE.toString(),i.sdk_platform=hee.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=pee.toString(),!((n=t.fcmOptions)===null||n===void 0)&&n.analytics_label&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function Vee(t,e,n){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),n&&(r.compliance_data=Fee(n)),t.logEvents.push(r)}function Fee(t){return{privacy_context:{prequest:{origin_associated_product_id:t}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uee(t,e){var n,r;const{newSubscription:i}=t;if(!i){await bN(e);return}const o=await tA(e.firebaseDependencies);await bN(e),e.vapidKey=(r=(n=o==null?void 0:o.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:_j,await Iee(e)}async function Bee(t,e){const n=qee(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await Lee(e,n);const r=await Ej();if(Hee(r))return Wee(r,n);if(n.notification&&await Kee(zee(n)),!!e&&e.onBackgroundMessageHandler){const i=Ree(n);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function jee(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[wj];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=Jee(r);if(!i)return;const o=new URL(i,self.location.href),s=new URL(self.location.origin);if(o.host!==s.host)return;let a=await Gee(o);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await Dee(3e3)),!!a)return r.messageType=ly.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function zee(t){const e=Object.assign({},t.notification);return e.data={[wj]:t},e}function qee({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function Gee(t){const e=await Ej();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function Hee(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function Wee(t,e){e.isFirebaseMessaging=!0,e.messageType=ly.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function Ej(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Kee(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function Jee(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(Mee(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yee(t){if(!t||!t.options)throw ww("App Configuration Object");if(!t.name)throw ww("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw ww(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ww(t){return $i.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=Yee(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xee=t=>{const e=new Qee(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(Bee(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(Uee(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(jee(n))}),e};function Zee(){Ir(new Vn("messaging-sw",Xee,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ete(t,e){if(self.document!==void 0)throw $i.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function tte(t,e){return t=_e(t),ete(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zee();const nte="@firebase/messaging-compat",rte="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ite(){return self&&"ServiceWorkerGlobalScope"in self?ste():ote()}function ote(){return typeof window<"u"&&Wa()&&n6()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function ste(){return Wa()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class EN{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return yj(this._delegate,e)}async deleteToken(){return cee(this._delegate)}onMessage(e){return vj(this._delegate,e)}onBackgroundMessage(e){return tte(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ate=t=>self&&"ServiceWorkerGlobalScope"in self?new EN(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new EN(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),lte={isSupported:ite};function ute(){gi.INTERNAL.registerComponent(new Vn("messaging-compat",ate,"PUBLIC").setServiceProps(lte))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ute();gi.registerVersion(nte,rte);const cte={apiKey:"AIzaSyAjpS8IWMJmlEHw6_7VRHATbLWJeHzbCYU",authDomain:"fisicalplanner.firebaseapp.com",databaseURL:"https://fisicalplanner-default-rtdb.firebaseio.com",projectId:"fisicalplanner",storageBucket:"fisicalplanner.firebasestorage.app",messagingSenderId:"439728765666",appId:"1:439728765666:web:884c65f808b9337a31bcbb",measurementId:"G-8G6JJXX00Z"};gi.initializeApp(cte);const Le=gi.firestore(),Cu=gi.auth();let fg=null;try{fg=gi.messaging()}catch{console.log("Firebase Messaging not supported in this environment")}const vh=t=>{if(Array.isArray(t))return t.map(e=>vh(e));if(t!==null&&typeof t=="object"){const e={};return Object.keys(t).forEach(n=>{t[n]!==void 0&&(e[n]=vh(t[n]))}),e}return t},un=(t,e,...n)=>{const r=[e,...n].join("/");return t.collection(r)},dte=(t,e)=>t.collectionGroup(e),Mn=(t,e,...n)=>{const r=[e,...n].join("/");return t.doc(r)},xj=t=>t.get(),Pa=t=>t.get(),Fa=(t,e,n)=>t.set(vh(e),n),sc=(t,e)=>t.add(vh(e)),m_=(t,e)=>t.update(vh(e)),sA=t=>t.delete(),_a=(t,e,n)=>t.onSnapshot(e,n),fte=(t,e,n)=>({type:"where",payload:[t,e,n]}),cu=(t,e)=>({type:"orderBy",payload:[t,e||"asc"]}),wa=(t,...e)=>{let n=t;for(const r of e)n=n[r.type](...r.payload);return n},hte=(t,e,n)=>t.createUserWithEmailAndPassword(e,n),pte=(t,e,n)=>t.signInWithEmailAndPassword(e,n),mte=(t,e)=>t.onAuthStateChanged(e),xN=t=>t.signOut(),gte=({onLoginSuccess:t,onNavigateRegister:e})=>{const[n,r]=$.useState(""),[i,o]=$.useState(""),[s,a]=$.useState(!1),[l,u]=$.useState(""),c=async d=>{d.preventDefault(),a(!0),u("");try{const g=(await pte(Cu,n,i)).user,y=Mn(Le,"users",g.uid),_=await xj(y);if(_.exists){const v={uid:g.uid,..._.data()};t(v)}else u("Perfil de usurio no encontrado no banco de dados."),await Cu.signOut()}catch(f){f.code==="auth/user-not-found"||f.code==="auth/wrong-password"||f.code==="auth/invalid-credential"?u("E-mail ou senha invlidos."):u("Ocorreu um erro. Tente novamente."),console.error(f)}finally{a(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-[radial-gradient(circle_at_top_right,rgba(0,255,136,0.1),transparent_40%)]",children:w.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-zinc-800 p-8 rounded-2xl shadow-2xl",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Fit",w.jsx("span",{className:"text-emerald-400",children:"Life"})]}),w.jsx("p",{className:"text-zinc-500 text-sm mt-2",children:"Sua evoluo comea no login."})]}),w.jsxs("form",{onSubmit:c,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"E-mail"}),w.jsx("input",{type:"email",required:!0,className:"w-full bg-black border border-zinc-800 rounded-lg p-3 text-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",placeholder:"seu@email.com",value:n,onChange:d=>r(d.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Senha"}),w.jsx("input",{type:"password",required:!0,className:"w-full bg-black border border-zinc-800 rounded-lg p-3 text-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",placeholder:"",value:i,onChange:d=>o(d.target.value)})]}),l&&w.jsx("div",{className:"text-red-400 text-sm text-center",children:l}),w.jsx("button",{type:"submit",disabled:s,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-3 rounded-lg transition-transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"AUTENTICANDO...":"ACESSAR SISTEMA"})]}),w.jsx("div",{className:"mt-6 text-center text-sm",children:w.jsx("button",{onClick:e,className:"text-zinc-500 hover:text-emerald-400 transition-colors",children:"No tem conta? Criar agora"})})]})})},yte=({onNavigateLogin:t})=>{const[e,n]=$.useState(""),[r,i]=$.useState(""),[o,s]=$.useState(""),[a,l]=$.useState(!1),[u,c]=$.useState(""),[d,f]=$.useState(!1),g=async y=>{if(y.preventDefault(),l(!0),c(""),o.length<6){c("A senha deve ter pelo menos 6 caracteres."),l(!1);return}try{const v=(await hte(Cu,r,o)).user;await Fa(Mn(Le,"users",v.uid),{uid:v.uid,name:e,email:r,workoutType:"iniciante",avatar:`https://ui-avatars.com/api/?name=${e.replace(" ","+")}&background=random`,createdAt:new Date().toISOString()},{}),f(!0),setTimeout(t,2e3)}catch(_){_.code==="auth/email-already-in-use"?c("Este e-mail j est cadastrado."):c("Ocorreu um erro ao criar a conta."),console.error(_)}finally{l(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-[radial-gradient(circle_at_top_right,rgba(0,255,136,0.1),transparent_40%)]",children:w.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-zinc-800 p-8 rounded-2xl shadow-2xl",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Criar ",w.jsx("span",{className:"text-emerald-400",children:"Conta"})]}),w.jsx("p",{className:"text-zinc-500 text-sm mt-2",children:"Comece sua transformao hoje."})]}),d?w.jsx("div",{className:"text-center text-emerald-400 font-semibold animate-pulse",children:"Conta criada com sucesso! Redirecionando..."}):w.jsxs("form",{onSubmit:g,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Nome Completo"}),w.jsx("input",{type:"text",required:!0,className:"w-full bg-black border border-zinc-800 rounded-lg p-3 text-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",placeholder:"Ex: Ana Silva",value:e,onChange:y=>n(y.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"E-mail"}),w.jsx("input",{type:"email",required:!0,className:"w-full bg-black border border-zinc-800 rounded-lg p-3 text-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",placeholder:"seu@email.com",value:r,onChange:y=>i(y.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Senha"}),w.jsx("input",{type:"password",required:!0,className:"w-full bg-black border border-zinc-800 rounded-lg p-3 text-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",placeholder:"Mnimo 6 caracteres",value:o,onChange:y=>s(y.target.value)})]}),u&&w.jsx("div",{className:"text-red-400 text-sm text-center",children:u}),w.jsx("button",{type:"submit",disabled:a,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-3 rounded-lg transition-transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"CRIANDO...":"CRIAR CONTA"})]}),w.jsx("div",{className:"mt-6 text-center text-sm",children:w.jsx("button",{onClick:t,className:"text-zinc-500 hover:text-emerald-400 transition-colors",children:"J tem conta? Fazer Login"})})]})})},H=(t,e,n="",r="strength",i)=>({id:t.toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/_{2,}/g,"_"),name:t,muscleGroup:e,type:r,instructions:n}),vte=[H("Supino Reto com Barra","Peitoral","O clssico construtor de massa para o peitoral maior como um todo."),H("Supino Inclinado com Barra","Peitoral","Foca na poro clavicular (parte superior do peitoral). ngulos ideais variam entre 15 a 30."),H("Supino Declinado com Barra","Peitoral","Enfatiza a poro inferior (esternocostal) e o trceps."),H("Supino Guilhotina (Neck Press)","Peitoral","A barra desce em direo ao pescoo com cotovelos abertos para isolar o peitoral. Requer cuidado e cargas leves."),H("Supino Pegada Inversa","Peitoral","Excelente para a parte superior do peitoral, aliviando a tenso nos ombros."),H("Supino Reto com Halteres","Peitoral","Permite uma convergncia no topo, contraindo mais o miolo do peito e maior amplitude."),H("Supino Inclinado com Halteres","Peitoral","Foco superior com maior alongamento que a barra."),H("Supino Declinado com Halteres","Peitoral","Foco inferior com maior liberdade de movimento."),H("Supino Neutro (Pegada Martelo)","Peitoral",'Foca na parte interna ("miolo") e reduz estresse no ombro.'),H("Crucifixo Reto (Fly)","Peitoral","Isolamento total, foco no alongamento das fibras."),H("Crucifixo Inclinado","Peitoral","Isolamento da parte superior com foco no alongamento."),H("Pullover com Halter","Peitoral","Trabalha a caixa torcica e a poro inferior do peitoral (tambm atinge o dorsal)."),H("Svend Press","Peitoral","Apertar um halter ou anilha contra o outro em frente ao peito, mantendo tenso isomtrica constante."),H("Crossover Polia Alta","Peitoral","Movimento de cima para baixo. Foca na parte inferior e no contorno do peitoral."),H("Crossover Polia Mdia (Fly em P)","Peitoral","Foco na parte esternal (geral) do peitoral."),H("Crossover Polia Baixa","Peitoral","Movimento de baixo para cima. Foco intenso na parte superior (clavicular)."),H("Crucifixo no Banco (com Cabos)","Peitoral","Oferece tenso contnua que os halteres perdem no topo do movimento."),H("Press com Cabos (Cable Press)","Peitoral","Simula um supino, mas feito em p ou sentado na polia, exigindo estabilizao do core."),H("Supino Vertical (Mquina Sentada)","Peitoral","timo para iniciantes ou para dropsets no final do treino."),H("Peck Deck (Voador)","Peitoral","Isolador clssico. Mantm os braos flexionados para isolar o peitoral."),H("Supino Articulado (Hammer Strength)","Peitoral","Mquinas que simulam o movimento de peso livre mas com trajetria fixa."),H("Chest Press Convergente","Peitoral","Mquinas onde as manoplas se aproximam no final do movimento, aumentando a contrao central."),H("Flexo de Brao","Peitoral","O bsico eficiente com peso do corpo."),H("Flexo Inclinada","Peitoral","Mos em superfcie elevada. Foca na parte inferior (mais fcil)."),H("Flexo Declinada","Peitoral","Ps elevados. Foca na parte superior (mais difcil)."),H("Flexo Diamante","Peitoral","Mos juntas. Foca no trceps e na parte central interna do peitoral."),H("Flexo Aberta","Peitoral","Tira o foco do trceps e coloca mais no peitoral externo."),H("Flexo Archer","Peitoral","Desce o corpo para um lado enquanto estica o outro brao."),H("Dips (Mergulho nas Paralelas)","Peitoral","Incline o tronco para frente para focar na parte inferior e externa do peitoral."),H("Agachamento Livre (Back Squat)","Pernas","O rei dos exerccios. Trabalha a perna inteira com nfase no quadrceps."),H("Agachamento Frontal","Pernas","Barra apoiada nos ombros  frente. Isola mais o quadrceps e exige postura."),H("Agachamento Hack","Pernas","Feito na mquina inclinada. Excelente para focar no quadrceps com segurana nas costas."),H("Leg Press 45","Pernas","Permite muita carga. Ps mais baixos focam quadrceps; ps mais altos focam glteo/posterior."),H("Agachamento Blgaro","Pernas","Unilateral, p de trs apoiado. Construtor brutal de massa e equilbrio."),H("Afundo (Lunge)","Pernas","Passada estacionria."),H("Avano (Walking Lunge)","Pernas","Passada caminhando (dinmica)."),H("Cadeira Extensora","Pernas","O principal exerccio isolador. Fundamental para detalhes e cortes na coxa."),H("Sissy Squat","Pernas","Projeta os joelhos para frente e tronco para trs. Foco extremo no reto femoral."),H("Agachamento Goblet","Pernas","Segurando halter na frente do peito. timo para postura e profundidade."),H("Step-Up (Subida no Banco)","Pernas","Foca muito no quadrceps da perna que est subindo."),H("Mesa Flexora","Pernas","Trabalha o posterior em uma posio alongada no quadril."),H("Cadeira Flexora","Pernas","Gera maior hipertrofia por manter o msculo sob maior tenso alongada."),H("Flexo Nrdica","Pernas","Exerccio com peso do corpo travando calcanhares. Eficiente para fora excntrica."),H("Flexo em P Unilateral","Pernas","timo para corrigir assimetrias."),H("Stiff","Pernas","Pernas semiflexionadas, coluna reta. Foco total no alongamento do posterior."),H("RDL (Romanian Deadlift)","Pernas","Similar ao Stiff, mas com um pouco mais de flexo de joelho, permitindo mais carga."),H("Good Morning","Pernas","Barra nas costas, flexionando o tronco  frente. Exige muito da lombar e posteriores."),H("Elevao Plvica (Hip Thrust)","Pernas","O melhor exerccio isolado para glteo mximo."),H("Agachamento Sum","Pernas","Ps afastados, pontas para fora. Enfatiza glteos e adutores."),H("Levantamento Terra Clssico","Pernas","Exerccio de fora total, com grande ativao de glteo e costas."),H("Cadeira Abdutora","Pernas","Foca no glteo mdio (lateral), essencial para estabilidade."),H("Glteo na Polia (Coice)","Pernas","Extenso de quadril com cabo. Excelente para finalizar o treino."),H("Aduo de Coxa (Cadeira Adutora)","Pernas","Foca na parte interna da coxa (adutores)."),H("Panturrilha em P","Pernas","Foca no Gastrocnmio (poro maior/externa). Joelhos esticados."),H("Panturrilha no Leg Press","Pernas","Variao com joelhos esticados para Gastrocnmio."),H("Burrinho (Donkey Calf Raise)","Pernas","Tronco inclinado  frente, foco no Gastrocnmio."),H("Panturrilha Sentado","Pernas","Foca no Sleo (poro profunda/lateral). Joelhos flexionados."),H("Elevao de Ponta de P","Pernas","Para Tibial Anterior (frente da canela)."),H("Supino Fechado","Trceps","O melhor construtor de massa para o trceps. Mos na largura dos ombros."),H("Mergulho nas Paralelas (Dips) - Trceps","Trceps","Tronco reto foca totalmente no trceps."),H("Mergulho no Banco","Trceps","timo para finalizar o treino. Cuidado com os ombros."),H("Trceps Testa","Trceps","Com barra W ou halteres. Trabalha muito a cabea longa e medial."),H("Trceps Francs","Trceps","nico movimento que alonga totalmente a cabea longa do trceps."),H("Trceps Pulley/Corda","Trceps","Foca na cabea lateral. A corda permite maior contrao."),H("Trceps Coice","Trceps","Excelente para pico de contrao. Mantenha o cotovelo alto e imvel."),H("Trceps Testa na Polia Alta","Trceps","Trazendo a barra da polia alta por cima da cabea com tenso constante."),H("Rosca Direta","Bceps","O clssico. Barra reta ou W."),H("Rosca Alternada com Halteres","Bceps","Permite girar o punho (supinao) no topo, ativando mais fibras."),H("Rosca Inclinada","Bceps","Brao para trs do tronco, alongando a cabea longa desde a origem."),H("Rosca Bayesian","Bceps","Na polia, de costas para a mquina. Tenso mxima no alongamento."),H("Rosca Scott","Bceps","Braos  frente. Foca na parte de baixo e cabea curta."),H("Rosca Concentrada","Bceps","Isolamento mximo para o pico do bceps."),H("Rosca Spider","Bceps","Peito apoiado no banco inclinado, braos verticais. Isola completamente."),H("Rosca 21","Bceps","7 repeties inferiores, 7 superiores e 7 completas."),H("Rosca Martelo","Bceps","Pegada neutra. Trabalha braquial (largura) e antebrao."),H("Rosca Martelo na Corda","Bceps","Variao com tenso contnua."),H("Rosca Zottman","Bceps","Sobe supinada, desce pronada. Trabalha bceps e antebrao."),H("Rosca Inversa","Antebrao","Palmas para baixo. Foca nos extensores e braquiorradial."),H("Rosca de Punho","Antebrao","Palmas para cima. Foca nos flexores (parte interna)."),H("Rosca de Punho Inversa","Antebrao","Palmas para baixo. Foca nos extensores (parte externa)."),H("Farmer's Walk (Caminhada do Fazendeiro)","Antebrao","Segurar halteres pesados e caminhar. Constri trapzio e antebraos."),H("Pendurar na Barra (Dead Hang)","Antebrao","Segurar o peso do corpo na barra fixa pelo mximo de tempo."),H("Desenvolvimento Militar","Ombros","Em p com barra. Teste de fora, exige core e glteos."),H("Desenvolvimento com Halteres","Ombros","Permite movimento mais natural e corrige desequilbrios."),H("Desenvolvimento Arnold","Ombros","Gira as palmas ao subir. Atinge as trs cabeas do deltoide."),H("Desenvolvimento Mquina","Ombros","Excelente para dropsets e segurana."),H("Desenvolvimento Nuca","Ombros","Cuidado: Requer tima mobilidade. Foca na poro lateral."),H("Push Press","Ombros","Usa impulso das pernas para cargas supramximas na negativa."),H("Elevao Lateral com Halteres","Ombros",'Jogue o peso "para longe". Foca na largura.'),H("Elevao Lateral na Polia","Ombros","Mantm tenso constante desde o incio."),H("Elevao Lateral Inclinada","Ombros","Inclinando o corpo para o lado para aumentar a amplitude."),H("Elevao Lateral Sentado","Ombros","Elimina o balano do corpo."),H("Remada Alta","Ombros","Pegada aberta foca no deltoide lateral."),H("Mquina de Elevao Lateral","Ombros","Tenso no topo sem depender da pegada."),H("Crucifixo Inverso","Ombros",'Com halteres. Essencial para postura e o aspecto "3D" do ombro.'),H("Crucifixo Inverso na Mquina","Ombros","Peck Deck Invertido. Isola a parte de trs sem cansar a lombar."),H("Face Pull","Ombros","Puxe a corda em direo  testa. Obrigatrio para sade do ombro."),H("Crucifixo Inverso no Cabo","Ombros","Em X. Tenso brutal no pico de contrao."),H("Skiier","Ombros","No cabo alto, puxando para baixo e para trs."),H("Elevao Frontal com Halteres","Ombros","Pode ser alternada ou simultnea."),H("Elevao Frontal com Barra","Ombros","Permite mais carga."),H("Elevao Frontal com Anilha","Ombros",'Variao isomtrica "Bus Driver" no topo.'),H("Elevao Frontal na Polia","Ombros","Garante tenso contnua."),H("Encolhimento com Barra","Ombros","Pela frente ou por trs. Cargas altas funcionam bem."),H("Encolhimento com Halteres","Ombros","Permite pegada neutra e maior amplitude."),H("Encolhimento no Smith","Ombros","Foco na contrao sem se preocupar com equilbrio."),H("Barra Fixa","Costas","O exerccio mais eficiente. Pegada pronada e aberta."),H("Puxada Alta (Lat Pulldown)","Costas","Verso na mquina da barra fixa."),H("Puxada Alta Supinada","Costas","Envolve bceps, excelente para parte inferior do dorsal."),H("Puxada Alta Neutra (Tringulo)","Costas","Permite mais carga e foca fibras baixas."),H("Puxada Unilateral no Cabo (Ilaca)","Costas",'Puxa de cima ao quadril. Melhor para isolar a "asa".'),H("Remada Curvada","Costas","Construtor de massa bruta. Tronco inclinado."),H("Remada Cavalinho","Costas","Permite muita carga com segurana."),H("Remada Unilateral (Serrote)","Costas","Corrige assimetrias e permite maior amplitude."),H("Remada Baixa (Tringulo)","Costas","Foca no miolo das costas e dorsal baixo."),H("Remada Baixa (Barra Aberta)","Costas","Foca na parte alta e romboides."),H("Remada Mquina","Costas","tima para dropsets e falha com segurana."),H("Pullover na Polia","Costas","Braos esticados. Mantm tenso constante no dorsal."),H("Pullover com Halter (Banco)","Costas","Alonga a caixa torcica e trabalha dorsal em extenso mxima."),H("Depresso Sagital","Costas","Focado na contrao final perto do quadril."),H("Levantamento Terra (Deadlift)","Costas","Exerccio completo. Fora principal na cadeia posterior."),H("Meio-Terra (Rack Pull)","Costas","Saindo do joelho. Foca brutalmente na espessura das costas."),H("Hiperextenso Lombar","Costas","Banco Romano. Foca nos eretores da espinha."),H("Superman","Costas","Deitado no cho, elevando membros. Fortalecimento sem carga."),H("Inclinao Lateral (Pescoo)","Mobilidade","Puxe suavemente a cabea tentando encostar a orelha no ombro. Empurre o ombro oposto para baixo.","mobilidade"),H("Cheiro no Sovaco","Mobilidade","Gire a cabea 45 graus e puxe para baixo. Sente atrs do pescoo at a escpula.","mobilidade"),H("Peitoral no Batente","Mobilidade","Apoie antebrao no batente (90 graus) e gire o tronco para o lado oposto.","mobilidade"),H("Mos Entrelaadas Atrs","Mobilidade","Entrelace dedos atrs, estique cotovelos e suba os braos sem curvar o tronco.","mobilidade"),H("Posio da Criana","Mobilidade","Ajoelhado, estique braos  frente e quadril para trs. Alivia lombar e dorsal.","mobilidade"),H("Gato e Vaca","Mobilidade","Em 4 apoios, alterne entre arquear as costas (olhar p/ cima) e arredondar (olhar p/ umbigo).","mobilidade"),H("Dorsal Lateral (Pilar)","Mobilidade","Segure num pilar, cruze a perna de fora por trs e incline o corpo para o lado.","mobilidade"),H("Ilio-Psoas","Mobilidade","Posio de proposta. Contraia o glteo de trs e empurre o quadril levemente  frente.","mobilidade"),H("Posterior de Coxa Sentado","Mobilidade","Tente encostar o umbigo na coxa, mantendo a coluna reta (dobradia de quadril).","mobilidade"),H("Glteo (Figura 4)","Mobilidade","Deitado, cruze tornozelo sobre joelho oposto e puxe a coxa em direo ao peito.","mobilidade"),H("Quadrceps Em P","Mobilidade","Segure o p atrs. Mantenha joelhos colados e contraia o abdmen.","mobilidade"),H("Panturrilha na Parede","Mobilidade","Perna de trs esticada, calcanhar no cho. Empurre a parede.","mobilidade")],_te=[{id:"progressao_intensidade_variavel",name:"Sistema Progresso e Intensidade Varivel",description:"Este sistema utiliza uma metodologia baseada em Progresso de Carga e tabelas de Intensidade Varivel para cada exerccio. O objetivo  atingir a falha dentro de um intervalo de repeties (mnimo e mximo). Quando atingir o teto mximo de repeties, aumenta-se a carga e volta-se ao mnimo de repeties.",details:[{title:"Intensidade 1 (Exploso)",description:"Foco em fora mxima com execuo explosiva na fase positiva do movimento.",properties:{Repeties:"5 a 7 (com 1-2 reps na reserva)",Cadncia:"3s negativa, exploso na positiva",Descanso:"2 a 4 minutos"}},{title:"Intensidade 2 (Alongamento)",description:"Maximiza a tenso sob alongamento para hipertrofia.",properties:{Repeties:"8 a 12 (at a falha total)",Cadncia:"3s negativa, 1s isometria na fase alongada, 2s positiva controlada",Descanso:"2 minutos"}},{title:"Intensidade 3 (Pump)",description:'Busca o mximo de estresse metablico e "pump" muscular.',properties:{Repeties:"15 a 20 (at a falha total)",Cadncia:'Contnua (2s negativa / 2s positiva), "apertando" o msculo',Descanso:"1 minuto e 30 segundos"}},{title:"Protocolo de Deload",description:"Reduzir os pesos para cerca de 60% nas sries vlidas para recuperao.",properties:{"Frequncia (Feminino)":"A cada 4-6 semanas","Frequncia (Upper/Lower)":"A cada 6-8 semanas"}}]},{id:"treino_abcd_tecnicas_avancadas",name:"Sistema Treino ABCD (Tcnicas Avanadas)",description:"Este protocolo foca em variar os estmulos atravs de tcnicas especficas aplicadas a exerccios selecionados para quebrar plats de treino.",details:[{title:'Tcnica "SLOW"',description:"Consiste em 4 repeties com 5 segundos de fase concntrica (subida), 4 repeties com 5 segundos de fase excntrica (descida), e 4 repeties em velocidade normal."},{title:'Tcnica "BI-SET" (Super Srie)',description:"Realizar dois exerccios, geralmente para o mesmo grupo muscular ou msculos antagonistas, seguidos sem descanso entre eles."},{title:'Tcnica "EXAUSTO"',description:"Levar o msculo at a falha concntrica total em todas as sries de um determinado exerccio."},{title:'Tcnica "REST PAUSE"',description:"Aps atingir a falha, fazer um descanso curto (10-15 segundos) e continuar a srie com a mesma carga. Repetir o processo at conseguir fazer apenas 1 repetio."}]},{id:"sistema_funcional",name:"Sistema Funcional (50 Treinos Prontos)",description:"Este protocolo segue uma estrutura de circuito funcional, focada em no repetir treinos e alta intensidade metablica para condicionamento geral.",details:[{title:"Estrutura Padro",description:"Sempre inicia com uma fase de Aquecimento, incluindo Mobilidade e Estabilidade articular."},{title:"Blocos de Exerccios",description:"O treino  dividido em exerccios contnuos ou em Blocos (ex: Bloco 1, Bloco 2) para organizar o fluxo da sesso."},{title:"Protocolos de Tempo/Intervalo",description:"A maioria dos treinos  baseada em tempo de execuo fixo (ex: 3x50s, 4x40s) em vez de contagem de repeties. Os intervalos variam de 40s a 1 minuto, aplicados ao final da srie ou do exerccio."}]},{id:"mobilidade_e_estabilidade",name:"Sistema Mobilidade e Estabilidade (Treinador Elite)",description:'Protocolo corretivo focado na funo articular especfica para alvio de dores e melhora da performance, baseado na lgica "Joint-by-Joint".',details:[{title:'Lgica Articular ("Joint-by-Joint")',description:"O corpo  uma pilha de articulaes com necessidades alternadas de mobilidade e estabilidade. O problema em uma articulao geralmente  causado por disfuno na articulao acima ou abaixo."},{title:"Dores na Lombar",description:"Foco em Estabilidade Lombar + Mobilidade de Quadril e Torcica."},{title:"Dores nos Joelhos",description:"Foco em Estabilidade de Joelho + Mobilidade de Tornozelo e Fortalecimento do Arco Plantar."},{title:"Dores nos Ombros",description:"Foco em Mobilidade de Ombro + Estabilidade Escapular e Mobilidade Torcica."}]}],wte=[{type:"Caminhada Rpida",warmup:"5min Alongamento dinmico",main:"30-40min Caminhada Ritmo Acelerado",cooldown:"5min Relaxamento",zone:"Z1-Z2"},{type:"CA-CO (Caminhada-Corrida)",warmup:"5min Caminhada",main:"1min Trote + 2min Caminhada (Repetir 8-10x)",cooldown:"5min Caminhada",zone:"Z2"},{type:"Trote Contnuo",warmup:"5min Caminhada",main:"20min Trote Leve constante",cooldown:"5min Caminhada",zone:"Z2"},{type:"Rodagem (Easy Run)",warmup:"10min Trote leve",main:"40-50min Ritmo estvel e confortvel",cooldown:"5min Caminhada",zone:"Z2-Z3"},{type:"Fartlek",warmup:"10min Trote",main:"1min Forte / 1min Leve (Repetir 10x)",cooldown:"10min Trote leve",zone:"Z3-Z5"},{type:"Progressivo",warmup:"10min Trote",main:"5km Leve + 3km Moderado + 2km Forte",cooldown:"5min Caminhada",zone:"Z2 a Z4"},{type:"Tempo Run",warmup:"15min Trote + Educativos",main:"20-30min no Limiar (Confortavelmente difcil)",cooldown:"10min Trote",zone:"Z4"},{type:"Tiros Curtos",warmup:"20min Trote + 4x Aceleraes",main:"10x 400m Forte (Intervalo 1min parado)",cooldown:"10min Trote",zone:"Z5"},{type:"Tiros Longos",warmup:"15min Trote",main:"4x 1000m Forte (Intervalo 2min trote)",cooldown:"10min Trote",zone:"Z4-Z5"},{type:"Longo",warmup:"10min Trote leve",main:"Distncia longa progressiva (Ritmo de conversa)",cooldown:"Alongamento",zone:"Z2"},{type:"Regenerativo",warmup:"N/A",main:"20-30min Trote extremamente leve",cooldown:"Alongamento",zone:"Z1"}],bte={id:"meia_maratona_iniciante_12_semanas",name:"Meia Maratona (Iniciante - 12 Semanas)",weeks:[{id:"w1",weekLabel:"Semana 1",days:{tuesday:{type:"Tiros Curtos",warmup:"15min Trote",main:"5x 400m Z4 (Intervalo: 400m trote)",cooldown:"5min Trote",zone:"Z4"},thursday:{type:"Rodagem",warmup:"5min Caminhada",main:"4km Rodagem Leve",cooldown:"5min Caminhada",zone:"Z2"},saturday:{type:"Longo",warmup:"5min Caminhada",main:"8km Longo confortvel",cooldown:"Alongamento",zone:"Z2"}}},{id:"w2",weekLabel:"Semana 2",days:{tuesday:{type:"Tiros Curtos",warmup:"15min Trote",main:"6x 400m Z4 (Intervalo: 400m trote)",cooldown:"5min Trote",zone:"Z4"},thursday:{type:"Rodagem",warmup:"5min Caminhada",main:"4km Rodagem Leve",cooldown:"5min Caminhada",zone:"Z2"},saturday:{type:"Longo",warmup:"5min Caminhada",main:"10km Longo confortvel",cooldown:"Alongamento",zone:"Z2"}}},{id:"w3",weekLabel:"Semana 3",days:{tuesday:{type:"Tiros Longos",warmup:"15min Trote",main:"4x 800m Z4 (Intervalo: 400m trote)",cooldown:"5min Trote",zone:"Z4"},thursday:{type:"Rodagem",warmup:"5min Caminhada",main:"5km Rodagem Leve",cooldown:"5min Caminhada",zone:"Z2"},saturday:{type:"Longo",warmup:"5min Caminhada",main:"12km Longo confortvel",cooldown:"Alongamento",zone:"Z2"}}}]},OT=[bte];var Tte={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ete,xte;function Ste(){return{geminiUrl:Ete,vertexUrl:xte}}function Ite(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=Ste();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lo{}function de(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];p(c,e.slice(o+1),n[u])}else for(const u of l)p(u,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function h(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>h(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Ate(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}MT(t,i,o,0,s)}}function MT(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])MT(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=s[u];for(const[u,c]of Object.entries(l)){const d=[];for(const f of n.slice(r))f==="*"?d.push(u):d.push(f);p(s,d,c)}for(const u of a)delete s[u]}}else{const s=t;o in s&&MT(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aA(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pte(t){const e={},n=h(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=h(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function Cte(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["response","generateVideoResponse"]);return s!=null&&p(e,["response"],Nte(s)),e}function Rte(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["response"]);return s!=null&&p(e,["response"],kte(s)),e}function Nte(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ote(s))),p(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=h(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function kte(t){const e={},n=h(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Mte(s))),p(e,["generatedVideos"],o)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=h(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function Ote(t){const e={},n=h(t,["video"]);return n!=null&&p(e,["video"],Ute(n)),e}function Mte(t){const e={},n=h(t,["_self"]);return n!=null&&p(e,["video"],Bte(n)),e}function Dte(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Lte(t){const e={},n=h(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function $te(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["response"]);return s!=null&&p(e,["response"],Vte(s)),e}function Vte(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const i=h(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function Sj(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["response"]);return s!=null&&p(e,["response"],Fte(s)),e}function Fte(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const i=h(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function Ute(t){const e={},n=h(t,["uri"]);n!=null&&p(e,["uri"],n);const r=h(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],aA(r));const i=h(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function Bte(t){const e={},n=h(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=h(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],aA(r));const i=h(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SN;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(SN||(SN={}));var IN;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(IN||(IN={}));var AN;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(AN||(AN={}));var sr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(sr||(sr={}));var PN;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(PN||(PN={}));var CN;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(CN||(CN={}));var RN;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(RN||(RN={}));var NN;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(NN||(NN={}));var kN;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(kN||(kN={}));var ON;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ON||(ON={}));var MN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(MN||(MN={}));var DN;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(DN||(DN={}));var LN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(LN||(LN={}));var $N;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($N||($N={}));var VN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(VN||(VN={}));var FN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(FN||(FN={}));var UN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(UN||(UN={}));var BN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(BN||(BN={}));var jN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jN||(jN={}));var zN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(zN||(zN={}));var qN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qN||(qN={}));var uy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(uy||(uy={}));var GN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(GN||(GN={}));var HN;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(HN||(HN={}));var WN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(WN||(WN={}));var DT;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(DT||(DT={}));var KN;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(KN||(KN={}));var JN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(JN||(JN={}));var LT;(function(t){t.COLLECTION="COLLECTION"})(LT||(LT={}));var YN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(YN||(YN={}));var QN;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(QN||(QN={}));var XN;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(XN||(XN={}));var ZN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ZN||(ZN={}));var ek;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ek||(ek={}));var tk;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tk||(tk={}));var nk;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nk||(nk={}));var rk;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rk||(rk={}));var ik;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ik||(ik={}));var ok;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ok||(ok={}));var sk;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(sk||(sk={}));var ak;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ak||(ak={}));var lk;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(lk||(lk={}));var uk;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(uk||(uk={}));var ck;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ck||(ck={}));var dk;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(dk||(dk={}));var fk;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(fk||(fk={}));var hk;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hk||(hk={}));var pk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(pk||(pk={}));var mk;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(mk||(mk={}));var gk;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(gk||(gk={}));var yk;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(yk||(yk={}));var vk;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vk||(vk={}));var _k;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(_k||(_k={}));var wk;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(wk||(wk={}));var bk;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bk||(bk={}));var Tk;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Tk||(Tk={}));var du;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(du||(du={}));class $T{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class $d{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const f of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(f))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&d.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;c=!0,u+=f.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[f,g]of Object.entries(d))f!=="inlineData"&&(g!==null||g!==void 0)&&c.push(f);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,o,s,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class Ek{}class xk{}class jte{}class zte{}class qte{}class Gte{}class Sk{}class Ik{}class Ak{}class Hte{}class cy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new cy;let i;const o=e;return n?i=Rte(o):i=Cte(o),Object.assign(r,i),r}}class Pk{}class Ck{}class Rk{}class Nk{}class Wte{}class Kte{}class Jte{}class lA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new lA,o=$te(e);return Object.assign(r,o),r}}class Yte{}class Qte{}class Xte{}class Zte{}class kk{}class ene{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class tne{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class uA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new uA,o=Sj(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ij(t,e){const n=ze(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Aj(t){return Array.isArray(t)?t.map(e=>dy(e)):[dy(t)]}function dy(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Pj(t){const e=dy(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cj(t){const e=dy(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ok(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Rj(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ok(e)):[Ok(t)]}function VT(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Mk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Dk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Dn(t){if(t==null)throw new Error("ContentUnion is required");return VT(t)?t:{role:"user",parts:Rj(t)}}function cA(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Dn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Dn(n)):[Dn(e)]}function Gr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Mk(t)||Dk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dn(t)]}const e=[],n=[],r=VT(t[0]);for(const i of t){const o=VT(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Mk(i)||Dk(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Rj(n)}),e}function nne(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(sr).includes(n[0].toUpperCase())?n[0].toUpperCase():sr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(sr).includes(r.toUpperCase())?r.toUpperCase():sr.TYPE_UNSPECIFIED})}}function Ru(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&nne(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(sr).includes(a.toUpperCase())?a.toUpperCase():sr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ru(a);else if(r.includes(s)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Ru(u))}e[s]=l}else if(i.includes(s)){const l={};for(const[u,c]of Object.entries(a))l[u]=Ru(c);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function dA(t){return Ru(t)}function fA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hA(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Gc(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ru(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ru(e.response));return t}function Hc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function rne(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function $o(t,e){if(typeof e!="string")throw new Error("name must be a string");return rne(t,e,"cachedContents")}function Nj(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function qs(t){return aA(t)}function ine(t){return t!=null&&typeof t=="object"&&"name"in t}function one(t){return t!=null&&typeof t=="object"&&"video"in t}function sne(t){return t!=null&&typeof t=="object"&&"uri"in t}function kj(t){var e;let n;if(ine(t)&&(n=t.name),!(sne(t)&&(n=t.uri,n===void 0))&&!(one(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Oj(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Mj(t){for(const e of["models","tunedModels","publisherModels"])if(ane(t,e))return t[e];return[]}function ane(t,e){return t!==null&&typeof t=="object"&&e in t}function lne(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function une(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=lne(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Dj(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function cne(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Lj(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Wc(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $j(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dne(t){const e={},n=h(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=h(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Gne(s))),p(e,["inlinedResponses"],o)}const i=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["inlinedEmbedContentResponses"],o)}return e}function fne(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const i=h(t,["bigqueryDestination","outputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function hne(t){const e={},n=h(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const i=h(t,["bigqueryUri"]);if(i!=null&&p(e,["bigqueryDestination","outputUri"],i),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function hg(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const i=h(t,["metadata","state"]);i!=null&&p(e,["state"],$j(i));const o=h(t,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const s=h(t,["metadata","endTime"]);s!=null&&p(e,["endTime"],s);const a=h(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=h(t,["metadata","model"]);l!=null&&p(e,["model"],l);const u=h(t,["metadata","output"]);return u!=null&&p(e,["dest"],dne(Lj(u))),e}function FT(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=h(t,["state"]);i!=null&&p(e,["state"],$j(i));const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["createTime"]);s!=null&&p(e,["createTime"],s);const a=h(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(e,["endTime"],l);const u=h(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const c=h(t,["model"]);c!=null&&p(e,["model"],c);const d=h(t,["inputConfig"]);d!=null&&p(e,["src"],pne(d));const f=h(t,["outputConfig"]);f!=null&&p(e,["dest"],fne(Lj(f)));const g=h(t,["completionStats"]);return g!=null&&p(e,["completionStats"],g),e}function pne(t){const e={},n=h(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=h(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const i=h(t,["bigquerySource","inputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function mne(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=h(e,["fileName"]);r!=null&&p(n,["fileName"],r);const i=h(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>qne(t,s))),p(n,["requests","requests"],o)}return n}function gne(t){const e={},n=h(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=h(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const i=h(t,["bigqueryUri"]);if(i!=null&&p(e,["bigquerySource","inputUri"],i),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function yne(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function vne(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function _ne(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function wne(t){const e={},n=h(t,["content"]);n!=null&&p(e,["content"],n);const r=h(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],bne(r));const i=h(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const o=h(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const s=h(t,["avgLogprobs"]);s!=null&&p(e,["avgLogprobs"],s);const a=h(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=h(t,["index"]);l!=null&&p(e,["index"],l);const u=h(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const c=h(t,["safetyRatings"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["safetyRatings"],f)}const d=h(t,["urlContextMetadata"]);return d!=null&&p(e,["urlContextMetadata"],d),e}function bne(t){const e={},n=h(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["citations"],r)}return e}function Vj(t){const e={},n=h(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Xne(o))),p(e,["parts"],i)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function Tne(t,e){const n={},r=h(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ene(t,e){const n={},r=h(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=h(t,["dest"]);return e!==void 0&&i!=null&&p(e,["outputConfig"],hne(cne(i))),n}function Lk(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],ze(t,r));const i=h(e,["src"]);i!=null&&p(n,["batch","inputConfig"],mne(t,Dj(t,i)));const o=h(e,["config"]);return o!=null&&Tne(o,n),n}function xne(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],ze(t,r));const i=h(e,["src"]);i!=null&&p(n,["inputConfig"],gne(Dj(t,i)));const o=h(e,["config"]);return o!=null&&Ene(o,n),n}function Sne(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function Ine(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["_url","model"],ze(t,r));const i=h(e,["src"]);i!=null&&p(n,["batch","inputConfig"],One(t,i));const o=h(e,["config"]);return o!=null&&Sne(o,n),n}function Ane(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function Pne(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function Cne(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);return o!=null&&p(e,["error"],o),e}function Rne(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);return o!=null&&p(e,["error"],o),e}function Nne(t,e){const n={},r=h(e,["contents"]);if(r!=null){let o=cA(t,r);Array.isArray(o)&&(o=o.map(s=>s)),p(n,["requests[]","request","content"],o)}const i=h(e,["config"]);return i!=null&&(p(n,["_self"],kne(i,n)),Ate(n,{"requests[].*":"requests[].request.*"})),n}function kne(t,e){const n={},r=h(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=h(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const o=h(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function One(t,e){const n={},r=h(e,["fileName"]);r!=null&&p(n,["file_name"],r);const i=h(e,["inlinedRequests"]);return i!=null&&p(n,["requests"],Nne(t,i)),n}function Mne(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Dne(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const i=h(t,["name"]);if(i!=null&&p(e,["name"],i),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lne(t){const e={},n=h(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const r=h(t,["mode"]);if(r!=null&&p(e,["mode"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $ne(t,e,n){const r={},i=h(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Vj(Dn(i)));const o=h(e,["temperature"]);o!=null&&p(r,["temperature"],o);const s=h(e,["topP"]);s!=null&&p(r,["topP"],s);const a=h(e,["topK"]);a!=null&&p(r,["topK"],a);const l=h(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=h(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const c=h(e,["stopSequences"]);c!=null&&p(r,["stopSequences"],c);const d=h(e,["responseLogprobs"]);d!=null&&p(r,["responseLogprobs"],d);const f=h(e,["logprobs"]);f!=null&&p(r,["logprobs"],f);const g=h(e,["presencePenalty"]);g!=null&&p(r,["presencePenalty"],g);const y=h(e,["frequencyPenalty"]);y!=null&&p(r,["frequencyPenalty"],y);const _=h(e,["seed"]);_!=null&&p(r,["seed"],_);const v=h(e,["responseMimeType"]);v!=null&&p(r,["responseMimeType"],v);const b=h(e,["responseSchema"]);b!=null&&p(r,["responseSchema"],dA(b));const T=h(e,["responseJsonSchema"]);if(T!=null&&p(r,["responseJsonSchema"],T),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=h(e,["safetySettings"]);if(n!==void 0&&x!=null){let D=x;Array.isArray(D)&&(D=D.map(j=>Zne(j))),p(n,["safetySettings"],D)}const C=h(e,["tools"]);if(n!==void 0&&C!=null){let D=Hc(C);Array.isArray(D)&&(D=D.map(j=>tre(Gc(j)))),p(n,["tools"],D)}const E=h(e,["toolConfig"]);if(n!==void 0&&E!=null&&p(n,["toolConfig"],ere(E)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=h(e,["cachedContent"]);n!==void 0&&A!=null&&p(n,["cachedContent"],$o(t,A));const S=h(e,["responseModalities"]);S!=null&&p(r,["responseModalities"],S);const P=h(e,["mediaResolution"]);P!=null&&p(r,["mediaResolution"],P);const R=h(e,["speechConfig"]);if(R!=null&&p(r,["speechConfig"],fA(R)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=h(e,["thinkingConfig"]);k!=null&&p(r,["thinkingConfig"],k);const O=h(e,["imageConfig"]);O!=null&&p(r,["imageConfig"],zne(O));const M=h(e,["enableEnhancedCivicAnswers"]);if(M!=null&&p(r,["enableEnhancedCivicAnswers"],M),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Vne(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>wne(u))),p(e,["candidates"],l)}const i=h(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=h(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const s=h(t,["responseId"]);s!=null&&p(e,["responseId"],s);const a=h(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function Fne(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function Une(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],Wc(t,r)),n}function Bne(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function jne(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function zne(t){const e={},n=h(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=h(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),h(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function qne(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["request","model"],ze(t,r));const i=h(e,["contents"]);if(i!=null){let a=Gr(i);Array.isArray(a)&&(a=a.map(l=>Vj(l))),p(n,["request","contents"],a)}const o=h(e,["metadata"]);o!=null&&p(n,["metadata"],o);const s=h(e,["config"]);return s!=null&&p(n,["request","generationConfig"],$ne(t,s,h(n,["request"],{}))),n}function Gne(t){const e={},n=h(t,["response"]);n!=null&&p(e,["response"],Vne(n));const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["error"]);return i!=null&&p(e,["error"],i),e}function Hne(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);if(e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Wne(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=h(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function Kne(t){const e={},n=h(t,["config"]);return n!=null&&Hne(n,e),e}function Jne(t){const e={},n=h(t,["config"]);return n!=null&&Wne(n,e),e}function Yne(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>hg(s))),p(e,["batchJobs"],o)}return e}function Qne(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>FT(s))),p(e,["batchJobs"],o)}return e}function Xne(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=h(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],Mne(o));const s=h(t,["functionCall"]);s!=null&&p(e,["functionCall"],Dne(s));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],yne(l));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const c=h(t,["thought"]);c!=null&&p(e,["thought"],c);const d=h(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const f=h(t,["videoMetadata"]);return f!=null&&p(e,["videoMetadata"],f),e}function Zne(t){const e={},n=h(t,["category"]);if(n!=null&&p(e,["category"],n),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function ere(t){const e={},n=h(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const r=h(t,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],Lne(r)),e}function tre(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=h(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=h(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=h(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const s=h(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],Bne(s));const a=h(t,["googleSearch"]);a!=null&&p(e,["googleSearch"],jne(a));const l=h(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var So;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(So||(So={}));class El{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nre extends Lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(So.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Lk(this.apiClient,e),r=n._url,i=de("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const f=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=f,d.request=g}u.push(d)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=xne(this.apiClient,e);return a=de("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>FT(c))}else{const u=Lk(this.apiClient,e);return a=de("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>hg(c))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ine(this.apiClient,e);return o=de("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>hg(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Une(this.apiClient,e);return a=de("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>FT(c))}else{const u=Fne(this.apiClient,e);return a=de("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>hg(c))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=_ne(this.apiClient,e);s=de("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=vne(this.apiClient,e);s=de("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Jne(e);return a=de("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Qne(c),f=new kk;return Object.assign(f,d),f})}else{const u=Kne(e);return a=de("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Yne(c),f=new kk;return Object.assign(f,d),f})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Pne(this.apiClient,e);return a=de("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>Rne(c))}else{const u=Ane(this.apiClient,e);return a=de("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>Cne(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rre(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function $k(t){const e={},n=h(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ire(o))),p(e,["parts"],i)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function ire(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=h(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=h(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=h(t,["contents"]);if(e!==void 0&&s!=null){let c=Gr(s);Array.isArray(c)&&(c=c.map(d=>$k(d))),p(e,["contents"],c)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],$k(Dn(a)));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Pre(d))),p(e,["tools"],c)}const u=h(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],Are(u)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ore(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=h(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=h(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=h(t,["contents"]);if(e!==void 0&&s!=null){let d=Gr(s);Array.isArray(d)&&(d=d.map(f=>f)),p(e,["contents"],d)}const a=h(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],Dn(a));const l=h(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>Cre(f))),p(e,["tools"],d)}const u=h(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const c=h(t,["kmsKeyName"]);return e!==void 0&&c!=null&&p(e,["encryption_spec","kmsKeyName"],c),n}function sre(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],Ij(t,r));const i=h(e,["config"]);return i!=null&&ire(i,n),n}function are(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["model"],Ij(t,r));const i=h(e,["config"]);return i!=null&&ore(i,n),n}function lre(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],$o(t,r)),n}function ure(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],$o(t,r)),n}function cre(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function dre(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function fre(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function hre(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const i=h(t,["name"]);if(i!=null&&p(e,["name"],i),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pre(t){const e={},n=h(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const r=h(t,["mode"]);if(r!=null&&p(e,["mode"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function mre(t){const e={},n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const i=h(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const s=h(t,["response"]);s!=null&&p(e,["response"],s);const a=h(t,["responseJsonSchema"]);if(a!=null&&p(e,["responseJsonSchema"],a),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function gre(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],$o(t,r)),n}function yre(t,e){const n={},r=h(e,["name"]);return r!=null&&p(n,["_url","name"],$o(t,r)),n}function vre(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function _re(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function wre(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function bre(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function Tre(t){const e={},n=h(t,["config"]);return n!=null&&wre(n,e),e}function Ere(t){const e={},n=h(t,["config"]);return n!=null&&bre(n,e),e}function xre(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["cachedContents"],o)}return e}function Sre(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["cachedContents"],o)}return e}function Ire(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=h(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],fre(o));const s=h(t,["functionCall"]);s!=null&&p(e,["functionCall"],hre(s));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],rre(l));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const c=h(t,["thought"]);c!=null&&p(e,["thought"],c);const d=h(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const f=h(t,["videoMetadata"]);return f!=null&&p(e,["videoMetadata"],f),e}function Are(t){const e={},n=h(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const r=h(t,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],pre(r)),e}function Pre(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=h(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=h(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=h(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const s=h(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],vre(s));const a=h(t,["googleSearch"]);a!=null&&p(e,["googleSearch"],_re(a));const l=h(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function Cre(t){const e={},n=h(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const r=h(t,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=h(t,["codeExecution"]);i!=null&&p(e,["codeExecution"],i);const o=h(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const s=h(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(f=>mre(f))),p(e,["functionDeclarations"],d)}const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],a);const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const u=h(t,["googleSearchRetrieval"]);u!=null&&p(e,["googleSearchRetrieval"],u);const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function Rre(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=h(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function Nre(t,e){const n={},r=h(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=h(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function kre(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],$o(t,r));const i=h(e,["config"]);return i!=null&&Rre(i,n),n}function Ore(t,e){const n={},r=h(e,["name"]);r!=null&&p(n,["_url","name"],$o(t,r));const i=h(e,["config"]);return i!=null&&Nre(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mre extends Lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(So.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=are(this.apiClient,e);return a=de("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}else{const u=sre(this.apiClient,e);return a=de("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=yre(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}else{const u=gre(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=ure(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=dre(c),f=new Rk;return Object.assign(f,d),f})}else{const u=lre(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=cre(c),f=new Rk;return Object.assign(f,d),f})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Ore(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>c)}else{const u=kre(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Ere(e);return a=de("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Sre(c),f=new Nk;return Object.assign(f,d),f})}else{const u=Tre(e);return a=de("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=xre(c),f=new Nk;return Object.assign(f,d),f})}}}function fy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vk(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(t){return this instanceof xe?(this.v=t,this):new xe(t)}function di(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(y){return Promise.resolve(y).then(g,d)}}function a(g,y){r[g]&&(i[g]=function(_){return new Promise(function(v,b){o.push([g,_,v,b])>1||l(g,_)})},y&&(i[g]=y(i[g])))}function l(g,y){try{u(r[g](y))}catch(_){f(o[0][3],_)}}function u(g){g.value instanceof xe?Promise.resolve(g.value.v).then(c,d):f(o[0][2],g)}function c(g){l("next",g)}function d(g){l("throw",g)}function f(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function fi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vk=="function"?Vk(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dre(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Fj(n)}function Fj(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Lre(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Fk(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Fj(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class $re{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Vre(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Vre{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Lre(o)}async sendMessage(e){var n;await this.sendPromise;const r=Dn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,u=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let f=[];c!=null&&(f=(a=c.slice(d))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(r,g,f)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Dn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Fk(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return di(this,arguments,function*(){var i,o,s,a,l,u;const c=[];try{for(var d=!0,f=fi(e),g;g=yield xe(f.next()),i=g.done,!i;d=!0){a=g.value,d=!1;const y=a;if(Dre(y)){const _=(u=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;_!==void 0&&c.push(_)}yield yield xe(y)}}catch(y){o={error:y}}finally{try{!d&&!i&&(s=f.return)&&(yield xe(s.call(f)))}finally{if(o)throw o.error}}this.recordHistory(n,c)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Fk(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _h extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_h.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fre(t){const e={},n=h(t,["file"]);return n!=null&&p(e,["file"],n),e}function Ure(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function Bre(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],kj(n)),e}function jre(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function zre(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","file"],kj(n)),e}function qre(t){const e={},n=h(t,["uris"]);return n!=null&&p(e,["uris"],n),e}function Gre(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function Hre(t){const e={},n=h(t,["config"]);return n!=null&&Gre(n,e),e}function Wre(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["files"],o)}return e}function Kre(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jre extends Lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(So.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hre(e);return o=de("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=Wre(l),c=new Yte;return Object.assign(c,u),c})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Fre(e);return o=de("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Ure(l),c=new Qte;return Object.assign(c,u),c})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zre(e);return o=de("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Bre(e);return o=de("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=jre(l),c=new Xte;return Object.assign(c,u),c})}}async registerFilesInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qre(e);return o=de("files:register",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Kre(l),c=new Zte;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pg(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Yre(t){const e={},n=h(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>fie(o))),p(e,["parts"],i)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function Qre(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Xre(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const i=h(t,["name"]);if(i!=null&&p(e,["name"],i),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zre(t){const e={},n=h(t,["description"]);n!=null&&p(e,["description"],n);const r=h(t,["name"]);r!=null&&p(e,["name"],r);const i=h(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=h(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const s=h(t,["response"]);s!=null&&p(e,["response"],s);const a=h(t,["responseJsonSchema"]);if(a!=null&&p(e,["responseJsonSchema"],a),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eie(t){const e={},n=h(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=h(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const i=h(t,["audioTimestamp"]);i!=null&&p(e,["audioTimestamp"],i);const o=h(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const s=h(t,["enableAffectiveDialog"]);s!=null&&p(e,["enableAffectiveDialog"],s);const a=h(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=h(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=h(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const c=h(t,["mediaResolution"]);c!=null&&p(e,["mediaResolution"],c);const d=h(t,["presencePenalty"]);d!=null&&p(e,["presencePenalty"],d);const f=h(t,["responseLogprobs"]);f!=null&&p(e,["responseLogprobs"],f);const g=h(t,["responseMimeType"]);g!=null&&p(e,["responseMimeType"],g);const y=h(t,["responseModalities"]);y!=null&&p(e,["responseModalities"],y);const _=h(t,["responseSchema"]);_!=null&&p(e,["responseSchema"],_);const v=h(t,["routingConfig"]);v!=null&&p(e,["routingConfig"],v);const b=h(t,["seed"]);b!=null&&p(e,["seed"],b);const T=h(t,["speechConfig"]);T!=null&&p(e,["speechConfig"],T);const x=h(t,["stopSequences"]);x!=null&&p(e,["stopSequences"],x);const C=h(t,["temperature"]);C!=null&&p(e,["temperature"],C);const E=h(t,["thinkingConfig"]);E!=null&&p(e,["thinkingConfig"],E);const A=h(t,["topK"]);A!=null&&p(e,["topK"],A);const S=h(t,["topP"]);if(S!=null&&p(e,["topP"],S),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tie(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function nie(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function rie(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=h(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=h(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=h(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],hA(d));const f=h(t,["thinkingConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","thinkingConfig"],f);const g=h(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=h(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],Yre(Dn(y)));const _=h(t,["tools"]);if(e!==void 0&&_!=null){let A=Hc(_);Array.isArray(A)&&(A=A.map(S=>pie(Gc(S)))),p(e,["setup","tools"],A)}const v=h(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],hie(v));const b=h(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const T=h(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&p(e,["setup","outputAudioTranscription"],T);const x=h(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&p(e,["setup","realtimeInputConfig"],x);const C=h(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=h(t,["proactivity"]);if(e!==void 0&&E!=null&&p(e,["setup","proactivity"],E),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function iie(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],eie(r));const i=h(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=h(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=h(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],hA(d));const f=h(t,["thinkingConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","thinkingConfig"],f);const g=h(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=h(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],Dn(y));const _=h(t,["tools"]);if(e!==void 0&&_!=null){let S=Hc(_);Array.isArray(S)&&(S=S.map(P=>mie(Gc(P)))),p(e,["setup","tools"],S)}const v=h(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],v);const b=h(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const T=h(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&p(e,["setup","outputAudioTranscription"],T);const x=h(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&p(e,["setup","realtimeInputConfig"],x);const C=h(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=h(t,["proactivity"]);e!==void 0&&E!=null&&p(e,["setup","proactivity"],E);const A=h(t,["explicitVadSignal"]);return e!==void 0&&A!=null&&p(e,["setup","explicitVadSignal"],A),n}function oie(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],ze(t,r));const i=h(e,["config"]);return i!=null&&p(n,["config"],rie(i,n)),n}function sie(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],ze(t,r));const i=h(e,["config"]);return i!=null&&p(n,["config"],iie(i,n)),n}function aie(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function lie(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["weightedPrompts"],r)}return e}function uie(t){const e={},n=h(t,["media"]);if(n!=null){let u=Aj(n);Array.isArray(u)&&(u=u.map(c=>pg(c))),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],pg(Cj(r)));const i=h(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=h(t,["video"]);o!=null&&p(e,["video"],pg(Pj(o)));const s=h(t,["text"]);s!=null&&p(e,["text"],s);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function cie(t){const e={},n=h(t,["media"]);if(n!=null){let u=Aj(n);Array.isArray(u)&&(u=u.map(c=>c)),p(e,["mediaChunks"],u)}const r=h(t,["audio"]);r!=null&&p(e,["audio"],Cj(r));const i=h(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=h(t,["video"]);o!=null&&p(e,["video"],Pj(o));const s=h(t,["text"]);s!=null&&p(e,["text"],s);const a=h(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=h(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function die(t){const e={},n=h(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=h(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const i=h(t,["toolCall"]);i!=null&&p(e,["toolCall"],i);const o=h(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);const s=h(t,["usageMetadata"]);s!=null&&p(e,["usageMetadata"],gie(s));const a=h(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=h(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const u=h(t,["voiceActivityDetectionSignal"]);u!=null&&p(e,["voiceActivityDetectionSignal"],u);const c=h(t,["voiceActivity"]);return c!=null&&p(e,["voiceActivity"],yie(c)),e}function fie(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=h(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],Qre(o));const s=h(t,["functionCall"]);s!=null&&p(e,["functionCall"],Xre(s));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],pg(l));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const c=h(t,["thought"]);c!=null&&p(e,["thought"],c);const d=h(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const f=h(t,["videoMetadata"]);return f!=null&&p(e,["videoMetadata"],f),e}function hie(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pie(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=h(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=h(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=h(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const s=h(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],tie(s));const a=h(t,["googleSearch"]);a!=null&&p(e,["googleSearch"],nie(a));const l=h(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function mie(t){const e={},n=h(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const r=h(t,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=h(t,["codeExecution"]);i!=null&&p(e,["codeExecution"],i);const o=h(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const s=h(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(f=>Zre(f))),p(e,["functionDeclarations"],d)}const a=h(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],a);const l=h(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const u=h(t,["googleSearchRetrieval"]);u!=null&&p(e,["googleSearchRetrieval"],u);const c=h(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function gie(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=h(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const i=h(t,["candidatesTokenCount"]);i!=null&&p(e,["responseTokenCount"],i);const o=h(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const s=h(t,["thoughtsTokenCount"]);s!=null&&p(e,["thoughtsTokenCount"],s);const a=h(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=h(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["promptTokensDetails"],g)}const u=h(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["cacheTokensDetails"],g)}const c=h(t,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["responseTokensDetails"],g)}const d=h(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["toolUsePromptTokensDetails"],g)}const f=h(t,["trafficType"]);return f!=null&&p(e,["trafficType"],f),e}function yie(t){const e={},n=h(t,["type"]);return n!=null&&p(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vie(t,e){const n={},r=h(t,["data"]);if(r!=null&&p(n,["data"],r),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=h(t,["mimeType"]);return i!=null&&p(n,["mimeType"],i),n}function _ie(t,e){const n={},r=h(t,["content"]);r!=null&&p(n,["content"],r);const i=h(t,["citationMetadata"]);i!=null&&p(n,["citationMetadata"],wie(i));const o=h(t,["tokenCount"]);o!=null&&p(n,["tokenCount"],o);const s=h(t,["finishReason"]);s!=null&&p(n,["finishReason"],s);const a=h(t,["avgLogprobs"]);a!=null&&p(n,["avgLogprobs"],a);const l=h(t,["groundingMetadata"]);l!=null&&p(n,["groundingMetadata"],l);const u=h(t,["index"]);u!=null&&p(n,["index"],u);const c=h(t,["logprobsResult"]);c!=null&&p(n,["logprobsResult"],c);const d=h(t,["safetyRatings"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(n,["safetyRatings"],g)}const f=h(t,["urlContextMetadata"]);return f!=null&&p(n,["urlContextMetadata"],f),n}function wie(t,e){const n={},r=h(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(n,["citations"],i)}return n}function bie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let s=Gr(o);Array.isArray(s)&&(s=s.map(a=>a)),p(r,["contents"],s)}return r}function Tie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(n,["tokensInfo"],o)}return n}function Eie(t,e){const n={},r=h(t,["values"]);r!=null&&p(n,["values"],r);const i=h(t,["statistics"]);return i!=null&&p(n,["statistics"],xie(i)),n}function xie(t,e){const n={},r=h(t,["truncated"]);r!=null&&p(n,["truncated"],r);const i=h(t,["token_count"]);return i!=null&&p(n,["tokenCount"],i),n}function g_(t,e){const n={},r=h(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Ooe(s))),p(n,["parts"],o)}const i=h(t,["role"]);return i!=null&&p(n,["role"],i),n}function Sie(t,e){const n={},r=h(t,["controlType"]);r!=null&&p(n,["controlType"],r);const i=h(t,["enableControlImageComputation"]);return i!=null&&p(n,["computeControl"],i),n}function Iie(t,e){const n={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Aie(t,e,n){const r={},i=h(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Dn(i));const o=h(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>zj(l))),p(e,["tools"],a)}const s=h(t,["generationConfig"]);return e!==void 0&&s!=null&&p(e,["generationConfig"],voe(s)),r}function Pie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let a=Gr(o);Array.isArray(a)&&(a=a.map(l=>g_(l))),p(r,["contents"],a)}const s=h(e,["config"]);return s!=null&&Iie(s),r}function Cie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let a=Gr(o);Array.isArray(a)&&(a=a.map(l=>l)),p(r,["contents"],a)}const s=h(e,["config"]);return s!=null&&Aie(s,r),r}function Rie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["totalTokens"]);i!=null&&p(n,["totalTokens"],i);const o=h(t,["cachedContentTokenCount"]);return o!=null&&p(n,["cachedContentTokenCount"],o),n}function Nie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["totalTokens"]);return i!=null&&p(n,["totalTokens"],i),n}function kie(t,e,n){const r={},i=h(e,["model"]);return i!=null&&p(r,["_url","name"],ze(t,i)),r}function Oie(t,e,n){const r={},i=h(e,["model"]);return i!=null&&p(r,["_url","name"],ze(t,i)),r}function Mie(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function Die(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function Lie(t,e,n){const r={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=h(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l);const u=h(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const f=h(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const _=h(t,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const v=h(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const b=h(t,["addWatermark"]);e!==void 0&&b!=null&&p(e,["parameters","addWatermark"],b);const T=h(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const x=h(t,["editMode"]);e!==void 0&&x!=null&&p(e,["parameters","editMode"],x);const C=h(t,["baseSteps"]);return e!==void 0&&C!=null&&p(e,["parameters","editConfig","baseSteps"],C),r}function $ie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["prompt"]);o!=null&&p(r,["instances[0]","prompt"],o);const s=h(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Foe(u))),p(r,["instances[0]","referenceImages"],l)}const a=h(e,["config"]);return a!=null&&Lie(a,r),r}function Vie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>y_(s))),p(n,["generatedImages"],o)}return n}function Fie(t,e,n){const r={},i=h(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=h(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const s=h(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&p(e,["requests[]","outputDimensionality"],s),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Uie(t,e,n){const r={},i=h(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=h(t,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const s=h(t,["outputDimensionality"]);e!==void 0&&s!=null&&p(e,["parameters","outputDimensionality"],s);const a=h(t,["mimeType"]);e!==void 0&&a!=null&&p(e,["instances[]","mimeType"],a);const l=h(t,["autoTruncate"]);return e!==void 0&&l!=null&&p(e,["parameters","autoTruncate"],l),r}function Bie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let l=cA(t,o);Array.isArray(l)&&(l=l.map(u=>u)),p(r,["requests[]","content"],l)}const s=h(e,["config"]);s!=null&&Fie(s,r);const a=h(e,["model"]);return a!==void 0&&p(r,["requests[]","model"],ze(t,a)),r}function jie(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let a=cA(t,o);Array.isArray(a)&&(a=a.map(l=>l)),p(r,["instances[]","content"],a)}const s=h(e,["config"]);return s!=null&&Uie(s,r),r}function zie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(n,["embeddings"],s)}const o=h(t,["metadata"]);return o!=null&&p(n,["metadata"],o),n}function qie(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Eie(a))),p(n,["embeddings"],s)}const o=h(t,["metadata"]);return o!=null&&p(n,["metadata"],o),n}function Gie(t,e){const n={},r=h(t,["endpoint"]);r!=null&&p(n,["name"],r);const i=h(t,["deployedModelId"]);return i!=null&&p(n,["deployedModelId"],i),n}function Hie(t,e){const n={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["fileUri"]);r!=null&&p(n,["fileUri"],r);const i=h(t,["mimeType"]);return i!=null&&p(n,["mimeType"],i),n}function Wie(t,e){const n={},r=h(t,["id"]);r!=null&&p(n,["id"],r);const i=h(t,["args"]);i!=null&&p(n,["args"],i);const o=h(t,["name"]);if(o!=null&&p(n,["name"],o),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function Kie(t,e){const n={},r=h(t,["allowedFunctionNames"]);r!=null&&p(n,["allowedFunctionNames"],r);const i=h(t,["mode"]);if(i!=null&&p(n,["mode"],i),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function Jie(t,e){const n={},r=h(t,["description"]);r!=null&&p(n,["description"],r);const i=h(t,["name"]);i!=null&&p(n,["name"],i);const o=h(t,["parameters"]);o!=null&&p(n,["parameters"],o);const s=h(t,["parametersJsonSchema"]);s!=null&&p(n,["parametersJsonSchema"],s);const a=h(t,["response"]);a!=null&&p(n,["response"],a);const l=h(t,["responseJsonSchema"]);if(l!=null&&p(n,["responseJsonSchema"],l),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function Yie(t,e,n,r){const i={},o=h(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],g_(Dn(o)));const s=h(e,["temperature"]);s!=null&&p(i,["temperature"],s);const a=h(e,["topP"]);a!=null&&p(i,["topP"],a);const l=h(e,["topK"]);l!=null&&p(i,["topK"],l);const u=h(e,["candidateCount"]);u!=null&&p(i,["candidateCount"],u);const c=h(e,["maxOutputTokens"]);c!=null&&p(i,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(i,["stopSequences"],d);const f=h(e,["responseLogprobs"]);f!=null&&p(i,["responseLogprobs"],f);const g=h(e,["logprobs"]);g!=null&&p(i,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(i,["presencePenalty"],y);const _=h(e,["frequencyPenalty"]);_!=null&&p(i,["frequencyPenalty"],_);const v=h(e,["seed"]);v!=null&&p(i,["seed"],v);const b=h(e,["responseMimeType"]);b!=null&&p(i,["responseMimeType"],b);const T=h(e,["responseSchema"]);T!=null&&p(i,["responseSchema"],dA(T));const x=h(e,["responseJsonSchema"]);if(x!=null&&p(i,["responseJsonSchema"],x),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(n!==void 0&&C!=null){let j=C;Array.isArray(j)&&(j=j.map(q=>Uoe(q))),p(n,["safetySettings"],j)}const E=h(e,["tools"]);if(n!==void 0&&E!=null){let j=Hc(E);Array.isArray(j)&&(j=j.map(q=>Woe(Gc(q)))),p(n,["tools"],j)}const A=h(e,["toolConfig"]);if(n!==void 0&&A!=null&&p(n,["toolConfig"],Hoe(A)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=h(e,["cachedContent"]);n!==void 0&&S!=null&&p(n,["cachedContent"],$o(t,S));const P=h(e,["responseModalities"]);P!=null&&p(i,["responseModalities"],P);const R=h(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const k=h(e,["speechConfig"]);if(k!=null&&p(i,["speechConfig"],fA(k)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);O!=null&&p(i,["thinkingConfig"],O);const M=h(e,["imageConfig"]);M!=null&&p(i,["imageConfig"],Eoe(M));const D=h(e,["enableEnhancedCivicAnswers"]);if(D!=null&&p(i,["enableEnhancedCivicAnswers"],D),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function Qie(t,e,n,r){const i={},o=h(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],Dn(o));const s=h(e,["temperature"]);s!=null&&p(i,["temperature"],s);const a=h(e,["topP"]);a!=null&&p(i,["topP"],a);const l=h(e,["topK"]);l!=null&&p(i,["topK"],l);const u=h(e,["candidateCount"]);u!=null&&p(i,["candidateCount"],u);const c=h(e,["maxOutputTokens"]);c!=null&&p(i,["maxOutputTokens"],c);const d=h(e,["stopSequences"]);d!=null&&p(i,["stopSequences"],d);const f=h(e,["responseLogprobs"]);f!=null&&p(i,["responseLogprobs"],f);const g=h(e,["logprobs"]);g!=null&&p(i,["logprobs"],g);const y=h(e,["presencePenalty"]);y!=null&&p(i,["presencePenalty"],y);const _=h(e,["frequencyPenalty"]);_!=null&&p(i,["frequencyPenalty"],_);const v=h(e,["seed"]);v!=null&&p(i,["seed"],v);const b=h(e,["responseMimeType"]);b!=null&&p(i,["responseMimeType"],b);const T=h(e,["responseSchema"]);T!=null&&p(i,["responseSchema"],dA(T));const x=h(e,["responseJsonSchema"]);x!=null&&p(i,["responseJsonSchema"],x);const C=h(e,["routingConfig"]);C!=null&&p(i,["routingConfig"],C);const E=h(e,["modelSelectionConfig"]);E!=null&&p(i,["modelConfig"],E);const A=h(e,["safetySettings"]);if(n!==void 0&&A!=null){let U=A;Array.isArray(U)&&(U=U.map(J=>J)),p(n,["safetySettings"],U)}const S=h(e,["tools"]);if(n!==void 0&&S!=null){let U=Hc(S);Array.isArray(U)&&(U=U.map(J=>zj(Gc(J)))),p(n,["tools"],U)}const P=h(e,["toolConfig"]);n!==void 0&&P!=null&&p(n,["toolConfig"],P);const R=h(e,["labels"]);n!==void 0&&R!=null&&p(n,["labels"],R);const k=h(e,["cachedContent"]);n!==void 0&&k!=null&&p(n,["cachedContent"],$o(t,k));const O=h(e,["responseModalities"]);O!=null&&p(i,["responseModalities"],O);const M=h(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const D=h(e,["speechConfig"]);D!=null&&p(i,["speechConfig"],fA(D));const j=h(e,["audioTimestamp"]);j!=null&&p(i,["audioTimestamp"],j);const q=h(e,["thinkingConfig"]);q!=null&&p(i,["thinkingConfig"],q);const Y=h(e,["imageConfig"]);if(Y!=null&&p(i,["imageConfig"],xoe(Y)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const X=h(e,["modelArmorConfig"]);return n!==void 0&&X!=null&&p(n,["modelArmorConfig"],X),i}function Uk(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let a=Gr(o);Array.isArray(a)&&(a=a.map(l=>g_(l))),p(r,["contents"],a)}const s=h(e,["config"]);return s!=null&&p(r,["generationConfig"],Yie(t,s,r)),r}function Bk(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["contents"]);if(o!=null){let a=Gr(o);Array.isArray(a)&&(a=a.map(l=>l)),p(r,["contents"],a)}const s=h(e,["config"]);return s!=null&&p(r,["generationConfig"],Qie(t,s,r)),r}function jk(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>_ie(c))),p(n,["candidates"],u)}const o=h(t,["modelVersion"]);o!=null&&p(n,["modelVersion"],o);const s=h(t,["promptFeedback"]);s!=null&&p(n,["promptFeedback"],s);const a=h(t,["responseId"]);a!=null&&p(n,["responseId"],a);const l=h(t,["usageMetadata"]);return l!=null&&p(n,["usageMetadata"],l),n}function zk(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),p(n,["candidates"],c)}const o=h(t,["createTime"]);o!=null&&p(n,["createTime"],o);const s=h(t,["modelVersion"]);s!=null&&p(n,["modelVersion"],s);const a=h(t,["promptFeedback"]);a!=null&&p(n,["promptFeedback"],a);const l=h(t,["responseId"]);l!=null&&p(n,["responseId"],l);const u=h(t,["usageMetadata"]);return u!=null&&p(n,["usageMetadata"],u),n}function Xie(t,e,n){const r={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const s=h(t,["guidanceScale"]);if(e!==void 0&&s!=null&&p(e,["parameters","guidanceScale"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=h(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&p(e,["parameters","includeSafetyAttributes"],u);const c=h(t,["includeRaiReason"]);e!==void 0&&c!=null&&p(e,["parameters","includeRaiReason"],c);const d=h(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const f=h(t,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=h(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=h(t,["imageSize"]);if(e!==void 0&&y!=null&&p(e,["parameters","sampleImageSize"],y),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function Zie(t,e,n){const r={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const a=h(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l);const u=h(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const f=h(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&p(e,["parameters","includeRaiReason"],g);const y=h(t,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const _=h(t,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const v=h(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const b=h(t,["addWatermark"]);e!==void 0&&b!=null&&p(e,["parameters","addWatermark"],b);const T=h(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const x=h(t,["imageSize"]);e!==void 0&&x!=null&&p(e,["parameters","sampleImageSize"],x);const C=h(t,["enhancePrompt"]);return e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C),r}function eoe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["prompt"]);o!=null&&p(r,["instances[0]","prompt"],o);const s=h(e,["config"]);return s!=null&&Xie(s,r),r}function toe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["prompt"]);o!=null&&p(r,["instances[0]","prompt"],o);const s=h(e,["config"]);return s!=null&&Zie(s,r),r}function noe(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>poe(a))),p(n,["generatedImages"],s)}const o=h(t,["positivePromptSafetyAttributes"]);return o!=null&&p(n,["positivePromptSafetyAttributes"],Bj(o)),n}function roe(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>y_(a))),p(n,["generatedImages"],s)}const o=h(t,["positivePromptSafetyAttributes"]);return o!=null&&p(n,["positivePromptSafetyAttributes"],jj(o)),n}function ioe(t,e,n){const r={},i=h(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=h(t,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=h(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const a=h(t,["resolution"]);e!==void 0&&a!=null&&p(e,["parameters","resolution"],a);const l=h(t,["personGeneration"]);if(e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=h(t,["negativePrompt"]);e!==void 0&&u!=null&&p(e,["parameters","negativePrompt"],u);const c=h(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&p(e,["parameters","enhancePrompt"],c),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=h(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],v_(d));const f=h(t,["referenceImages"]);if(e!==void 0&&f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>sse(y))),p(e,["instances[0]","referenceImages"],g)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function ooe(t,e,n){const r={},i=h(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const s=h(t,["fps"]);e!==void 0&&s!=null&&p(e,["parameters","fps"],s);const a=h(t,["durationSeconds"]);e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=h(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const c=h(t,["resolution"]);e!==void 0&&c!=null&&p(e,["parameters","resolution"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const f=h(t,["pubsubTopic"]);e!==void 0&&f!=null&&p(e,["parameters","pubsubTopic"],f);const g=h(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const y=h(t,["enhancePrompt"]);e!==void 0&&y!=null&&p(e,["parameters","enhancePrompt"],y);const _=h(t,["generateAudio"]);e!==void 0&&_!=null&&p(e,["parameters","generateAudio"],_);const v=h(t,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],yi(v));const b=h(t,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(E=>ase(E))),p(e,["instances[0]","referenceImages"],C)}const T=h(t,["mask"]);e!==void 0&&T!=null&&p(e,["instances[0]","mask"],ose(T));const x=h(t,["compressionQuality"]);return e!==void 0&&x!=null&&p(e,["parameters","compressionQuality"],x),r}function soe(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["name"],r);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const s=h(t,["error"]);s!=null&&p(n,["error"],s);const a=h(t,["response","generateVideoResponse"]);return a!=null&&p(n,["response"],coe(a)),n}function aoe(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["name"],r);const i=h(t,["metadata"]);i!=null&&p(n,["metadata"],i);const o=h(t,["done"]);o!=null&&p(n,["done"],o);const s=h(t,["error"]);s!=null&&p(n,["error"],s);const a=h(t,["response"]);return a!=null&&p(n,["response"],doe(a)),n}function loe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["prompt"]);o!=null&&p(r,["instances[0]","prompt"],o);const s=h(e,["image"]);s!=null&&p(r,["instances[0]","image"],v_(s));const a=h(e,["video"]);a!=null&&p(r,["instances[0]","video"],qj(a));const l=h(e,["source"]);l!=null&&foe(l,r);const u=h(e,["config"]);return u!=null&&ioe(u,r),r}function uoe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["prompt"]);o!=null&&p(r,["instances[0]","prompt"],o);const s=h(e,["image"]);s!=null&&p(r,["instances[0]","image"],yi(s));const a=h(e,["video"]);a!=null&&p(r,["instances[0]","video"],Gj(a));const l=h(e,["source"]);l!=null&&hoe(l,r);const u=h(e,["config"]);return u!=null&&ooe(u,r),r}function coe(t,e){const n={},r=h(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>goe(a))),p(n,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(n,["raiMediaFilteredCount"],i);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&p(n,["raiMediaFilteredReasons"],o),n}function doe(t,e){const n={},r=h(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>yoe(a))),p(n,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&p(n,["raiMediaFilteredCount"],i);const o=h(t,["raiMediaFilteredReasons"]);return o!=null&&p(n,["raiMediaFilteredReasons"],o),n}function foe(t,e,n){const r={},i=h(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=h(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],v_(o));const s=h(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],qj(s)),r}function hoe(t,e,n){const r={},i=h(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=h(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],yi(o));const s=h(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],Gj(s)),r}function poe(t,e){const n={},r=h(t,["_self"]);r!=null&&p(n,["image"],Soe(r));const i=h(t,["raiFilteredReason"]);i!=null&&p(n,["raiFilteredReason"],i);const o=h(t,["_self"]);return o!=null&&p(n,["safetyAttributes"],Bj(o)),n}function y_(t,e){const n={},r=h(t,["_self"]);r!=null&&p(n,["image"],Uj(r));const i=h(t,["raiFilteredReason"]);i!=null&&p(n,["raiFilteredReason"],i);const o=h(t,["_self"]);o!=null&&p(n,["safetyAttributes"],jj(o));const s=h(t,["prompt"]);return s!=null&&p(n,["enhancedPrompt"],s),n}function moe(t,e){const n={},r=h(t,["_self"]);r!=null&&p(n,["mask"],Uj(r));const i=h(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(n,["labels"],o)}return n}function goe(t,e){const n={},r=h(t,["video"]);return r!=null&&p(n,["video"],rse(r)),n}function yoe(t,e){const n={},r=h(t,["_self"]);return r!=null&&p(n,["video"],ise(r)),n}function voe(t,e){const n={},r=h(t,["modelSelectionConfig"]);r!=null&&p(n,["modelConfig"],r);const i=h(t,["responseJsonSchema"]);i!=null&&p(n,["responseJsonSchema"],i);const o=h(t,["audioTimestamp"]);o!=null&&p(n,["audioTimestamp"],o);const s=h(t,["candidateCount"]);s!=null&&p(n,["candidateCount"],s);const a=h(t,["enableAffectiveDialog"]);a!=null&&p(n,["enableAffectiveDialog"],a);const l=h(t,["frequencyPenalty"]);l!=null&&p(n,["frequencyPenalty"],l);const u=h(t,["logprobs"]);u!=null&&p(n,["logprobs"],u);const c=h(t,["maxOutputTokens"]);c!=null&&p(n,["maxOutputTokens"],c);const d=h(t,["mediaResolution"]);d!=null&&p(n,["mediaResolution"],d);const f=h(t,["presencePenalty"]);f!=null&&p(n,["presencePenalty"],f);const g=h(t,["responseLogprobs"]);g!=null&&p(n,["responseLogprobs"],g);const y=h(t,["responseMimeType"]);y!=null&&p(n,["responseMimeType"],y);const _=h(t,["responseModalities"]);_!=null&&p(n,["responseModalities"],_);const v=h(t,["responseSchema"]);v!=null&&p(n,["responseSchema"],v);const b=h(t,["routingConfig"]);b!=null&&p(n,["routingConfig"],b);const T=h(t,["seed"]);T!=null&&p(n,["seed"],T);const x=h(t,["speechConfig"]);x!=null&&p(n,["speechConfig"],x);const C=h(t,["stopSequences"]);C!=null&&p(n,["stopSequences"],C);const E=h(t,["temperature"]);E!=null&&p(n,["temperature"],E);const A=h(t,["thinkingConfig"]);A!=null&&p(n,["thinkingConfig"],A);const S=h(t,["topK"]);S!=null&&p(n,["topK"],S);const P=h(t,["topP"]);if(P!=null&&p(n,["topP"],P),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function _oe(t,e,n){const r={},i=h(e,["model"]);return i!=null&&p(r,["_url","name"],ze(t,i)),r}function woe(t,e,n){const r={},i=h(e,["model"]);return i!=null&&p(r,["_url","name"],ze(t,i)),r}function boe(t,e){const n={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=h(t,["enableWidget"]);return r!=null&&p(n,["enableWidget"],r),n}function Toe(t,e){const n={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=h(t,["timeRangeFilter"]);return r!=null&&p(n,["timeRangeFilter"],r),n}function Eoe(t,e){const n={},r=h(t,["aspectRatio"]);r!=null&&p(n,["aspectRatio"],r);const i=h(t,["imageSize"]);if(i!=null&&p(n,["imageSize"],i),h(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function xoe(t,e){const n={},r=h(t,["aspectRatio"]);r!=null&&p(n,["aspectRatio"],r);const i=h(t,["imageSize"]);i!=null&&p(n,["imageSize"],i);const o=h(t,["personGeneration"]);o!=null&&p(n,["personGeneration"],o);const s=h(t,["outputMimeType"]);s!=null&&p(n,["imageOutputOptions","mimeType"],s);const a=h(t,["outputCompressionQuality"]);return a!=null&&p(n,["imageOutputOptions","compressionQuality"],a),n}function Soe(t,e){const n={},r=h(t,["bytesBase64Encoded"]);r!=null&&p(n,["imageBytes"],qs(r));const i=h(t,["mimeType"]);return i!=null&&p(n,["mimeType"],i),n}function Uj(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["gcsUri"],r);const i=h(t,["bytesBase64Encoded"]);i!=null&&p(n,["imageBytes"],qs(i));const o=h(t,["mimeType"]);return o!=null&&p(n,["mimeType"],o),n}function v_(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=h(t,["imageBytes"]);r!=null&&p(n,["bytesBase64Encoded"],qs(r));const i=h(t,["mimeType"]);return i!=null&&p(n,["mimeType"],i),n}function yi(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["gcsUri"],r);const i=h(t,["imageBytes"]);i!=null&&p(n,["bytesBase64Encoded"],qs(i));const o=h(t,["mimeType"]);return o!=null&&p(n,["mimeType"],o),n}function Ioe(t,e,n,r){const i={},o=h(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const s=h(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const a=h(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&p(n,["_url","models_url"],Oj(t,l)),i}function Aoe(t,e,n,r){const i={},o=h(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const s=h(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const a=h(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&p(n,["_url","models_url"],Oj(t,l)),i}function Poe(t,e,n){const r={},i=h(e,["config"]);return i!=null&&Ioe(t,i,r),r}function Coe(t,e,n){const r={},i=h(e,["config"]);return i!=null&&Aoe(t,i,r),r}function Roe(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=h(t,["_self"]);if(o!=null){let s=Mj(o);Array.isArray(s)&&(s=s.map(a=>UT(a))),p(n,["models"],s)}return n}function Noe(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=h(t,["_self"]);if(o!=null){let s=Mj(o);Array.isArray(s)&&(s=s.map(a=>BT(a))),p(n,["models"],s)}return n}function koe(t,e){const n={},r=h(t,["maskMode"]);r!=null&&p(n,["maskMode"],r);const i=h(t,["segmentationClasses"]);i!=null&&p(n,["maskClasses"],i);const o=h(t,["maskDilation"]);return o!=null&&p(n,["dilation"],o),n}function UT(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["name"],r);const i=h(t,["displayName"]);i!=null&&p(n,["displayName"],i);const o=h(t,["description"]);o!=null&&p(n,["description"],o);const s=h(t,["version"]);s!=null&&p(n,["version"],s);const a=h(t,["_self"]);a!=null&&p(n,["tunedModelInfo"],Koe(a));const l=h(t,["inputTokenLimit"]);l!=null&&p(n,["inputTokenLimit"],l);const u=h(t,["outputTokenLimit"]);u!=null&&p(n,["outputTokenLimit"],u);const c=h(t,["supportedGenerationMethods"]);c!=null&&p(n,["supportedActions"],c);const d=h(t,["temperature"]);d!=null&&p(n,["temperature"],d);const f=h(t,["maxTemperature"]);f!=null&&p(n,["maxTemperature"],f);const g=h(t,["topP"]);g!=null&&p(n,["topP"],g);const y=h(t,["topK"]);y!=null&&p(n,["topK"],y);const _=h(t,["thinking"]);return _!=null&&p(n,["thinking"],_),n}function BT(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["name"],r);const i=h(t,["displayName"]);i!=null&&p(n,["displayName"],i);const o=h(t,["description"]);o!=null&&p(n,["description"],o);const s=h(t,["versionId"]);s!=null&&p(n,["version"],s);const a=h(t,["deployedModels"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(g=>Gie(g))),p(n,["endpoints"],f)}const l=h(t,["labels"]);l!=null&&p(n,["labels"],l);const u=h(t,["_self"]);u!=null&&p(n,["tunedModelInfo"],Joe(u));const c=h(t,["defaultCheckpointId"]);c!=null&&p(n,["defaultCheckpointId"],c);const d=h(t,["checkpoints"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(g=>g)),p(n,["checkpoints"],f)}return n}function Ooe(t,e){const n={},r=h(t,["mediaResolution"]);r!=null&&p(n,["mediaResolution"],r);const i=h(t,["codeExecutionResult"]);i!=null&&p(n,["codeExecutionResult"],i);const o=h(t,["executableCode"]);o!=null&&p(n,["executableCode"],o);const s=h(t,["fileData"]);s!=null&&p(n,["fileData"],Hie(s));const a=h(t,["functionCall"]);a!=null&&p(n,["functionCall"],Wie(a));const l=h(t,["functionResponse"]);l!=null&&p(n,["functionResponse"],l);const u=h(t,["inlineData"]);u!=null&&p(n,["inlineData"],vie(u));const c=h(t,["text"]);c!=null&&p(n,["text"],c);const d=h(t,["thought"]);d!=null&&p(n,["thought"],d);const f=h(t,["thoughtSignature"]);f!=null&&p(n,["thoughtSignature"],f);const g=h(t,["videoMetadata"]);return g!=null&&p(n,["videoMetadata"],g),n}function Moe(t,e){const n={},r=h(t,["productImage"]);return r!=null&&p(n,["image"],yi(r)),n}function Doe(t,e,n){const r={},i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=h(t,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const s=h(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=h(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=h(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const u=h(t,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const c=h(t,["addWatermark"]);e!==void 0&&c!=null&&p(e,["parameters","addWatermark"],c);const d=h(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const f=h(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","compressionQuality"],f);const g=h(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=h(t,["labels"]);return e!==void 0&&y!=null&&p(e,["labels"],y),r}function Loe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["source"]);o!=null&&Voe(o,r);const s=h(e,["config"]);return s!=null&&Doe(s,r),r}function $oe(t,e){const n={},r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>y_(o))),p(n,["generatedImages"],i)}return n}function Voe(t,e,n){const r={},i=h(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=h(t,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],yi(o));const s=h(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Moe(l))),p(e,["instances[0]","productImages"],a)}return r}function Foe(t,e){const n={},r=h(t,["referenceImage"]);r!=null&&p(n,["referenceImage"],yi(r));const i=h(t,["referenceId"]);i!=null&&p(n,["referenceId"],i);const o=h(t,["referenceType"]);o!=null&&p(n,["referenceType"],o);const s=h(t,["maskImageConfig"]);s!=null&&p(n,["maskImageConfig"],koe(s));const a=h(t,["controlImageConfig"]);a!=null&&p(n,["controlImageConfig"],Sie(a));const l=h(t,["styleImageConfig"]);l!=null&&p(n,["styleImageConfig"],l);const u=h(t,["subjectImageConfig"]);return u!=null&&p(n,["subjectImageConfig"],u),n}function Bj(t,e){const n={},r=h(t,["safetyAttributes","categories"]);r!=null&&p(n,["categories"],r);const i=h(t,["safetyAttributes","scores"]);i!=null&&p(n,["scores"],i);const o=h(t,["contentType"]);return o!=null&&p(n,["contentType"],o),n}function jj(t,e){const n={},r=h(t,["safetyAttributes","categories"]);r!=null&&p(n,["categories"],r);const i=h(t,["safetyAttributes","scores"]);i!=null&&p(n,["scores"],i);const o=h(t,["contentType"]);return o!=null&&p(n,["contentType"],o),n}function Uoe(t,e){const n={},r=h(t,["category"]);if(r!=null&&p(n,["category"],r),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=h(t,["threshold"]);return i!=null&&p(n,["threshold"],i),n}function Boe(t,e){const n={},r=h(t,["image"]);return r!=null&&p(n,["image"],yi(r)),n}function joe(t,e,n){const r={},i=h(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=h(t,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const s=h(t,["confidenceThreshold"]);e!==void 0&&s!=null&&p(e,["parameters","confidenceThreshold"],s);const a=h(t,["maskDilation"]);e!==void 0&&a!=null&&p(e,["parameters","maskDilation"],a);const l=h(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","binaryColorThreshold"],l);const u=h(t,["labels"]);return e!==void 0&&u!=null&&p(e,["labels"],u),r}function zoe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["source"]);o!=null&&Goe(o,r);const s=h(e,["config"]);return s!=null&&joe(s,r),r}function qoe(t,e){const n={},r=h(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>moe(o))),p(n,["generatedMasks"],i)}return n}function Goe(t,e,n){const r={},i=h(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=h(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],yi(o));const s=h(t,["scribbleImage"]);return e!==void 0&&s!=null&&p(e,["instances[0]","scribble"],Boe(s)),r}function Hoe(t,e){const n={},r=h(t,["retrievalConfig"]);r!=null&&p(n,["retrievalConfig"],r);const i=h(t,["functionCallingConfig"]);return i!=null&&p(n,["functionCallingConfig"],Kie(i)),n}function Woe(t,e){const n={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=h(t,["computerUse"]);r!=null&&p(n,["computerUse"],r);const i=h(t,["fileSearch"]);i!=null&&p(n,["fileSearch"],i);const o=h(t,["codeExecution"]);if(o!=null&&p(n,["codeExecution"],o),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=h(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(f=>f)),p(n,["functionDeclarations"],d)}const a=h(t,["googleMaps"]);a!=null&&p(n,["googleMaps"],boe(a));const l=h(t,["googleSearch"]);l!=null&&p(n,["googleSearch"],Toe(l));const u=h(t,["googleSearchRetrieval"]);u!=null&&p(n,["googleSearchRetrieval"],u);const c=h(t,["urlContext"]);return c!=null&&p(n,["urlContext"],c),n}function zj(t,e){const n={},r=h(t,["retrieval"]);r!=null&&p(n,["retrieval"],r);const i=h(t,["computerUse"]);if(i!=null&&p(n,["computerUse"],i),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=h(t,["codeExecution"]);o!=null&&p(n,["codeExecution"],o);const s=h(t,["enterpriseWebSearch"]);s!=null&&p(n,["enterpriseWebSearch"],s);const a=h(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(g=>Jie(g))),p(n,["functionDeclarations"],f)}const l=h(t,["googleMaps"]);l!=null&&p(n,["googleMaps"],l);const u=h(t,["googleSearch"]);u!=null&&p(n,["googleSearch"],u);const c=h(t,["googleSearchRetrieval"]);c!=null&&p(n,["googleSearchRetrieval"],c);const d=h(t,["urlContext"]);return d!=null&&p(n,["urlContext"],d),n}function Koe(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=h(t,["createTime"]);i!=null&&p(n,["createTime"],i);const o=h(t,["updateTime"]);return o!=null&&p(n,["updateTime"],o),n}function Joe(t,e){const n={},r=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&p(n,["baseModel"],r);const i=h(t,["createTime"]);i!=null&&p(n,["createTime"],i);const o=h(t,["updateTime"]);return o!=null&&p(n,["updateTime"],o),n}function Yoe(t,e,n){const r={},i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const s=h(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),r}function Qoe(t,e,n){const r={},i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const s=h(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),r}function Xoe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","name"],ze(t,i));const o=h(e,["config"]);return o!=null&&Yoe(o,r),r}function Zoe(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["config"]);return o!=null&&Qoe(o,r),r}function ese(t,e,n){const r={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=h(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const s=h(t,["personGeneration"]);e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s);const a=h(t,["includeRaiReason"]);e!==void 0&&a!=null&&p(e,["parameters","includeRaiReason"],a);const l=h(t,["outputMimeType"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","mimeType"],l);const u=h(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&p(e,["parameters","outputOptions","compressionQuality"],u);const c=h(t,["enhanceInputImage"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=h(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const f=h(t,["labels"]);e!==void 0&&f!=null&&p(e,["labels"],f);const g=h(t,["numberOfImages"]);e!==void 0&&g!=null&&p(e,["parameters","sampleCount"],g);const y=h(t,["mode"]);return e!==void 0&&y!=null&&p(e,["parameters","mode"],y),r}function tse(t,e,n){const r={},i=h(e,["model"]);i!=null&&p(r,["_url","model"],ze(t,i));const o=h(e,["image"]);o!=null&&p(r,["instances[0]","image"],yi(o));const s=h(e,["upscaleFactor"]);s!=null&&p(r,["parameters","upscaleConfig","upscaleFactor"],s);const a=h(e,["config"]);return a!=null&&ese(a,r),r}function nse(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>y_(s))),p(n,["generatedImages"],o)}return n}function rse(t,e){const n={},r=h(t,["uri"]);r!=null&&p(n,["uri"],r);const i=h(t,["encodedVideo"]);i!=null&&p(n,["videoBytes"],qs(i));const o=h(t,["encoding"]);return o!=null&&p(n,["mimeType"],o),n}function ise(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["uri"],r);const i=h(t,["bytesBase64Encoded"]);i!=null&&p(n,["videoBytes"],qs(i));const o=h(t,["mimeType"]);return o!=null&&p(n,["mimeType"],o),n}function ose(t,e){const n={},r=h(t,["image"]);r!=null&&p(n,["_self"],yi(r));const i=h(t,["maskMode"]);return i!=null&&p(n,["maskMode"],i),n}function sse(t,e){const n={},r=h(t,["image"]);r!=null&&p(n,["image"],v_(r));const i=h(t,["referenceType"]);return i!=null&&p(n,["referenceType"],i),n}function ase(t,e){const n={},r=h(t,["image"]);r!=null&&p(n,["image"],yi(r));const i=h(t,["referenceType"]);return i!=null&&p(n,["referenceType"],i),n}function qj(t,e){const n={},r=h(t,["uri"]);r!=null&&p(n,["uri"],r);const i=h(t,["videoBytes"]);i!=null&&p(n,["encodedVideo"],qs(i));const o=h(t,["mimeType"]);return o!=null&&p(n,["encoding"],o),n}function Gj(t,e){const n={},r=h(t,["uri"]);r!=null&&p(n,["gcsUri"],r);const i=h(t,["videoBytes"]);i!=null&&p(n,["bytesBase64Encoded"],qs(i));const o=h(t,["mimeType"]);return o!=null&&p(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lse(t,e){const n={},r=h(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function use(t){const e={},n=h(t,["config"]);return n!=null&&lse(n,e),e}function cse(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function dse(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&cse(r,e),e}function fse(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function hse(t,e){const n={},r=h(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["customMetadata"],o)}const i=h(t,["chunkingConfig"]);return e!==void 0&&i!=null&&p(e,["chunkingConfig"],i),n}function pse(t){const e={},n=h(t,["name"]);n!=null&&p(e,["name"],n);const r=h(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=h(t,["done"]);i!=null&&p(e,["done"],i);const o=h(t,["error"]);o!=null&&p(e,["error"],o);const s=h(t,["response"]);return s!=null&&p(e,["response"],gse(s)),e}function mse(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["fileName"]);r!=null&&p(e,["fileName"],r);const i=h(t,["config"]);return i!=null&&hse(i,e),e}function gse(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["parent"]);r!=null&&p(e,["parent"],r);const i=h(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function yse(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function vse(t){const e={},n=h(t,["config"]);return n!=null&&yse(n,e),e}function _se(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["fileSearchStores"],o)}return e}function Hj(t,e){const n={},r=h(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const i=h(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=h(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const s=h(t,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),n}function wse(t){const e={},n=h(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=h(t,["config"]);return r!=null&&Hj(r,e),e}function bse(t){const e={},n=h(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tse="Content-Type",Ese="X-Server-Timeout",xse="User-Agent",jT="x-goog-api-client",Sse="1.40.0",Ise=`google-genai-sdk/${Sse}`,Ase="v1beta1",Pse="v1beta";class Cse{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const a=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!a?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ase}else{if(!this.clientOptions.apiKey)throw new _h({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Pse,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===LT.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&Rse(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await qk(i),new $T(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await qk(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return di(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield xe(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const y=JSON.parse(d);if("error"in y){const _=JSON.parse(JSON.stringify(y.error)),v=_.status,b=_.code,T=`got status: ${v}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new _h({message:T,status:b})}}catch(y){if(y.name==="ApiError")throw y}s+=d;let f=-1,g=0;for(;;){f=-1,g=0;for(const v of l){const b=s.indexOf(v);b!==-1&&(f===-1||b<f)&&(f=b,g=v.length)}if(f===-1)break;const y=s.substring(0,f);s=s.substring(f+g);const _=y.trim();if(_.startsWith(a)){const v=_.substring(a.length).trim();try{const b=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xe(new $T(b))}catch(b){throw new Error(`exception parsing stream chunk ${v}. ${b}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Ise+" "+this.clientOptions.userAgentExtra;return e[xse]=n,e[jT]=n,e[Tse]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(Ese,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(e),c=de("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return o.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};r!=null&&Hj(r,d);const f=await this.fetchUploadUrl(u,a,l,c,d,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function qk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new _h({message:i,status:n}):new Error(i)}}function Rse(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const u=s[l],c=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?a[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nse="mcp_used/unknown";let kse=!1;function Wj(t){for(const e of t)if(Ose(e)||typeof e=="object"&&"inputSchema"in e)return!0;return kse}function Kj(t){var e;const n=(e=t[jT])!==null&&e!==void 0?e:"";t[jT]=(n+` ${Nse}`).trimStart()}function Ose(t){return t!==null&&typeof t=="object"&&t instanceof pA}function Mse(t){return di(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield xe(n.listTools({cursor:i}));for(const a of s.tools)yield yield xe(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class pA{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new pA(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const c of this.mcpClients)try{for(var a=!0,l=(n=void 0,fi(Mse(c))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const d=i;s.push(d);const f=d.name;if(o[f])throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);o[f]=c}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),une(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Dse(t,e,n){const r=new tne;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class Lse{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=Fse(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const c=new Promise(x=>{u=x}),d=e.callbacks,f=function(){u({})},g=this.apiClient,y={onopen:f,onmessage:x=>{Dse(g,d.onmessage,x)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(x){}},_=this.webSocketFactory.create(l,Vse(s),y);_.connect(),await c;const T={setup:{model:ze(this.apiClient,e.model)}};return _.send(JSON.stringify(T)),new $se(_,this.apiClient)}}class $se{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=lie(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=aie(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(du.PLAY)}pause(){this.sendPlaybackControl(du.PAUSE)}stop(){this.sendPlaybackControl(du.STOP)}resetContext(){this.sendPlaybackControl(du.RESET_CONTEXT)}close(){this.conn.close()}}function Vse(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Fse(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Use="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Bse(t,e,n){const r=new ene;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=die(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class jse{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Lse(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&Wj(e.config.tools)&&Kj(d);const f=Hse(d);if(this.apiClient.isVertexAI()){const R=this.apiClient.getProject(),k=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),M=!!R&&!!k||!!O;this.apiClient.getCustomBaseUrl()&&!M?c=l:(c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f,c))}else{const R=this.apiClient.getApiKey();let k="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",O="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${k}?${O}=${R}`}let g=()=>{};const y=new Promise(R=>{g=R}),_=e.callbacks,v=function(){var R;(R=_==null?void 0:_.onopen)===null||R===void 0||R.call(_),g({})},b=this.apiClient,T={onopen:v,onmessage:R=>{Bse(b,_.onmessage,R)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function(R){}},x=this.webSocketFactory.create(c,Gse(f),T);x.connect(),await y;let C=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const R=this.apiClient.getProject(),k=this.apiClient.getLocation();R&&k&&(C=`projects/${R}/locations/${k}/`+C)}let E={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[uy.AUDIO]}:e.config.responseModalities=[uy.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const A=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],S=[];for(const R of A)if(this.isCallableTool(R)){const k=R;S.push(await k.tool())}else S.push(R);S.length>0&&(e.config.tools=S);const P={model:C,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?E=sie(this.apiClient,P):E=oie(this.apiClient,P),delete E.config,x.send(JSON.stringify(E)),new qse(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zse={turnComplete:!0};class qse{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Gr(n.turns),e.isVertexAI()||(r=r.map(i=>g_(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Use)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},zse),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:cie(e)}:n={realtimeInput:uie(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Gse(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Hse(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gk=10;function Hk(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Nu(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Nu(t){return"callTool"in t&&typeof t.callTool=="function"}function Wse(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Nu(i)))!==null&&r!==void 0?r:!1}function Wk(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Nu(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function Kk(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kse extends Lo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Wse(n)||Hk(n.config))return await this.generateContentInternal(l);const u=Wk(n);if(u.length>0){const _=u.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let c,d;const f=Gr(l.contents),g=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Gk;let y=0;for(;y<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const _=c.candidates[0].content,v=[];for(const b of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Nu(b)){const x=await b.callTool(c.functionCalls);v.push(...x)}y++,d={role:"user",parts:v},l.contents=Gr(l.contents),l.contents.push(_),l.contents.push(d),Kk(l.config)&&(f.push(_),f.push(d))}return Kk(l.config)&&(c.automaticFunctionCallingHistory=f),c},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),Hk(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=Wk(n);if(l.length>0){const d=l.map(f=>`tools[${f}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,c=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new El(So.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>Nu(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&Wj(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Kj(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Nu(s)){const a=s,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Gk;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){return di(this,arguments,function*(){for(var f,g,y,_,v,b;a<o;){s&&(a++,s=!1);const E=yield xe(u.processParamsMaybeAddMcpUsage(d)),A=yield xe(u.generateContentStreamInternal(E)),S=[],P=[];try{for(var T=!0,x=(g=void 0,fi(A)),C;C=yield xe(x.next()),f=C.done,!f;T=!0){_=C.value,T=!1;const R=_;if(yield yield xe(R),R.candidates&&(!((v=R.candidates[0])===null||v===void 0)&&v.content)){P.push(R.candidates[0].content);for(const k of(b=R.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(a<o&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(k.functionCall.name)){const O=yield xe(c.get(k.functionCall.name).callTool([k.functionCall]));S.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(R){g={error:R}}finally{try{!T&&!f&&(y=x.return)&&(yield xe(y.call(x)))}finally{if(g)throw g.error}}if(S.length>0){s=!0;const R=new $d;R.candidates=[{content:{role:"user",parts:S}}],yield yield xe(R);const k=[];k.push(...P),k.push({role:"user",parts:S});const O=Gr(d.contents).concat(k);d.contents=O}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Bk(this.apiClient,e);return a=de("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=zk(c),f=new $d;return Object.assign(f,d),f})}else{const u=Uk(this.apiClient,e);return a=de("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=jk(c),f=new $d;return Object.assign(f,d),f})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Bk(this.apiClient,e);return a=de("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(d){return di(this,arguments,function*(){var f,g,y,_;try{for(var v=!0,b=fi(d),T;T=yield xe(b.next()),f=T.done,!f;v=!0){_=T.value,v=!1;const x=_,C=zk(yield xe(x.json()),e);C.sdkHttpResponse={headers:x.headers};const E=new $d;Object.assign(E,C),yield yield xe(E)}}catch(x){g={error:x}}finally{try{!v&&!f&&(y=b.return)&&(yield xe(y.call(b)))}finally{if(g)throw g.error}}})})}else{const u=Uk(this.apiClient,e);return a=de("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(d){return di(this,arguments,function*(){var f,g,y,_;try{for(var v=!0,b=fi(d),T;T=yield xe(b.next()),f=T.done,!f;v=!0){_=T.value,v=!1;const x=_,C=jk(yield xe(x.json()),e);C.sdkHttpResponse={headers:x.headers};const E=new $d;Object.assign(E,C),yield yield xe(E)}}catch(x){g={error:x}}finally{try{!v&&!f&&(y=b.return)&&(yield xe(y.call(b)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=jie(this.apiClient,e);return a=de("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=qie(c),f=new Ek;return Object.assign(f,d),f})}else{const u=Bie(this.apiClient,e);return a=de("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=zie(c),f=new Ek;return Object.assign(f,d),f})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=toe(this.apiClient,e);return a=de("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=roe(c),f=new xk;return Object.assign(f,d),f})}else{const u=eoe(this.apiClient,e);return a=de("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=noe(c),f=new xk;return Object.assign(f,d),f})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=$ie(this.apiClient,e);return o=de("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=Vie(l),c=new jte;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=tse(this.apiClient,e);return o=de("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=nse(l),c=new zte;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Loe(this.apiClient,e);return o=de("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=$oe(l),c=new qte;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=zoe(this.apiClient,e);return o=de("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=qoe(l),c=new Gte;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=woe(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>BT(c))}else{const u=_oe(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>UT(c))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Coe(this.apiClient,e);return a=de("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Noe(c),f=new Sk;return Object.assign(f,d),f})}else{const u=Poe(this.apiClient,e);return a=de("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Roe(c),f=new Sk;return Object.assign(f,d),f})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Zoe(this.apiClient,e);return a=de("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>BT(c))}else{const u=Xoe(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>UT(c))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Oie(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Die(c),f=new Ik;return Object.assign(f,d),f})}else{const u=kie(this.apiClient,e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Mie(c),f=new Ik;return Object.assign(f,d),f})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Cie(this.apiClient,e);return a=de("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Nie(c),f=new Ak;return Object.assign(f,d),f})}else{const u=Pie(this.apiClient,e);return a=de("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=Rie(c),f=new Ak;return Object.assign(f,d),f})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=bie(this.apiClient,e);return o=de("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=Tie(l),c=new Hte;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=uoe(this.apiClient,e);return a=de("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s.then(c=>{const d=aoe(c),f=new cy;return Object.assign(f,d),f})}else{const u=loe(this.apiClient,e);return a=de("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>{const d=soe(c),f=new cy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jse extends Lo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Lte(e);return a=de("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),s}else{const u=Dte(e);return a=de("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=Pte(e);return o=de("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yse(t){const e={},n=h(t,["data"]);if(n!=null&&p(e,["data"],n),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Qse(t){const e={},n=h(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sae(o))),p(e,["parts"],i)}const r=h(t,["role"]);return r!=null&&p(e,["role"],r),e}function Xse(t,e,n){const r={},i=h(e,["expireTime"]);n!==void 0&&i!=null&&p(n,["expireTime"],i);const o=h(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const s=h(e,["uses"]);n!==void 0&&s!=null&&p(n,["uses"],s);const a=h(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],oae(t,a));const l=h(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function Zse(t,e){const n={},r=h(e,["config"]);return r!=null&&p(n,["config"],Xse(t,r,n)),n}function eae(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=h(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function tae(t){const e={},n=h(t,["id"]);n!=null&&p(e,["id"],n);const r=h(t,["args"]);r!=null&&p(e,["args"],r);const i=h(t,["name"]);if(i!=null&&p(e,["name"],i),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nae(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=h(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rae(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=h(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function iae(t,e){const n={},r=h(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=h(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=h(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const s=h(t,["topP"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topP"],s);const a=h(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=h(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=h(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=h(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=h(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],hA(d));const f=h(t,["thinkingConfig"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","thinkingConfig"],f);const g=h(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=h(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],Qse(Dn(y)));const _=h(t,["tools"]);if(e!==void 0&&_!=null){let A=Hc(_);Array.isArray(A)&&(A=A.map(S=>lae(Gc(S)))),p(e,["setup","tools"],A)}const v=h(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],aae(v));const b=h(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const T=h(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&p(e,["setup","outputAudioTranscription"],T);const x=h(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&p(e,["setup","realtimeInputConfig"],x);const C=h(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=h(t,["proactivity"]);if(e!==void 0&&E!=null&&p(e,["setup","proactivity"],E),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function oae(t,e){const n={},r=h(e,["model"]);r!=null&&p(n,["setup","model"],ze(t,r));const i=h(e,["config"]);return i!=null&&p(n,["config"],iae(i,n)),n}function sae(t){const e={},n=h(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=h(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=h(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=h(t,["fileData"]);o!=null&&p(e,["fileData"],eae(o));const s=h(t,["functionCall"]);s!=null&&p(e,["functionCall"],tae(s));const a=h(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=h(t,["inlineData"]);l!=null&&p(e,["inlineData"],Yse(l));const u=h(t,["text"]);u!=null&&p(e,["text"],u);const c=h(t,["thought"]);c!=null&&p(e,["thought"],c);const d=h(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const f=h(t,["videoMetadata"]);return f!=null&&p(e,["videoMetadata"],f),e}function aae(t){const e={},n=h(t,["handle"]);if(n!=null&&p(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lae(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=h(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=h(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=h(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=h(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const s=h(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],nae(s));const a=h(t,["googleSearch"]);a!=null&&p(e,["googleSearch"],rae(a));const l=h(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=h(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uae(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function cae(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=uae(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class dae extends Lo{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Zse(this.apiClient,e);o=de("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=cae(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fae(t,e){const n={},r=h(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function hae(t){const e={},n=h(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=h(t,["config"]);return r!=null&&fae(r,e),e}function pae(t){const e={},n=h(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function mae(t,e){const n={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=h(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function gae(t){const e={},n=h(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=h(t,["config"]);return r!=null&&mae(r,e),e}function yae(t){const e={},n=h(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=h(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=h(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vae extends Lo{constructor(e){super(),this.apiClient=e,this.list=async n=>new El(So.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pae(e);return o=de("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=hae(e);i=de("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gae(e);return o=de("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=yae(l),c=new Wte;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _ae extends Lo{constructor(e,n=new vae(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new El(So.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=use(e);return o=de("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fse(e);return o=de("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=dse(e);i=de("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vse(e);return o=de("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=_se(l),c=new Kte;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=wse(e);return o=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=bse(l),c=new Jte;return Object.assign(c,u),c})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mse(e);return o=de("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=pse(l),c=new lA;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jj=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Jj=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const wae=()=>Jj();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zT(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const qT=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yr extends Error{}class Xn extends Yr{constructor(e,n,r,i){super(`${Xn.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new __({message:r,cause:qT(n)});const o=n;return e===400?new Qj(e,o,r,i):e===401?new Xj(e,o,r,i):e===403?new Zj(e,o,r,i):e===404?new ez(e,o,r,i):e===409?new tz(e,o,r,i):e===422?new nz(e,o,r,i):e===429?new rz(e,o,r,i):e>=500?new iz(e,o,r,i):new Xn(e,o,r,i)}}class GT extends Xn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class __ extends Xn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Yj extends __{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Qj extends Xn{}class Xj extends Xn{}class Zj extends Xn{}class ez extends Xn{}class tz extends Xn{}class nz extends Xn{}class rz extends Xn{}class iz extends Xn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bae=/^[a-z][a-z0-9+.-]*:/i,Tae=t=>bae.test(t);let HT=t=>(HT=Array.isArray,HT(t));const Eae=HT;let xae=Eae;const Jk=xae;function Sae(t){if(!t)return!0;for(const e in t)return!1;return!0}function Iae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Aae=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yr(`${t} must be an integer`);if(e<0)throw new Yr(`${t} must be a positive integer`);return e},Pae=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cae=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rae(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Nae=()=>{var t,e,n,r,i;const o=Rae();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":Qk(Deno.build.os),"X-Stainless-Arch":Yk(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":Qk((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Yk((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=kae();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kae(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const Yk=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Qk=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Tm;const Oae=()=>Tm??(Tm=Nae());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mae(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oz(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Dae(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return oz({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function sz(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Lae(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $ae=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const az=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bw(t,e,n){return az(),new File(t,e??"unknown_file",n)}function Vae(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Fae=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lz=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Uae=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&lz(t),Bae=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function jae(t,e,n){if(az(),t=await t,Uae(t))return t instanceof File?t:bw([await t.arrayBuffer()],t.name);if(Bae(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bw(await WT(i),e,n)}const r=await WT(t);if(e||(e=Vae(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return bw(r,e,n)}async function WT(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(lz(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(Fae(t))try{for(var a=!0,l=fi(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const c=i;s.push(...await WT(c))}}catch(c){n={error:c}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const c=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${c?`; constructor: ${c}`:""}${zae(t)}`)}return s}function zae(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uz{constructor(e){this._client=e}}uz._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cz(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xk=Object.freeze(Object.create(null)),qae=(t=cz)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((c,d,f)=>{var g,y,_;/[?#]/.test(d)&&(i=!0);const v=r[f];let b=(i?encodeURIComponent:t)(""+v);return f!==r.length&&(v==null||typeof v=="object"&&v.toString===((_=Object.getPrototypeOf((y=Object.getPrototypeOf((g=v.hasOwnProperty)!==null&&g!==void 0?g:Xk))!==null&&y!==void 0?y:Xk))===null||_===void 0?void 0:_.toString))&&(b=v+"",o.push({start:c.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),c+d+(f===r.length?"":b)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((c,d)=>c.start-d.start),o.length>0){let c=0;const d=o.reduce((f,g)=>{const y=" ".repeat(g.start-c),_="^".repeat(g.length);return c=g.start+g.length,f+y+_},"");throw new Yr(`Path parameters result in path with invalid segments:
${o.map(f=>f.error).join(`
`)}
${s}
${d}`)}return s},Em=qae(cz);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dz extends uz{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=fy(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Yr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Yr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Em`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Em`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Em`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=fy(o,["api_version"]);return this._client.get(Em`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}dz._key=Object.freeze(["interactions"]);class fz extends dz{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gae(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let xm;function mA(t){let e;return(xm??(e=new globalThis.TextEncoder,xm=e.encode.bind(e)))(t)}let Sm;function Zk(t){let e;return(Sm??(e=new globalThis.TextDecoder,Sm=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w_{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?mA(e):e;this.buffer=Gae([this.buffer,n]);const r=[];let i;for(;(i=Hae(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(Zk(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=Zk(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}w_.NEWLINE_CHARS=new Set([`
`,"\r"]);w_.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Hae(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Wae(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hy={off:0,error:200,warn:300,info:400,debug:500},eO=(t,e,n)=>{if(t){if(Iae(hy,t))return t;Bn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(hy))}`)}};function af(){}function Im(t,e,n){return!e||hy[t]>hy[n]?af:e[t].bind(e)}const Kae={error:af,warn:af,info:af,debug:af};let tO=new WeakMap;function Bn(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Kae;const i=tO.get(n);if(i&&i[0]===r)return i[1];const o={error:Im("error",n,r),warn:Im("warn",n,r),info:Im("info",n,r),debug:Im("debug",n,r)};return tO.set(n,[r,o]),o}const ca=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fu{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Bn(r):console;function s(){return di(this,arguments,function*(){var l,u,c,d;if(i)throw new Yr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var g=!0,y=fi(Jae(e,n)),_;_=yield xe(y.next()),l=_.done,!l;g=!0){d=_.value,g=!1;const v=d;if(!f)if(v.data.startsWith("[DONE]")){f=!0;continue}else try{yield yield xe(JSON.parse(v.data))}catch(b){throw o.error("Could not parse message into JSON:",v.data),o.error("From chunk:",v.raw),b}}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield xe(c.call(y)))}finally{if(u)throw u.error}}f=!0}catch(v){if(zT(v))return yield xe(void 0);throw v}finally{f||n.abort()}})}return new fu(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return di(this,arguments,function*(){var l,u,c,d;const f=new w_,g=sz(e);try{for(var y=!0,_=fi(g),v;v=yield xe(_.next()),l=v.done,!l;y=!0){d=v.value,y=!1;const b=d;for(const T of f.decode(b))yield yield xe(T)}}catch(b){u={error:b}}finally{try{!y&&!l&&(c=_.return)&&(yield xe(c.call(_)))}finally{if(u)throw u.error}}for(const b of f.flush())yield yield xe(b)})}function s(){return di(this,arguments,function*(){var l,u,c,d;if(i)throw new Yr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let f=!1;try{try{for(var g=!0,y=fi(o()),_;_=yield xe(y.next()),l=_.done,!l;g=!0){d=_.value,g=!1;const v=d;f||v&&(yield yield xe(JSON.parse(v)))}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield xe(c.call(y)))}finally{if(u)throw u.error}}f=!0}catch(v){if(zT(v))return yield xe(void 0);throw v}finally{f||n.abort()}})}return new fu(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new fu(()=>i(e),this.controller,this.client),new fu(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return oz({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=mA(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Jae(t,e){return di(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yr("Attempted to iterate over a response with no body");const a=new Qae,l=new w_,u=sz(t.body);try{for(var c=!0,d=fi(Yae(u)),f;f=yield xe(d.next()),r=f.done,!r;c=!0){s=f.value,c=!1;const g=s;for(const y of l.decode(g)){const _=a.decode(y);_&&(yield yield xe(_))}}}catch(g){i={error:g}}finally{try{!c&&!r&&(o=d.return)&&(yield xe(o.call(d)))}finally{if(i)throw i.error}}for(const g of l.flush()){const y=a.decode(g);y&&(yield yield xe(y))}})}function Yae(t){return di(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=fi(t),u;u=yield xe(l.next()),n=u.done,!n;a=!0){o=u.value,a=!1;const c=o;if(c==null)continue;const d=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?mA(c):c;let f=new Uint8Array(s.length+d.length);f.set(s),f.set(d,s.length),s=f;let g;for(;(g=Wae(s))!==-1;)yield yield xe(s.slice(0,g)),s=s.slice(g)}}catch(c){r={error:c}}finally{try{!a&&!n&&(i=l.return)&&(yield xe(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield xe(s))})}class Qae{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Xae(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Xae(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Zae(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return Bn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fu.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Bn(t).debug(`[${r}] response parsed`,ca({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gA extends Promise{constructor(e,n,r=Zae){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new gA(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hz=Symbol("brand.privateNullableHeaders");function*ele(t){if(!t)return;if(hz in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Jk(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=Jk(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Vd=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of ele(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[hz]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tw=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=Tte)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pz;class b_{constructor(e){var n,r,i,o,s,a,l,{baseURL:u=Tw("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=Tw("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:d="v1beta"}=e,f=fy(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:c,apiVersion:d},f),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:b_.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const y="warn";this.logLevel=y,this.logLevel=(s=(o=eO(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:eO(Tw("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:Mae(),this.encoder=$ae,this._options=g,this.apiKey=c,this.apiVersion=d,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Vd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Vd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Yr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Yl}`}defaultIdempotencyKey(){return`stainless-node-retry-${wae()}`}makeStatusError(e,n,r,i){return Xn.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=Tae(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Sae(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new gA(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:c,timeout:d}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:c,options:a});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(Bn(this).debug(`[${f}] sending request`,ca({retryOfRequestLogID:r,method:a.method,url:c,options:a,headers:u.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new GT;const _=new AbortController,v=await this.fetchWithTimeout(c,u,d,_).catch(qT),b=Date.now();if(v instanceof globalThis.Error){const x=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new GT;const C=zT(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return Bn(this).info(`[${f}] connection ${C?"timed out":"failed"} - ${x}`),Bn(this).debug(`[${f}] connection ${C?"timed out":"failed"} (${x})`,ca({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),this.retryRequest(a,n,r??f);throw Bn(this).info(`[${f}] connection ${C?"timed out":"failed"} - error; no more retries left`),Bn(this).debug(`[${f}] connection ${C?"timed out":"failed"} (error; no more retries left)`,ca({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),C?new Yj:new __({cause:v})}const T=`[${f}${g}] ${u.method} ${c} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${b-y}ms`;if(!v.ok){const x=await this.shouldRetry(v);if(n&&x){const R=`retrying, ${n} attempts remaining`;return await Lae(v.body),Bn(this).info(`${T} - ${R}`),Bn(this).debug(`[${f}] response error (${R})`,ca({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),this.retryRequest(a,n,r??f,v.headers)}const C=x?"error; no more retries left":"error; not retryable";Bn(this).info(`${T} - ${C}`);const E=await v.text().catch(R=>qT(R).message),A=Pae(E),S=A?void 0:E;throw Bn(this).debug(`[${f}] response error (${C})`,ca({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:S,durationMs:Date.now()-y})),this.makeStatusError(v.status,A,S,v.headers)}return Bn(this).info(T),Bn(this).debug(`[${f}] response start`,ca({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),{response:v,options:a,controller:_,requestLogID:f,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=fy(o,["signal","method"]),u=i.abort.bind(i);s&&s.addEventListener("abort",u,{once:!0});const c=setTimeout(u,r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,f=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await Cae(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:c}=s,d=this.buildURL(l,u,c);"timeout"in s&&Aae("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:f,body:g}=this.buildBody({options:s}),y=await this.buildHeaders({options:e,method:a,bodyHeaders:f,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:d,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Vd([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Oae()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Vd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Dae(e)}:this.encoder({body:e,headers:r})}}b_.DEFAULT_TIMEOUT=6e4;class fn extends b_{constructor(){super(...arguments),this.interactions=new fz(this)}}pz=fn;fn.GeminiNextGenAPIClient=pz;fn.GeminiNextGenAPIClientError=Yr;fn.APIError=Xn;fn.APIConnectionError=__;fn.APIConnectionTimeoutError=Yj;fn.APIUserAbortError=GT;fn.NotFoundError=ez;fn.ConflictError=tz;fn.RateLimitError=rz;fn.BadRequestError=Qj;fn.AuthenticationError=Xj;fn.InternalServerError=iz;fn.PermissionDeniedError=Zj;fn.UnprocessableEntityError=nz;fn.toFile=jae;fn.Interactions=fz;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tle(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function nle(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function rle(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function ile(t,e){const n={},r=h(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function ole(t,e,n){const r={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=h(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&p(e,["displayName"],i),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=h(t,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);const s=h(t,["learningRateMultiplier"]);if(s!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(h(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(h(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=h(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(h(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(h(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(h(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(h(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function sle(t,e,n){const r={};let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const E=h(t,["validationDataset"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec"],Ew(E))}else if(i==="PREFERENCE_TUNING"){const E=h(t,["validationDataset"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec"],Ew(E))}else if(i==="DISTILLATION"){const E=h(t,["validationDataset"]);e!==void 0&&E!=null&&p(e,["distillationSpec"],Ew(E))}const o=h(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);const s=h(t,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);let a=h(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const E=h(t,["epochCount"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(a==="PREFERENCE_TUNING"){const E=h(t,["epochCount"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}else if(a==="DISTILLATION"){const E=h(t,["epochCount"]);e!==void 0&&E!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],E)}let l=h(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const E=h(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(l==="PREFERENCE_TUNING"){const E=h(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}else if(l==="DISTILLATION"){const E=h(t,["learningRateMultiplier"]);e!==void 0&&E!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],E)}let u=h(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const E=h(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(u==="PREFERENCE_TUNING"){const E=h(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}else if(u==="DISTILLATION"){const E=h(t,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],E)}let c=h(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const E=h(t,["adapterSize"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(c==="PREFERENCE_TUNING"){const E=h(t,["adapterSize"]);e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}else if(c==="DISTILLATION"){const E=h(t,["adapterSize"]);e!==void 0&&E!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],E)}let d=h(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const E=h(t,["tuningMode"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","tuningMode"],E)}const f=h(t,["customBaseModel"]);e!==void 0&&f!=null&&p(e,["customBaseModel"],f);let g=h(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const E=h(t,["batchSize"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],E)}let y=h(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const E=h(t,["learningRate"]);e!==void 0&&E!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],E)}const _=h(t,["labels"]);e!==void 0&&_!=null&&p(e,["labels"],_);const v=h(t,["beta"]);e!==void 0&&v!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],v);const b=h(t,["baseTeacherModel"]);e!==void 0&&b!=null&&p(e,["distillationSpec","baseTeacherModel"],b);const T=h(t,["tunedTeacherModelSource"]);e!==void 0&&T!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],T);const x=h(t,["sftLossWeightMultiplier"]);e!==void 0&&x!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],x);const C=h(t,["outputUri"]);return e!==void 0&&C!=null&&p(e,["outputUri"],C),r}function ale(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=h(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const o=h(t,["trainingDataset"]);o!=null&&vle(o);const s=h(t,["config"]);return s!=null&&ole(s,n),n}function lle(t,e){const n={},r=h(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=h(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const o=h(t,["trainingDataset"]);o!=null&&_le(o,n,e);const s=h(t,["config"]);return s!=null&&sle(s,n,e),n}function ule(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function cle(t,e){const n={},r=h(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function dle(t,e,n){const r={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=h(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const s=h(t,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),r}function fle(t,e,n){const r={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=h(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const s=h(t,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),r}function hle(t,e){const n={},r=h(t,["config"]);return r!=null&&dle(r,n),n}function ple(t,e){const n={},r=h(t,["config"]);return r!=null&&fle(r,n),n}function mle(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=h(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>mz(a))),p(n,["tuningJobs"],s)}return n}function gle(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=h(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>KT(a))),p(n,["tuningJobs"],s)}return n}function yle(t,e){const n={},r=h(t,["name"]);r!=null&&p(n,["model"],r);const i=h(t,["name"]);return i!=null&&p(n,["endpoint"],i),n}function vle(t,e){const n={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=h(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(n,["examples","examples"],i)}return n}function _le(t,e,n){const r={};let i=h(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=h(t,["gcsUri"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=h(t,["gcsUri"]);e!==void 0&&s!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){const s=h(t,["gcsUri"]);e!==void 0&&s!=null&&p(e,["distillationSpec","promptDatasetUri"],s)}let o=h(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=h(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=h(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){const s=h(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&p(e,["distillationSpec","promptDatasetUri"],s)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function mz(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["name"]);i!=null&&p(n,["name"],i);const o=h(t,["state"]);o!=null&&p(n,["state"],Nj(o));const s=h(t,["createTime"]);s!=null&&p(n,["createTime"],s);const a=h(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const c=h(t,["description"]);c!=null&&p(n,["description"],c);const d=h(t,["baseModel"]);d!=null&&p(n,["baseModel"],d);const f=h(t,["_self"]);return f!=null&&p(n,["tunedModel"],yle(f)),n}function KT(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["name"]);i!=null&&p(n,["name"],i);const o=h(t,["state"]);o!=null&&p(n,["state"],Nj(o));const s=h(t,["createTime"]);s!=null&&p(n,["createTime"],s);const a=h(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=h(t,["endTime"]);l!=null&&p(n,["endTime"],l);const u=h(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const c=h(t,["error"]);c!=null&&p(n,["error"],c);const d=h(t,["description"]);d!=null&&p(n,["description"],d);const f=h(t,["baseModel"]);f!=null&&p(n,["baseModel"],f);const g=h(t,["tunedModel"]);g!=null&&p(n,["tunedModel"],g);const y=h(t,["preTunedModel"]);y!=null&&p(n,["preTunedModel"],y);const _=h(t,["supervisedTuningSpec"]);_!=null&&p(n,["supervisedTuningSpec"],_);const v=h(t,["preferenceOptimizationSpec"]);v!=null&&p(n,["preferenceOptimizationSpec"],v);const b=h(t,["distillationSpec"]);b!=null&&p(n,["distillationSpec"],b);const T=h(t,["tuningDataStats"]);T!=null&&p(n,["tuningDataStats"],T);const x=h(t,["encryptionSpec"]);x!=null&&p(n,["encryptionSpec"],x);const C=h(t,["partnerModelTuningSpec"]);C!=null&&p(n,["partnerModelTuningSpec"],C);const E=h(t,["customBaseModel"]);E!=null&&p(n,["customBaseModel"],E);const A=h(t,["experiment"]);A!=null&&p(n,["experiment"],A);const S=h(t,["labels"]);S!=null&&p(n,["labels"],S);const P=h(t,["outputUri"]);P!=null&&p(n,["outputUri"],P);const R=h(t,["pipelineJob"]);R!=null&&p(n,["pipelineJob"],R);const k=h(t,["serviceAccount"]);k!=null&&p(n,["serviceAccount"],k);const O=h(t,["tunedModelDisplayName"]);O!=null&&p(n,["tunedModelDisplayName"],O);const M=h(t,["veoTuningSpec"]);return M!=null&&p(n,["veoTuningSpec"],M),n}function wle(t,e){const n={},r=h(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=h(t,["name"]);i!=null&&p(n,["name"],i);const o=h(t,["metadata"]);o!=null&&p(n,["metadata"],o);const s=h(t,["done"]);s!=null&&p(n,["done"],s);const a=h(t,["error"]);return a!=null&&p(n,["error"],a),n}function Ew(t,e){const n={},r=h(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const i=h(t,["vertexDatasetResource"]);return i!=null&&p(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ble extends Lo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new El(So.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:DT.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=cle(e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>KT(c))}else{const u=ule(e);return a=de("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>mz(c))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=ple(e);return a=de("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=gle(c),f=new Pk;return Object.assign(f,d),f})}else{const u=hle(e);return a=de("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=mle(c),f=new Pk;return Object.assign(f,d),f})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=nle(e);return a=de("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=ile(c),f=new Ck;return Object.assign(f,d),f})}else{const u=tle(e);return a=de("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),s.then(c=>{const d=rle(c),f=new Ck;return Object.assign(f,d),f})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=lle(e,e);return o=de("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>KT(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ale(e);return o=de("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>wle(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tle{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ele=1024*1024*8,xle=3,Sle=1e3,Ile=2,py="x-goog-upload-status";async function Ale(t,e,n){var r;const i=await gz(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[py])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Ple(t,e,n){var r;const i=await gz(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[py])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Sj(o),a=new uA;return Object.assign(a,s),a}async function gz(t,e,n){var r,i;let o=0,s=0,a=new $T(new Response),l="upload";for(o=t.size;s<o;){const u=Math.min(Ele,o-s),c=t.slice(s,s+u);s+u>=o&&(l+=", finalize");let d=0,f=Sle;for(;d<xle&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[py]));)d++,await Rle(f),f=f*Ile;if(s+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[py])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Cle(t){return{size:t.size,type:t.type}}function Rle(t){return new Promise(e=>setTimeout(e,t))}class Nle{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ale(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ple(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Cle(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kle{create(e,n,r){return new Ole(e,n,r)}}class Ole{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nO="x-goog-api-key";class Mle{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(nO)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nO,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dle="gl-node/";class JT{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new fn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Ite(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Mle(this.apiKey);this.apiClient=new Cse({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Dle+"web",uploader:new Nle,downloader:new Tle}),this.models=new Kse(this.apiClient),this.live=new jse(this.apiClient,i,new kle),this.batches=new nre(this.apiClient),this.chats=new $re(this.models,this.apiClient),this.caches=new Mre(this.apiClient),this.files=new Jre(this.apiClient),this.operations=new Jse(this.apiClient),this.authTokens=new dae(this.apiClient),this.tunings=new ble(this.apiClient),this.fileSearchStores=new _ae(this.apiClient)}}var YT={};const Lle={id:"protocol_abcd_hypertrophy",name:"Protocolo ABCD (Hipertrofia Clssica)",exercises:[{type:"header",id:"h_a",label:"Treino A (Peito e Costas)"},{type:"exercise",id:"p_abcd_1",exercise:"Supino Reto com Barra",target:"Peitoral",displayString:"4 x 8-12"},{type:"exercise",id:"p_abcd_2",exercise:"Barra Fixa",target:"Costas",displayString:"4 x Falha"},{type:"exercise",id:"p_abcd_3",exercise:"Supino Inclinado com Halteres",target:"Peitoral",displayString:"3 x 10-12"},{type:"exercise",id:"p_abcd_4",exercise:"Crucifixo Declinado",target:"Peitoral",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_5",exercise:"Pull Over com Halter",target:"Peitoral",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_6",exercise:"Remada Cavalinho",target:"Costas",displayString:"4 x 10"},{type:"exercise",id:"p_abcd_7",exercise:"Remada Curvada com Barra",target:"Costas",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_8",exercise:"Remada Unilateral (Serrote)",target:"Costas",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_9",exercise:"Pull Down",target:"Costas",displayString:"3 x 15"},{type:"header",id:"h_b",label:"Treino B (Bceps e Trceps)"},{type:"exercise",id:"p_abcd_10",exercise:"Rosca Direta com Barra",target:"Bceps",displayString:"4 x 10"},{type:"exercise",id:"p_abcd_11",exercise:"Trceps Testa com Barra",target:"Trceps",displayString:"4 x 10"},{type:"exercise",id:"p_abcd_12",exercise:"Rosca Alternada com Halteres",target:"Bceps",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_13",exercise:"Trceps Corda",target:"Trceps",displayString:"3 x 15"},{type:"exercise",id:"p_abcd_14",exercise:"Rosca Martelo",target:"Bceps",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_15",exercise:"Trceps Francs Unilateral",target:"Trceps",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_16",exercise:"Rosca 21",target:"Bceps",displayString:"2 Sries"},{type:"header",id:"h_c",label:"Treino C (Ombro, Trapzio, Abd)"},{type:"exercise",id:"p_abcd_17",exercise:"Desenvolvimento com Halteres",target:"Ombros",displayString:"4 x 10"},{type:"exercise",id:"p_abcd_18",exercise:"Elevao Lateral com Halteres",target:"Ombros",displayString:"4 x 12-15"},{type:"exercise",id:"p_abcd_19",exercise:"Elevao Frontal com Halteres",target:"Ombros",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_20",exercise:"Desenvolvimento Arnold",target:"Ombros",displayString:"3 x 10"},{type:"exercise",id:"p_abcd_21",exercise:"Encolhimento com Halteres",target:"Ombros",displayString:"4 x 15"},{type:"exercise",id:"p_abcd_22",exercise:"Remada Alta",target:"Ombros",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_23",exercise:"Abdominal Canivete",target:"Abdmen",displayString:"4 x 20"},{type:"exercise",id:"p_abcd_24",exercise:"Prancha Frontal",target:"Abdmen",displayString:"3 x Falha"},{type:"header",id:"h_d",label:"Treino D (Pernas Completas)"},{type:"exercise",id:"p_abcd_25",exercise:"Leg Press 45",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"p_abcd_26",exercise:"Agachamento Livre com Barra",target:"Pernas",displayString:"4 x 10"},{type:"exercise",id:"p_abcd_27",exercise:"Cadeira Extensora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"p_abcd_28",exercise:"Mesa Flexora",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"p_abcd_29",exercise:"Avano (Passada)",target:"Pernas",displayString:"3 x 20 passos"},{type:"exercise",id:"p_abcd_30",exercise:"Stiff no Smith",target:"Pernas",displayString:"3 x 12"},{type:"exercise",id:"p_abcd_31",exercise:"Cadeira Adutora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"p_abcd_32",exercise:"Panturrilha em P",target:"Pernas",displayString:"4 x 20"},{type:"exercise",id:"p_abcd_33",exercise:"Elevao de Gmeos (Sentado)",target:"Pernas",displayString:"4 x 15"}]},$le={id:"protocol_upper_lower",name:"Protocolo Upper / Lower (Fora e Base)",exercises:[{type:"header",id:"h_ul_1",label:"Upper A (Fora/Base)"},{type:"exercise",id:"ul_1",exercise:"Remada Curvada com Barra",target:"Costas",displayString:"4 x 6-8",notes:"Pegada Pronada"},{type:"exercise",id:"ul_2",exercise:"Remada Cavalinho Mquina",target:"Costas",displayString:"3 x 10"},{type:"exercise",id:"ul_3",exercise:"Supino Reto com Barra",target:"Peitoral",displayString:"4 x 6-8"},{type:"exercise",id:"ul_4",exercise:"Crucifixo Inclinado com Halteres",target:"Peitoral",displayString:"3 x 10"},{type:"exercise",id:"ul_5",exercise:"Desenvolvimento no Smith",target:"Ombros",displayString:"3 x 8-10"},{type:"exercise",id:"ul_6",exercise:"Elevao Lateral com Halteres",target:"Ombros",displayString:"3 x 12",notes:"Bi-set com Desenvolvimento"},{type:"exercise",id:"ul_7",exercise:"Remada Alta com Barra",target:"Ombros",displayString:"3 x 12"},{type:"header",id:"h_ul_2",label:"Lower A (Quadrceps/Geral)"},{type:"exercise",id:"ul_8",exercise:"Hack Machine",target:"Pernas",displayString:"4 x 8-10"},{type:"exercise",id:"ul_9",exercise:"Cadeira Extensora",target:"Pernas",displayString:"3 x 12-15"},{type:"exercise",id:"ul_10",exercise:"Mesa Flexora",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"ul_11",exercise:"Stiff com Barra",target:"Pernas",displayString:"3 x 10"},{type:"exercise",id:"ul_12",exercise:"Panturrilha Sentado",target:"Pernas",displayString:"4 x 15"},{type:"exercise",id:"ul_13",exercise:"Rosca Direta com Barra",target:"Bceps",displayString:"3 x 10"},{type:"exercise",id:"ul_14",exercise:"Trceps Corda",target:"Trceps",displayString:"3 x 10"},{type:"header",id:"h_ul_3",label:"Upper B (Hipertrofia/Mquinas)"},{type:"exercise",id:"ul_15",exercise:"Remada Articulada (Pegada Neutra)",target:"Costas",displayString:"4 x 10"},{type:"exercise",id:"ul_16",exercise:"Pulldown Unilateral",target:"Costas",displayString:"3 x 12"},{type:"exercise",id:"ul_17",exercise:"Supino Inclinado Hammer",target:"Peitoral",displayString:"4 x 10"},{type:"exercise",id:"ul_18",exercise:"Crucifixo na Mquina (Peck Deck)",target:"Peitoral",displayString:"3 x 15"},{type:"exercise",id:"ul_19",exercise:"Encolhimento no Smith",target:"Ombros",displayString:"4 x 15"},{type:"exercise",id:"ul_20",exercise:"Crucifixo Inverso com Halteres",target:"Costas",displayString:"3 x 15"},{type:"header",id:"h_ul_4",label:"Lower B (Posterior/Glteo)"},{type:"exercise",id:"ul_21",exercise:"Levantamento Terra Convencional",target:"Pernas",displayString:"3 x 6-8"},{type:"exercise",id:"ul_22",exercise:"Cadeira Flexora",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"ul_23",exercise:"Cadeira Extensora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"ul_24",exercise:"Leg Press 45",target:"Pernas",displayString:"4 x 10"},{type:"exercise",id:"ul_25",exercise:"Panturrilha Sentado",target:"Pernas",displayString:"4 x 15"},{type:"exercise",id:"ul_26",exercise:"Rosca Alternada com Halteres",target:"Bceps",displayString:"3 x 12"},{type:"exercise",id:"ul_27",exercise:"Trceps Testa com Halteres",target:"Trceps",displayString:"3 x 12"}]},Vle={id:"protocol_female_glute",name:"Protocolo Feminino (Foco Glteos 3x)",exercises:[{type:"header",id:"h_f_1",label:"Segunda (Quadrceps e Glteos)"},{type:"exercise",id:"f_1",exercise:"Hack Machine",target:"Pernas",displayString:"4 x 10"},{type:"exercise",id:"f_2",exercise:"Cadeira Extensora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"f_3",exercise:"Afundo no Smith",target:"Pernas",displayString:"3 x 12 (cada)"},{type:"exercise",id:"f_4",exercise:"Elevao Plvica com Barra",target:"Pernas",displayString:"4 x 10-12",notes:"Pico de contrao 2s"},{type:"exercise",id:"f_5",exercise:"Glteo Coice na Polia",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"f_6",exercise:"Cadeira Abdutora",target:"Pernas",displayString:"3 x 20"},{type:"exercise",id:"f_7",exercise:"Panturrilha Sentado",target:"Pernas",displayString:"4 x 15"},{type:"header",id:"h_f_2",label:"Tera (Dorsais e Panturrilhas)"},{type:"exercise",id:"f_8",exercise:"Puxada Aberta Pronada",target:"Costas",displayString:"4 x 12"},{type:"exercise",id:"f_9",exercise:"Remada Unilateral (Serrote)",target:"Costas",displayString:"3 x 12"},{type:"exercise",id:"f_10",exercise:"Remada Articulada (Pegada Pronada)",target:"Costas",displayString:"3 x 12"},{type:"exercise",id:"f_11",exercise:"Encolhimento com Halteres",target:"Ombros",displayString:"3 x 15"},{type:"exercise",id:"f_12",exercise:"Rosca Direta com Barra",target:"Bceps",displayString:"3 x 12"},{type:"exercise",id:"f_13",exercise:"Rosca Alternada com Halteres",target:"Bceps",displayString:"3 x 12"},{type:"header",id:"h_f_3",label:"Quarta (Glteos e Posteriores)"},{type:"exercise",id:"f_14",exercise:"Stiff com Barra",target:"Pernas",displayString:"4 x 10"},{type:"exercise",id:"f_15",exercise:"Mesa Flexora",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"f_16",exercise:"Cadeira Flexora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"f_17",exercise:"Elevao Plvica na Mquina",target:"Pernas",displayString:"4 x 12"},{type:"exercise",id:"f_18",exercise:"Extenso de Quadril",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"f_19",exercise:"Abduo de Quadril na Polia",target:"Pernas",displayString:"3 x 15"},{type:"header",id:"h_f_4",label:"Quinta (Ombros e Braos)"},{type:"exercise",id:"f_20",exercise:"Desenvolvimento com Halteres",target:"Ombros",displayString:"4 x 10"},{type:"exercise",id:"f_21",exercise:"Elevao Lateral com Halteres",target:"Ombros",displayString:"4 x 12"},{type:"exercise",id:"f_22",exercise:"Supino Reto na Mquina",target:"Peitoral",displayString:"3 x 12"},{type:"exercise",id:"f_23",exercise:"Trceps Corda",target:"Trceps",displayString:"3 x 12"},{type:"exercise",id:"f_24",exercise:"Trceps Testa com Halteres",target:"Trceps",displayString:"3 x 12"},{type:"exercise",id:"f_25",exercise:"Rosca Direta na Polia",target:"Bceps",displayString:"3 x 12"},{type:"header",id:"h_f_5",label:"Sbado (Inferiores Completo)"},{type:"exercise",id:"f_26",exercise:"Levantamento Terra Sum",target:"Pernas",displayString:"4 x 8"},{type:"exercise",id:"f_27",exercise:"Glteo Coice na Polia",target:"Pernas",displayString:"3 x 12"},{type:"exercise",id:"f_28",exercise:"Agachamento Blgaro",target:"Pernas",displayString:"3 x 10 (cada)"},{type:"exercise",id:"f_29",exercise:"Cadeira Extensora",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"f_30",exercise:"Mesa Flexora",target:"Pernas",displayString:"3 x 12"},{type:"exercise",id:"f_31",exercise:"Cadeira Flexora",target:"Pernas",displayString:"3 x 15"}]},Fle={id:"protocol_functional",name:"Treino Funcional Metablico (50 Treinos)",exercises:[{type:"header",id:"h_fun_1",label:"Cardio e Agilidade"},{type:"exercise",id:"fun_1",exercise:"Corrida Suicdio",target:"Cardio",displayString:"3 x 1 min"},{type:"exercise",id:"fun_2",exercise:"Deslocamento Lateral",target:"Cardio",displayString:"3 x 45s"},{type:"exercise",id:"fun_3",exercise:"Escalada (Mountain Climber)",target:"Cardio",displayString:"3 x 40s"},{type:"exercise",id:"fun_4",exercise:"Polichinelo Frontal",target:"Cardio",displayString:"3 x 1 min"},{type:"exercise",id:"fun_5",exercise:"Zigue-Zague entre Cones",target:"Cardio",displayString:"3 voltas"},{type:"exercise",id:"fun_6",exercise:"Corda Naval",target:"Cardio",displayString:"3 x 30s"},{type:"exercise",id:"fun_7",exercise:"Skipping Alto",target:"Cardio",displayString:"3 x 30s"},{type:"header",id:"h_fun_2",label:"Pliometria e Potncia"},{type:"exercise",id:"fun_8",exercise:"Salto Vertical caindo no Step",target:"Cardio",displayString:"3 x 10"},{type:"exercise",id:"fun_9",exercise:"Burpee",target:"Cardio",displayString:"3 x 10"},{type:"exercise",id:"fun_10",exercise:"Agachamento com Salto (Jump Squat)",target:"Pernas",displayString:"3 x 15"},{type:"exercise",id:"fun_11",exercise:"Tiro Exploso (Sprint curto)",target:"Cardio",displayString:"5 x 20m"},{type:"exercise",id:"fun_12",exercise:"Sobe/Desce no Step (Rpido)",target:"Cardio",displayString:"3 x 1 min"},{type:"header",id:"h_fun_3",label:"Fora Funcional e Core"},{type:"exercise",id:"fun_13",exercise:"Flexo de Brao",target:"Peitoral",displayString:"3 x Falha"},{type:"exercise",id:"fun_14",exercise:"Prancha Frontal",target:"Abdmen",displayString:"3 x 45s"},{type:"exercise",id:"fun_15",exercise:"Prancha Lateral",target:"Abdmen",displayString:"3 x 30s (lado)"},{type:"exercise",id:"fun_16",exercise:"Abdominal Remador",target:"Abdmen",displayString:"3 x 20"},{type:"exercise",id:"fun_17",exercise:"Abdominal Infra (Solo)",target:"Abdmen",displayString:"3 x 15"},{type:"exercise",id:"fun_18",exercise:"Meio Burpee (Sprawl)",target:"Cardio",displayString:"3 x 12"}]},Ule={id:"protocol_mobility",name:"Protocolo Mobilidade e Estabilidade (Joint-by-Joint)",exercises:[{type:"header",id:"h_mob_1",label:"Lombar e Core"},{type:"exercise",id:"mob_1",exercise:"Ponte Isomtrica + Anti-rotao",target:"Abdmen",displayString:"3 x 30s"},{type:"exercise",id:"mob_2",exercise:"Prancha Frontal",target:"Abdmen",displayString:"3 x 45s"},{type:"exercise",id:"mob_3",exercise:"Anti-rotao Ajoelhado (Pallof Press)",target:"Abdmen",displayString:"3 x 12 (lado)"},{type:"exercise",id:"mob_4",exercise:"Prancha Lateral",target:"Abdmen",displayString:"3 x 30s"},{type:"header",id:"h_mob_2",label:"Quadril"},{type:"exercise",id:"mob_5",exercise:"Banco com Rotao",target:"Mobilidade",displayString:"2 x 10"},{type:"exercise",id:"mob_6",exercise:"Glteo Deitado (Piriforme)",target:"Mobilidade",displayString:"30s cada"},{type:"exercise",id:"mob_7",exercise:"Quadril Cho (Posio 90/90)",target:"Mobilidade",displayString:"1 min trocando"},{type:"exercise",id:"mob_8",exercise:"Anti e Retroverso Plvica com Super Band",target:"Mobilidade",displayString:"2 x 15"},{type:"header",id:"h_mob_3",label:"Joelhos e Ps"},{type:"exercise",id:"mob_9",exercise:"P Garra (Short Foot)",target:"Mobilidade",displayString:"3 x 10s isometria"},{type:"exercise",id:"mob_10",exercise:"Agachamento Isomtrico com Duas Borrachas",target:"Pernas",displayString:"3 x 30s"},{type:"exercise",id:"mob_11",exercise:"Aviozinho Alternando (Stiff Unilateral s/ peso)",target:"Pernas",displayString:"2 x 10 (lado)"},{type:"exercise",id:"mob_12",exercise:"Abduo com Mini Band (P na parede)",target:"Pernas",displayString:"2 x 15"},{type:"header",id:"h_mob_4",label:"Ombros e Torcica"},{type:"exercise",id:"mob_13",exercise:"Apoio Escapular (Push-up Plus)",target:"Peitoral",displayString:"2 x 15"},{type:"exercise",id:"mob_14",exercise:"Rotao Interna em Decbito Lateral (Sleeper Stretch)",target:"Mobilidade",displayString:"30s cada"},{type:"exercise",id:"mob_15",exercise:"Gato-Camelo",target:"Mobilidade",displayString:"10 reps"},{type:"exercise",id:"mob_16",exercise:"Mobilidade Torcica (Livro Aberto)",target:"Mobilidade",displayString:"10 reps cada"}]},Ble={id:"preset_strength_runners",name:"Fortalecimento para Corredores",exercises:[{type:"header",id:"h_run_1",label:"Aquecimento / Mobilidade"},{type:"exercise",id:"run_1",exercise:"Mobilidade de Tornozelo",target:"Mobilidade",displayString:"2 x 10 cada"},{type:"exercise",id:"run_2",exercise:"Ponte Unilateral",target:"Pernas",displayString:"3 x 12 cada"},{type:"exercise",id:"run_3",exercise:"Ostra (Clam Shell)",target:"Pernas",displayString:"3 x 15 cada"},{type:"header",id:"h_run_2",label:"Fora Principal"},{type:"exercise",id:"run_4",exercise:"Agachamento Unilateral (Blgaro)",target:"Pernas",displayString:"3 x 10 cada"},{type:"exercise",id:"run_5",exercise:"Stiff Unilateral",target:"Pernas",displayString:"3 x 10 cada"},{type:"exercise",id:"run_6",exercise:"Panturrilha Unilateral em P",target:"Pernas",displayString:"3 x 15 cada"},{type:"exercise",id:"run_7",exercise:"Prancha Frontal",target:"Abdmen",displayString:"3 x 45s"}]},rO=[Ble,Lle,$le,Vle,Fle,Ule];function jle({user:t,onLogout:e}){var E;const[n,r]=$.useState("overview"),[i,o]=$.useState([]),[s,a]=$.useState([]),[l,u]=$.useState([]),[c,d]=$.useState(!0),[f,g]=$.useState(null),[y,_]=$.useState(!0),[v,b]=$.useState(null);$.useEffect(()=>{d(!0);let A=!0;const S=wa(un(Le,"users"),fte("workoutType","not-in",["admin","trainer"])),P=_a(S,k=>{if(!A)return;const O=[];k.forEach(M=>{O.push({uid:M.id,...M.data()})}),o(O)},k=>console.error("Error fetching students:",k));return(async()=>{try{const k=un(Le,"exercises"),M=(await Pa(wa(k,cu("name","asc")))).docs.map(Y=>Y.data()),D=un(Le,"trainingTechniques"),q=(await Pa(wa(D,cu("name","asc")))).docs.map(Y=>Y.data());A&&(a(M),u(q))}catch(k){console.error("Error fetching data:",k)}finally{A&&d(!1)}})(),()=>{A=!1,P()}},[]),$.useEffect(()=>{if(f){const A=setTimeout(()=>g(null),3e3);return()=>clearTimeout(A)}},[f]);const T=async A=>{try{if(A==="exercises"){const S=await Pa(wa(un(Le,"exercises"),cu("name","asc")));a(S.docs.map(P=>P.data())),g("Lista de exerccios atualizada.")}else if(A==="techniques"){const S=await Pa(wa(un(Le,"trainingTechniques"),cu("name","asc")));u(S.docs.map(P=>P.data())),g("Lista de tcnicas atualizada.")}}catch(S){console.error(`Error refetching ${A}:`,S),g(`Erro ao atualizar lista de ${A}.`)}},x=(A,S,P)=>{b({studentId:A,workoutId:S,items:P}),r("workouts")},C={bg:y?"bg-zinc-950":"bg-gray-50",text:y?"text-white":"text-zinc-900",textSec:y?"text-zinc-400":"text-zinc-500",border:y?"border-zinc-800":"border-gray-200",sidebar:y?"bg-zinc-900 border-r border-zinc-800":"bg-white border-r border-gray-200"};return w.jsxs("div",{className:`flex flex-col md:flex-row min-h-screen transition-colors duration-300 ${C.bg} ${C.text}`,children:[f&&w.jsxs("div",{className:"fixed top-6 right-6 z-[100] bg-zinc-800 border border-emerald-500/50 rounded-lg shadow-2xl p-4 max-w-sm animate-slide-up flex gap-3 items-center",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center shrink-0",children:w.jsx("i",{className:"ph-fill ph-check-circle text-xl"})}),w.jsx("p",{className:"text-white text-sm font-medium",children:f})]}),w.jsxs("aside",{className:`w-full md:w-64 ${C.sidebar} p-6 flex flex-col`,children:[w.jsx("div",{className:"mb-8",children:w.jsxs("h2",{className:"text-2xl font-bold",children:["Fit",w.jsx("span",{className:"text-emerald-500",children:"Manager"})]})}),w.jsxs("nav",{className:"flex-1 space-y-2",children:[w.jsx(ia,{darkMode:y,icon:"squares-four",label:"Viso Geral",active:n==="overview",onClick:()=>r("overview")}),w.jsx(ia,{darkMode:y,icon:"user-gear",label:"Gerenciar Alunos",active:n==="manage",onClick:()=>r("manage")}),w.jsx(ia,{darkMode:y,icon:"barbell",label:"Criar Treinos",active:n==="workouts",onClick:()=>r("workouts")}),w.jsx(ia,{darkMode:y,icon:"person-simple-run",label:"Planos de Corrida",active:n==="running",onClick:()=>r("running")}),w.jsx(ia,{darkMode:y,icon:"ruler",label:"Avaliao Fsica",active:n==="assessment",onClick:()=>r("assessment")}),w.jsx(ia,{darkMode:y,icon:"atom",label:"Tcnicas de Treino",active:n==="techniques",onClick:()=>r("techniques")}),w.jsx(ia,{darkMode:y,icon:"gear",label:"Configuraes",active:n==="settings",onClick:()=>r("settings")})]}),w.jsxs("div",{className:`mt-auto pt-6 border-t ${C.border}`,children:[w.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[w.jsx("img",{src:t.avatar,className:"w-10 h-10 rounded-full border border-emerald-500",alt:"Admin"}),w.jsxs("div",{className:"text-sm",children:[w.jsx("div",{className:"font-semibold",children:((E=t.name)==null?void 0:E.split(" ")[0])||t.email}),w.jsx("div",{className:`${C.textSec} text-xs capitalize`,children:t.workoutType})]})]}),w.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors w-full p-2 rounded-lg hover:bg-red-400/10",children:[w.jsx("i",{className:"ph ph-sign-out text-lg"})," Sair"]})]})]}),w.jsxs("main",{className:"flex-1 p-6 md:p-10 overflow-y-auto",children:[w.jsx("header",{className:"flex justify-between items-center mb-8",children:w.jsxs("h1",{className:"text-2xl md:text-3xl font-bold",children:[n==="overview"&&"Painel de Controle",n==="manage"&&"Gerenciamento de Alunos",n==="workouts"&&"Construtor de Treinos",n==="running"&&"Construtor de Planilhas de Corrida",n==="assessment"&&"Avaliao Fsica",n==="techniques"&&"Metodologias de Treino",n==="settings"&&"Configuraes do Sistema"]})}),c?w.jsx("div",{className:"text-emerald-500",children:"Carregando dados..."}):w.jsxs(w.Fragment,{children:[n==="overview"&&w.jsx(zle,{user:t,students:i,darkMode:y}),n==="manage"&&w.jsx(Wle,{students:i,setNotification:g,onEditWorkout:x,darkMode:y}),n==="workouts"&&w.jsx(Hle,{students:i,allExercises:s,adminUid:t.uid,setNotification:g,onRefreshExercises:()=>T("exercises"),workoutToEdit:v,clearWorkoutToEdit:()=>b(null),darkMode:y}),n==="running"&&w.jsx(Jle,{students:i,setNotification:g,darkMode:y}),n==="assessment"&&w.jsx(Kle,{students:i,setNotification:g,darkMode:y}),n==="techniques"&&w.jsx(Gle,{techniques:l,darkMode:y}),n==="settings"&&w.jsx(qle,{user:t,darkMode:y,setDarkMode:_,setNotification:g,onDataUpdated:T})]})]})]})}const ia=({icon:t,label:e,active:n,onClick:r,darkMode:i})=>w.jsxs("button",{onClick:r,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${n?"bg-emerald-500/10 text-emerald-500":`${i?"text-zinc-400 hover:bg-zinc-800 hover:text-white":"text-zinc-500 hover:bg-gray-100 hover:text-zinc-900"}`}`,children:[w.jsx("i",{className:`ph ph-${t} text-xl`}),w.jsx("span",{className:"font-medium",children:e})]}),zle=({user:t,students:e,darkMode:n})=>{const[r,i]=$.useState(0);$.useEffect(()=>{(async()=>{try{const l=await Pa(dte(Le,"history"));i(l.size)}catch(l){console.error("Error fetching stats:",l)}})()},[]);const o=n?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm",s=n?"text-zinc-400":"text-zinc-500";return w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[w.jsx(xw,{icon:"users",label:"Total de Alunos",value:e.length,darkMode:n}),w.jsx(xw,{icon:"barbell",label:"Alunos Ativos",value:e.filter(a=>a.workoutType!=="iniciante"||a.hasCompletedAnamnesis).length,darkMode:n}),w.jsx(xw,{icon:"chart-line",label:"Treinos Realizados",value:r,darkMode:n})]}),w.jsxs("div",{className:`${o} border rounded-xl overflow-hidden`,children:[w.jsx("div",{className:`p-6 border-b ${n?"border-zinc-800":"border-gray-200"}`,children:w.jsx("h3",{className:"font-bold text-lg",children:"Base de Alunos Recente"})}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-left",children:[w.jsx("thead",{className:`${n?"bg-zinc-950/50":"bg-gray-50"} ${s} text-sm uppercase`,children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-4 font-medium",children:"Aluno"}),w.jsx("th",{className:"p-4 font-medium",children:"Email"}),w.jsx("th",{className:"p-4 font-medium",children:"Status"})]})}),w.jsx("tbody",{className:`divide-y ${n?"divide-zinc-800":"divide-gray-200"}`,children:e.slice(0,5).map(a=>w.jsxs("tr",{className:`${n?"hover:bg-zinc-800/50":"hover:bg-gray-50"} transition-colors`,children:[w.jsxs("td",{className:"p-4 flex items-center gap-3",children:[w.jsx("img",{src:a.avatar,className:"w-8 h-8 rounded-full",alt:""}),w.jsx("span",{className:"font-medium",children:a.name})]}),w.jsx("td",{className:`p-4 ${s}`,children:a.email}),w.jsx("td",{className:"p-4",children:a.hasCompletedAnamnesis?w.jsx("span",{className:"bg-emerald-500/10 text-emerald-500 text-xs px-2 py-1 rounded-full",children:"Ativo"}):w.jsx("span",{className:"bg-yellow-500/10 text-yellow-500 text-xs px-2 py-1 rounded-full",children:"Pendente"})})]},a.uid))})]})})]})]})},qle=({user:t,darkMode:e,setDarkMode:n,setNotification:r,onDataUpdated:i})=>{const[o,s]=$.useState(!1),[a,l]=$.useState([]),[u,c]=$.useState({current:0,total:0}),[d,f]=$.useState(t.name),[g,y]=$.useState(t.avatar||""),[_,v]=$.useState(!1),b=async()=>{v(!0);try{await m_(Mn(Le,"users",t.uid),{name:d,avatar:g}),r("Perfil atualizado com sucesso!")}catch(S){console.error(S),r("Erro ao atualizar perfil.")}finally{v(!1)}},T=S=>{l(P=>[S,...P])},x=async()=>{l([]),T("--- INICIANDO DIAGNSTICO ---"),T(`Usurio Autenticado: ${t.email} (${t.uid})`);try{T("Tentando escrever documento de teste...");const S=Mn(Le,"_diagnostics","connectivity_check");await Fa(S,{timestamp:new Date().toISOString(),status:"ok"},{}),T("SUCESSO: Escrita bsica funcionou. Conexo OK."),await sA(S)}catch(S){T(`ERRO DE ESCRITA: ${S.code} - ${S.message}`);return}T("--- FIM DO DIAGNSTICO ---")},C=async S=>{T(`[UI] Acionado boto para popular ${S}...`);try{const P=S==="exercises"?vte:S==="techniques"?_te:OT,R=S==="exercises"?"exercises":S==="techniques"?"trainingTechniques":"runningPlanTemplates";s(S),c({current:0,total:P.length});let k=0;for(let O=0;O<P.length;O++){const M=P[O],D=JSON.parse(JSON.stringify(M));await Fa(Mn(Le,R,M.id),D,{}),k++,c({current:k,total:P.length}),O%10===0&&await new Promise(j=>setTimeout(j,10))}T(`CONCLUDO: ${k} salvos.`),r(`${k} de ${P.length} importados.`),i(S)}catch(P){T(`ERRO GERAL NO SEED: ${P.message}`)}finally{s(!1),c({current:0,total:0})}},E=e?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm",A=e?"bg-zinc-800 border-zinc-700 text-white":"bg-gray-100 border-gray-300 text-gray-900";return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[w.jsxs("div",{className:`${E} border rounded-xl p-6`,children:[w.jsx("h3",{className:"font-bold text-lg mb-4",children:"Aparncia"}),w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{children:"Modo Escuro"}),w.jsx("button",{onClick:()=>n(!e),className:`w-14 h-8 rounded-full p-1 transition-colors ${e?"bg-emerald-600":"bg-gray-300"}`,children:w.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-md transform transition-transform ${e?"translate-x-6":"translate-x-0"}`})})]})]}),w.jsxs("div",{className:`${E} border rounded-xl p-6`,children:[w.jsx("h3",{className:"font-bold text-lg mb-4",children:"Perfil do Treinador"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium opacity-70 mb-1",children:"Nome de Exibio"}),w.jsx("input",{value:d,onChange:S=>f(S.target.value),className:`w-full ${A} rounded-lg p-2 text-sm outline-none`})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium opacity-70 mb-1",children:"URL do Avatar"}),w.jsx("input",{value:g,onChange:S=>y(S.target.value),className:`w-full ${A} rounded-lg p-2 text-sm outline-none`})]}),w.jsx("button",{onClick:b,disabled:_,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 rounded-lg text-sm disabled:opacity-50",children:_?"Salvando...":"Atualizar Perfil"})]})]})]}),t.workoutType==="admin"&&w.jsxs("div",{className:`${E} border rounded-xl p-6 relative overflow-hidden`,children:[w.jsx("h3",{className:"font-bold text-lg mb-4",children:"Ferramentas de Banco de Dados"}),w.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[w.jsxs("button",{onClick:()=>C("exercises"),disabled:!!o,className:"bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-5 rounded-lg border border-zinc-700 disabled:opacity-50 transition-all active:scale-95",children:[o==="exercises"?w.jsx("i",{className:"ph ph-spinner animate-spin"}):w.jsx("i",{className:"ph ph-barbell"})," Popular Exerccios"]}),w.jsxs("button",{onClick:()=>C("techniques"),disabled:!!o,className:"bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-5 rounded-lg border border-zinc-700 disabled:opacity-50 transition-all active:scale-95",children:[o==="techniques"?w.jsx("i",{className:"ph ph-spinner animate-spin"}):w.jsx("i",{className:"ph ph-atom"})," Popular Tcnicas"]}),w.jsxs("button",{onClick:()=>C("runningPlans"),disabled:!!o,className:"bg-zinc-800 hover:bg-zinc-700 text-white font-medium py-3 px-5 rounded-lg border border-zinc-700 disabled:opacity-50 transition-all active:scale-95",children:[o==="runningPlans"?w.jsx("i",{className:"ph ph-spinner animate-spin"}):w.jsx("i",{className:"ph ph-person-simple-run"})," Popular Planos Corrida"]}),w.jsxs("button",{onClick:x,className:"bg-yellow-600/20 hover:bg-yellow-600/30 text-yellow-500 font-medium py-3 px-5 rounded-lg border border-yellow-600/50 flex items-center gap-2 ml-auto",children:[w.jsx("i",{className:"ph ph-warning"})," RODAR DIAGNSTICO"]})]}),w.jsxs("div",{className:"bg-black rounded-lg p-4 font-mono text-xs text-zinc-400 h-64 overflow-y-auto border border-zinc-800 shadow-inner",children:[w.jsx("div",{className:"text-zinc-500 mb-2 border-b border-zinc-800 pb-1",children:"SYSTEM LOG"}),a.length===0&&w.jsx("span",{className:"opacity-50",children:"Aguardando ao..."}),a.map((S,P)=>w.jsx("div",{className:`mb-1 ${S.includes("ERRO")?"text-red-400 font-bold":S.includes("SUCESSO")?"text-emerald-400":""}`,children:`> ${S}`},P))]}),o&&w.jsxs("div",{className:"mt-4",children:[w.jsxs("div",{className:"flex justify-between text-xs text-emerald-500 mb-1 font-bold uppercase",children:[w.jsx("span",{children:"Progresso"}),w.jsxs("span",{children:[Math.round(u.current/u.total*100),"%"]})]}),w.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-1",children:w.jsx("div",{className:"bg-emerald-500 h-1 rounded-full transition-all duration-300",style:{width:`${u.current/u.total*100}%`}})})]})]})]})},xw=({icon:t,label:e,value:n,darkMode:r})=>w.jsxs("div",{className:`${r?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm"} border p-6 rounded-xl flex items-center gap-4`,children:[w.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 rounded-lg flex items-center justify-center text-emerald-500 text-2xl",children:w.jsx("i",{className:`ph ph-${t}`})}),w.jsxs("div",{children:[w.jsx("div",{className:`${r?"text-zinc-500":"text-zinc-400"} text-sm`,children:e}),w.jsx("div",{className:`text-2xl font-bold ${r?"text-white":"text-zinc-900"}`,children:n})]})]}),Gle=({techniques:t,darkMode:e})=>w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.length===0&&w.jsx("p",{className:"opacity-50 col-span-full",children:"Nenhuma tcnica de treino encontrada. V em Configuraes para popular o banco."}),t.map(n=>w.jsxs("div",{className:`${e?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm"} border rounded-xl p-6 animate-fade-in`,children:[w.jsx("h3",{className:"font-bold text-xl text-emerald-500 mb-2",children:n.name}),w.jsx("p",{className:`${e?"text-zinc-400":"text-zinc-600"} text-sm mb-4 border-b ${e?"border-zinc-800":"border-gray-100"} pb-4`,children:n.description}),w.jsx("div",{className:"space-y-4",children:n.details.map((r,i)=>w.jsxs("div",{children:[w.jsx("h4",{className:"font-semibold",children:r.title}),w.jsx("p",{className:`${e?"text-zinc-500":"text-zinc-600"} text-sm`,children:r.description}),r.properties&&w.jsx("div",{className:"mt-2 text-xs space-y-1",children:Object.entries(r.properties).map(([o,s])=>w.jsxs("div",{className:"flex",children:[w.jsxs("span",{className:`font-medium ${e?"text-zinc-400":"text-zinc-500"} w-28 shrink-0`,children:[o,":"]}),w.jsx("span",{className:e?"text-zinc-300":"text-zinc-700",children:s})]},o))})]},i))})]},n.id))]}),Hle=({students:t,allExercises:e,adminUid:n,setNotification:r,onRefreshExercises:i,workoutToEdit:o,clearWorkoutToEdit:s,darkMode:a})=>{const[l,u]=$.useState(""),[c,d]=$.useState([]),[f,g]=$.useState(""),[y,_]=$.useState([]),[v,b]=$.useState([]),[T,x]=$.useState(""),[C,E]=$.useState("Peitoral"),[A,S]=$.useState(""),[P,R]=$.useState("3"),[k,O]=$.useState("12"),[M,D]=$.useState(""),[j,q]=$.useState(""),[Y,X]=$.useState(""),[U,J]=$.useState(null),[Q,le]=$.useState([]),[ne,fe]=$.useState(!1),[Ce,Ue]=$.useState(""),[st,Ut]=$.useState([]),[Wt,ce]=$.useState(!1),[be,Te]=$.useState(!1),[Z,He]=$.useState(""),[Ie,at]=$.useState("Peitoral"),[lt,nn]=$.useState("strength"),[Nr,kr]=$.useState(!1),_i=Array.from(new Set(e.map(z=>z.muscleGroup))).sort(),Or=e.filter(z=>z.muscleGroup===C),tr=a?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm",Dt=a?"bg-zinc-800 border-zinc-700 text-white":"bg-gray-100 border-gray-300 text-gray-900";$.useEffect(()=>{o&&(g(o.studentId),u(o.workoutId),d(o.items))},[o]),$.useEffect(()=>{const z=un(Le,"users",n,"templates"),ge=_a(z,Ee=>{const Xe=[];Ee.forEach(nt=>Xe.push({id:nt.id,...nt.data()})),b(Xe)},Ee=>console.error("Error fetching templates:",Ee));return()=>ge()},[n]),$.useEffect(()=>{if(!f){_([]);return}(async()=>{const ge=un(Le,"users",f,"workouts"),Ee=await Pa(ge),Xe=[];Ee.forEach(nt=>Xe.push({id:nt.id,items:nt.data().items})),_(Xe)})()},[f]);const Bo=z=>{if(!z)return;const Ee=[...rO,...v].find(Xe=>Xe.name===z);Ee&&(d([...Ee.exercises]),u(Ee.name),x(v.some(Xe=>Xe.id===Ee.id)?Ee.id:""))},Qs=async()=>{var Xe,nt,nr;const z=e.find(xn=>xn.id===A);if(!z)return;let ge=z.img;if(!ge){J(z.id);try{const xn=new JT({apiKey:YT.API_KEY}),jo=`Create a clean, minimalist, flat vector illustration of a fitness exercise: "${z.name}". Target muscle group: ${z.muscleGroup}. Style: technical manual drawing, white background, black lines, neutral colors for the person. No text.`,cd=await xn.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:jo}]},config:{imageConfig:{aspectRatio:"1:1"}}});if((nr=(nt=(Xe=cd.candidates)==null?void 0:Xe[0])==null?void 0:nt.content)!=null&&nr.parts){for(const Wi of cd.candidates[0].content.parts)if(Wi.inlineData){ge=`data:${Wi.inlineData.mimeType};base64,${Wi.inlineData.data}`,await m_(Mn(Le,"exercises",z.id),{img:ge}),i();break}}}catch(xn){console.error("Failed to generate image:",xn),r("Erro ao gerar imagem automtica. O exerccio ser adicionado sem imagem.")}finally{J(null)}}const Ee={type:"exercise",id:`${z.id}_${Date.now()}`,exercise:z.name,target:z.muscleGroup,displayString:`${P} x ${k}`,notes:j,img:ge,timerValue:M?parseInt(M):void 0};d([...c,Ee]),q(""),D("")},rn=z=>{Q.includes(z)?le(ge=>ge.filter(Ee=>Ee!==z)):le(ge=>[...ge,z])},Bt=z=>{const ge=Q.length;if(ge===0)return;const Xe=["Agrupar","Bi-set","Tri-set","Giant-set"].includes(z)||ge>1?`group_${Date.now()}`:void 0;let nt=z;z==="Agrupar"&&(ge===2?nt="Bi-set":ge===3?nt="Tri-set":ge>3&&(nt="Giant-set"));const nr=c.map(xn=>xn.type==="exercise"&&Q.includes(xn.id)?{...xn,supersetGroup:Xe||xn.supersetGroup,technique:nt}:xn);d(nr),le([]),r(`Tcnica "${nt}" aplicada!`)},Pl=()=>{const z=c.map(ge=>{if(ge.type==="exercise"&&Q.includes(ge.id)){const{supersetGroup:Ee,technique:Xe,...nt}=ge;return nt}return ge});d(z),le([]),r("Itens desagrupados.")},Dp=async()=>{ce(!0),Ut([]);try{const z=new JT({apiKey:YT.API_KEY}),ge=Ce?`com foco em: ${Ce}`:"com foco em hipertrofia ou condicionamento geral",Ee=`Sugira 5 exerccios para o grupo muscular "${C}" ${ge}. Para cada exerccio, recomende sries (sets) e repeties (reps) e uma breve razo (reason) para a escolha. Retorne em JSON.`,Xe=await z.models.generateContent({model:"gemini-3-flash-preview",contents:Ee,config:{responseMimeType:"application/json",responseSchema:{type:sr.ARRAY,items:{type:sr.OBJECT,properties:{name:{type:sr.STRING},sets:{type:sr.STRING},reps:{type:sr.STRING},reason:{type:sr.STRING}},required:["name","sets","reps"]}}}});Xe.text&&Ut(JSON.parse(Xe.text))}catch(z){console.error(z),r("Erro ao gerar sugestes.")}finally{ce(!1)}},Lp=async z=>{let ge=e.find(nt=>nt.name.toLowerCase()===z.name.toLowerCase());const Xe={type:"exercise",id:`${(ge==null?void 0:ge.id)||z.name.toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"")}_${Date.now()}`,exercise:z.name,target:C,displayString:`${z.sets} x ${z.reps}`,notes:z.reason,img:ge==null?void 0:ge.img};d([...c,Xe]),r("Sugesto adicionada!")},c0=async()=>{if(!(!Z||!Ie)){kr(!0);try{const z=Z.toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"");await Fa(Mn(Le,"exercises",z),{id:z,name:Z,muscleGroup:Ie,type:lt},{}),r(`Exerccio "${Z}" criado!`),He(""),Te(!1),i()}catch(z){console.error(z),alert(`Erro: ${z.message}`)}finally{kr(!1)}}},Xs=()=>{Y&&(d([...c,{type:"header",id:`h_${Date.now()}`,label:Y}]),X(""))},ld=z=>{const ge=[...c];ge.splice(z,1),d(ge)},Zs=(z,ge)=>{const Ee=[...c];ge==="up"&&z>0?[Ee[z],Ee[z-1]]=[Ee[z-1],Ee[z]]:ge==="down"&&z<Ee.length-1&&([Ee[z],Ee[z+1]]=[Ee[z+1],Ee[z]]),d(Ee)},Cl=async z=>{if(!l||c.length===0){r("Defina um nome e adicione exerccios.");return}const ge={name:l,exercises:c};try{if(z==="update"&&T)await Fa(Mn(Le,"users",n,"templates",T),ge,{}),r("Modelo atualizado com sucesso!");else{const Ee=await sc(un(Le,"users",n,"templates"),ge);x(Ee.id),r("Novo modelo criado com sucesso!")}}catch(Ee){console.error(Ee),r("Erro ao salvar modelo.")}},d0=async()=>{T&&(await sA(Mn(Le,"users",n,"templates",T)),r("Modelo excludo."),u(""),d([]),x(""))},f0=async()=>{if(!(!f||!l||c.length===0))try{await Fa(Mn(Le,"users",f,"workouts",l),{items:c},{}),await sc(un(Le,"users",f,"notifications"),{title:"Treino Atualizado ",body:`Treino "${l}" atualizado.`,timestamp:Date.now()}),r("Treino salvo!"),_(z=>[...z.filter(ge=>ge.id!==l),{id:l,items:c}]),o&&s()}catch(z){console.error(z),r("Erro ao salvar.")}},ud=y.some(z=>z.id===l);return w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-140px)]",children:[be&&w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:`${tr} border rounded-xl p-6 w-full max-w-sm`,children:[w.jsx("h3",{className:"text-lg font-bold mb-4",children:"Novo Exerccio"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("input",{value:Z,onChange:z=>He(z.target.value),className:`w-full ${Dt} rounded-lg p-2 text-sm`,placeholder:"Nome"}),w.jsx("input",{value:Ie,onChange:z=>at(z.target.value),className:`w-full ${Dt} rounded-lg p-2 text-sm`,placeholder:"Grupo Muscular"}),w.jsxs("select",{value:lt,onChange:z=>nn(z.target.value),className:`w-full ${Dt} rounded-lg p-2 text-sm`,children:[w.jsx("option",{value:"strength",children:"Musculao"}),w.jsx("option",{value:"cardio",children:"Cardio"}),w.jsx("option",{value:"mobilidade",children:"Mobilidade"})]}),w.jsxs("div",{className:"flex gap-2 pt-2",children:[w.jsx("button",{onClick:()=>Te(!1),className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-2 rounded-lg text-sm",children:"Cancelar"}),w.jsx("button",{onClick:c0,disabled:!Z||!Ie||Nr,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 rounded-lg text-sm disabled:opacity-50",children:"Salvar"})]})]})]})}),ne&&w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",children:w.jsxs("div",{className:`${tr} border rounded-xl p-6 w-full max-w-lg max-h-[80vh] flex flex-col`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-zinc-800 pb-2",children:[w.jsxs("h3",{className:"text-lg font-bold text-emerald-500 flex items-center gap-2",children:[w.jsx("i",{className:"ph-fill ph-magic-wand"})," Assistente IA"]}),w.jsx("button",{onClick:()=>fe(!1),className:"text-zinc-400 hover:text-white",children:w.jsx("i",{className:"ph ph-x text-lg"})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[w.jsxs("div",{className:"bg-emerald-500/10 p-3 rounded-lg border border-emerald-500/20 text-sm",children:[w.jsxs("p",{className:"font-bold text-emerald-400 mb-1",children:["Gerando sugestes para: ",C]}),w.jsx("input",{value:Ce,onChange:z=>Ue(z.target.value),placeholder:"Foco (ex: Hipertrofia)",className:`w-full ${Dt} mt-2 rounded-lg p-2 text-sm`}),w.jsx("button",{onClick:Dp,disabled:Wt,className:"w-full mt-2 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 rounded-lg text-sm disabled:opacity-50 flex items-center justify-center gap-2",children:Wt?w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"ph ph-spinner animate-spin"})," Pensando..."]}):"Gerar Sugestes"})]}),w.jsx("div",{className:"space-y-2",children:st.map((z,ge)=>w.jsxs("div",{className:`p-3 border rounded-lg ${a?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"} flex justify-between items-start gap-3`,children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-bold text-emerald-400",children:z.name}),w.jsxs("div",{className:"text-xs text-white mt-1",children:[z.sets," x ",z.reps]}),w.jsxs("div",{className:"text-xs text-zinc-500 mt-1 italic",children:['"',z.reason,'"']})]}),w.jsx("button",{onClick:()=>Lp(z),className:"bg-zinc-800 hover:bg-emerald-500 hover:text-black text-white p-2 rounded-lg text-xs font-bold shrink-0",children:"Adicionar"})]},ge))})]})]})}),w.jsxs("div",{className:`lg:col-span-1 ${tr} border rounded-xl p-4 flex flex-col gap-4 overflow-y-auto`,children:[w.jsxs("div",{className:`font-bold border-b ${a?"border-zinc-800":"border-gray-200"} pb-2 flex justify-between`,children:[w.jsx("h3",{children:"1. Configurao"}),o&&w.jsx("button",{onClick:s,className:"text-xs text-red-500 hover:underline",children:"Cancelar Edio"})]}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("select",{value:f,onChange:z=>g(z.target.value),disabled:!!o,className:`w-full ${Dt} rounded-lg p-2 text-sm`,children:[w.jsx("option",{value:"",children:"Selecione um aluno..."}),t.map(z=>w.jsx("option",{value:z.uid,children:z.name},z.uid))]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("select",{onChange:z=>Bo(z.target.value),className:`flex-1 ${Dt} rounded-lg p-2 text-sm`,children:[w.jsx("option",{value:"",children:"Carregar Modelo..."}),w.jsx("optgroup",{label:"Padro",children:rO.map(z=>w.jsx("option",{value:z.name,children:z.name},z.id))}),w.jsx("optgroup",{label:"Meus",children:v.map(z=>w.jsx("option",{value:z.name,children:z.name},z.id))})]}),T&&w.jsx("button",{onClick:d0,className:"bg-red-500/10 text-red-400 p-2 rounded-lg",children:w.jsx("i",{className:"ph ph-trash"})})]}),w.jsx("input",{value:l,onChange:z=>u(z.target.value),placeholder:"Nome do Treino (ex: Treino A)",className:`w-full ${Dt} rounded-lg p-2 text-sm`})]}),w.jsxs("div",{className:`flex items-center justify-between border-b ${a?"border-zinc-800":"border-gray-200"} pb-2 pt-2`,children:[w.jsx("h3",{className:"font-bold",children:"2. Adicionar Itens"}),w.jsxs("button",{onClick:()=>Te(!0),className:"text-xs text-emerald-500 hover:text-emerald-600 flex items-center gap-1 font-bold",children:[w.jsx("i",{className:"ph ph-plus-circle"})," Novo Exerccio"]})]}),w.jsxs("div",{className:`flex gap-2 items-center ${a?"bg-zinc-950/50":"bg-gray-50"} p-3 rounded-lg border border-dashed ${a?"border-zinc-800":"border-gray-300"}`,children:[w.jsx("input",{value:Y,onChange:z=>X(z.target.value),placeholder:"Ttulo de Bloco (ex: Aquecimento)",className:"flex-1 bg-transparent text-sm outline-none"}),w.jsx("button",{onClick:Xs,disabled:!Y,className:"text-emerald-500 text-sm font-bold disabled:opacity-50",children:"ADD"})]}),w.jsxs("div",{className:`space-y-3 ${a?"bg-zinc-950/50":"bg-gray-50"} p-3 rounded-lg border ${a?"border-zinc-800":"border-gray-200"}`,children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("div",{className:"w-1/3 relative",children:w.jsx("select",{value:C,onChange:z=>E(z.target.value),className:`w-full ${Dt} rounded-lg p-2 text-xs`,children:_i.map(z=>w.jsx("option",{value:z,children:z},z))})}),w.jsxs("button",{onClick:()=>fe(!0),className:"bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 p-2 rounded-lg text-xs font-bold whitespace-nowrap transition-colors flex items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-magic-wand"})," IA"]}),w.jsxs("select",{value:A,onChange:z=>S(z.target.value),className:`flex-1 ${Dt} rounded-lg p-2 text-xs`,children:[w.jsx("option",{value:"",children:"Selecione..."}),Or.map(z=>w.jsx("option",{value:z.id,children:z.name},z.id))]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsx("input",{value:P,onChange:z=>R(z.target.value),placeholder:"Sries",className:`${Dt} rounded-lg p-2 text-xs`}),w.jsx("input",{value:k,onChange:z=>O(z.target.value),placeholder:"Reps / Tempo",className:`${Dt} rounded-lg p-2 text-xs`})]}),w.jsx("div",{className:"flex items-center gap-2",children:w.jsx("input",{type:"number",step:"15",value:M,onChange:z=>D(z.target.value),placeholder:"Tempo (s)",className:`w-full ${Dt} rounded-lg p-2 text-xs`})}),w.jsx("textarea",{value:j,onChange:z=>q(z.target.value),placeholder:"Observaes (opcional)",rows:2,className:`w-full ${Dt} rounded-lg p-2 text-xs resize-none`}),w.jsx("button",{onClick:Qs,disabled:!A||!!U,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-2 rounded-lg text-sm transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:U?w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"ph ph-spinner animate-spin"})," Gerando..."]}):"Adicionar Exerccio"})]}),w.jsxs("div",{className:"mt-auto space-y-2 pt-4 border-t border-zinc-800",children:[T&&w.jsx("button",{onClick:()=>Cl("update"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-3 rounded-lg font-bold text-sm transition-colors",children:"Atualizar Modelo Existente"}),w.jsx("button",{onClick:()=>Cl("create"),className:`w-full ${a?"bg-zinc-800 hover:bg-zinc-700":"bg-gray-200 hover:bg-gray-300 text-gray-900"} text-white py-3 rounded-lg font-bold text-sm transition-colors disabled:opacity-50`,children:T?"Salvar como Novo Modelo":"Salvar como Modelo"}),w.jsx("button",{onClick:f0,disabled:!f||!l||c.length===0,className:"w-full bg-emerald-500 hover:bg-emerald-500 text-white py-3 rounded-lg font-bold text-sm transition-colors disabled:opacity-50",children:ud?"Atualizar Treino":"Enviar para Aluno"})]})]}),w.jsxs("div",{className:`lg:col-span-2 ${tr} border rounded-xl p-6 overflow-y-auto relative`,children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h2",{className:"text-xl font-bold",children:l||"Novo Treino"}),w.jsxs("span",{className:`${a?"text-zinc-500":"text-zinc-400"} text-sm`,children:[c.length," itens"]})]}),Q.length>0&&w.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-zinc-800 border border-zinc-700 shadow-2xl rounded-full px-6 py-3 flex items-center gap-4 z-50 animate-slide-up",children:[w.jsxs("span",{className:"text-sm font-bold text-white whitespace-nowrap",children:[Q.length," selecionados"]}),w.jsx("div",{className:"h-6 w-px bg-zinc-600"}),w.jsxs("button",{onClick:()=>Bt("Agrupar"),className:"text-emerald-400 hover:text-white text-xs font-bold flex flex-col items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-link text-lg"})," Agrupar"]}),w.jsxs("button",{onClick:()=>Bt("Drop-set"),className:"text-purple-400 hover:text-white text-xs font-bold flex flex-col items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-trend-down text-lg"})," Drop-set"]}),w.jsxs("button",{onClick:()=>Bt("Rest-pause"),className:"text-blue-400 hover:text-white text-xs font-bold flex flex-col items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-timer text-lg"})," Rest-P"]}),w.jsxs("button",{onClick:()=>Bt("Slow"),className:"text-yellow-400 hover:text-white text-xs font-bold flex flex-col items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-tortoise text-lg"})," Slow"]}),w.jsx("div",{className:"h-6 w-px bg-zinc-600"}),w.jsxs("button",{onClick:Pl,className:"text-red-400 hover:text-white text-xs font-bold flex flex-col items-center gap-1",children:[w.jsx("i",{className:"ph-fill ph-link-break text-lg"})," Desagrupar"]})]}),c.length===0?w.jsxs("div",{className:`h-64 flex flex-col items-center justify-center ${a?"text-zinc-600":"text-zinc-400"} border-2 border-dashed ${a?"border-zinc-800":"border-gray-200"} rounded-xl`,children:[w.jsx("i",{className:"ph ph-barbell text-4xl mb-2"}),w.jsx("p",{children:"Adicione exerccios para comear"})]}):w.jsx("div",{className:"space-y-3 pb-20",children:c.map((z,ge)=>{const Ee=z.type==="header",Xe=Q.includes(z.id),nt=!Ee&&z.supersetGroup,nr=ge>0&&c[ge-1].type==="exercise"&&c[ge-1].supersetGroup,xn=nt&&nt!==nr,jo=!!nt;return w.jsxs("div",{className:"group relative animate-fade-in flex gap-2",children:[!Ee&&w.jsx("div",{className:"flex items-center",children:w.jsx("input",{type:"checkbox",checked:Xe,onChange:()=>rn(z.id),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-800 text-emerald-500 focus:ring-emerald-500 cursor-pointer"})}),w.jsx("div",{className:"flex-1",children:Ee?w.jsxs("div",{className:`${a?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"} border-b p-3 mt-4 flex justify-between items-center`,children:[w.jsx("h3",{className:"font-bold text-emerald-500",children:z.label}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>Zs(ge,"up"),disabled:ge===0,className:"text-zinc-500 hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-up"})}),w.jsx("button",{onClick:()=>Zs(ge,"down"),disabled:ge===c.length-1,className:"text-zinc-500 hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-down"})}),w.jsx("button",{onClick:()=>ld(ge),className:"text-zinc-500 hover:text-red-500 ml-2",children:w.jsx("i",{className:"ph ph-trash"})})]})]}):w.jsxs("div",{className:`relative ${a?"bg-zinc-800/50 border-zinc-800 hover:border-zinc-700":"bg-gray-50 border-gray-200 hover:border-emerald-200"} border p-3 rounded-lg flex justify-between items-center transition-all ${Xe?"ring-2 ring-emerald-500/50 bg-emerald-900/10":""} ${jo?"border-l-4 border-l-indigo-500 rounded-l-sm":""}`,children:[xn&&z.technique&&w.jsx("div",{className:"absolute -top-3 left-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-t-md rounded-br-md shadow-sm z-10 uppercase tracking-wider",children:z.technique}),w.jsxs("div",{className:"flex items-center gap-3",children:[z.img&&w.jsx("img",{src:z.img,className:"w-10 h-10 rounded bg-black object-cover border border-zinc-700",alt:""}),w.jsxs("div",{children:[w.jsx("div",{className:"font-bold",children:z.exercise}),w.jsx("div",{className:"text-sm text-emerald-500",children:z.displayString}),w.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[z.notes&&w.jsx("div",{className:`text-xs ${a?"text-zinc-500":"text-zinc-400"}`,children:z.notes}),z.timerValue&&w.jsxs("div",{className:"text-xs bg-emerald-500/10 text-emerald-400 px-1.5 rounded border border-emerald-500/20",children:[w.jsx("i",{className:"ph-fill ph-timer"})," ",z.timerValue,"s"]}),!z.supersetGroup&&z.technique&&w.jsx("div",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-1.5 rounded border border-purple-500/30 uppercase",children:z.technique})]})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs("div",{className:"flex flex-col mr-2",children:[w.jsx("button",{onClick:()=>Zs(ge,"up"),disabled:ge===0,className:"text-zinc-500 hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-up"})}),w.jsx("button",{onClick:()=>Zs(ge,"down"),disabled:ge===c.length-1,className:"text-zinc-500 hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-down"})})]}),w.jsx("button",{onClick:()=>ld(ge),className:"p-2 text-zinc-400 hover:text-red-500 transition-colors",children:w.jsx("i",{className:"ph ph-trash-simple text-lg"})})]})]})})]},z.id)})})]})]})},Wle=({students:t,setNotification:e,onEditWorkout:n,darkMode:r})=>{const[i,o]=$.useState(null),[s,a]=$.useState([]),[l,u]=$.useState(!1),c=async g=>{o(g),u(!0);try{const y=un(Le,"users",g.uid,"workouts"),_=await Pa(y);a(_.docs.map(v=>({id:v.id,...v.data()})))}catch(y){console.error(y),e("Erro ao carregar treinos.")}finally{u(!1)}},d=async g=>{if(i&&confirm(`Tem certeza que deseja excluir o treino "${g}"?`))try{await sA(Mn(Le,"users",i.uid,"workouts",g)),a(y=>y.filter(_=>_.id!==g)),e("Treino excludo.")}catch{e("Erro ao excluir.")}},f=r?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm";return w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[w.jsxs("div",{className:`lg:col-span-1 ${f} border rounded-xl overflow-hidden flex flex-col h-[calc(100vh-140px)]`,children:[w.jsx("div",{className:"p-4 border-b border-zinc-800 font-bold",children:"Alunos"}),w.jsx("div",{className:"overflow-y-auto flex-1",children:t.map(g=>w.jsxs("button",{onClick:()=>c(g),className:`w-full p-4 flex items-center gap-3 hover:bg-zinc-800/50 transition-colors border-b border-zinc-800/50 ${(i==null?void 0:i.uid)===g.uid?"bg-emerald-500/10":""}`,children:[w.jsx("img",{src:g.avatar,className:"w-10 h-10 rounded-full bg-zinc-800",alt:""}),w.jsxs("div",{className:"text-left",children:[w.jsx("div",{className:`font-medium ${(i==null?void 0:i.uid)===g.uid?"text-emerald-400":r?"text-white":"text-zinc-900"}`,children:g.name}),w.jsx("div",{className:"text-xs text-zinc-500",children:g.email})]})]},g.uid))})]}),w.jsx("div",{className:`lg:col-span-2 ${f} border rounded-xl p-6 h-[calc(100vh-140px)] overflow-y-auto`,children:i?w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6 border-b border-zinc-800 pb-6",children:[w.jsx("img",{src:i.avatar,className:"w-16 h-16 rounded-full border-2 border-emerald-500",alt:""}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-bold",children:i.name}),w.jsx("p",{className:"text-zinc-500",children:i.email}),w.jsxs("div",{className:"flex gap-2 mt-2",children:[w.jsx("span",{className:"text-xs bg-emerald-500/10 text-emerald-400 px-2 py-1 rounded border border-emerald-500/20 capitalize",children:i.workoutType||"Iniciante"}),i.hasCompletedAnamnesis&&w.jsx("span",{className:"text-xs bg-blue-500/10 text-blue-400 px-2 py-1 rounded border border-blue-500/20",children:"Anamnese OK"})]})]})]}),w.jsx("h3",{className:"font-bold text-lg mb-4",children:"Treinos Atribudos"}),l?w.jsx("div",{className:"text-emerald-500",children:"Carregando treinos..."}):s.length===0?w.jsx("p",{className:"text-zinc-500",children:"Nenhum treino encontrado para este aluno."}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(g=>{var y;return w.jsxs("div",{className:"bg-zinc-950/50 border border-zinc-800 p-4 rounded-lg hover:border-emerald-500/50 transition-colors",children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("h4",{className:"font-bold text-white",children:g.id}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>n(i.uid,g.id,g.items),className:"text-blue-400 hover:text-blue-300 p-1",children:w.jsx("i",{className:"ph ph-pencil-simple"})}),w.jsx("button",{onClick:()=>d(g.id),className:"text-red-400 hover:text-red-300 p-1",children:w.jsx("i",{className:"ph ph-trash"})})]})]}),w.jsxs("p",{className:"text-xs text-zinc-500",children:[((y=g.items)==null?void 0:y.length)||0," exerccios"]})]},g.id)})})]}):w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-500",children:[w.jsx("i",{className:"ph ph-user text-4xl mb-2"}),w.jsx("p",{children:"Selecione um aluno para gerenciar"})]})})]})},Kle=({students:t,setNotification:e,darkMode:n})=>{const[r,i]=$.useState(""),[o,s]=$.useState(new Date().toISOString().split("T")[0]),[a,l]=$.useState(""),[u,c]=$.useState(""),[d,f]=$.useState(""),g=async()=>{if(!r){e("Selecione um aluno.");return}try{const v={id:`av_${Date.now()}`,date:o,anthropometry:{weight:parseFloat(a),height:parseFloat(u),bmi:parseFloat(a)/(parseFloat(u)*parseFloat(u))||0}};await sc(un(Le,"users",r,"assessments"),v),e("Avaliao salva com sucesso!"),l(""),c(""),f("")}catch(v){console.error(v),e("Erro ao salvar avaliao.")}},y=n?"bg-zinc-800 border-zinc-700 text-white":"bg-gray-100 border-gray-300 text-gray-900",_=n?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm";return w.jsx("div",{className:`max-w-2xl mx-auto ${_} border rounded-xl p-8`,children:w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Aluno"}),w.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:`w-full ${y} rounded-lg p-3 outline-none`,children:[w.jsx("option",{value:"",children:"Selecione..."}),t.map(v=>w.jsx("option",{value:v.uid,children:v.name},v.uid))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Data"}),w.jsx("input",{type:"date",value:o,onChange:v=>s(v.target.value),className:`w-full ${y} rounded-lg p-3 outline-none`})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Peso (kg)"}),w.jsx("input",{type:"number",value:a,onChange:v=>l(v.target.value),className:`w-full ${y} rounded-lg p-3 outline-none`,placeholder:"0.00"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Altura (m)"}),w.jsx("input",{type:"number",value:u,onChange:v=>c(v.target.value),className:`w-full ${y} rounded-lg p-3 outline-none`,placeholder:"0.00"})]})]}),w.jsx("button",{onClick:g,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg mt-4",children:"Salvar Avaliao"})]})})},Jle=({students:t,setNotification:e,darkMode:n})=>{const[r,i]=$.useState(""),[o,s]=$.useState(""),[a,l]=$.useState(4),[u,c]=$.useState(null),[d,f]=$.useState(!1),[g,y]=$.useState(""),[_,v]=$.useState(!1),b=async()=>{if(!r||!o&&!u){e("Preencha os campos.");return}let E;u?E={...u,id:`plan_${Date.now()}`,name:o||u.name}:E={id:`plan_${Date.now()}`,name:o,weeks:Array.from({length:a}).map((A,S)=>({id:`w_${S}`,weekLabel:`Semana ${S+1}`,days:{}}))};try{await Fa(Mn(Le,"users",r,"runningPlans",E.id),E,{}),e("Plano de corrida criado!"),s(""),c(null)}catch(A){console.error(A),e("Erro ao criar plano.")}},T=async()=>{if(g){v(!0);try{const E=new JT({apiKey:YT.API_KEY}),A=`Crie uma planilha de corrida completa de 4 semanas para o objetivo: "${g}". Retorne APENAS um JSON seguindo estritamente esta estrutura: { "name": "Nome do Plano", "weeks": [ { "id": "w1", "weekLabel": "Semana 1", "days": { "monday": { "type": "Trote", "warmup": "5min", "main": "30min leve", "cooldown": "5min" }, "wednesday": ..., "saturday": ... } } ] }. Use 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday' como chaves dos dias. O objeto do dia deve ter type, warmup, main, cooldown, zone.`,S=await E.models.generateContent({model:"gemini-3-flash-preview",contents:A,config:{responseMimeType:"application/json"}});if(S.text){const P=JSON.parse(S.text);c({...P,id:"ai_generated"}),s(P.name),f(!1),e("Plano gerado com sucesso! Revise e salve.")}}catch(E){console.error(E),e("Erro ao gerar plano com IA.")}finally{v(!1)}}},x=n?"bg-zinc-800 border-zinc-700 text-white":"bg-gray-100 border-gray-300 text-gray-900",C=n?"bg-zinc-900 border-zinc-800":"bg-white border-gray-200 shadow-sm";return w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-140px)]",children:[d&&w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",children:w.jsxs("div",{className:`${C} border rounded-xl p-6 w-full max-w-md`,children:[w.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-emerald-500",children:[w.jsx("i",{className:"ph-fill ph-magic-wand"})," Gerador IA"]}),w.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:'Descreva o objetivo do aluno (ex: "Correr 5km em 25min", "Maratona sub 4h", "Comear a correr do zero").'}),w.jsx("textarea",{value:g,onChange:E=>y(E.target.value),className:`w-full ${x} rounded-lg p-3 text-sm h-32 resize-none mb-4`,placeholder:"Ex: Treino para meia maratona focado em velocidade..."}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 rounded-lg",children:"Cancelar"}),w.jsx("button",{onClick:T,disabled:_||!g,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg disabled:opacity-50 flex justify-center items-center gap-2",children:_?w.jsxs(w.Fragment,{children:[w.jsx("i",{className:"ph ph-spinner animate-spin"})," Gerando..."]}):"Gerar Plano"})]})]})}),w.jsxs("div",{className:`${C} border rounded-xl p-8`,children:[w.jsx("h3",{className:"text-xl font-bold mb-6",children:"Criar / Atribuir Plano"}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Aluno"}),w.jsxs("select",{value:r,onChange:E=>i(E.target.value),className:`w-full ${x} rounded-lg p-3 outline-none`,children:[w.jsx("option",{value:"",children:"Selecione..."}),t.map(E=>w.jsx("option",{value:E.uid,children:E.name},E.uid))]})]}),w.jsxs("div",{className:"p-4 border border-zinc-700 rounded-xl bg-zinc-950/30",children:[w.jsxs("div",{className:"flex justify-between items-center mb-2",children:[w.jsx("label",{className:"block text-sm font-medium opacity-70",children:"Usar Modelo (Opcional)"}),w.jsxs("button",{onClick:()=>f(!0),className:"text-xs bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20 px-2 py-1 rounded border border-emerald-500/20 flex items-center gap-1 font-bold transition-colors",children:[w.jsx("i",{className:"ph-fill ph-magic-wand"})," Gerar com IA"]})]}),w.jsxs("select",{value:u?u.id:"",onChange:E=>{const A=OT.find(S=>S.id===E.target.value);c(A||null),A&&s(A.name)},className:`w-full ${x} rounded-lg p-3 outline-none`,children:[w.jsx("option",{value:"",children:"Nenhum (Criar do zero)"}),(u==null?void 0:u.id)==="ai_generated"&&w.jsx("option",{value:"ai_generated",children:" Plano Gerado por IA"}),OT.map(E=>w.jsx("option",{value:E.id,children:E.name},E.id))]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Nome do Plano"}),w.jsx("input",{value:o,onChange:E=>s(E.target.value),className:`w-full ${x} rounded-lg p-3 outline-none`,placeholder:"Ex: Meia Maratona"})]}),!u&&w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium mb-1 opacity-70",children:"Durao (Semanas)"}),w.jsx("input",{type:"number",value:a,onChange:E=>l(Number(E.target.value)),className:`w-full ${x} rounded-lg p-3 outline-none`,min:"1",max:"24"})]}),w.jsx("button",{onClick:b,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg mt-4 shadow-lg shadow-emerald-900/20",children:u?"Atribuir Plano ao Aluno":"Criar Estrutura Vazia"})]})]}),w.jsxs("div",{className:`${C} border rounded-xl p-8 overflow-y-auto`,children:[w.jsx("h3",{className:"text-xl font-bold mb-4",children:"Sugestes de Treinos"}),w.jsx("p",{className:"text-sm opacity-60 mb-6",children:"Copie e cole estas estruturas ao editar os dias do plano."}),w.jsx("div",{className:"space-y-3",children:wte.map((E,A)=>w.jsxs("div",{className:`p-4 rounded-lg border ${n?"bg-zinc-950 border-zinc-800":"bg-gray-50 border-gray-200"} text-sm`,children:[w.jsxs("div",{className:"flex justify-between mb-1",children:[w.jsx("span",{className:"font-bold text-emerald-500",children:E.type}),w.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-0.5 rounded text-zinc-400",children:E.zone})]}),w.jsxs("div",{className:"grid grid-cols-1 gap-1 opacity-80",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-xs uppercase tracking-wider opacity-50",children:"Aquecimento:"})," ",E.warmup]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-xs uppercase tracking-wider opacity-50",children:"Principal:"})," ",E.main]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-xs uppercase tracking-wider opacity-50",children:"Desaquecimento:"})," ",E.cooldown]})]})]},A))})]})]})};function yz(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yz(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yz(t))&&(r&&(r+=" "),r+=e);return r}var Yle=Array.isArray,mr=Yle,Qle=typeof Qp=="object"&&Qp&&Qp.Object===Object&&Qp,vz=Qle,Xle=vz,Zle=typeof self=="object"&&self&&self.Object===Object&&self,eue=Xle||Zle||Function("return this")(),Hi=eue,tue=Hi,nue=tue.Symbol,Ap=nue,iO=Ap,_z=Object.prototype,rue=_z.hasOwnProperty,iue=_z.toString,Fd=iO?iO.toStringTag:void 0;function oue(t){var e=rue.call(t,Fd),n=t[Fd];try{t[Fd]=void 0;var r=!0}catch{}var i=iue.call(t);return r&&(e?t[Fd]=n:delete t[Fd]),i}var sue=oue,aue=Object.prototype,lue=aue.toString;function uue(t){return lue.call(t)}var cue=uue,oO=Ap,due=sue,fue=cue,hue="[object Null]",pue="[object Undefined]",sO=oO?oO.toStringTag:void 0;function mue(t){return t==null?t===void 0?pue:hue:sO&&sO in Object(t)?due(t):fue(t)}var Vo=mue;function gue(t){return t!=null&&typeof t=="object"}var Fo=gue,yue=Vo,vue=Fo,_ue="[object Symbol]";function wue(t){return typeof t=="symbol"||vue(t)&&yue(t)==_ue}var Kc=wue,bue=mr,Tue=Kc,Eue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xue=/^\w*$/;function Sue(t,e){if(bue(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Tue(t)?!0:xue.test(t)||!Eue.test(t)||e!=null&&t in Object(e)}var yA=Sue;function Iue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Gs=Iue;const Jc=tt(Gs);var Aue=Vo,Pue=Gs,Cue="[object AsyncFunction]",Rue="[object Function]",Nue="[object GeneratorFunction]",kue="[object Proxy]";function Oue(t){if(!Pue(t))return!1;var e=Aue(t);return e==Rue||e==Nue||e==Cue||e==kue}var vA=Oue;const Pe=tt(vA);var Mue=Hi,Due=Mue["__core-js_shared__"],Lue=Due,Sw=Lue,aO=function(){var t=/[^.]+$/.exec(Sw&&Sw.keys&&Sw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $ue(t){return!!aO&&aO in t}var Vue=$ue,Fue=Function.prototype,Uue=Fue.toString;function Bue(t){if(t!=null){try{return Uue.call(t)}catch{}try{return t+""}catch{}}return""}var wz=Bue,jue=vA,zue=Vue,que=Gs,Gue=wz,Hue=/[\\^$.*+?()[\]{}|]/g,Wue=/^\[object .+?Constructor\]$/,Kue=Function.prototype,Jue=Object.prototype,Yue=Kue.toString,Que=Jue.hasOwnProperty,Xue=RegExp("^"+Yue.call(Que).replace(Hue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zue(t){if(!que(t)||zue(t))return!1;var e=jue(t)?Xue:Wue;return e.test(Gue(t))}var ece=Zue;function tce(t,e){return t==null?void 0:t[e]}var nce=tce,rce=ece,ice=nce;function oce(t,e){var n=ice(t,e);return rce(n)?n:void 0}var xl=oce,sce=xl,ace=sce(Object,"create"),T_=ace,lO=T_;function lce(){this.__data__=lO?lO(null):{},this.size=0}var uce=lce;function cce(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var dce=cce,fce=T_,hce="__lodash_hash_undefined__",pce=Object.prototype,mce=pce.hasOwnProperty;function gce(t){var e=this.__data__;if(fce){var n=e[t];return n===hce?void 0:n}return mce.call(e,t)?e[t]:void 0}var yce=gce,vce=T_,_ce=Object.prototype,wce=_ce.hasOwnProperty;function bce(t){var e=this.__data__;return vce?e[t]!==void 0:wce.call(e,t)}var Tce=bce,Ece=T_,xce="__lodash_hash_undefined__";function Sce(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ece&&e===void 0?xce:e,this}var Ice=Sce,Ace=uce,Pce=dce,Cce=yce,Rce=Tce,Nce=Ice;function Yc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yc.prototype.clear=Ace;Yc.prototype.delete=Pce;Yc.prototype.get=Cce;Yc.prototype.has=Rce;Yc.prototype.set=Nce;var kce=Yc;function Oce(){this.__data__=[],this.size=0}var Mce=Oce;function Dce(t,e){return t===e||t!==t&&e!==e}var _A=Dce,Lce=_A;function $ce(t,e){for(var n=t.length;n--;)if(Lce(t[n][0],e))return n;return-1}var E_=$ce,Vce=E_,Fce=Array.prototype,Uce=Fce.splice;function Bce(t){var e=this.__data__,n=Vce(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Uce.call(e,n,1),--this.size,!0}var jce=Bce,zce=E_;function qce(t){var e=this.__data__,n=zce(e,t);return n<0?void 0:e[n][1]}var Gce=qce,Hce=E_;function Wce(t){return Hce(this.__data__,t)>-1}var Kce=Wce,Jce=E_;function Yce(t,e){var n=this.__data__,r=Jce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Qce=Yce,Xce=Mce,Zce=jce,ede=Gce,tde=Kce,nde=Qce;function Qc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qc.prototype.clear=Xce;Qc.prototype.delete=Zce;Qc.prototype.get=ede;Qc.prototype.has=tde;Qc.prototype.set=nde;var x_=Qc,rde=xl,ide=Hi,ode=rde(ide,"Map"),wA=ode,uO=kce,sde=x_,ade=wA;function lde(){this.size=0,this.__data__={hash:new uO,map:new(ade||sde),string:new uO}}var ude=lde;function cde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var dde=cde,fde=dde;function hde(t,e){var n=t.__data__;return fde(e)?n[typeof e=="string"?"string":"hash"]:n.map}var S_=hde,pde=S_;function mde(t){var e=pde(this,t).delete(t);return this.size-=e?1:0,e}var gde=mde,yde=S_;function vde(t){return yde(this,t).get(t)}var _de=vde,wde=S_;function bde(t){return wde(this,t).has(t)}var Tde=bde,Ede=S_;function xde(t,e){var n=Ede(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Sde=xde,Ide=ude,Ade=gde,Pde=_de,Cde=Tde,Rde=Sde;function Xc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xc.prototype.clear=Ide;Xc.prototype.delete=Ade;Xc.prototype.get=Pde;Xc.prototype.has=Cde;Xc.prototype.set=Rde;var bA=Xc,bz=bA,Nde="Expected a function";function TA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Nde);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(TA.Cache||bz),n}TA.Cache=bz;var Tz=TA;const kde=tt(Tz);var Ode=Tz,Mde=500;function Dde(t){var e=Ode(t,function(r){return n.size===Mde&&n.clear(),r}),n=e.cache;return e}var Lde=Dde,$de=Lde,Vde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fde=/\\(\\)?/g,Ude=$de(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Vde,function(n,r,i,o){e.push(i?o.replace(Fde,"$1"):r||n)}),e}),Bde=Ude;function jde(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var EA=jde,cO=Ap,zde=EA,qde=mr,Gde=Kc,dO=cO?cO.prototype:void 0,fO=dO?dO.toString:void 0;function Ez(t){if(typeof t=="string")return t;if(qde(t))return zde(t,Ez)+"";if(Gde(t))return fO?fO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Hde=Ez,Wde=Hde;function Kde(t){return t==null?"":Wde(t)}var xz=Kde,Jde=mr,Yde=yA,Qde=Bde,Xde=xz;function Zde(t,e){return Jde(t)?t:Yde(t,e)?[t]:Qde(Xde(t))}var Sz=Zde,efe=Kc;function tfe(t){if(typeof t=="string"||efe(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var I_=tfe,nfe=Sz,rfe=I_;function ife(t,e){e=nfe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[rfe(e[n++])];return n&&n==r?t:void 0}var xA=ife,ofe=xA;function sfe(t,e,n){var r=t==null?void 0:ofe(t,e);return r===void 0?n:r}var Iz=sfe;const Hr=tt(Iz);function afe(t){return t==null}var lfe=afe;const De=tt(lfe);var ufe=Vo,cfe=mr,dfe=Fo,ffe="[object String]";function hfe(t){return typeof t=="string"||!cfe(t)&&dfe(t)&&ufe(t)==ffe}var pfe=hfe;const cl=tt(pfe);var Az={exports:{}},Je={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA=Symbol.for("react.element"),IA=Symbol.for("react.portal"),A_=Symbol.for("react.fragment"),P_=Symbol.for("react.strict_mode"),C_=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),N_=Symbol.for("react.context"),mfe=Symbol.for("react.server_context"),k_=Symbol.for("react.forward_ref"),O_=Symbol.for("react.suspense"),M_=Symbol.for("react.suspense_list"),D_=Symbol.for("react.memo"),L_=Symbol.for("react.lazy"),gfe=Symbol.for("react.offscreen"),Pz;Pz=Symbol.for("react.module.reference");function Xr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case SA:switch(t=t.type,t){case A_:case C_:case P_:case O_:case M_:return t;default:switch(t=t&&t.$$typeof,t){case mfe:case N_:case k_:case L_:case D_:case R_:return t;default:return e}}case IA:return e}}}Je.ContextConsumer=N_;Je.ContextProvider=R_;Je.Element=SA;Je.ForwardRef=k_;Je.Fragment=A_;Je.Lazy=L_;Je.Memo=D_;Je.Portal=IA;Je.Profiler=C_;Je.StrictMode=P_;Je.Suspense=O_;Je.SuspenseList=M_;Je.isAsyncMode=function(){return!1};Je.isConcurrentMode=function(){return!1};Je.isContextConsumer=function(t){return Xr(t)===N_};Je.isContextProvider=function(t){return Xr(t)===R_};Je.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===SA};Je.isForwardRef=function(t){return Xr(t)===k_};Je.isFragment=function(t){return Xr(t)===A_};Je.isLazy=function(t){return Xr(t)===L_};Je.isMemo=function(t){return Xr(t)===D_};Je.isPortal=function(t){return Xr(t)===IA};Je.isProfiler=function(t){return Xr(t)===C_};Je.isStrictMode=function(t){return Xr(t)===P_};Je.isSuspense=function(t){return Xr(t)===O_};Je.isSuspenseList=function(t){return Xr(t)===M_};Je.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===A_||t===C_||t===P_||t===O_||t===M_||t===gfe||typeof t=="object"&&t!==null&&(t.$$typeof===L_||t.$$typeof===D_||t.$$typeof===R_||t.$$typeof===N_||t.$$typeof===k_||t.$$typeof===Pz||t.getModuleId!==void 0)};Je.typeOf=Xr;Az.exports=Je;var yfe=Az.exports,vfe=Vo,_fe=Fo,wfe="[object Number]";function bfe(t){return typeof t=="number"||_fe(t)&&vfe(t)==wfe}var Cz=bfe;const Tfe=tt(Cz);var Efe=Cz;function xfe(t){return Efe(t)&&t!=+t}var Sfe=xfe;const Zc=tt(Sfe);var li=function(e){return e===0?0:e>0?1:-1},Ca=function(e){return cl(e)&&e.indexOf("%")===e.length-1},oe=function(e){return Tfe(e)&&!Zc(e)},Ife=function(e){return De(e)},Xt=function(e){return oe(e)||cl(e)},Afe=0,Pp=function(e){var n=++Afe;return"".concat(e||"").concat(n)},dl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!oe(e)&&!cl(e))return r;var o;if(Ca(e)){var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Zc(o)&&(o=r),i&&o>n&&(o=n),o},os=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Pfe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Fr=function(e,n){return oe(e)&&oe(n)?function(r){return e+r*(n-e)}:function(){return n}};function my(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Hr(r,e))===n})}var Cfe=function(e,n){return oe(e)&&oe(n)?e-n:cl(e)&&cl(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ku(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function QT(t){"@babel/helpers - typeof";return QT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QT(t)}var Rfe=["viewBox","children"],Nfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hO=["points","pathLength"],Iw={svg:Rfe,polygon:hO,polyline:hO},AA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gy=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if($.isValidElement(e)&&(r=e.props),!Jc(r))return null;var i={};return Object.keys(r).forEach(function(o){AA.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},kfe=function(e,n,r){return function(i){return e(n,r,i),null}},yy=function(e,n,r){if(!Jc(e)||QT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];AA.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=kfe(s,n,r))}),i},Ofe=["children"],Mfe=["children"];function pO(t,e){if(t==null)return{};var n=Dfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XT(t){"@babel/helpers - typeof";return XT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XT(t)}var mO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},po=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},gO=null,Aw=null,PA=function t(e){if(e===gO&&Array.isArray(Aw))return Aw;var n=[];return $.Children.forEach(e,function(r){De(r)||(yfe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Aw=n,gO=e,n};function hi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return po(i)}):r=[po(e)],PA(t).forEach(function(i){var o=Hr(i,"type.displayName")||Hr(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function _r(t,e){var n=hi(t,e);return n&&n[0]}var yO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!oe(r)||r<=0||!oe(i)||i<=0)},Lfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],$fe=function(e){return e&&e.type&&cl(e.type)&&Lfe.indexOf(e.type)>=0},Vfe=function(e){return e&&XT(e)==="object"&&"clipDot"in e},Ffe=function(e,n,r,i){var o,s=(o=Iw==null?void 0:Iw[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!Pe(e)&&(i&&s.includes(n)||Nfe.includes(n))||r&&AA.includes(n)},Ne=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if($.isValidElement(e)&&(i=e.props),!Jc(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;Ffe((a=i)===null||a===void 0?void 0:a[s],s,n,r)&&(o[s]=i[s])}),o},ZT=function t(e,n){if(e===n)return!0;var r=$.Children.count(e);if(r!==$.Children.count(n))return!1;if(r===0)return!0;if(r===1)return vO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!vO(o,s))return!1}return!0},vO=function(e,n){if(De(e)&&De(n))return!0;if(!De(e)&&!De(n)){var r=e.props||{},i=r.children,o=pO(r,Ofe),s=n.props||{},a=s.children,l=pO(s,Mfe);return i&&a?ku(o,l)&&ZT(i,a):!i&&!a?ku(o,l):!1}return!1},_O=function(e,n){var r=[],i={};return PA(e).forEach(function(o,s){if($fe(o))r.push(o);else if(o){var a=po(o.type),l=n[a]||{},u=l.handler,c=l.once;if(u&&(!c||!i[a])){var d=u(o,a,s);r.push(d),i[a]=!0}}}),r},Ufe=function(e){var n=e&&e.type;return n&&mO[n]?mO[n]:null},Bfe=function(e,n){return PA(n).indexOf(e)},jfe=["children","width","height","viewBox","className","style","title","desc"];function eE(){return eE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eE.apply(this,arguments)}function zfe(t,e){if(t==null)return{};var n=qfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,u=zfe(t,jfe),c=i||{width:n,height:r,x:0,y:0},d=Fe("recharts-surface",o);return V.createElement("svg",eE({},Ne(u,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),V.createElement("title",null,a),V.createElement("desc",null,l),e)}var Gfe=["children","className"];function nE(){return nE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nE.apply(this,arguments)}function Hfe(t,e){if(t==null)return{};var n=Wfe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Tt=V.forwardRef(function(t,e){var n=t.children,r=t.className,i=Hfe(t,Gfe),o=Fe("recharts-layer",r);return V.createElement("g",nE({className:o},Ne(i,!0),{ref:e}),n)}),mo=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function Kfe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var Jfe=Kfe,Yfe=Jfe;function Qfe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Yfe(t,e,n)}var Xfe=Qfe,Zfe="\\ud800-\\udfff",ehe="\\u0300-\\u036f",the="\\ufe20-\\ufe2f",nhe="\\u20d0-\\u20ff",rhe=ehe+the+nhe,ihe="\\ufe0e\\ufe0f",ohe="\\u200d",she=RegExp("["+ohe+Zfe+rhe+ihe+"]");function ahe(t){return she.test(t)}var Rz=ahe;function lhe(t){return t.split("")}var uhe=lhe,Nz="\\ud800-\\udfff",che="\\u0300-\\u036f",dhe="\\ufe20-\\ufe2f",fhe="\\u20d0-\\u20ff",hhe=che+dhe+fhe,phe="\\ufe0e\\ufe0f",mhe="["+Nz+"]",rE="["+hhe+"]",iE="\\ud83c[\\udffb-\\udfff]",ghe="(?:"+rE+"|"+iE+")",kz="[^"+Nz+"]",Oz="(?:\\ud83c[\\udde6-\\uddff]){2}",Mz="[\\ud800-\\udbff][\\udc00-\\udfff]",yhe="\\u200d",Dz=ghe+"?",Lz="["+phe+"]?",vhe="(?:"+yhe+"(?:"+[kz,Oz,Mz].join("|")+")"+Lz+Dz+")*",_he=Lz+Dz+vhe,whe="(?:"+[kz+rE+"?",rE,Oz,Mz,mhe].join("|")+")",bhe=RegExp(iE+"(?="+iE+")|"+whe+_he,"g");function The(t){return t.match(bhe)||[]}var Ehe=The,xhe=uhe,She=Rz,Ihe=Ehe;function Ahe(t){return She(t)?Ihe(t):xhe(t)}var Phe=Ahe,Che=Xfe,Rhe=Rz,Nhe=Phe,khe=xz;function Ohe(t){return function(e){e=khe(e);var n=Rhe(e)?Nhe(e):void 0,r=n?n[0]:e.charAt(0),i=n?Che(n,1).join(""):e.slice(1);return r[t]()+i}}var Mhe=Ohe,Dhe=Mhe,Lhe=Dhe("toUpperCase"),$he=Lhe;const $_=tt($he);function rt(t){return function(){return t}}const $z=Math.cos,vy=Math.sin,vi=Math.sqrt,_y=Math.PI,V_=2*_y,oE=Math.PI,sE=2*oE,da=1e-6,Vhe=sE-da;function Vz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fhe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Vz;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Uhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Vz:Fhe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,u=i-n,c=s-e,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>da)if(!(Math.abs(d*l-u*c)>da)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,y=i-a,_=l*l+u*u,v=g*g+y*y,b=Math.sqrt(_),T=Math.sqrt(f),x=o*Math.tan((oE-Math.acos((_+f-v)/(2*b*T)))/2),C=x/T,E=x/b;Math.abs(C-1)>da&&this._append`L${e+C*c},${n+C*d}`,this._append`A${o},${o},0,0,${+(d*g>c*y)},${this._x1=e+E*l},${this._y1=n+E*u}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,c=n+l,d=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>da||Math.abs(this._y1-c)>da)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%sE+sE),f>Vhe?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>da&&this._append`A${r},${r},0,${+(f>=oE)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function CA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Uhe(e)}function RA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fz(t){this._context=t}Fz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function F_(t){return new Fz(t)}function Uz(t){return t[0]}function Bz(t){return t[1]}function jz(t,e){var n=rt(!0),r=null,i=F_,o=null,s=CA(a);t=typeof t=="function"?t:t===void 0?Uz:rt(t),e=typeof e=="function"?e:e===void 0?Bz:rt(e);function a(l){var u,c=(l=RA(l)).length,d,f=!1,g;for(r==null&&(o=i(g=s())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(d,u,l),+e(d,u,l));if(g)return o=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:rt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:rt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:rt(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function Am(t,e,n){var r=null,i=rt(!0),o=null,s=F_,a=null,l=CA(u);t=typeof t=="function"?t:t===void 0?Uz:rt(+t),e=typeof e=="function"?e:rt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Bz:rt(+n);function u(d){var f,g,y,_=(d=RA(d)).length,v,b=!1,T,x=new Array(_),C=new Array(_);for(o==null&&(a=s(T=l())),f=0;f<=_;++f){if(!(f<_&&i(v=d[f],f,d))===b)if(b=!b)g=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=f-1;y>=g;--y)a.point(x[y],C[y]);a.lineEnd(),a.areaEnd()}b&&(x[f]=+t(v,f,d),C[f]=+e(v,f,d),a.point(r?+r(v,f,d):x[f],n?+n(v,f,d):C[f]))}if(T)return a=null,T+""||null}function c(){return jz().defined(i).curve(s).context(o)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:rt(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:rt(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:rt(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:rt(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:rt(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:rt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:rt(!!d),u):i},u.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),u):s},u.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),u):o},u}class zz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Bhe(t){return new zz(t,!0)}function jhe(t){return new zz(t,!1)}const NA={draw(t,e){const n=vi(e/_y);t.moveTo(n,0),t.arc(0,0,n,0,V_)}},zhe={draw(t,e){const n=vi(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},qz=vi(1/3),qhe=qz*2,Ghe={draw(t,e){const n=vi(e/qhe),r=n*qz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Hhe={draw(t,e){const n=vi(e),r=-n/2;t.rect(r,r,n,n)}},Whe=.8908130915292852,Gz=vy(_y/10)/vy(7*_y/10),Khe=vy(V_/10)*Gz,Jhe=-$z(V_/10)*Gz,Yhe={draw(t,e){const n=vi(e*Whe),r=Khe*n,i=Jhe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=V_*o/5,a=$z(s),l=vy(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},Pw=vi(3),Qhe={draw(t,e){const n=-vi(e/(Pw*3));t.moveTo(0,n*2),t.lineTo(-Pw*n,-n),t.lineTo(Pw*n,-n),t.closePath()}},Mr=-.5,Dr=vi(3)/2,aE=1/vi(12),Xhe=(aE/2+1)*3,Zhe={draw(t,e){const n=vi(e/Xhe),r=n/2,i=n*aE,o=r,s=n*aE+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(Mr*r-Dr*i,Dr*r+Mr*i),t.lineTo(Mr*o-Dr*s,Dr*o+Mr*s),t.lineTo(Mr*a-Dr*l,Dr*a+Mr*l),t.lineTo(Mr*r+Dr*i,Mr*i-Dr*r),t.lineTo(Mr*o+Dr*s,Mr*s-Dr*o),t.lineTo(Mr*a+Dr*l,Mr*l-Dr*a),t.closePath()}};function epe(t,e){let n=null,r=CA(i);t=typeof t=="function"?t:rt(t||NA),e=typeof e=="function"?e:rt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:rt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:rt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function wy(){}function by(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Hz(t){this._context=t}Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:by(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:by(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tpe(t){return new Hz(t)}function Wz(t){this._context=t}Wz.prototype={areaStart:wy,areaEnd:wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:by(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function npe(t){return new Wz(t)}function Kz(t){this._context=t}Kz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:by(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rpe(t){return new Kz(t)}function Jz(t){this._context=t}Jz.prototype={areaStart:wy,areaEnd:wy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ipe(t){return new Jz(t)}function wO(t){return t<0?-1:1}function bO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(wO(o)+wO(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function TO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Cw(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function Ty(t){this._context=t}Ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cw(this,this._t0,TO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Cw(this,TO(this,n=bO(this,t,e)),n);break;default:Cw(this,this._t0,n=bO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Yz(t){this._context=new Qz(t)}(Yz.prototype=Object.create(Ty.prototype)).point=function(t,e){Ty.prototype.point.call(this,e,t)};function Qz(t){this._context=t}Qz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function ope(t){return new Ty(t)}function spe(t){return new Yz(t)}function Xz(t){this._context=t}Xz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=EO(t),i=EO(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function EO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function ape(t){return new Xz(t)}function U_(t,e){this._context=t,this._t=e}U_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function lpe(t){return new U_(t,.5)}function upe(t){return new U_(t,0)}function cpe(t){return new U_(t,1)}function ac(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function lE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function dpe(t,e){return t[e]}function fpe(t){const e=[];return e.key=t,e}function hpe(){var t=rt([]),e=lE,n=ac,r=dpe;function i(o){var s=Array.from(t.apply(this,arguments),fpe),a,l=s.length,u=-1,c;for(const d of o)for(a=0,++u;a<l;++a)(s[a][u]=[0,+r(d,s[a].key,u,o)]).data=d;for(a=0,c=RA(e(s));a<l;++a)s[c[a]].index=a;return n(s,c),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:rt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:rt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?lE:typeof o=="function"?o:rt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??ac,i):n},i}function ppe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}ac(t,e)}}function mpe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}ac(t,e)}}function gpe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,u=0;a<s;++a){for(var c=t[e[a]],d=c[r][1]||0,f=c[r-1][1]||0,g=(d-f)/2,y=0;y<a;++y){var _=t[e[y]],v=_[r][1]||0,b=_[r-1][1]||0;g+=v-b}l+=d,u+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,ac(t,e)}}function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}var ype=["type","size","sizeType"];function uE(){return uE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uE.apply(this,arguments)}function xO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xO(Object(n),!0).forEach(function(r){vpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vpe(t,e,n){return e=_pe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _pe(t){var e=wpe(t,"string");return wh(e)=="symbol"?e:e+""}function wpe(t,e){if(wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bpe(t,e){if(t==null)return{};var n=Tpe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Zz={symbolCircle:NA,symbolCross:zhe,symbolDiamond:Ghe,symbolSquare:Hhe,symbolStar:Yhe,symbolTriangle:Qhe,symbolWye:Zhe},Epe=Math.PI/180,xpe=function(e){var n="symbol".concat($_(e));return Zz[n]||NA},Spe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Epe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ipe=function(e,n){Zz["symbol".concat($_(e))]=n},kA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=bpe(e,ype),u=SO(SO({},l),{},{type:r,size:o,sizeType:a}),c=function(){var v=xpe(r),b=epe().type(v).size(Spe(o,a,r));return b()},d=u.className,f=u.cx,g=u.cy,y=Ne(u,!0);return f===+f&&g===+g&&o===+o?V.createElement("path",uE({},y,{className:Fe("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(g,")"),d:c()})):null};kA.registerSymbol=Ipe;function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function cE(){return cE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cE.apply(this,arguments)}function IO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ape(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(n),!0).forEach(function(r){bh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ppe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t4(r.key),r)}}function Rpe(t,e,n){return e&&Cpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Npe(t,e,n){return e=Ey(e),kpe(t,e4()?Reflect.construct(e,n||[],Ey(t).constructor):e.apply(t,n))}function kpe(t,e){if(e&&(lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ope(t)}function Ope(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e4=function(){return!!t})()}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ey(t)}function Mpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dE(t,e)}function dE(t,e){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dE(t,e)}function bh(t,e,n){return e=t4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t4(t){var e=Dpe(t,"string");return lc(e)=="symbol"?e:e+""}function Dpe(t,e){if(lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lr=32,OA=function(t){function e(){return Ppe(this,e),Npe(this,e,arguments)}return Mpe(e,t),Rpe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Lr/2,s=Lr/6,a=Lr/3,l=r.inactive?i:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Lr,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(Lr,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Lr/8,"h").concat(Lr,"v").concat(Lr*3/4,"h").concat(-Lr,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var u=Ape({},r);return delete u.legendIcon,V.cloneElement(r.legendIcon,u)}return V.createElement(kA,{fill:l,cx:o,cy:o,size:Lr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:Lr,height:Lr},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(g,y){var _=g.formatter||l,v=Fe(bh(bh({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=Pe(g.value)?null:g.value;mo(!Pe(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=g.inactive?u:g.color;return V.createElement("li",cE({className:v,style:d,key:"legend-item-".concat(y)},yy(r.props,g,y)),V.createElement(tE,{width:s,height:s,viewBox:c,style:f},r.renderIcon(g)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},_?_(b,g,y):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}($.PureComponent);bh(OA,"displayName","Legend");bh(OA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Lpe=x_;function $pe(){this.__data__=new Lpe,this.size=0}var Vpe=$pe;function Fpe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Upe=Fpe;function Bpe(t){return this.__data__.get(t)}var jpe=Bpe;function zpe(t){return this.__data__.has(t)}var qpe=zpe,Gpe=x_,Hpe=wA,Wpe=bA,Kpe=200;function Jpe(t,e){var n=this.__data__;if(n instanceof Gpe){var r=n.__data__;if(!Hpe||r.length<Kpe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wpe(r)}return n.set(t,e),this.size=n.size,this}var Ype=Jpe,Qpe=x_,Xpe=Vpe,Zpe=Upe,eme=jpe,tme=qpe,nme=Ype;function ed(t){var e=this.__data__=new Qpe(t);this.size=e.size}ed.prototype.clear=Xpe;ed.prototype.delete=Zpe;ed.prototype.get=eme;ed.prototype.has=tme;ed.prototype.set=nme;var n4=ed,rme="__lodash_hash_undefined__";function ime(t){return this.__data__.set(t,rme),this}var ome=ime;function sme(t){return this.__data__.has(t)}var ame=sme,lme=bA,ume=ome,cme=ame;function xy(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new lme;++e<n;)this.add(t[e])}xy.prototype.add=xy.prototype.push=ume;xy.prototype.has=cme;var r4=xy;function dme(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var i4=dme;function fme(t,e){return t.has(e)}var o4=fme,hme=r4,pme=i4,mme=o4,gme=1,yme=2;function vme(t,e,n,r,i,o){var s=n&gme,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,g=n&yme?new hme:void 0;for(o.set(t,e),o.set(e,t);++d<a;){var y=t[d],_=e[d];if(r)var v=s?r(_,y,d,e,t,o):r(y,_,d,t,e,o);if(v!==void 0){if(v)continue;f=!1;break}if(g){if(!pme(e,function(b,T){if(!mme(g,T)&&(y===b||i(y,b,n,r,o)))return g.push(T)})){f=!1;break}}else if(!(y===_||i(y,_,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}var s4=vme,_me=Hi,wme=_me.Uint8Array,bme=wme;function Tme(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Eme=Tme;function xme(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var MA=xme,AO=Ap,PO=bme,Sme=_A,Ime=s4,Ame=Eme,Pme=MA,Cme=1,Rme=2,Nme="[object Boolean]",kme="[object Date]",Ome="[object Error]",Mme="[object Map]",Dme="[object Number]",Lme="[object RegExp]",$me="[object Set]",Vme="[object String]",Fme="[object Symbol]",Ume="[object ArrayBuffer]",Bme="[object DataView]",CO=AO?AO.prototype:void 0,Rw=CO?CO.valueOf:void 0;function jme(t,e,n,r,i,o,s){switch(n){case Bme:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ume:return!(t.byteLength!=e.byteLength||!o(new PO(t),new PO(e)));case Nme:case kme:case Dme:return Sme(+t,+e);case Ome:return t.name==e.name&&t.message==e.message;case Lme:case Vme:return t==e+"";case Mme:var a=Ame;case $me:var l=r&Cme;if(a||(a=Pme),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=Rme,s.set(t,e);var c=Ime(a(t),a(e),r,i,o,s);return s.delete(t),c;case Fme:if(Rw)return Rw.call(t)==Rw.call(e)}return!1}var zme=jme;function qme(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var a4=qme,Gme=a4,Hme=mr;function Wme(t,e,n){var r=e(t);return Hme(t)?r:Gme(r,n(t))}var Kme=Wme;function Jme(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var Yme=Jme;function Qme(){return[]}var Xme=Qme,Zme=Yme,ege=Xme,tge=Object.prototype,nge=tge.propertyIsEnumerable,RO=Object.getOwnPropertySymbols,rge=RO?function(t){return t==null?[]:(t=Object(t),Zme(RO(t),function(e){return nge.call(t,e)}))}:ege,ige=rge;function oge(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var sge=oge,age=Vo,lge=Fo,uge="[object Arguments]";function cge(t){return lge(t)&&age(t)==uge}var dge=cge,NO=dge,fge=Fo,l4=Object.prototype,hge=l4.hasOwnProperty,pge=l4.propertyIsEnumerable,mge=NO(function(){return arguments}())?NO:function(t){return fge(t)&&hge.call(t,"callee")&&!pge.call(t,"callee")},DA=mge,Sy={exports:{}};function gge(){return!1}var yge=gge;Sy.exports;(function(t,e){var n=Hi,r=yge,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u})(Sy,Sy.exports);var u4=Sy.exports,vge=9007199254740991,_ge=/^(?:0|[1-9]\d*)$/;function wge(t,e){var n=typeof t;return e=e??vge,!!e&&(n=="number"||n!="symbol"&&_ge.test(t))&&t>-1&&t%1==0&&t<e}var LA=wge,bge=9007199254740991;function Tge(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=bge}var $A=Tge,Ege=Vo,xge=$A,Sge=Fo,Ige="[object Arguments]",Age="[object Array]",Pge="[object Boolean]",Cge="[object Date]",Rge="[object Error]",Nge="[object Function]",kge="[object Map]",Oge="[object Number]",Mge="[object Object]",Dge="[object RegExp]",Lge="[object Set]",$ge="[object String]",Vge="[object WeakMap]",Fge="[object ArrayBuffer]",Uge="[object DataView]",Bge="[object Float32Array]",jge="[object Float64Array]",zge="[object Int8Array]",qge="[object Int16Array]",Gge="[object Int32Array]",Hge="[object Uint8Array]",Wge="[object Uint8ClampedArray]",Kge="[object Uint16Array]",Jge="[object Uint32Array]",dt={};dt[Bge]=dt[jge]=dt[zge]=dt[qge]=dt[Gge]=dt[Hge]=dt[Wge]=dt[Kge]=dt[Jge]=!0;dt[Ige]=dt[Age]=dt[Fge]=dt[Pge]=dt[Uge]=dt[Cge]=dt[Rge]=dt[Nge]=dt[kge]=dt[Oge]=dt[Mge]=dt[Dge]=dt[Lge]=dt[$ge]=dt[Vge]=!1;function Yge(t){return Sge(t)&&xge(t.length)&&!!dt[Ege(t)]}var Qge=Yge;function Xge(t){return function(e){return t(e)}}var c4=Xge,Iy={exports:{}};Iy.exports;(function(t,e){var n=vz,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(Iy,Iy.exports);var Zge=Iy.exports,eye=Qge,tye=c4,kO=Zge,OO=kO&&kO.isTypedArray,nye=OO?tye(OO):eye,d4=nye,rye=sge,iye=DA,oye=mr,sye=u4,aye=LA,lye=d4,uye=Object.prototype,cye=uye.hasOwnProperty;function dye(t,e){var n=oye(t),r=!n&&iye(t),i=!n&&!r&&sye(t),o=!n&&!r&&!i&&lye(t),s=n||r||i||o,a=s?rye(t.length,String):[],l=a.length;for(var u in t)(e||cye.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aye(u,l)))&&a.push(u);return a}var fye=dye,hye=Object.prototype;function pye(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||hye;return t===n}var mye=pye;function gye(t,e){return function(n){return t(e(n))}}var f4=gye,yye=f4,vye=yye(Object.keys,Object),_ye=vye,wye=mye,bye=_ye,Tye=Object.prototype,Eye=Tye.hasOwnProperty;function xye(t){if(!wye(t))return bye(t);var e=[];for(var n in Object(t))Eye.call(t,n)&&n!="constructor"&&e.push(n);return e}var Sye=xye,Iye=vA,Aye=$A;function Pye(t){return t!=null&&Aye(t.length)&&!Iye(t)}var Cp=Pye,Cye=fye,Rye=Sye,Nye=Cp;function kye(t){return Nye(t)?Cye(t):Rye(t)}var B_=kye,Oye=Kme,Mye=ige,Dye=B_;function Lye(t){return Oye(t,Dye,Mye)}var $ye=Lye,MO=$ye,Vye=1,Fye=Object.prototype,Uye=Fye.hasOwnProperty;function Bye(t,e,n,r,i,o){var s=n&Vye,a=MO(t),l=a.length,u=MO(e),c=u.length;if(l!=c&&!s)return!1;for(var d=l;d--;){var f=a[d];if(!(s?f in e:Uye.call(e,f)))return!1}var g=o.get(t),y=o.get(e);if(g&&y)return g==e&&y==t;var _=!0;o.set(t,e),o.set(e,t);for(var v=s;++d<l;){f=a[d];var b=t[f],T=e[f];if(r)var x=s?r(T,b,f,e,t,o):r(b,T,f,t,e,o);if(!(x===void 0?b===T||i(b,T,n,r,o):x)){_=!1;break}v||(v=f=="constructor")}if(_&&!v){var C=t.constructor,E=e.constructor;C!=E&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof E=="function"&&E instanceof E)&&(_=!1)}return o.delete(t),o.delete(e),_}var jye=Bye,zye=xl,qye=Hi,Gye=zye(qye,"DataView"),Hye=Gye,Wye=xl,Kye=Hi,Jye=Wye(Kye,"Promise"),Yye=Jye,Qye=xl,Xye=Hi,Zye=Qye(Xye,"Set"),h4=Zye,eve=xl,tve=Hi,nve=eve(tve,"WeakMap"),rve=nve,fE=Hye,hE=wA,pE=Yye,mE=h4,gE=rve,p4=Vo,td=wz,DO="[object Map]",ive="[object Object]",LO="[object Promise]",$O="[object Set]",VO="[object WeakMap]",FO="[object DataView]",ove=td(fE),sve=td(hE),ave=td(pE),lve=td(mE),uve=td(gE),fa=p4;(fE&&fa(new fE(new ArrayBuffer(1)))!=FO||hE&&fa(new hE)!=DO||pE&&fa(pE.resolve())!=LO||mE&&fa(new mE)!=$O||gE&&fa(new gE)!=VO)&&(fa=function(t){var e=p4(t),n=e==ive?t.constructor:void 0,r=n?td(n):"";if(r)switch(r){case ove:return FO;case sve:return DO;case ave:return LO;case lve:return $O;case uve:return VO}return e});var cve=fa,Nw=n4,dve=s4,fve=zme,hve=jye,UO=cve,BO=mr,jO=u4,pve=d4,mve=1,zO="[object Arguments]",qO="[object Array]",Pm="[object Object]",gve=Object.prototype,GO=gve.hasOwnProperty;function yve(t,e,n,r,i,o){var s=BO(t),a=BO(e),l=s?qO:UO(t),u=a?qO:UO(e);l=l==zO?Pm:l,u=u==zO?Pm:u;var c=l==Pm,d=u==Pm,f=l==u;if(f&&jO(t)){if(!jO(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new Nw),s||pve(t)?dve(t,e,n,r,i,o):fve(t,e,l,n,r,i,o);if(!(n&mve)){var g=c&&GO.call(t,"__wrapped__"),y=d&&GO.call(e,"__wrapped__");if(g||y){var _=g?t.value():t,v=y?e.value():e;return o||(o=new Nw),i(_,v,n,r,o)}}return f?(o||(o=new Nw),hve(t,e,n,r,i,o)):!1}var vve=yve,_ve=vve,HO=Fo;function m4(t,e,n,r,i){return t===e?!0:t==null||e==null||!HO(t)&&!HO(e)?t!==t&&e!==e:_ve(t,e,n,r,m4,i)}var VA=m4,wve=n4,bve=VA,Tve=1,Eve=2;function xve(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],u=t[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in t))return!1}else{var d=new wve;if(r)var f=r(u,c,l,t,e,d);if(!(f===void 0?bve(c,u,Tve|Eve,r,d):f))return!1}}return!0}var Sve=xve,Ive=Gs;function Ave(t){return t===t&&!Ive(t)}var g4=Ave,Pve=g4,Cve=B_;function Rve(t){for(var e=Cve(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Pve(i)]}return e}var Nve=Rve;function kve(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var y4=kve,Ove=Sve,Mve=Nve,Dve=y4;function Lve(t){var e=Mve(t);return e.length==1&&e[0][2]?Dve(e[0][0],e[0][1]):function(n){return n===t||Ove(n,t,e)}}var $ve=Lve;function Vve(t,e){return t!=null&&e in Object(t)}var Fve=Vve,Uve=Sz,Bve=DA,jve=mr,zve=LA,qve=$A,Gve=I_;function Hve(t,e,n){e=Uve(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=Gve(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&qve(i)&&zve(s,i)&&(jve(t)||Bve(t)))}var Wve=Hve,Kve=Fve,Jve=Wve;function Yve(t,e){return t!=null&&Jve(t,e,Kve)}var Qve=Yve,Xve=VA,Zve=Iz,e_e=Qve,t_e=yA,n_e=g4,r_e=y4,i_e=I_,o_e=1,s_e=2;function a_e(t,e){return t_e(t)&&n_e(e)?r_e(i_e(t),e):function(n){var r=Zve(n,t);return r===void 0&&r===e?e_e(n,t):Xve(e,r,o_e|s_e)}}var l_e=a_e;function u_e(t){return t}var nd=u_e;function c_e(t){return function(e){return e==null?void 0:e[t]}}var d_e=c_e,f_e=xA;function h_e(t){return function(e){return f_e(e,t)}}var p_e=h_e,m_e=d_e,g_e=p_e,y_e=yA,v_e=I_;function __e(t){return y_e(t)?m_e(v_e(t)):g_e(t)}var w_e=__e,b_e=$ve,T_e=l_e,E_e=nd,x_e=mr,S_e=w_e;function I_e(t){return typeof t=="function"?t:t==null?E_e:typeof t=="object"?x_e(t)?T_e(t[0],t[1]):b_e(t):S_e(t)}var Hs=I_e;function A_e(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var v4=A_e;function P_e(t){return t!==t}var C_e=P_e;function R_e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var N_e=R_e,k_e=v4,O_e=C_e,M_e=N_e;function D_e(t,e,n){return e===e?M_e(t,e,n):k_e(t,O_e,n)}var L_e=D_e,$_e=L_e;function V_e(t,e){var n=t==null?0:t.length;return!!n&&$_e(t,e,0)>-1}var F_e=V_e;function U_e(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var B_e=U_e;function j_e(){}var z_e=j_e,kw=h4,q_e=z_e,G_e=MA,H_e=1/0,W_e=kw&&1/G_e(new kw([,-0]))[1]==H_e?function(t){return new kw(t)}:q_e,K_e=W_e,J_e=r4,Y_e=F_e,Q_e=B_e,X_e=o4,Z_e=K_e,e0e=MA,t0e=200;function n0e(t,e,n){var r=-1,i=Y_e,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=Q_e;else if(o>=t0e){var u=e?null:Z_e(t);if(u)return e0e(u);s=!1,i=X_e,l=new J_e}else l=e?[]:a;e:for(;++r<o;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,s&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(c)}else i(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var r0e=n0e,i0e=Hs,o0e=r0e;function s0e(t,e){return t&&t.length?o0e(t,i0e(e)):[]}var a0e=s0e;const WO=tt(a0e);function _4(t,e,n){return e===!0?WO(t,n):Pe(e)?WO(t,e):t}function uc(t){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uc(t)}var l0e=["ref"];function KO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(n),!0).forEach(function(r){j_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b4(r.key),r)}}function c0e(t,e,n){return e&&JO(t.prototype,e),n&&JO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d0e(t,e,n){return e=Ay(e),f0e(t,w4()?Reflect.construct(e,n||[],Ay(t).constructor):e.apply(t,n))}function f0e(t,e){if(e&&(uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h0e(t)}function h0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w4=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ay(t)}function p0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yE(t,e)}function yE(t,e){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yE(t,e)}function j_(t,e,n){return e=b4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t){var e=m0e(t,"string");return uc(e)=="symbol"?e:e+""}function m0e(t,e){if(uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function g0e(t,e){if(t==null)return{};var n=y0e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function y0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function v0e(t){return t.value}function _0e(t,e){if(V.isValidElement(t))return V.cloneElement(t,e);if(typeof t=="function")return V.createElement(t,e);e.ref;var n=g0e(e,l0e);return V.createElement(OA,n)}var YO=1,Ou=function(t){function e(){var n;u0e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=d0e(this,e,[].concat(i)),j_(n,"lastBoundingBox",{width:-1,height:-1}),n}return p0e(e,t),c0e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>YO||Math.abs(i.height-this.lastBoundingBox.height)>YO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Yi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var g=this.getBBoxSnapshot();d={left:((u||0)-g.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var y=this.getBBoxSnapshot();f={top:((c||0)-y.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Yi(Yi({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=Yi(Yi({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return V.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},_0e(o,Yi(Yi({},this.props),{},{payload:_4(c,u,v0e)})))}}],[{key:"getWithHeight",value:function(r,i){var o=Yi(Yi({},this.defaultProps),r.props),s=o.layout;return s==="vertical"&&oe(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}($.PureComponent);j_(Ou,"displayName","Legend");j_(Ou,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var QO=Ap,w0e=DA,b0e=mr,XO=QO?QO.isConcatSpreadable:void 0;function T0e(t){return b0e(t)||w0e(t)||!!(XO&&t&&t[XO])}var E0e=T0e,x0e=a4,S0e=E0e;function T4(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=S0e),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?T4(a,e-1,n,r,i):x0e(i,a):r||(i[i.length]=a)}return i}var E4=T4;function I0e(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var A0e=I0e,P0e=A0e,C0e=P0e(),R0e=C0e,N0e=R0e,k0e=B_;function O0e(t,e){return t&&N0e(t,e,k0e)}var x4=O0e,M0e=Cp;function D0e(t,e){return function(n,r){if(n==null)return n;if(!M0e(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var L0e=D0e,$0e=x4,V0e=L0e,F0e=V0e($0e),FA=F0e,U0e=FA,B0e=Cp;function j0e(t,e){var n=-1,r=B0e(t)?Array(t.length):[];return U0e(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var S4=j0e;function z0e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var q0e=z0e,ZO=Kc;function G0e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=ZO(t),s=e!==void 0,a=e===null,l=e===e,u=ZO(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var H0e=G0e,W0e=H0e;function K0e(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=W0e(i[r],o[r]);if(l){if(r>=a)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var J0e=K0e,Ow=EA,Y0e=xA,Q0e=Hs,X0e=S4,Z0e=q0e,ewe=c4,twe=J0e,nwe=nd,rwe=mr;function iwe(t,e,n){e.length?e=Ow(e,function(o){return rwe(o)?function(s){return Y0e(s,o.length===1?o[0]:o)}:o}):e=[nwe];var r=-1;e=Ow(e,ewe(Q0e));var i=X0e(t,function(o,s,a){var l=Ow(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return Z0e(i,function(o,s){return twe(o,s,n)})}var owe=iwe;function swe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var awe=swe,lwe=awe,eM=Math.max;function uwe(t,e,n){return e=eM(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=eM(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),lwe(t,this,a)}}var cwe=uwe;function dwe(t){return function(){return t}}var fwe=dwe,hwe=xl,pwe=function(){try{var t=hwe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),I4=pwe,mwe=fwe,tM=I4,gwe=nd,ywe=tM?function(t,e){return tM(t,"toString",{configurable:!0,enumerable:!1,value:mwe(e),writable:!0})}:gwe,vwe=ywe,_we=800,wwe=16,bwe=Date.now;function Twe(t){var e=0,n=0;return function(){var r=bwe(),i=wwe-(r-n);if(n=r,i>0){if(++e>=_we)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Ewe=Twe,xwe=vwe,Swe=Ewe,Iwe=Swe(xwe),Awe=Iwe,Pwe=nd,Cwe=cwe,Rwe=Awe;function Nwe(t,e){return Rwe(Cwe(t,e,Pwe),t+"")}var kwe=Nwe,Owe=_A,Mwe=Cp,Dwe=LA,Lwe=Gs;function $we(t,e,n){if(!Lwe(n))return!1;var r=typeof e;return(r=="number"?Mwe(n)&&Dwe(e,n.length):r=="string"&&e in n)?Owe(n[e],t):!1}var z_=$we,Vwe=E4,Fwe=owe,Uwe=kwe,nM=z_,Bwe=Uwe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&nM(t,e[0],e[1])?e=[]:n>2&&nM(e[0],e[1],e[2])&&(e=[e[0]]),Fwe(t,Vwe(e,1),[])}),jwe=Bwe;const UA=tt(jwe);function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function vE(){return vE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vE.apply(this,arguments)}function zwe(t,e){return Wwe(t)||Hwe(t,e)||Gwe(t,e)||qwe()}function qwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gwe(t,e){if(t){if(typeof t=="string")return rM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rM(t,e)}}function rM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hwe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function Wwe(t){if(Array.isArray(t))return t}function iM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iM(Object(n),!0).forEach(function(r){Kwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kwe(t,e,n){return e=Jwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jwe(t){var e=Ywe(t,"string");return Th(e)=="symbol"?e:e+""}function Ywe(t,e){if(Th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qwe(t){return Array.isArray(t)&&Xt(t[0])&&Xt(t[1])?t.join(" ~ "):t}var Xwe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,f=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,_=e.label,v=e.labelFormatter,b=e.accessibilityLayer,T=b===void 0?!1:b,x=function(){if(c&&c.length){var M={padding:0,margin:0},D=(f?UA(c,f):c).map(function(j,q){if(j.type==="none")return null;var Y=Mw({display:"block",paddingTop:4,paddingBottom:4,color:j.color||"#000"},a),X=j.formatter||d||Qwe,U=j.value,J=j.name,Q=U,le=J;if(X&&Q!=null&&le!=null){var ne=X(U,J,j,q,c);if(Array.isArray(ne)){var fe=zwe(ne,2);Q=fe[0],le=fe[1]}else Q=ne}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:Y},Xt(le)?V.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Xt(le)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},Q),V.createElement("span",{className:"recharts-tooltip-item-unit"},j.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:M},D)}return null},C=Mw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),E=Mw({margin:0},u),A=!De(_),S=A?_:"",P=Fe("recharts-default-tooltip",g),R=Fe("recharts-tooltip-label",y);A&&v&&c!==void 0&&c!==null&&(S=v(_,c));var k=T?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",vE({className:P,style:C},k),V.createElement("p",{className:R,style:E},V.isValidElement(S)?S:"".concat(S)),x())};function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function Cm(t,e,n){return e=Zwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zwe(t){var e=ebe(t,"string");return Eh(e)=="symbol"?e:e+""}function ebe(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ud="recharts-tooltip-wrapper",tbe={visibility:"hidden"};function nbe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Fe(Ud,Cm(Cm(Cm(Cm({},"".concat(Ud,"-right"),oe(n)&&e&&oe(e.x)&&n>=e.x),"".concat(Ud,"-left"),oe(n)&&e&&oe(e.x)&&n<e.x),"".concat(Ud,"-bottom"),oe(r)&&e&&oe(e.y)&&r>=e.y),"".concat(Ud,"-top"),oe(r)&&e&&oe(e.y)&&r<e.y))}function oM(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(o&&oe(o[r]))return o[r];var c=n[r]-a-i,d=n[r]+i;if(e[r])return s[r]?c:d;if(s[r]){var f=c,g=l[r];return f<g?Math.max(d,l[r]):Math.max(c,l[r])}var y=d+a,_=l[r]+u;return y>_?Math.max(c,l[r]):Math.max(d,l[r])}function rbe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ibe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,u,c,d;return s.height>0&&s.width>0&&n?(c=oM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=oM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=rbe({translateX:c,translateY:d,useTranslate3d:a})):u=tbe,{cssProperties:u,cssClasses:nbe({translateX:c,translateY:d,coordinate:n})}}function cc(t){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(t)}function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){wE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function obe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P4(r.key),r)}}function abe(t,e,n){return e&&sbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lbe(t,e,n){return e=Py(e),ube(t,A4()?Reflect.construct(e,n||[],Py(t).constructor):e.apply(t,n))}function ube(t,e){if(e&&(cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cbe(t)}function cbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A4=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Py(t)}function dbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_E(t,e)}function _E(t,e){return _E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_E(t,e)}function wE(t,e,n){return e=P4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P4(t){var e=fbe(t,"string");return cc(e)=="symbol"?e:e+""}function fbe(t,e){if(cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lM=1,hbe=function(t){function e(){var n;obe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=lbe(this,e,[].concat(i)),wE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),wE(n,"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return dbe(e,t),abe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>lM||Math.abs(r.height-this.state.lastBoundingBox.height)>lM)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,g=i.offset,y=i.position,_=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,T=i.wrapperStyle,x=ibe({allowEscapeViewBox:s,coordinate:c,offsetTopLeft:g,position:y,reverseDirection:_,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),C=x.cssClasses,E=x.cssProperties,A=aM(aM({transition:f&&o?"transform ".concat(a,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},T);return V.createElement("div",{tabIndex:-1,className:C,style:A,ref:function(P){r.wrapperNode=P}},u)}}])}($.PureComponent),pbe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},rd={isSsr:pbe()};function dc(t){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(t)}function uM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(n),!0).forEach(function(r){BA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R4(r.key),r)}}function ybe(t,e,n){return e&&gbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vbe(t,e,n){return e=Cy(e),_be(t,C4()?Reflect.construct(e,n||[],Cy(t).constructor):e.apply(t,n))}function _be(t,e){if(e&&(dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wbe(t)}function wbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C4=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cy(t)}function bbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bE(t,e)}function bE(t,e){return bE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bE(t,e)}function BA(t,e,n){return e=R4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R4(t){var e=Tbe(t,"string");return dc(e)=="symbol"?e:e+""}function Tbe(t,e){if(dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ebe(t){return t.dataKey}function xbe(t,e){return V.isValidElement(t)?V.cloneElement(t,e):typeof t=="function"?V.createElement(t,e):V.createElement(Xwe,e)}var Ti=function(t){function e(){return mbe(this,e),vbe(this,e,arguments)}return bbe(e,t),ybe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,f=i.isAnimationActive,g=i.offset,y=i.payload,_=i.payloadUniqBy,v=i.position,b=i.reverseDirection,T=i.useTranslate3d,x=i.viewBox,C=i.wrapperStyle,E=y??[];d&&E.length&&(E=_4(y.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),_,Ebe));var A=E.length>0;return V.createElement(hbe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:o,coordinate:c,hasPayload:A,offset:g,position:v,reverseDirection:b,useTranslate3d:T,viewBox:x,wrapperStyle:C},xbe(u,cM(cM({},this.props),{},{payload:E})))}}])}($.PureComponent);BA(Ti,"displayName","Tooltip");BA(Ti,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rd.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Sbe=Hi,Ibe=function(){return Sbe.Date.now()},Abe=Ibe,Pbe=/\s/;function Cbe(t){for(var e=t.length;e--&&Pbe.test(t.charAt(e)););return e}var Rbe=Cbe,Nbe=Rbe,kbe=/^\s+/;function Obe(t){return t&&t.slice(0,Nbe(t)+1).replace(kbe,"")}var Mbe=Obe,Dbe=Mbe,dM=Gs,Lbe=Kc,fM=NaN,$be=/^[-+]0x[0-9a-f]+$/i,Vbe=/^0b[01]+$/i,Fbe=/^0o[0-7]+$/i,Ube=parseInt;function Bbe(t){if(typeof t=="number")return t;if(Lbe(t))return fM;if(dM(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=dM(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Dbe(t);var n=Vbe.test(t);return n||Fbe.test(t)?Ube(t.slice(2),n?2:8):$be.test(t)?fM:+t}var N4=Bbe,jbe=Gs,Dw=Abe,hM=N4,zbe="Expected a function",qbe=Math.max,Gbe=Math.min;function Hbe(t,e,n){var r,i,o,s,a,l,u=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(zbe);e=hM(e)||0,jbe(n)&&(c=!!n.leading,d="maxWait"in n,o=d?qbe(hM(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function g(A){var S=r,P=i;return r=i=void 0,u=A,s=t.apply(P,S),s}function y(A){return u=A,a=setTimeout(b,e),c?g(A):s}function _(A){var S=A-l,P=A-u,R=e-S;return d?Gbe(R,o-P):R}function v(A){var S=A-l,P=A-u;return l===void 0||S>=e||S<0||d&&P>=o}function b(){var A=Dw();if(v(A))return T(A);a=setTimeout(b,_(A))}function T(A){return a=void 0,f&&r?g(A):(r=i=void 0,s)}function x(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function C(){return a===void 0?s:T(Dw())}function E(){var A=Dw(),S=v(A);if(r=arguments,i=this,l=A,S){if(a===void 0)return y(l);if(d)return clearTimeout(a),a=setTimeout(b,e),g(l)}return a===void 0&&(a=setTimeout(b,e)),s}return E.cancel=x,E.flush=C,E}var Wbe=Hbe,Kbe=Wbe,Jbe=Gs,Ybe="Expected a function";function Qbe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Ybe);return Jbe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Kbe(t,e,{leading:r,maxWait:e,trailing:i})}var Xbe=Qbe;const k4=tt(Xbe);function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function pM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pM(Object(n),!0).forEach(function(r){Zbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zbe(t,e,n){return e=eTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eTe(t){var e=tTe(t,"string");return xh(e)=="symbol"?e:e+""}function tTe(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nTe(t,e){return sTe(t)||oTe(t,e)||iTe(t,e)||rTe()}function rTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iTe(t,e){if(t){if(typeof t=="string")return mM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mM(t,e)}}function mM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function sTe(t){if(Array.isArray(t))return t}var aTe=$.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,f=t.maxHeight,g=t.children,y=t.debounce,_=y===void 0?0:y,v=t.id,b=t.className,T=t.onResize,x=t.style,C=x===void 0?{}:x,E=$.useRef(null),A=$.useRef();A.current=T,$.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var S=$.useState({containerWidth:i.width,containerHeight:i.height}),P=nTe(S,2),R=P[0],k=P[1],O=$.useCallback(function(D,j){k(function(q){var Y=Math.round(D),X=Math.round(j);return q.containerWidth===Y&&q.containerHeight===X?q:{containerWidth:Y,containerHeight:X}})},[]);$.useEffect(function(){var D=function(J){var Q,le=J[0].contentRect,ne=le.width,fe=le.height;O(ne,fe),(Q=A.current)===null||Q===void 0||Q.call(A,ne,fe)};_>0&&(D=k4(D,_,{trailing:!0,leading:!1}));var j=new ResizeObserver(D),q=E.current.getBoundingClientRect(),Y=q.width,X=q.height;return O(Y,X),j.observe(E.current),function(){j.disconnect()}},[O,_]);var M=$.useMemo(function(){var D=R.containerWidth,j=R.containerHeight;if(D<0||j<0)return null;mo(Ca(s)||Ca(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),mo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var q=Ca(s)?D:s,Y=Ca(l)?j:l;n&&n>0&&(q?Y=q/n:Y&&(q=Y*n),f&&Y>f&&(Y=f)),mo(q>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,Y,s,l,c,d,n);var X=!Array.isArray(g)&&po(g.type).endsWith("Chart");return V.Children.map(g,function(U){return V.isValidElement(U)?$.cloneElement(U,Rm({width:q,height:Y},X?{style:Rm({height:"100%",width:"100%",maxHeight:Y,maxWidth:q},U.props.style)}:{})):U})},[n,g,l,f,d,c,R,s]);return V.createElement("div",{id:v?"".concat(v):void 0,className:Fe("recharts-responsive-container",b),style:Rm(Rm({},C),{},{width:s,height:l,minWidth:c,minHeight:d,maxHeight:f}),ref:E},M)}),O4=function(e){return null};O4.displayName="Cell";function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function gM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(n),!0).forEach(function(r){lTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lTe(t,e,n){return e=uTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uTe(t){var e=cTe(t,"string");return Sh(e)=="symbol"?e:e+""}function cTe(t,e){if(Sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ul={widthCache:{},cacheCount:0},dTe=2e3,fTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},yM="recharts_measurement_span";function hTe(t){var e=TE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Af=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||rd.isSsr)return{width:0,height:0};var r=hTe(n),i=JSON.stringify({text:e,copyStyle:r});if(Ul.widthCache[i])return Ul.widthCache[i];try{var o=document.getElementById(yM);o||(o=document.createElement("span"),o.setAttribute("id",yM),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=TE(TE({},fTe),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return Ul.widthCache[i]=l,++Ul.cacheCount>dTe&&(Ul.cacheCount=0,Ul.widthCache={}),l}catch{return{width:0,height:0}}},pTe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function Ry(t,e){return vTe(t)||yTe(t,e)||gTe(t,e)||mTe()}function mTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gTe(t,e){if(t){if(typeof t=="string")return vM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vM(t,e)}}function vM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function vTe(t){if(Array.isArray(t))return t}function _Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bTe(r.key),r)}}function wTe(t,e,n){return e&&_M(t.prototype,e),n&&_M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bTe(t){var e=TTe(t,"string");return Ih(e)=="symbol"?e:e+""}function TTe(t,e){if(Ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ETe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xTe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,M4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},STe=Object.keys(M4),hu="NaN";function ITe(t,e){return t*M4[e]}var Nm=function(){function t(e,n){_Te(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!ETe.test(n)&&(this.num=NaN,this.unit=""),STe.includes(n)&&(this.num=ITe(e,n),this.unit="px")}return wTe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=xTe.exec(n))!==null&&r!==void 0?r:[],o=Ry(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}])}();function D4(t){if(t.includes(hu))return hu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=wM.exec(e))!==null&&n!==void 0?n:[],i=Ry(r,4),o=i[1],s=i[2],a=i[3],l=Nm.parse(o??""),u=Nm.parse(a??""),c=s==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return hu;e=e.replace(wM,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=bM.exec(e))!==null&&d!==void 0?d:[],g=Ry(f,4),y=g[1],_=g[2],v=g[3],b=Nm.parse(y??""),T=Nm.parse(v??""),x=_==="+"?b.add(T):b.subtract(T);if(x.isNaN())return hu;e=e.replace(bM,x.toString())}return e}var TM=/\(([^()]*)\)/;function ATe(t){for(var e=t;e.includes("(");){var n=TM.exec(e),r=Ry(n,2),i=r[1];e=e.replace(TM,D4(i))}return e}function PTe(t){var e=t.replace(/\s+/g,"");return e=ATe(e),e=D4(e),e}function CTe(t){try{return PTe(t)}catch{return hu}}function Lw(t){var e=CTe(t.slice(5,-1));return e===hu?"":e}var RTe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],NTe=["dx","dy","angle","className","breakAll"];function EE(){return EE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EE.apply(this,arguments)}function EM(t,e){if(t==null)return{};var n=kTe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xM(t,e){return LTe(t)||DTe(t,e)||MTe(t,e)||OTe()}function OTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MTe(t,e){if(t){if(typeof t=="string")return SM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SM(t,e)}}function SM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function LTe(t){if(Array.isArray(t))return t}var L4=/[ \f\n\r\t\v\u2028\u2029]+/,$4=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];De(n)||(r?o=n.toString().split(""):o=n.toString().split(L4));var s=o.map(function(l){return{word:l,width:Af(l,i).width}}),a=r?0:Af("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},$Te=function(e,n,r,i,o){var s=e.maxLines,a=e.children,l=e.style,u=e.breakAll,c=oe(s),d=a,f=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce(function(Y,X){var U=X.word,J=X.width,Q=Y[Y.length-1];if(Q&&(i==null||o||Q.width+J+r<Number(i)))Q.words.push(U),Q.width+=J+r;else{var le={words:[U],width:J};Y.push(le)}return Y},[])},g=f(n),y=function(q){return q.reduce(function(Y,X){return Y.width>X.width?Y:X})};if(!c)return g;for(var _="",v=function(q){var Y=d.slice(0,q),X=$4({breakAll:u,style:l,children:Y+_}).wordsWithComputedWidth,U=f(X),J=U.length>s||y(U).width>Number(i);return[J,U]},b=0,T=d.length-1,x=0,C;b<=T&&x<=d.length-1;){var E=Math.floor((b+T)/2),A=E-1,S=v(A),P=xM(S,2),R=P[0],k=P[1],O=v(E),M=xM(O,1),D=M[0];if(!R&&!D&&(b=E+1),R&&D&&(T=E-1),!R&&D){C=k;break}x++}return C||g},IM=function(e){var n=De(e)?[]:e.toString().split(L4);return[{words:n}]},VTe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!rd.isSsr){var l,u,c=$4({breakAll:s,children:i,style:o});if(c){var d=c.wordsWithComputedWidth,f=c.spaceWidth;l=d,u=f}else return IM(i);return $Te({breakAll:s,children:i,maxLines:a,style:o},l,u,n,r)}return IM(i)},AM="#808080",Ny=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,f=e.textAnchor,g=f===void 0?"start":f,y=e.verticalAnchor,_=y===void 0?"end":y,v=e.fill,b=v===void 0?AM:v,T=EM(e,RTe),x=$.useMemo(function(){return VTe({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:d,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,d,T.style,T.width]),C=T.dx,E=T.dy,A=T.angle,S=T.className,P=T.breakAll,R=EM(T,NTe);if(!Xt(r)||!Xt(o))return null;var k=r+(oe(C)?C:0),O=o+(oe(E)?E:0),M;switch(_){case"start":M=Lw("calc(".concat(u,")"));break;case"middle":M=Lw("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:M=Lw("calc(".concat(x.length-1," * -").concat(a,")"));break}var D=[];if(d){var j=x[0].width,q=T.width;D.push("scale(".concat((oe(q)?q/j:1)/j,")"))}return A&&D.push("rotate(".concat(A,", ").concat(k,", ").concat(O,")")),D.length&&(R.transform=D.join(" ")),V.createElement("text",EE({},Ne(R,!0),{x:k,y:O,className:Fe("recharts-text",S),textAnchor:g,fill:b.includes("url")?AM:b}),x.map(function(Y,X){var U=Y.words.join(P?"":" ");return V.createElement("tspan",{x:k,dy:X===0?M:a,key:"".concat(U,"-").concat(X)},U)}))};function bs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FTe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jA(t){let e,n,r;t.length!==2?(e=bs,n=(a,l)=>bs(t(a),l),r=(a,l)=>t(a)-l):(e=t===bs||t===FTe?t:UTe,n=t,r=t);function i(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:s,right:o}}function UTe(){return 0}function V4(t){return t===null?NaN:+t}function*BTe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const jTe=jA(bs),Rp=jTe.right;jA(V4).center;class PM extends Map{constructor(e,n=GTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(CM(this,e))}has(e){return super.has(CM(this,e))}set(e,n){return super.set(zTe(this,e),n)}delete(e){return super.delete(qTe(this,e))}}function CM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zTe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function qTe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function GTe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function HTe(t=bs){if(t===bs)return F4;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function F4(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const WTe=Math.sqrt(50),KTe=Math.sqrt(10),JTe=Math.sqrt(2);function ky(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=WTe?10:o>=KTe?5:o>=JTe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(t*u),l=Math.round(e*u),a/u<t&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(t/u),l=Math.round(e/u),a*u<t&&++a,l*u>e&&--l),l<a&&.5<=n&&n<2?ky(t,e,n*2):[a,l,u]}function xE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?ky(e,t,n):ky(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function SE(t,e,n){return e=+e,t=+t,n=+n,ky(t,e,n)[2]}function IE(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?SE(e,t,n):SE(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function RM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function NM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function U4(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?F4:HTe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/l+f)),y=Math.min(r,Math.floor(e+(l-u)*d/l+f));U4(t,e,g,y,i)}const o=t[e];let s=n,a=r;for(Bd(t,n,e),i(t[r],o)>0&&Bd(t,n,r);s<a;){for(Bd(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Bd(t,n,a):(++a,Bd(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Bd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function YTe(t,e,n){if(t=Float64Array.from(BTe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return NM(t);if(e>=1)return RM(t);var r,i=(r-1)*e,o=Math.floor(i),s=RM(U4(t,o).subarray(0,o+1)),a=NM(t.subarray(o+1));return s+(a-s)*(i-o)}}function QTe(t,e,n=V4){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function XTe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Zr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Uo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const AE=Symbol("implicit");function zA(){var t=new PM,e=[],n=[],r=AE;function i(o){let s=t.get(o);if(s===void 0){if(r!==AE)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new PM;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return zA(e,n).unknown(r)},Zr.apply(i,arguments),i}function Ah(){var t=zA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var f=e().length,g=i<r,y=g?i:r,_=g?r:i;o=(_-y)/Math.max(1,f-l+u*2),a&&(o=Math.floor(o)),y+=(_-y-o*(f-l))*c,s=o*(1-l),a&&(y=Math.round(y),s=Math.round(s));var v=XTe(f).map(function(b){return y+o*b});return n(g?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},t.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},t.copy=function(){return Ah(e(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Zr.apply(d(),arguments)}function B4(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return B4(e())},t}function Pf(){return B4(Ah.apply(null,arguments).paddingInner(1))}function qA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function j4(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Np(){}var Ph=.7,Oy=1/Ph,Mu="\\s*([+-]?\\d+)\\s*",Ch="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZTe=/^#([0-9a-f]{3,8})$/,eEe=new RegExp(`^rgb\\(${Mu},${Mu},${Mu}\\)$`),tEe=new RegExp(`^rgb\\(${Vi},${Vi},${Vi}\\)$`),nEe=new RegExp(`^rgba\\(${Mu},${Mu},${Mu},${Ch}\\)$`),rEe=new RegExp(`^rgba\\(${Vi},${Vi},${Vi},${Ch}\\)$`),iEe=new RegExp(`^hsl\\(${Ch},${Vi},${Vi}\\)$`),oEe=new RegExp(`^hsla\\(${Ch},${Vi},${Vi},${Ch}\\)$`),kM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qA(Np,Rh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:OM,formatHex:OM,formatHex8:sEe,formatHsl:aEe,formatRgb:MM,toString:MM});function OM(){return this.rgb().formatHex()}function sEe(){return this.rgb().formatHex8()}function aEe(){return z4(this).formatHsl()}function MM(){return this.rgb().formatRgb()}function Rh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ZTe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?DM(e):n===3?new dr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?km(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?km(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eEe.exec(t))?new dr(e[1],e[2],e[3],1):(e=tEe.exec(t))?new dr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nEe.exec(t))?km(e[1],e[2],e[3],e[4]):(e=rEe.exec(t))?km(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iEe.exec(t))?VM(e[1],e[2]/100,e[3]/100,1):(e=oEe.exec(t))?VM(e[1],e[2]/100,e[3]/100,e[4]):kM.hasOwnProperty(t)?DM(kM[t]):t==="transparent"?new dr(NaN,NaN,NaN,0):null}function DM(t){return new dr(t>>16&255,t>>8&255,t&255,1)}function km(t,e,n,r){return r<=0&&(t=e=n=NaN),new dr(t,e,n,r)}function lEe(t){return t instanceof Np||(t=Rh(t)),t?(t=t.rgb(),new dr(t.r,t.g,t.b,t.opacity)):new dr}function PE(t,e,n,r){return arguments.length===1?lEe(t):new dr(t,e,n,r??1)}function dr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}qA(dr,PE,j4(Np,{brighter(t){return t=t==null?Oy:Math.pow(Oy,t),new dr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ph:Math.pow(Ph,t),new dr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dr(Ua(this.r),Ua(this.g),Ua(this.b),My(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LM,formatHex:LM,formatHex8:uEe,formatRgb:$M,toString:$M}));function LM(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}`}function uEe(){return`#${Ra(this.r)}${Ra(this.g)}${Ra(this.b)}${Ra((isNaN(this.opacity)?1:this.opacity)*255)}`}function $M(){const t=My(this.opacity);return`${t===1?"rgb(":"rgba("}${Ua(this.r)}, ${Ua(this.g)}, ${Ua(this.b)}${t===1?")":`, ${t})`}`}function My(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ua(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ra(t){return t=Ua(t),(t<16?"0":"")+t.toString(16)}function VM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ai(t,e,n,r)}function z4(t){if(t instanceof ai)return new ai(t.h,t.s,t.l,t.opacity);if(t instanceof Np||(t=Rh(t)),!t)return new ai;if(t instanceof ai)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ai(s,a,l,t.opacity)}function cEe(t,e,n,r){return arguments.length===1?z4(t):new ai(t,e,n,r??1)}function ai(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qA(ai,cEe,j4(Np,{brighter(t){return t=t==null?Oy:Math.pow(Oy,t),new ai(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ph:Math.pow(Ph,t),new ai(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dr($w(t>=240?t-240:t+120,i,r),$w(t,i,r),$w(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ai(FM(this.h),Om(this.s),Om(this.l),My(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=My(this.opacity);return`${t===1?"hsl(":"hsla("}${FM(this.h)}, ${Om(this.s)*100}%, ${Om(this.l)*100}%${t===1?")":`, ${t})`}`}}));function FM(t){return t=(t||0)%360,t<0?t+360:t}function Om(t){return Math.max(0,Math.min(1,t||0))}function $w(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const GA=t=>()=>t;function dEe(t,e){return function(n){return t+n*e}}function fEe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hEe(t){return(t=+t)==1?q4:function(e,n){return n-e?fEe(e,n,t):GA(isNaN(e)?n:e)}}function q4(t,e){var n=e-t;return n?dEe(t,n):GA(isNaN(t)?e:t)}const UM=function t(e){var n=hEe(e);function r(i,o){var s=n((i=PE(i)).r,(o=PE(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=q4(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function pEe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function mEe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gEe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=id(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function yEe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Dy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vEe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=id(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var CE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vw=new RegExp(CE.source,"g");function _Ee(t){return function(){return t}}function wEe(t){return function(e){return t(e)+""}}function bEe(t,e){var n=CE.lastIndex=Vw.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=CE.exec(t))&&(i=Vw.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Dy(r,i)})),n=Vw.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?wEe(l[0].x):_Ee(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function id(t,e){var n=typeof e,r;return e==null||n==="boolean"?GA(e):(n==="number"?Dy:n==="string"?(r=Rh(e))?(e=r,UM):bEe:e instanceof Rh?UM:e instanceof Date?yEe:mEe(e)?pEe:Array.isArray(e)?gEe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vEe:Dy)(t,e)}function HA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function TEe(t,e){e===void 0&&(e=t,t=id);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function EEe(t){return function(){return t}}function Ly(t){return+t}var BM=[0,1];function Gn(t){return t}function RE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:EEe(isNaN(e)?NaN:.5)}function xEe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function SEe(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=RE(i,r),o=n(s,o)):(r=RE(r,i),o=n(o,s)),function(a){return o(r(a))}}function IEe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=RE(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=Rp(t,a,1,r)-1;return o[l](i[l](a))}}function kp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function q_(){var t=BM,e=BM,n=id,r,i,o,s=Gn,a,l,u;function c(){var f=Math.min(t.length,e.length);return s!==Gn&&(s=xEe(t[0],t[f-1])),a=f>2?IEe:SEe,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?o:(l||(l=a(t.map(r),e,n)))(r(s(f)))}return d.invert=function(f){return s(i((u||(u=a(e,t.map(r),Dy)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,Ly),c()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=HA,c()},d.clamp=function(f){return arguments.length?(s=f?!0:Gn,c()):s!==Gn},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,g){return r=f,i=g,c()}}function WA(){return q_()(Gn,Gn)}function AEe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function $y(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fc(t){return t=$y(Math.abs(t)),t?t[1]:NaN}function PEe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function CEe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var REe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nh(t){if(!(e=REe.exec(t)))throw new Error("invalid format: "+t);var e;return new KA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nh.prototype=KA.prototype;function KA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NEe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Vy;function kEe(t,e){var n=$y(t,e);if(!n)return Vy=void 0,t.toPrecision(e);var r=n[0],i=n[1],o=i-(Vy=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$y(t,Math.max(0,e+o-1))[0]}function jM(t,e){var n=$y(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const zM={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:AEe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>jM(t*100,e),r:jM,s:kEe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qM(t){return t}var GM=Array.prototype.map,HM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OEe(t){var e=t.grouping===void 0||t.thousands===void 0?qM:PEe(GM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?qM:CEe(GM.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d,f){d=Nh(d);var g=d.fill,y=d.align,_=d.sign,v=d.symbol,b=d.zero,T=d.width,x=d.comma,C=d.precision,E=d.trim,A=d.type;A==="n"?(x=!0,A="g"):zM[A]||(C===void 0&&(C=12),E=!0,A="g"),(b||g==="0"&&y==="=")&&(b=!0,g="0",y="=");var S=(f&&f.prefix!==void 0?f.prefix:"")+(v==="$"?n:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),P=(v==="$"?r:/[%p]/.test(A)?s:"")+(f&&f.suffix!==void 0?f.suffix:""),R=zM[A],k=/[defgprs%]/.test(A);C=C===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function O(M){var D=S,j=P,q,Y,X;if(A==="c")j=R(M)+j,M="";else{M=+M;var U=M<0||1/M<0;if(M=isNaN(M)?l:R(Math.abs(M),C),E&&(M=NEe(M)),U&&+M==0&&_!=="+"&&(U=!1),D=(U?_==="("?_:a:_==="-"||_==="("?"":_)+D,j=(A==="s"&&!isNaN(M)&&Vy!==void 0?HM[8+Vy/3]:"")+j+(U&&_==="("?")":""),k){for(q=-1,Y=M.length;++q<Y;)if(X=M.charCodeAt(q),48>X||X>57){j=(X===46?i+M.slice(q+1):M.slice(q))+j,M=M.slice(0,q);break}}}x&&!b&&(M=e(M,1/0));var J=D.length+M.length+j.length,Q=J<T?new Array(T-J+1).join(g):"";switch(x&&b&&(M=e(Q+M,Q.length?T-j.length:1/0),Q=""),y){case"<":M=D+M+j+Q;break;case"=":M=D+Q+M+j;break;case"^":M=Q.slice(0,J=Q.length>>1)+D+M+j+Q.slice(J);break;default:M=Q+D+M+j;break}return o(M)}return O.toString=function(){return d+""},O}function c(d,f){var g=Math.max(-8,Math.min(8,Math.floor(fc(f)/3)))*3,y=Math.pow(10,-g),_=u((d=Nh(d),d.type="f",d),{suffix:HM[8+g/3]});return function(v){return _(y*v)}}return{format:u,formatPrefix:c}}var Mm,JA,G4;MEe({thousands:",",grouping:[3],currency:["$",""]});function MEe(t){return Mm=OEe(t),JA=Mm.format,G4=Mm.formatPrefix,Mm}function DEe(t){return Math.max(0,-fc(Math.abs(t)))}function LEe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fc(e)/3)))*3-fc(Math.abs(t)))}function $Ee(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fc(e)-fc(t))+1}function H4(t,e,n,r){var i=IE(t,e,n),o;switch(r=Nh(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=LEe(i,s))&&(r.precision=o),G4(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=$Ee(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=DEe(i))&&(r.precision=o-(r.type==="%")*2);break}}return JA(r)}function Ws(t){var e=t.domain;return t.ticks=function(n){var r=e();return xE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return H4(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=SE(s,a,n),u===l)return r[i]=s,r[o]=a,e(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function Fy(){var t=WA();return t.copy=function(){return kp(t,Fy())},Zr.apply(t,arguments),Ws(t)}function W4(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ly),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return W4(t).unknown(e)},t=arguments.length?Array.from(t,Ly):[0,1],Ws(n)}function K4(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function WM(t){return Math.log(t)}function KM(t){return Math.exp(t)}function VEe(t){return-Math.log(-t)}function FEe(t){return-Math.exp(-t)}function UEe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function BEe(t){return t===10?UEe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jEe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function JM(t){return(e,n)=>-t(-e,n)}function YA(t){const e=t(WM,KM),n=e.domain;let r=10,i,o;function s(){return i=jEe(r),o=BEe(r),n()[0]<0?(i=JM(i),o=JM(o),t(VEe,FEe)):t(WM,KM),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),g=i(c),y,_;const v=a==null?10:+a;let b=[];if(!(r%1)&&g-f<v){if(f=Math.floor(f),g=Math.ceil(g),u>0){for(;f<=g;++f)for(y=1;y<r;++y)if(_=f<0?y/o(-f):y*o(f),!(_<u)){if(_>c)break;b.push(_)}}else for(;f<=g;++f)for(y=r-1;y>=1;--y)if(_=f>0?y/o(-f):y*o(f),!(_<u)){if(_>c)break;b.push(_)}b.length*2<v&&(b=xE(u,c,v))}else b=xE(f,g,Math.min(g-f,v)).map(o);return d?b.reverse():b},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Nh(l)).precision==null&&(l.trim=!0),l=JA(l)),a===1/0)return l;const u=Math.max(1,r*a/e.ticks().length);return c=>{let d=c/o(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(K4(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function J4(){const t=YA(q_()).domain([1,10]);return t.copy=()=>kp(t,J4()).base(t.base()),Zr.apply(t,arguments),t}function YM(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function QM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function QA(t){var e=1,n=t(YM(e),QM(e));return n.constant=function(r){return arguments.length?t(YM(e=+r),QM(e)):e},Ws(n)}function Y4(){var t=QA(q_());return t.copy=function(){return kp(t,Y4()).constant(t.constant())},Zr.apply(t,arguments)}function XM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zEe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qEe(t){return t<0?-t*t:t*t}function XA(t){var e=t(Gn,Gn),n=1;function r(){return n===1?t(Gn,Gn):n===.5?t(zEe,qEe):t(XM(n),XM(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ws(e)}function ZA(){var t=XA(q_());return t.copy=function(){return kp(t,ZA()).exponent(t.exponent())},Zr.apply(t,arguments),t}function GEe(){return ZA.apply(null,arguments).exponent(.5)}function ZM(t){return Math.sign(t)*t*t}function HEe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Q4(){var t=WA(),e=[0,1],n=!1,r;function i(o){var s=HEe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(ZM(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Ly)).map(ZM)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Q4(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Zr.apply(i,arguments),Ws(i)}function X4(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=QTe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[Rp(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(bs),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return X4().domain(t).range(e).unknown(r)},Zr.apply(o,arguments)}function Z4(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Rp(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Z4().domain([t,e]).range(i).unknown(o)},Zr.apply(Ws(s),arguments)}function eq(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Rp(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return eq().domain(t).range(e).unknown(n)},Zr.apply(i,arguments)}const Fw=new Date,Uw=new Date;function tn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),e(o,a),t(o);while(u<o&&o<s);return l},i.filter=o=>tn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(Fw.setTime(+o),Uw.setTime(+s),t(Fw),t(Uw),Math.floor(n(Fw,Uw))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Uy=tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Uy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Uy);Uy.range;const ao=1e3,jr=ao*60,lo=jr*60,Io=lo*24,eP=Io*7,eD=Io*30,Bw=Io*365,Na=tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ao)},(t,e)=>(e-t)/ao,t=>t.getUTCSeconds());Na.range;const tP=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ao)},(t,e)=>{t.setTime(+t+e*jr)},(t,e)=>(e-t)/jr,t=>t.getMinutes());tP.range;const nP=tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*jr)},(t,e)=>(e-t)/jr,t=>t.getUTCMinutes());nP.range;const rP=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ao-t.getMinutes()*jr)},(t,e)=>{t.setTime(+t+e*lo)},(t,e)=>(e-t)/lo,t=>t.getHours());rP.range;const iP=tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*lo)},(t,e)=>(e-t)/lo,t=>t.getUTCHours());iP.range;const Op=tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*jr)/Io,t=>t.getDate()-1);Op.range;const G_=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Io,t=>t.getUTCDate()-1);G_.range;const tq=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Io,t=>Math.floor(t/Io));tq.range;function Sl(t){return tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*jr)/eP)}const H_=Sl(0),By=Sl(1),WEe=Sl(2),KEe=Sl(3),hc=Sl(4),JEe=Sl(5),YEe=Sl(6);H_.range;By.range;WEe.range;KEe.range;hc.range;JEe.range;YEe.range;function Il(t){return tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eP)}const W_=Il(0),jy=Il(1),QEe=Il(2),XEe=Il(3),pc=Il(4),ZEe=Il(5),exe=Il(6);W_.range;jy.range;QEe.range;XEe.range;pc.range;ZEe.range;exe.range;const oP=tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oP.range;const sP=tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());sP.range;const Ao=tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ao.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ao.range;const Po=tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Po.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Po.range;function nq(t,e,n,r,i,o){const s=[[Na,1,ao],[Na,5,5*ao],[Na,15,15*ao],[Na,30,30*ao],[o,1,jr],[o,5,5*jr],[o,15,15*jr],[o,30,30*jr],[i,1,lo],[i,3,3*lo],[i,6,6*lo],[i,12,12*lo],[r,1,Io],[r,2,2*Io],[n,1,eP],[e,1,eD],[e,3,3*eD],[t,1,Bw]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const g=d&&typeof d.range=="function"?d:l(u,c,d),y=g?g.range(u,+c+1):[];return f?y.reverse():y}function l(u,c,d){const f=Math.abs(c-u)/d,g=jA(([,,v])=>v).right(s,f);if(g===s.length)return t.every(IE(u/Bw,c/Bw,d));if(g===0)return Uy.every(Math.max(IE(u,c,d),1));const[y,_]=s[f/s[g-1][2]<s[g][2]/f?g-1:g];return y.every(_)}return[a,l]}const[txe,nxe]=nq(Po,sP,W_,tq,iP,nP),[rxe,ixe]=nq(Ao,oP,H_,Op,rP,tP);function jw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function oxe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,u=zd(i),c=qd(i),d=zd(o),f=qd(o),g=zd(s),y=qd(s),_=zd(a),v=qd(a),b=zd(l),T=qd(l),x={a:X,A:U,b:J,B:Q,c:null,d:sD,e:sD,f:Pxe,g:Vxe,G:Uxe,H:Sxe,I:Ixe,j:Axe,L:rq,m:Cxe,M:Rxe,p:le,q:ne,Q:uD,s:cD,S:Nxe,u:kxe,U:Oxe,V:Mxe,w:Dxe,W:Lxe,x:null,X:null,y:$xe,Y:Fxe,Z:Bxe,"%":lD},C={a:fe,A:Ce,b:Ue,B:st,c:null,d:aD,e:aD,f:Gxe,g:tSe,G:rSe,H:jxe,I:zxe,j:qxe,L:oq,m:Hxe,M:Wxe,p:Ut,q:Wt,Q:uD,s:cD,S:Kxe,u:Jxe,U:Yxe,V:Qxe,w:Xxe,W:Zxe,x:null,X:null,y:eSe,Y:nSe,Z:iSe,"%":lD},E={a:k,A:O,b:M,B:D,c:j,d:iD,e:iD,f:bxe,g:rD,G:nD,H:oD,I:oD,j:yxe,L:wxe,m:gxe,M:vxe,p:R,q:mxe,Q:Exe,s:xxe,S:_xe,u:cxe,U:dxe,V:fxe,w:uxe,W:hxe,x:q,X:Y,y:rD,Y:nD,Z:pxe,"%":Txe};x.x=A(n,x),x.X=A(r,x),x.c=A(e,x),C.x=A(n,C),C.X=A(r,C),C.c=A(e,C);function A(ce,be){return function(Te){var Z=[],He=-1,Ie=0,at=ce.length,lt,nn,Nr;for(Te instanceof Date||(Te=new Date(+Te));++He<at;)ce.charCodeAt(He)===37&&(Z.push(ce.slice(Ie,He)),(nn=tD[lt=ce.charAt(++He)])!=null?lt=ce.charAt(++He):nn=lt==="e"?" ":"0",(Nr=be[lt])&&(lt=Nr(Te,nn)),Z.push(lt),Ie=He+1);return Z.push(ce.slice(Ie,He)),Z.join("")}}function S(ce,be){return function(Te){var Z=jd(1900,void 0,1),He=P(Z,ce,Te+="",0),Ie,at;if(He!=Te.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(be&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(Ie=zw(jd(Z.y,0,1)),at=Ie.getUTCDay(),Ie=at>4||at===0?jy.ceil(Ie):jy(Ie),Ie=G_.offset(Ie,(Z.V-1)*7),Z.y=Ie.getUTCFullYear(),Z.m=Ie.getUTCMonth(),Z.d=Ie.getUTCDate()+(Z.w+6)%7):(Ie=jw(jd(Z.y,0,1)),at=Ie.getDay(),Ie=at>4||at===0?By.ceil(Ie):By(Ie),Ie=Op.offset(Ie,(Z.V-1)*7),Z.y=Ie.getFullYear(),Z.m=Ie.getMonth(),Z.d=Ie.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),at="Z"in Z?zw(jd(Z.y,0,1)).getUTCDay():jw(jd(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(at+5)%7:Z.w+Z.U*7-(at+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,zw(Z)):jw(Z)}}function P(ce,be,Te,Z){for(var He=0,Ie=be.length,at=Te.length,lt,nn;He<Ie;){if(Z>=at)return-1;if(lt=be.charCodeAt(He++),lt===37){if(lt=be.charAt(He++),nn=E[lt in tD?be.charAt(He++):lt],!nn||(Z=nn(ce,Te,Z))<0)return-1}else if(lt!=Te.charCodeAt(Z++))return-1}return Z}function R(ce,be,Te){var Z=u.exec(be.slice(Te));return Z?(ce.p=c.get(Z[0].toLowerCase()),Te+Z[0].length):-1}function k(ce,be,Te){var Z=g.exec(be.slice(Te));return Z?(ce.w=y.get(Z[0].toLowerCase()),Te+Z[0].length):-1}function O(ce,be,Te){var Z=d.exec(be.slice(Te));return Z?(ce.w=f.get(Z[0].toLowerCase()),Te+Z[0].length):-1}function M(ce,be,Te){var Z=b.exec(be.slice(Te));return Z?(ce.m=T.get(Z[0].toLowerCase()),Te+Z[0].length):-1}function D(ce,be,Te){var Z=_.exec(be.slice(Te));return Z?(ce.m=v.get(Z[0].toLowerCase()),Te+Z[0].length):-1}function j(ce,be,Te){return P(ce,e,be,Te)}function q(ce,be,Te){return P(ce,n,be,Te)}function Y(ce,be,Te){return P(ce,r,be,Te)}function X(ce){return s[ce.getDay()]}function U(ce){return o[ce.getDay()]}function J(ce){return l[ce.getMonth()]}function Q(ce){return a[ce.getMonth()]}function le(ce){return i[+(ce.getHours()>=12)]}function ne(ce){return 1+~~(ce.getMonth()/3)}function fe(ce){return s[ce.getUTCDay()]}function Ce(ce){return o[ce.getUTCDay()]}function Ue(ce){return l[ce.getUTCMonth()]}function st(ce){return a[ce.getUTCMonth()]}function Ut(ce){return i[+(ce.getUTCHours()>=12)]}function Wt(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var be=A(ce+="",x);return be.toString=function(){return ce},be},parse:function(ce){var be=S(ce+="",!1);return be.toString=function(){return ce},be},utcFormat:function(ce){var be=A(ce+="",C);return be.toString=function(){return ce},be},utcParse:function(ce){var be=S(ce+="",!0);return be.toString=function(){return ce},be}}}var tD={"-":"",_:" ",0:"0"},hn=/^\s*\d+/,sxe=/^%/,axe=/[\\^$*+?|[\]().{}]/g;function qe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function lxe(t){return t.replace(axe,"\\$&")}function zd(t){return new RegExp("^(?:"+t.map(lxe).join("|")+")","i")}function qd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function uxe(t,e,n){var r=hn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function cxe(t,e,n){var r=hn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dxe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function fxe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function hxe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function nD(t,e,n){var r=hn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function rD(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pxe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mxe(t,e,n){var r=hn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function gxe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function iD(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yxe(t,e,n){var r=hn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function oD(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function vxe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _xe(t,e,n){var r=hn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function wxe(t,e,n){var r=hn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function bxe(t,e,n){var r=hn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Txe(t,e,n){var r=sxe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Exe(t,e,n){var r=hn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xxe(t,e,n){var r=hn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function sD(t,e){return qe(t.getDate(),e,2)}function Sxe(t,e){return qe(t.getHours(),e,2)}function Ixe(t,e){return qe(t.getHours()%12||12,e,2)}function Axe(t,e){return qe(1+Op.count(Ao(t),t),e,3)}function rq(t,e){return qe(t.getMilliseconds(),e,3)}function Pxe(t,e){return rq(t,e)+"000"}function Cxe(t,e){return qe(t.getMonth()+1,e,2)}function Rxe(t,e){return qe(t.getMinutes(),e,2)}function Nxe(t,e){return qe(t.getSeconds(),e,2)}function kxe(t){var e=t.getDay();return e===0?7:e}function Oxe(t,e){return qe(H_.count(Ao(t)-1,t),e,2)}function iq(t){var e=t.getDay();return e>=4||e===0?hc(t):hc.ceil(t)}function Mxe(t,e){return t=iq(t),qe(hc.count(Ao(t),t)+(Ao(t).getDay()===4),e,2)}function Dxe(t){return t.getDay()}function Lxe(t,e){return qe(By.count(Ao(t)-1,t),e,2)}function $xe(t,e){return qe(t.getFullYear()%100,e,2)}function Vxe(t,e){return t=iq(t),qe(t.getFullYear()%100,e,2)}function Fxe(t,e){return qe(t.getFullYear()%1e4,e,4)}function Uxe(t,e){var n=t.getDay();return t=n>=4||n===0?hc(t):hc.ceil(t),qe(t.getFullYear()%1e4,e,4)}function Bxe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qe(e/60|0,"0",2)+qe(e%60,"0",2)}function aD(t,e){return qe(t.getUTCDate(),e,2)}function jxe(t,e){return qe(t.getUTCHours(),e,2)}function zxe(t,e){return qe(t.getUTCHours()%12||12,e,2)}function qxe(t,e){return qe(1+G_.count(Po(t),t),e,3)}function oq(t,e){return qe(t.getUTCMilliseconds(),e,3)}function Gxe(t,e){return oq(t,e)+"000"}function Hxe(t,e){return qe(t.getUTCMonth()+1,e,2)}function Wxe(t,e){return qe(t.getUTCMinutes(),e,2)}function Kxe(t,e){return qe(t.getUTCSeconds(),e,2)}function Jxe(t){var e=t.getUTCDay();return e===0?7:e}function Yxe(t,e){return qe(W_.count(Po(t)-1,t),e,2)}function sq(t){var e=t.getUTCDay();return e>=4||e===0?pc(t):pc.ceil(t)}function Qxe(t,e){return t=sq(t),qe(pc.count(Po(t),t)+(Po(t).getUTCDay()===4),e,2)}function Xxe(t){return t.getUTCDay()}function Zxe(t,e){return qe(jy.count(Po(t)-1,t),e,2)}function eSe(t,e){return qe(t.getUTCFullYear()%100,e,2)}function tSe(t,e){return t=sq(t),qe(t.getUTCFullYear()%100,e,2)}function nSe(t,e){return qe(t.getUTCFullYear()%1e4,e,4)}function rSe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?pc(t):pc.ceil(t),qe(t.getUTCFullYear()%1e4,e,4)}function iSe(){return"+0000"}function lD(){return"%"}function uD(t){return+t}function cD(t){return Math.floor(+t/1e3)}var Bl,aq,lq;oSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oSe(t){return Bl=oxe(t),aq=Bl.format,Bl.parse,lq=Bl.utcFormat,Bl.utcParse,Bl}function sSe(t){return new Date(t)}function aSe(t){return t instanceof Date?+t:+new Date(+t)}function aP(t,e,n,r,i,o,s,a,l,u){var c=WA(),d=c.invert,f=c.domain,g=u(".%L"),y=u(":%S"),_=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),T=u("%b %d"),x=u("%B"),C=u("%Y");function E(A){return(l(A)<A?g:a(A)<A?y:s(A)<A?_:o(A)<A?v:r(A)<A?i(A)<A?b:T:n(A)<A?x:C)(A)}return c.invert=function(A){return new Date(d(A))},c.domain=function(A){return arguments.length?f(Array.from(A,aSe)):f().map(sSe)},c.ticks=function(A){var S=f();return t(S[0],S[S.length-1],A??10)},c.tickFormat=function(A,S){return S==null?E:u(S)},c.nice=function(A){var S=f();return(!A||typeof A.range!="function")&&(A=e(S[0],S[S.length-1],A??10)),A?f(K4(S,A)):c},c.copy=function(){return kp(c,aP(t,e,n,r,i,o,s,a,l,u))},c}function lSe(){return Zr.apply(aP(rxe,ixe,Ao,oP,H_,Op,rP,tP,Na,aq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uSe(){return Zr.apply(aP(txe,nxe,Po,sP,W_,G_,iP,nP,Na,lq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function K_(){var t=0,e=1,n,r,i,o,s=Gn,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(o(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(s=d,u):s};function c(d){return function(f){var g,y;return arguments.length?([g,y]=f,s=d(g,y),u):[s(0),s(1)]}}return u.range=c(id),u.rangeRound=c(HA),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function Ks(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uq(){var t=Ws(K_()(Gn));return t.copy=function(){return Ks(t,uq())},Uo.apply(t,arguments)}function cq(){var t=YA(K_()).domain([1,10]);return t.copy=function(){return Ks(t,cq()).base(t.base())},Uo.apply(t,arguments)}function dq(){var t=QA(K_());return t.copy=function(){return Ks(t,dq()).constant(t.constant())},Uo.apply(t,arguments)}function lP(){var t=XA(K_());return t.copy=function(){return Ks(t,lP()).exponent(t.exponent())},Uo.apply(t,arguments)}function cSe(){return lP.apply(null,arguments).exponent(.5)}function fq(){var t=[],e=Gn;function n(r){if(r!=null&&!isNaN(r=+r))return e((Rp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(bs),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>YTe(t,o/r))},n.copy=function(){return fq(e).domain(t)},Uo.apply(n,arguments)}function J_(){var t=0,e=.5,n=1,r=1,i,o,s,a,l,u=Gn,c,d=!1,f;function g(_){return isNaN(_=+_)?f:(_=.5+((_=+c(_))-o)*(r*_<r*o?a:l),u(d?Math.max(0,Math.min(1,_)):_))}g.domain=function(_){return arguments.length?([t,e,n]=_,i=c(t=+t),o=c(e=+e),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,g):[t,e,n]},g.clamp=function(_){return arguments.length?(d=!!_,g):d},g.interpolator=function(_){return arguments.length?(u=_,g):u};function y(_){return function(v){var b,T,x;return arguments.length?([b,T,x]=v,u=TEe(_,[b,T,x]),g):[u(0),u(.5),u(1)]}}return g.range=y(id),g.rangeRound=y(HA),g.unknown=function(_){return arguments.length?(f=_,g):f},function(_){return c=_,i=_(t),o=_(e),s=_(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,g}}function hq(){var t=Ws(J_()(Gn));return t.copy=function(){return Ks(t,hq())},Uo.apply(t,arguments)}function pq(){var t=YA(J_()).domain([.1,1,10]);return t.copy=function(){return Ks(t,pq()).base(t.base())},Uo.apply(t,arguments)}function mq(){var t=QA(J_());return t.copy=function(){return Ks(t,mq()).constant(t.constant())},Uo.apply(t,arguments)}function uP(){var t=XA(J_());return t.copy=function(){return Ks(t,uP()).exponent(t.exponent())},Uo.apply(t,arguments)}function dSe(){return uP.apply(null,arguments).exponent(.5)}const dD=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ah,scaleDiverging:hq,scaleDivergingLog:pq,scaleDivergingPow:uP,scaleDivergingSqrt:dSe,scaleDivergingSymlog:mq,scaleIdentity:W4,scaleImplicit:AE,scaleLinear:Fy,scaleLog:J4,scaleOrdinal:zA,scalePoint:Pf,scalePow:ZA,scaleQuantile:X4,scaleQuantize:Z4,scaleRadial:Q4,scaleSequential:uq,scaleSequentialLog:cq,scaleSequentialPow:lP,scaleSequentialQuantile:fq,scaleSequentialSqrt:cSe,scaleSequentialSymlog:dq,scaleSqrt:GEe,scaleSymlog:Y4,scaleThreshold:eq,scaleTime:lSe,scaleUtc:uSe,tickFormat:H4},Symbol.toStringTag,{value:"Module"}));var fSe=Kc;function hSe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!fSe(s):n(s,a)))var a=s,l=o}return l}var gq=hSe;function pSe(t,e){return t>e}var mSe=pSe,gSe=gq,ySe=mSe,vSe=nd;function _Se(t){return t&&t.length?gSe(t,vSe,ySe):void 0}var wSe=_Se;const cs=tt(wSe);function bSe(t,e){return t<e}var TSe=bSe,ESe=gq,xSe=TSe,SSe=nd;function ISe(t){return t&&t.length?ESe(t,SSe,xSe):void 0}var ASe=ISe;const Y_=tt(ASe);var PSe=EA,CSe=Hs,RSe=S4,NSe=mr;function kSe(t,e){var n=NSe(t)?PSe:RSe;return n(t,CSe(e))}var OSe=kSe,MSe=E4,DSe=OSe;function LSe(t,e){return MSe(DSe(t,e),1)}var $Se=LSe;const VSe=tt($Se);var FSe=VA;function USe(t,e){return FSe(t,e)}var BSe=USe;const kh=tt(BSe);var od=1e9,jSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},dP,_t=!0,Qr="[DecimalError] ",Ba=Qr+"Invalid argument: ",cP=Qr+"Exponent out of range: ",sd=Math.floor,ha=Math.pow,zSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,br,sn=1e7,ft=7,yq=9007199254740991,zy=sd(yq/ft),me={};me.absoluteValue=me.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};me.comparedTo=me.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};me.decimalPlaces=me.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*ft;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};me.dividedBy=me.div=function(t){return go(this,new this.constructor(t))};me.dividedToIntegerBy=me.idiv=function(t){var e=this,n=e.constructor;return et(go(e,new n(t),0,1),n.precision)};me.equals=me.eq=function(t){return!this.cmp(t)};me.exponent=function(){return Ht(this)};me.greaterThan=me.gt=function(t){return this.cmp(t)>0};me.greaterThanOrEqualTo=me.gte=function(t){return this.cmp(t)>=0};me.isInteger=me.isint=function(){return this.e>this.d.length-2};me.isNegative=me.isneg=function(){return this.s<0};me.isPositive=me.ispos=function(){return this.s>0};me.isZero=function(){return this.s===0};me.lessThan=me.lt=function(t){return this.cmp(t)<0};me.lessThanOrEqualTo=me.lte=function(t){return this.cmp(t)<1};me.logarithm=me.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(br))throw Error(Qr+"NaN");if(n.s<1)throw Error(Qr+(n.s?"NaN":"-Infinity"));return n.eq(br)?new r(0):(_t=!1,e=go(Oh(n,o),Oh(t,o),o),_t=!0,et(e,i))};me.minus=me.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wq(e,t):vq(e,(t.s=-t.s,t))};me.modulo=me.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qr+"NaN");return n.s?(_t=!1,e=go(n,t,0,1).times(t),_t=!0,n.minus(e)):et(new r(n),i)};me.naturalExponential=me.exp=function(){return _q(this)};me.naturalLogarithm=me.ln=function(){return Oh(this)};me.negated=me.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};me.plus=me.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vq(e,t):wq(e,(t.s=-t.s,t))};me.precision=me.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ba+t);if(e=Ht(i)+1,r=i.d.length-1,n=r*ft+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};me.squareRoot=me.sqrt=function(){var t,e,n,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Qr+"NaN")}for(t=Ht(a),_t=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Ni(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=sd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(o=r,r=o.plus(go(a,o,s+2)).times(.5),Ni(o.d).slice(0,s)===(e=Ni(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(et(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return _t=!0,et(r,n)};me.times=me.mul=function(t){var e,n,r,i,o,s,a,l,u,c=this,d=c.constructor,f=c.d,g=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=f.length,u=g.length,l<u&&(o=f,f=g,g=o,s=l,l=u,u=s),o=[],s=l+u,r=s;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+g[r]*f[i-r-1]+e,o[i--]=a%sn|0,e=a/sn|0;o[i]=(o[i]+e)%sn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,_t?et(t,d.precision):t};me.toDecimalPlaces=me.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(qi(t,0,od),e===void 0?e=r.rounding:qi(e,0,8),et(n,t+Ht(n)+1,e))};me.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=fl(r,!0):(qi(t,0,od),e===void 0?e=i.rounding:qi(e,0,8),r=et(new i(r),t+1,e),n=fl(r,!0,t+1)),n};me.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?fl(i):(qi(t,0,od),e===void 0?e=o.rounding:qi(e,0,8),r=et(new o(i),t+Ht(i)+1,e),n=fl(r.abs(),!1,t+Ht(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};me.toInteger=me.toint=function(){var t=this,e=t.constructor;return et(new e(t),Ht(t)+1,e.rounding)};me.toNumber=function(){return+this};me.toPower=me.pow=function(t){var e,n,r,i,o,s,a=this,l=a.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(br);if(a=new l(a),!a.s){if(t.s<1)throw Error(Qr+"Infinity");return a}if(a.eq(br))return a;if(r=l.precision,t.eq(br))return et(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=c<0?-c:c)<=yq){for(i=new l(br),e=Math.ceil(r/ft+4),_t=!1;n%2&&(i=i.times(a),hD(i.d,e)),n=sd(n/2),n!==0;)a=a.times(a),hD(a.d,e);return _t=!0,t.s<0?new l(br).div(i):et(i,r)}}else if(o<0)throw Error(Qr+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,_t=!1,i=t.times(Oh(a,r+u)),_t=!0,i=_q(i),i.s=o,i};me.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Ht(i),r=fl(i,n<=o.toExpNeg||n>=o.toExpPos)):(qi(t,1,od),e===void 0?e=o.rounding:qi(e,0,8),i=et(new o(i),t,e),n=Ht(i),r=fl(i,t<=n||n<=o.toExpNeg,t)),r};me.toSignificantDigits=me.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(qi(t,1,od),e===void 0?e=r.rounding:qi(e,0,8)),et(new r(n),t,e)};me.toString=me.valueOf=me.val=me.toJSON=me[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ht(t),n=t.constructor;return fl(t,e<=n.toExpNeg||e>=n.toExpPos)};function vq(t,e){var n,r,i,o,s,a,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),_t?et(e,d):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=u.length):(r=u,i=s,a=l.length),s=Math.ceil(d/ft),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=u.length,a-o<0&&(o=a,r=u,u=l,l=r),n=0;o;)n=(l[--o]=l[o]+u[o]+n)/sn|0,l[o]%=sn;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,_t?et(e,d):e}function qi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ba+t)}function Ni(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=ft-r.length,n&&(o+=es(n)),o+=r;s=t[e],r=s+"",n=ft-r.length,n&&(o+=es(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var go=function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%sn|0,s=o/sn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*sn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,u,c,d,f,g,y,_,v,b,T,x,C,E,A,S,P,R=r.constructor,k=r.s==i.s?1:-1,O=r.d,M=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(Qr+"Division by zero");for(l=r.e-i.e,S=M.length,E=O.length,g=new R(k),y=g.d=[],u=0;M[u]==(O[u]||0);)++u;if(M[u]>(O[u]||0)&&--l,o==null?T=o=R.precision:s?T=o+(Ht(r)-Ht(i))+1:T=o,T<0)return new R(0);if(T=T/ft+2|0,u=0,S==1)for(c=0,M=M[0],T++;(u<E||c)&&T--;u++)x=c*sn+(O[u]||0),y[u]=x/M|0,c=x%M|0;else{for(c=sn/(M[0]+1)|0,c>1&&(M=t(M,c),O=t(O,c),S=M.length,E=O.length),C=S,_=O.slice(0,S),v=_.length;v<S;)_[v++]=0;P=M.slice(),P.unshift(0),A=M[0],M[1]>=sn/2&&++A;do c=0,a=e(M,_,S,v),a<0?(b=_[0],S!=v&&(b=b*sn+(_[1]||0)),c=b/A|0,c>1?(c>=sn&&(c=sn-1),d=t(M,c),f=d.length,v=_.length,a=e(d,_,f,v),a==1&&(c--,n(d,S<f?P:M,f))):(c==0&&(a=c=1),d=M.slice()),f=d.length,f<v&&d.unshift(0),n(_,d,v),a==-1&&(v=_.length,a=e(M,_,S,v),a<1&&(c++,n(_,S<v?P:M,v))),v=_.length):a===0&&(c++,_=[0]),y[u++]=c,a&&_[0]?_[v++]=O[C]||0:(_=[O[C]],v=1);while((C++<E||_[0]!==void 0)&&T--)}return y[0]||y.shift(),g.e=l,et(g,s?o+Ht(g)+1:o)}}();function _q(t,e){var n,r,i,o,s,a,l=0,u=0,c=t.constructor,d=c.precision;if(Ht(t)>16)throw Error(cP+Ht(t));if(!t.s)return new c(br);for(_t=!1,a=d,s=new c(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(ha(2,u))/Math.LN10*2+5|0,a+=r,n=i=o=new c(br),c.precision=a;;){if(i=et(i.times(t),a),n=n.times(++l),s=o.plus(go(i,n,a)),Ni(s.d).slice(0,a)===Ni(o.d).slice(0,a)){for(;u--;)o=et(o.times(o),a);return c.precision=d,e==null?(_t=!0,et(o,d)):o}o=s}}function Ht(t){for(var e=t.e*ft,n=t.d[0];n>=10;n/=10)e++;return e}function qw(t,e,n){if(e>t.LN10.sd())throw _t=!0,n&&(t.precision=n),Error(Qr+"LN10 precision limit exceeded");return et(new t(t.LN10),e)}function es(t){for(var e="";t--;)e+="0";return e}function Oh(t,e){var n,r,i,o,s,a,l,u,c,d=1,f=10,g=t,y=g.d,_=g.constructor,v=_.precision;if(g.s<1)throw Error(Qr+(g.s?"NaN":"-Infinity"));if(g.eq(br))return new _(0);if(e==null?(_t=!1,u=v):u=e,g.eq(10))return e==null&&(_t=!0),qw(_,u);if(u+=f,_.precision=u,n=Ni(y),r=n.charAt(0),o=Ht(g),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Ni(g.d),r=n.charAt(0),d++;o=Ht(g),r>1?(g=new _("0."+n),o++):g=new _(r+"."+n.slice(1))}else return l=qw(_,u+2,v).times(o+""),g=Oh(new _(r+"."+n.slice(1)),u-f).plus(l),_.precision=v,e==null?(_t=!0,et(g,v)):g;for(a=s=g=go(g.minus(br),g.plus(br),u),c=et(g.times(g),u),i=3;;){if(s=et(s.times(c),u),l=a.plus(go(s,new _(i),u)),Ni(l.d).slice(0,u)===Ni(a.d).slice(0,u))return a=a.times(2),o!==0&&(a=a.plus(qw(_,u+2,v).times(o+""))),a=go(a,new _(d),u),_.precision=v,e==null?(_t=!0,et(a,v)):a;a=l,i+=2}}function fD(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=sd(n/ft),t.d=[],r=(n+1)%ft,n<0&&(r+=ft),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=ft;r<i;)t.d.push(+e.slice(r,r+=ft));e=e.slice(r),r=ft-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),_t&&(t.e>zy||t.e<-zy))throw Error(cP+n)}else t.s=0,t.e=0,t.d=[0];return t}function et(t,e,n){var r,i,o,s,a,l,u,c,d=t.d;for(s=1,o=d[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=ft,i=e,u=d[c=0];else{if(c=Math.ceil((r+1)/ft),o=d.length,c>=o)return t;for(u=o=d[c],s=1;o>=10;o/=10)s++;r%=ft,i=r-ft+s}if(n!==void 0&&(o=ha(10,s-i-1),a=u/o%10|0,l=e<0||d[c+1]!==void 0||u%o,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?u/ha(10,s-i):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(o=Ht(t),d.length=1,e=e-o-1,d[0]=ha(10,(ft-e%ft)%ft),t.e=sd(-e/ft)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,o=1,c--):(d.length=c+1,o=ha(10,ft-r),d[c]=i>0?(u/ha(10,s-i)%ha(10,i)|0)*o:0),l)for(;;)if(c==0){(d[0]+=o)==sn&&(d[0]=1,++t.e);break}else{if(d[c]+=o,d[c]!=sn)break;d[c--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(_t&&(t.e>zy||t.e<-zy))throw Error(cP+Ht(t));return t}function wq(t,e){var n,r,i,o,s,a,l,u,c,d,f=t.constructor,g=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),_t?et(e,g):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(c=s<0,c?(n=l,s=-s,a=d.length):(n=d,r=u,a=l.length),i=Math.max(Math.ceil(g/ft),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=d.length,c=i<a,c&&(a=i),i=0;i<a;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}s=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,i=d.length-a;i>0;--i)l[a++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=sn-1;--l[o],l[i]+=sn}l[i]-=d[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,_t?et(e,g):e):new f(0)}function fl(t,e,n){var r,i=Ht(t),o=Ni(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+es(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+es(-i-1)+o,n&&(r=n-s)>0&&(o+=es(r))):i>=s?(o+=es(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+es(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=es(r))),t.s<0?"-"+o:o}function hD(t,e){if(t.length>e)return t.length=e,!0}function bq(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ba+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return fD(s,o.toString())}else if(typeof o!="string")throw Error(Ba+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,zSe.test(o))fD(s,o);else throw Error(Ba+o)}if(i.prototype=me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=bq,i.config=i.set=qSe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function qSe(t){if(!t||typeof t!="object")throw Error(Qr+"Object expected");var e,n,r,i=["precision",1,od,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(sd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ba+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ba+n+": "+r);return this}var dP=bq(jSe);br=new dP(1);const Ye=dP;function GSe(t){return JSe(t)||KSe(t)||WSe(t)||HSe()}function HSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WSe(t,e){if(t){if(typeof t=="string")return NE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NE(t,e)}}function KSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function JSe(t){if(Array.isArray(t))return NE(t)}function NE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var YSe=function(e){return e},Tq={},Eq=function(e){return e===Tq},pD=function(e){return function n(){return arguments.length===0||arguments.length===1&&Eq(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},QSe=function t(e,n){return e===1?n:pD(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==Tq}).length;return s>=e?n.apply(void 0,i):t(e-s,pD(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var c=i.map(function(d){return Eq(d)?l.shift():d});return n.apply(void 0,GSe(c).concat(l))}))})},Q_=function(e){return QSe(e.length,e)},kE=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},XSe=Q_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),ZSe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return YSe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},OE=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},xq=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(a,l){return a===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function eIe(t){var e;return t===0?e=1:e=Math.floor(new Ye(t).abs().log(10).toNumber())+1,e}function tIe(t,e,n){for(var r=new Ye(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var nIe=Q_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),rIe=Q_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),iIe=Q_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const X_={rangeStep:tIe,getDigitCount:eIe,interpolateNumber:nIe,uninterpolateNumber:rIe,uninterpolateTruncation:iIe};function ME(t){return aIe(t)||sIe(t)||Sq(t)||oIe()}function oIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sIe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aIe(t){if(Array.isArray(t))return DE(t)}function Mh(t,e){return cIe(t)||uIe(t,e)||Sq(t,e)||lIe()}function lIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sq(t,e){if(t){if(typeof t=="string")return DE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DE(t,e)}}function DE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uIe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function cIe(t){if(Array.isArray(t))return t}function Iq(t){var e=Mh(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Aq(t,e,n){if(t.lte(0))return new Ye(0);var r=X_.getDigitCount(t.toNumber()),i=new Ye(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Ye(Math.ceil(o.div(s).toNumber())).add(n).mul(s),l=a.mul(i);return e?l:new Ye(Math.ceil(l))}function dIe(t,e,n){var r=1,i=new Ye(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ye(10).pow(X_.getDigitCount(t)-1),i=new Ye(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ye(Math.floor(t)))}else t===0?i=new Ye(Math.floor((e-1)/2)):n||(i=new Ye(Math.floor(t)));var s=Math.floor((e-1)/2),a=ZSe(XSe(function(l){return i.add(new Ye(l-s).mul(r)).toNumber()}),kE);return a(0,e)}function Pq(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ye(0),tickMin:new Ye(0),tickMax:new Ye(0)};var o=Aq(new Ye(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ye(0):(s=new Ye(t).add(e).div(2),s=s.sub(new Ye(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new Ye(e).sub(s).div(o).toNumber()),u=a+l+1;return u>n?Pq(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,a=e>0?a:a+(n-u)),{step:o,tickMin:s.sub(new Ye(a).mul(o)),tickMax:s.add(new Ye(l).mul(o))})}function fIe(t){var e=Mh(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=Iq([n,r]),l=Mh(a,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(ME(kE(0,i-1).map(function(){return 1/0}))):[].concat(ME(kE(0,i-1).map(function(){return-1/0})),[c]);return n>r?OE(d):d}if(u===c)return dIe(u,i,o);var f=Pq(u,c,s,o),g=f.step,y=f.tickMin,_=f.tickMax,v=X_.rangeStep(y,_.add(new Ye(.1).mul(g)),g);return n>r?OE(v):v}function hIe(t,e){var n=Mh(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Iq([r,i]),a=Mh(s,2),l=a[0],u=a[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),d=Aq(new Ye(u).sub(l).div(c-1),o,0),f=[].concat(ME(X_.rangeStep(new Ye(l),new Ye(u).sub(new Ye(.99).mul(d)),d)),[u]);return r>i?OE(f):f}var pIe=xq(fIe),mIe=xq(hIe),gIe="Invariant failed";function hl(t,e){throw new Error(gIe)}var yIe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(this,arguments)}function vIe(t,e){return TIe(t)||bIe(t,e)||wIe(t,e)||_Ie()}function _Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wIe(t,e){if(t){if(typeof t=="string")return mD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mD(t,e)}}function mD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function TIe(t){if(Array.isArray(t))return t}function EIe(t,e){if(t==null)return{};var n=xIe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nq(r.key),r)}}function AIe(t,e,n){return e&&IIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function PIe(t,e,n){return e=Gy(e),CIe(t,Cq()?Reflect.construct(e,n||[],Gy(t).constructor):e.apply(t,n))}function CIe(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RIe(t)}function RIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cq=function(){return!!t})()}function Gy(t){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gy(t)}function NIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LE(t,e)}function LE(t,e){return LE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LE(t,e)}function Rq(t,e,n){return e=Nq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nq(t){var e=kIe(t,"string");return mc(e)=="symbol"?e:e+""}function kIe(t,e){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z_=function(t){function e(){return SIe(this,e),PIe(this,e,arguments)}return NIe(e,t),AIe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,s=r.width,a=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,f=EIe(r,yIe),g=Ne(f,!1);this.props.direction==="x"&&c.type!=="number"&&hl();var y=l.map(function(_){var v=u(_,a),b=v.x,T=v.y,x=v.value,C=v.errorVal;if(!C)return null;var E=[],A,S;if(Array.isArray(C)){var P=vIe(C,2);A=P[0],S=P[1]}else A=S=C;if(o==="vertical"){var R=c.scale,k=T+i,O=k+s,M=k-s,D=R(x-A),j=R(x+S);E.push({x1:j,y1:O,x2:j,y2:M}),E.push({x1:D,y1:k,x2:j,y2:k}),E.push({x1:D,y1:O,x2:D,y2:M})}else if(o==="horizontal"){var q=d.scale,Y=b+i,X=Y-s,U=Y+s,J=q(x-A),Q=q(x+S);E.push({x1:X,y1:Q,x2:U,y2:Q}),E.push({x1:Y,y1:J,x2:Y,y2:Q}),E.push({x1:X,y1:J,x2:U,y2:J})}return V.createElement(Tt,qy({className:"recharts-errorBar",key:"bar-".concat(E.map(function(le){return"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))},g),E.map(function(le){return V.createElement("line",qy({},le,{key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))}))});return V.createElement(Tt,{className:"recharts-errorBars"},y)}}])}(V.Component);Rq(Z_,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Rq(Z_,"displayName","ErrorBar");function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){OIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OIe(t,e,n){return e=MIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MIe(t){var e=DIe(t,"string");return Dh(e)=="symbol"?e:e+""}function DIe(t,e){if(Dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kq=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=_r(n,Ou);if(!s)return null;var a=Ou.defaultProps,l=a!==void 0?oa(oa({},a),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:o==="children"?u=(r||[]).reduce(function(c,d){var f=d.item,g=d.props,y=g.sectors||g.data||[];return c.concat(y.map(function(_){return{type:s.props.iconType||f.props.legendType,value:_.name,color:_.fill,payload:_}}))},[]):u=(r||[]).map(function(c){var d=c.item,f=d.type.defaultProps,g=f!==void 0?oa(oa({},f),d.props):{},y=g.dataKey,_=g.name,v=g.legendType,b=g.hide;return{inactive:b,dataKey:y,type:l.iconType||v||"square",color:fP(d),value:_||y,payload:g}}),oa(oa(oa({},l),Ou.getWithHeight(s,i)),{},{payload:u,item:s})};function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function yD(t){return FIe(t)||VIe(t)||$Ie(t)||LIe()}function LIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ie(t,e){if(t){if(typeof t=="string")return $E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(t,e)}}function VIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FIe(t){if(Array.isArray(t))return $E(t)}function $E(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vD(Object(n),!0).forEach(function(r){Du(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Du(t,e,n){return e=UIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UIe(t){var e=BIe(t,"string");return Lh(e)=="symbol"?e:e+""}function BIe(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pr(t,e,n){return De(t)||De(e)?n:Xt(e)?Hr(t,e,n):Pe(e)?e(t):n}function Cf(t,e,n,r){var i=VSe(t,function(a){return Pr(a,e)});if(n==="number"){var o=i.filter(function(a){return oe(a)||parseFloat(a)});return o.length?[Y_(o),cs(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!De(a)}):i;return s.map(function(a){return Xt(a)||a instanceof Date?a:""})}var jIe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<a;u++){var c=u>0?i[u-1].coordinate:i[a-1].coordinate,d=i[u].coordinate,f=u>=a-1?i[0].coordinate:i[u+1].coordinate,g=void 0;if(li(d-c)!==li(f-d)){var y=[];if(li(f-d)===li(l[1]-l[0])){g=f;var _=d+l[1]-l[0];y[0]=Math.min(_,(_+c)/2),y[1]=Math.max(_,(_+c)/2)}else{g=c;var v=f+l[1]-l[0];y[0]=Math.min(d,(v+d)/2),y[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){s=i[u].index;break}}else{var T=Math.min(c,f),x=Math.max(c,f);if(e>(T+d)/2&&e<=(x+d)/2){s=i[u].index;break}}}else for(var C=0;C<a;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<a-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===a-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){s=r[C].index;break}return s},fP=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,s=o.stroke,a=o.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:a;break;default:l=a;break}return l},zIe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),l=0,u=a.length;l<u;l++)for(var c=o[a[l]].stackGroups,d=Object.keys(c),f=0,g=d.length;f<g;f++){var y=c[d[f]],_=y.items,v=y.cateAxisId,b=_.filter(function(S){return po(S.type).indexOf("Bar")>=0});if(b&&b.length){var T=b[0].type.defaultProps,x=T!==void 0?Ct(Ct({},T),b[0].props):b[0].props,C=x.barSize,E=x[v];s[E]||(s[E]=[]);var A=De(C)?n:C;s[E].push({item:b[0],stackList:b.slice(1),barSize:De(A)?void 0:dl(A,r,0)})}}return s},qIe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var u=dl(n,i,0,!0),c,d=[];if(s[0].barSize===+s[0].barSize){var f=!1,g=i/l,y=s.reduce(function(C,E){return C+E.barSize||0},0);y+=(l-1)*u,y>=i&&(y-=(l-1)*u,u=0),y>=i&&g>0&&(f=!0,g*=.9,y=l*g);var _=(i-y)/2>>0,v={offset:_-u,size:0};c=s.reduce(function(C,E){var A={item:E.item,position:{offset:v.offset+v.size+u,size:f?g:E.barSize}},S=[].concat(yD(C),[A]);return v=S[S.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(P){S.push({item:P,position:v})}),S},d)}else{var b=dl(r,i,0,!0);i-2*b-(l-1)*u<=0&&(u=0);var T=(i-2*b-(l-1)*u)/l;T>1&&(T>>=0);var x=a===+a?Math.min(T,a):T;c=s.reduce(function(C,E,A){var S=[].concat(yD(C),[{item:E.item,position:{offset:b+(T+u)*A+(T-x)/2,size:x}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(P){S.push({item:P,position:S[S.length-1].position})}),S},d)}return c},GIe=function(e,n,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),u=kq({children:o,legendWidth:l});if(u){var c=i||{},d=c.width,f=c.height,g=u.align,y=u.verticalAlign,_=u.layout;if((_==="vertical"||_==="horizontal"&&y==="middle")&&g!=="center"&&oe(e[g]))return Ct(Ct({},e),{},Du({},g,e[g]+(d||0)));if((_==="horizontal"||_==="vertical"&&g==="center")&&y!=="middle"&&oe(e[y]))return Ct(Ct({},e),{},Du({},y,e[y]+(f||0)))}return e},HIe=function(e,n,r){return De(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Oq=function(e,n,r,i,o){var s=n.props.children,a=hi(s,Z_).filter(function(u){return HIe(i,o,u.props.direction)});if(a&&a.length){var l=a.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=Pr(c,r);if(De(d))return u;var f=Array.isArray(d)?[Y_(d),cs(d)]:[d,d],g=l.reduce(function(y,_){var v=Pr(c,_,0),b=f[0]-Math.abs(Array.isArray(v)?v[0]:v),T=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,y[0]),Math.max(T,y[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},WIe=function(e,n,r,i,o){var s=n.map(function(a){return Oq(e,a,r,o,i)}).filter(function(a){return!De(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Mq=function(e,n,r,i,o){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&Oq(e,l,u,i)||Cf(e,u,r,o)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)a[u[c]]||(a[u[c]]=!0,l.push(u[c]));return l},[])},Dq=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Lq=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate});return o||a.push(n),s||a.push(r),a},uo=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?li(a[0]-a[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var f=o?o.indexOf(d):d;return{coordinate:i(f)+u,value:d,offset:u}});return c.filter(function(d){return!Zc(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+u,value:d,index:f,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,f){return{coordinate:i(d)+u,value:o?o[d]:d,index:f,offset:u}})},Gw=new WeakMap,Dm=function(e,n){if(typeof n!="function")return e;Gw.has(e)||Gw.set(e,new WeakMap);var r=Gw.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},KIe=function(e,n,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:Ah(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:Fy(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Pf(),realScaleType:"point"}:o==="category"?{scale:Ah(),realScaleType:"band"}:{scale:Fy(),realScaleType:"linear"};if(cl(i)){var l="scale".concat($_(i));return{scale:(dD[l]||Pf)(),realScaleType:dD[l]?l:"point"}}return Pe(i)?{scale:i}:{scale:Pf(),realScaleType:"point"}},_D=1e-4,JIe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-_D,s=Math.max(i[0],i[1])+_D,a=e(n[0]),l=e(n[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([n[0],n[r-1]])}},YIe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},QIe=function(e,n){if(!n||n.length!==2||!oe(n[0])||!oe(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!oe(e[0])||e[0]<r)&&(o[0]=r),(!oe(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},XIe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<n;++a){var l=Zc(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},ZIe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var a=Zc(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},eAe={sign:XIe,expand:ppe,none:ac,silhouette:mpe,wiggle:gpe,positive:ZIe},tAe=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),o=eAe[r],s=hpe().keys(i).value(function(a,l){return+Pr(a,l,0)}).order(lE).offset(o);return s(e)},nAe=function(e,n,r,i,o,s){if(!e)return null;var a=s?n.reverse():n,l={},u=a.reduce(function(d,f){var g,y=(g=f.type)!==null&&g!==void 0&&g.defaultProps?Ct(Ct({},f.type.defaultProps),f.props):f.props,_=y.stackId,v=y.hide;if(v)return d;var b=y[r],T=d[b]||{hasStack:!1,stackGroups:{}};if(Xt(_)){var x=T.stackGroups[_]||{numericAxisId:r,cateAxisId:i,items:[]};x.items.push(f),T.hasStack=!0,T.stackGroups[_]=x}else T.stackGroups[Pp("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return Ct(Ct({},d),{},Du({},b,T))},l),c={};return Object.keys(u).reduce(function(d,f){var g=u[f];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(_,v){var b=g.stackGroups[v];return Ct(Ct({},_),{},Du({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:tAe(e,b.items,o)}))},y)}return Ct(Ct({},d),{},Du({},f,g))},c)},rAe=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=pIe(u,o,a);return e.domain([Y_(c),cs(c)]),{niceTicks:c}}if(o&&i==="number"){var d=e.domain(),f=mIe(d,o,a);return{niceTicks:f}}return null};function wD(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!De(i[e.dataKey])){var a=my(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Pr(i,De(s)?e.dataKey:s);return De(l)?null:e.scale(l)}var bD=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Pr(s,n.dataKey,n.domain[a]);return De(l)?null:n.scale(l)-o/2+i},iAe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},oAe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(Xt(o)){var s=n[o];if(s){var a=s.items.indexOf(e);return a>=0?s.stackedData[a]:null}}return null},sAe=function(e){return e.reduce(function(n,r){return[Y_(r.concat([n[0]]).filter(oe)),cs(r.concat([n[1]]).filter(oe))]},[1/0,-1/0])},$q=function(e,n,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(u,c){var d=sAe(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},TD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ED=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VE=function(e,n,r){if(Pe(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(oe(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(TD.test(e[0])){var o=+TD.exec(e[0])[1];i[0]=n[0]-o}else Pe(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(oe(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(ED.test(e[1])){var s=+ED.exec(e[1])[1];i[1]=n[1]+s}else Pe(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Hy=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=UA(n,function(d){return d.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var u=o[a],c=o[a-1];s=Math.min((u.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},xD=function(e,n,r){return!e||!e.length||kh(e,Hr(r,"type.defaultProps.domain"))?n:e},Vq=function(e,n){var r=e.type.defaultProps?Ct(Ct({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Ct(Ct({},Ne(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:fP(e),value:Pr(n,i),type:l,payload:n,chartType:u,hide:c})};function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ID(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){aAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aAe(t,e,n){return e=lAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lAe(t){var e=uAe(t,"string");return $h(e)=="symbol"?e:e+""}function uAe(t,e){if($h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wy=Math.PI/180,cAe=function(e){return e*180/Math.PI},_n=function(e,n,r,i){return{x:e+Math.cos(-Wy*i)*r,y:n+Math.sin(-Wy*i)*r}},dAe=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},fAe=function(e,n){var r=e.x,i=e.y,o=n.cx,s=n.cy,a=dAe({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:a,angle:cAe(u),angleInRadian:u}},hAe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},pAe=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},AD=function(e,n){var r=e.x,i=e.y,o=fAe({x:r,y:i},n),s=o.radius,a=o.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var c=hAe(n),d=c.startAngle,f=c.endAngle,g=a,y;if(d<=f){for(;g>f;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=f}else{for(;g>d;)g-=360;for(;g<f;)g+=360;y=g>=f&&g<=d}return y?ID(ID({},n),{},{radius:s,angle:pAe(g,n)}):null};function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}var mAe=["offset"];function gAe(t){return wAe(t)||_Ae(t)||vAe(t)||yAe()}function yAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vAe(t,e){if(t){if(typeof t=="string")return FE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FE(t,e)}}function _Ae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wAe(t){if(Array.isArray(t))return FE(t)}function FE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bAe(t,e){if(t==null)return{};var n=TAe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function PD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PD(Object(n),!0).forEach(function(r){EAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EAe(t,e,n){return e=xAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xAe(t){var e=SAe(t,"string");return Vh(e)=="symbol"?e:e+""}function SAe(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fh.apply(this,arguments)}var IAe=function(e){var n=e.value,r=e.formatter,i=De(e.children)?n:e.children;return Pe(r)?r(i):i},AAe=function(e,n){var r=li(n-e),i=Math.min(Math.abs(n-e),360);return r*i},PAe=function(e,n,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,u=l.cx,c=l.cy,d=l.innerRadius,f=l.outerRadius,g=l.startAngle,y=l.endAngle,_=l.clockWise,v=(d+f)/2,b=AAe(g,y),T=b>=0?1:-1,x,C;i==="insideStart"?(x=g+T*s,C=_):i==="insideEnd"?(x=y-T*s,C=!_):i==="end"&&(x=y+T*s,C=_),C=b<=0?C:!C;var E=_n(u,c,v,x),A=_n(u,c,v,x+(C?1:-1)*359),S="M".concat(E.x,",").concat(E.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(A.x,",").concat(A.y),P=De(e.id)?Pp("recharts-radial-line-"):e.id;return V.createElement("text",Fh({},r,{dominantBaseline:"central",className:Fe("recharts-radial-bar-label",a)}),V.createElement("defs",null,V.createElement("path",{id:P,d:S})),V.createElement("textPath",{xlinkHref:"#".concat(P)},n))},CAe=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,s=o.cx,a=o.cy,l=o.innerRadius,u=o.outerRadius,c=o.startAngle,d=o.endAngle,f=(c+d)/2;if(i==="outside"){var g=_n(s,a,u+r,f),y=g.x,_=g.y;return{x:y,y:_,textAnchor:y>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,b=_n(s,a,v,f),T=b.x,x=b.y;return{x:T,y:x,textAnchor:"middle",verticalAnchor:"middle"}},RAe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=n,a=s.x,l=s.y,u=s.width,c=s.height,d=c>=0?1:-1,f=d*i,g=d>0?"end":"start",y=d>0?"start":"end",_=u>=0?1:-1,v=_*i,b=_>0?"end":"start",T=_>0?"start":"end";if(o==="top"){var x={x:a+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return Jt(Jt({},x),r?{height:Math.max(l-r.y,0),width:u}:{})}if(o==="bottom"){var C={x:a+u/2,y:l+c+f,textAnchor:"middle",verticalAnchor:y};return Jt(Jt({},C),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(o==="left"){var E={x:a-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"};return Jt(Jt({},E),r?{width:Math.max(E.x-r.x,0),height:c}:{})}if(o==="right"){var A={x:a+u+v,y:l+c/2,textAnchor:T,verticalAnchor:"middle"};return Jt(Jt({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:c}:{})}var S=r?{width:u,height:c}:{};return o==="insideLeft"?Jt({x:a+v,y:l+c/2,textAnchor:T,verticalAnchor:"middle"},S):o==="insideRight"?Jt({x:a+u-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"},S):o==="insideTop"?Jt({x:a+u/2,y:l+f,textAnchor:"middle",verticalAnchor:y},S):o==="insideBottom"?Jt({x:a+u/2,y:l+c-f,textAnchor:"middle",verticalAnchor:g},S):o==="insideTopLeft"?Jt({x:a+v,y:l+f,textAnchor:T,verticalAnchor:y},S):o==="insideTopRight"?Jt({x:a+u-v,y:l+f,textAnchor:b,verticalAnchor:y},S):o==="insideBottomLeft"?Jt({x:a+v,y:l+c-f,textAnchor:T,verticalAnchor:g},S):o==="insideBottomRight"?Jt({x:a+u-v,y:l+c-f,textAnchor:b,verticalAnchor:g},S):Jc(o)&&(oe(o.x)||Ca(o.x))&&(oe(o.y)||Ca(o.y))?Jt({x:a+dl(o.x,u),y:l+dl(o.y,c),textAnchor:"end",verticalAnchor:"end"},S):Jt({x:a+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},NAe=function(e){return"cx"in e&&oe(e.cx)};function kn(t){var e=t.offset,n=e===void 0?5:e,r=bAe(t,mAe),i=Jt({offset:n},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,f=i.textBreakAll;if(!o||De(a)&&De(l)&&!$.isValidElement(u)&&!Pe(u))return null;if($.isValidElement(u))return $.cloneElement(u,i);var g;if(Pe(u)){if(g=$.createElement(u,i),$.isValidElement(g))return g}else g=IAe(i);var y=NAe(o),_=Ne(i,!0);if(y&&(s==="insideStart"||s==="insideEnd"||s==="end"))return PAe(i,g,_);var v=y?CAe(i):RAe(i);return V.createElement(Ny,Fh({className:Fe("recharts-label",d)},_,v,{breakAll:f}),g)}kn.displayName="Label";var Fq=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,f=e.y,g=e.top,y=e.left,_=e.width,v=e.height,b=e.clockWise,T=e.labelViewBox;if(T)return T;if(oe(_)&&oe(v)){if(oe(d)&&oe(f))return{x:d,y:f,width:_,height:v};if(oe(g)&&oe(y))return{x:g,y,width:_,height:v}}return oe(d)&&oe(f)?{x:d,y:f,width:0,height:0}:oe(n)&&oe(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:c||l||a||0,clockWise:b}:e.viewBox?e.viewBox:{}},kAe=function(e,n){return e?e===!0?V.createElement(kn,{key:"label-implicit",viewBox:n}):Xt(e)?V.createElement(kn,{key:"label-implicit",viewBox:n,value:e}):$.isValidElement(e)?e.type===kn?$.cloneElement(e,{key:"label-implicit",viewBox:n}):V.createElement(kn,{key:"label-implicit",content:e,viewBox:n}):Pe(e)?V.createElement(kn,{key:"label-implicit",content:e,viewBox:n}):Jc(e)?V.createElement(kn,Fh({viewBox:n},e,{key:"label-implicit"})):null:null},OAe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Fq(e),s=hi(i,kn).map(function(l,u){return $.cloneElement(l,{viewBox:n||o,key:"label-".concat(u)})});if(!r)return s;var a=kAe(e.label,n||o);return[a].concat(gAe(s))};kn.parseViewBox=Fq;kn.renderCallByParent=OAe;function MAe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var DAe=MAe;const LAe=tt(DAe);function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}var $Ae=["valueAccessor"],VAe=["data","dataKey","clockWise","id","textBreakAll"];function FAe(t){return zAe(t)||jAe(t)||BAe(t)||UAe()}function UAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BAe(t,e){if(t){if(typeof t=="string")return UE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(t,e)}}function jAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zAe(t){if(Array.isArray(t))return UE(t)}function UE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ky.apply(this,arguments)}function CD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CD(Object(n),!0).forEach(function(r){qAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qAe(t,e,n){return e=GAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GAe(t){var e=HAe(t,"string");return Uh(e)=="symbol"?e:e+""}function HAe(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ND(t,e){if(t==null)return{};var n=WAe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var KAe=function(e){return Array.isArray(e.value)?LAe(e.value):e.value};function Ts(t){var e=t.valueAccessor,n=e===void 0?KAe:e,r=ND(t,$Ae),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,u=ND(r,VAe);return!i||!i.length?null:V.createElement(Tt,{className:"recharts-label-list"},i.map(function(c,d){var f=De(o)?n(c,d):Pr(c&&c.payload,o),g=De(a)?{}:{id:"".concat(a,"-").concat(d)};return V.createElement(kn,Ky({},Ne(c,!0),u,g,{parentViewBox:c.parentViewBox,value:f,textBreakAll:l,viewBox:kn.parseViewBox(De(s)?c:RD(RD({},c),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Ts.displayName="LabelList";function JAe(t,e){return t?t===!0?V.createElement(Ts,{key:"labelList-implicit",data:e}):V.isValidElement(t)||Pe(t)?V.createElement(Ts,{key:"labelList-implicit",data:e,content:t}):Jc(t)?V.createElement(Ts,Ky({data:e},t,{key:"labelList-implicit"})):null:null}function YAe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hi(r,Ts).map(function(s,a){return $.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var o=JAe(t.label,e);return[o].concat(FAe(i))}Ts.renderCallByParent=YAe;function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function BE(){return BE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BE.apply(this,arguments)}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){QAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QAe(t,e,n){return e=XAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XAe(t){var e=ZAe(t,"string");return Bh(e)=="symbol"?e:e+""}function ZAe(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ePe=function(e,n){var r=li(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Lm=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(a?1:-1)+i,d=Math.asin(l/c)/Wy,f=u?o:o+s*d,g=_n(n,r,c,f),y=_n(n,r,i,f),_=u?o-s*d:o,v=_n(n,r,c*Math.cos(d*Wy),_);return{center:g,circleTangency:y,lineTangency:v,theta:d}},Uq=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=ePe(s,a),u=s+l,c=_n(n,r,o,s),d=_n(n,r,o,u),f="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=_n(n,r,i,s),y=_n(n,r,i,u);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},tPe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=li(c-u),f=Lm({cx:n,cy:r,radius:o,angle:u,sign:d,cornerRadius:s,cornerIsExternal:l}),g=f.circleTangency,y=f.lineTangency,_=f.theta,v=Lm({cx:n,cy:r,radius:o,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:l}),b=v.circleTangency,T=v.lineTangency,x=v.theta,C=l?Math.abs(u-c):Math.abs(u-c)-_-x;if(C<0)return a?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Uq({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:c});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var A=Lm({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=A.circleTangency,P=A.lineTangency,R=A.theta,k=Lm({cx:n,cy:r,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),O=k.circleTangency,M=k.lineTangency,D=k.theta,j=l?Math.abs(u-c):Math.abs(u-c)-R-D;if(j<0&&s===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},nPe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Bq=function(e){var n=OD(OD({},nPe),e),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,f=n.className;if(s<o||c===d)return null;var g=Fe("recharts-sector",f),y=s-o,_=dl(a,y,0,!0),v;return _>0&&Math.abs(c-d)<360?v=tPe({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(_,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):v=Uq({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:c,endAngle:d}),V.createElement("path",BE({},Ne(n,!0),{className:g,d:v,role:"img"}))};function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(this,arguments)}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){rPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rPe(t,e,n){return e=iPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iPe(t){var e=oPe(t,"string");return jh(e)=="symbol"?e:e+""}function oPe(t,e){if(jh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LD={curveBasisClosed:npe,curveBasisOpen:rpe,curveBasis:tpe,curveBumpX:Bhe,curveBumpY:jhe,curveLinearClosed:ipe,curveLinear:F_,curveMonotoneX:ope,curveMonotoneY:spe,curveNatural:ape,curveStep:lpe,curveStepAfter:cpe,curveStepBefore:upe},$m=function(e){return e.x===+e.x&&e.y===+e.y},Gd=function(e){return e.x},Hd=function(e){return e.y},sPe=function(e,n){if(Pe(e))return e;var r="curve".concat($_(e));return(r==="curveMonotone"||r==="curveBump")&&n?LD["".concat(r).concat(n==="vertical"?"Y":"X")]:LD[r]||F_},aPe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=sPe(r,a),d=u?o.filter(function(_){return $m(_)}):o,f;if(Array.isArray(s)){var g=u?s.filter(function(_){return $m(_)}):s,y=d.map(function(_,v){return DD(DD({},_),{},{base:g[v]})});return a==="vertical"?f=Am().y(Hd).x1(Gd).x0(function(_){return _.base.x}):f=Am().x(Gd).y1(Hd).y0(function(_){return _.base.y}),f.defined($m).curve(c),f(y)}return a==="vertical"&&oe(s)?f=Am().y(Hd).x1(Gd).x0(s):oe(s)?f=Am().x(Gd).y1(Hd).y0(s):f=jz().x(Gd).y(Hd),f.defined($m).curve(c),f(d)},Rf=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?aPe(e):i;return $.createElement("path",jE({},Ne(e,!1),gy(e),{className:Fe("recharts-curve",n),d:s,ref:o}))},jq={exports:{}},lPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uPe=lPe,cPe=uPe;function zq(){}function qq(){}qq.resetWarningCache=zq;var dPe=function(){function t(r,i,o,s,a,l){if(l!==cPe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:qq,resetWarningCache:zq};return n.PropTypes=n,n};jq.exports=dPe();var fPe=jq.exports;const Ge=tt(fPe),{getOwnPropertyNames:hPe,getOwnPropertySymbols:pPe}=Object,{hasOwnProperty:mPe}=Object.prototype;function Hw(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Vm(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);const l=t(n,r,i);return o.delete(n),o.delete(r),l}}function gPe(t){return t!=null?t[Symbol.toStringTag]:void 0}function $D(t){return hPe(t).concat(pPe(t))}const yPe=Object.hasOwn||((t,e)=>mPe.call(t,e));function Al(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const vPe="__v",_Pe="__o",wPe="_owner",{getOwnPropertyDescriptor:VD,keys:FD}=Object;function bPe(t,e){return t.byteLength===e.byteLength&&Jy(new Uint8Array(t),new Uint8Array(e))}function TPe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function EPe(t,e){return t.byteLength===e.byteLength&&Jy(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function xPe(t,e){return Al(t.getTime(),e.getTime())}function SPe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function IPe(t,e){return t===e}function UD(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let s,a,l=0;for(;(s=o.next())&&!s.done;){const u=e.entries();let c=!1,d=0;for(;(a=u.next())&&!a.done;){if(i[d]){d++;continue}const f=s.value,g=a.value;if(n.equals(f[0],g[0],l,d,t,e,n)&&n.equals(f[1],g[1],f[0],g[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const APe=Al;function PPe(t,e,n){const r=FD(t);let i=r.length;if(FD(e).length!==i)return!1;for(;i-- >0;)if(!Gq(t,e,n,r[i]))return!1;return!0}function Wd(t,e,n){const r=$D(t);let i=r.length;if($D(e).length!==i)return!1;let o,s,a;for(;i-- >0;)if(o=r[i],!Gq(t,e,n,o)||(s=VD(t,o),a=VD(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function CPe(t,e){return Al(t.valueOf(),e.valueOf())}function RPe(t,e){return t.source===e.source&&t.flags===e.flags}function BD(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let s,a;for(;(s=o.next())&&!s.done;){const l=e.values();let u=!1,c=0;for(;(a=l.next())&&!a.done;){if(!i[c]&&n.equals(s.value,a.value,s.value,a.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function Jy(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function NPe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Gq(t,e,n,r){return(r===wPe||r===_Pe||r===vPe)&&(t.$$typeof||e.$$typeof)?!0:yPe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const kPe="[object ArrayBuffer]",OPe="[object Arguments]",MPe="[object Boolean]",DPe="[object DataView]",LPe="[object Date]",$Pe="[object Error]",VPe="[object Map]",FPe="[object Number]",UPe="[object Object]",BPe="[object RegExp]",jPe="[object Set]",zPe="[object String]",qPe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},GPe="[object URL]",HPe=Object.prototype.toString;function WPe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:s,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:g,unknownTagComparators:y}){return function(v,b,T){if(v===b)return!0;if(v==null||b==null)return!1;const x=typeof v;if(x!==typeof b)return!1;if(x!=="object")return x==="number"?a(v,b,T):x==="function"?o(v,b,T):!1;const C=v.constructor;if(C!==b.constructor)return!1;if(C===Object)return l(v,b,T);if(Array.isArray(v))return e(v,b,T);if(C===Date)return r(v,b,T);if(C===RegExp)return c(v,b,T);if(C===Map)return s(v,b,T);if(C===Set)return d(v,b,T);const E=HPe.call(v);if(E===LPe)return r(v,b,T);if(E===BPe)return c(v,b,T);if(E===VPe)return s(v,b,T);if(E===jPe)return d(v,b,T);if(E===UPe)return typeof v.then!="function"&&typeof b.then!="function"&&l(v,b,T);if(E===GPe)return g(v,b,T);if(E===$Pe)return i(v,b,T);if(E===OPe)return l(v,b,T);if(qPe[E])return f(v,b,T);if(E===kPe)return t(v,b,T);if(E===DPe)return n(v,b,T);if(E===MPe||E===FPe||E===zPe)return u(v,b,T);if(y){let A=y[E];if(!A){const S=gPe(v);S&&(A=y[S])}if(A)return A(v,b,T)}return!1}}function KPe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:bPe,areArraysEqual:n?Wd:TPe,areDataViewsEqual:EPe,areDatesEqual:xPe,areErrorsEqual:SPe,areFunctionsEqual:IPe,areMapsEqual:n?Hw(UD,Wd):UD,areNumbersEqual:APe,areObjectsEqual:n?Wd:PPe,arePrimitiveWrappersEqual:CPe,areRegExpsEqual:RPe,areSetsEqual:n?Hw(BD,Wd):BD,areTypedArraysEqual:n?Hw(Jy,Wd):Jy,areUrlsEqual:NPe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Vm(r.areArraysEqual),o=Vm(r.areMapsEqual),s=Vm(r.areObjectsEqual),a=Vm(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:a})}return r}function JPe(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function YPe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:c}=n();return e(a,l,{cache:u,equals:r,meta:c,strict:i})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(a,l){return e(a,l,o)}}const QPe=Js();Js({strict:!0});Js({circular:!0});Js({circular:!0,strict:!0});Js({createInternalComparator:()=>Al});Js({strict:!0,createInternalComparator:()=>Al});Js({circular:!0,createInternalComparator:()=>Al});Js({circular:!0,createInternalComparator:()=>Al,strict:!0});function Js(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=KPe(t),s=WPe(o),a=n?n(s):JPe(s);return YPe({circular:e,comparator:s,createState:r,equals:a,strict:i})}function XPe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function jD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):XPe(i)};requestAnimationFrame(r)}function zE(t){"@babel/helpers - typeof";return zE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zE(t)}function ZPe(t){return rCe(t)||nCe(t)||tCe(t)||eCe()}function eCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tCe(t,e){if(t){if(typeof t=="string")return zD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zD(t,e)}}function zD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rCe(t){if(Array.isArray(t))return t}function iCe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,a=ZPe(s),l=a[0],u=a.slice(1);if(typeof l=="number"){jD(i.bind(null,u),l);return}i(l),jD(i.bind(null,u));return}zE(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function qD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qD(Object(n),!0).forEach(function(r){Hq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hq(t,e,n){return e=oCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oCe(t){var e=sCe(t,"string");return zh(e)==="symbol"?e:String(e)}function sCe(t,e){if(zh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aCe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},lCe=function(e){return e},uCe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Nf=function(e,n){return Object.keys(n).reduce(function(r,i){return GD(GD({},r),{},Hq({},i,e(i,n[i])))},{})},HD=function(e,n,r){return e.map(function(i){return"".concat(uCe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function cCe(t,e){return hCe(t)||fCe(t,e)||Wq(t,e)||dCe()}function dCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function hCe(t){if(Array.isArray(t))return t}function pCe(t){return yCe(t)||gCe(t)||Wq(t)||mCe()}function mCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wq(t,e){if(t){if(typeof t=="string")return qE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qE(t,e)}}function gCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yCe(t){if(Array.isArray(t))return qE(t)}function qE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yy=1e-4,Kq=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Jq=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},WD=function(e,n){return function(r){var i=Kq(e,n);return Jq(i,r)}},vCe=function(e,n){return function(r){var i=Kq(e,n),o=[].concat(pCe(i.map(function(s,a){return s*a}).slice(1)),[0]);return Jq(o,r)}},KD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=cCe(u,4);i=c[0],o=c[1],s=c[2],a=c[3]}}}var d=WD(i,s),f=WD(o,a),g=vCe(i,s),y=function(b){return b>1?1:b<0?0:b},_=function(b){for(var T=b>1?1:b,x=T,C=0;C<8;++C){var E=d(x)-T,A=g(x);if(Math.abs(E-T)<Yy||A<Yy)return f(x);x=y(x-E/A)}return f(x)};return _.isStepper=!1,_},_Ce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(c,d,f){var g=-(c-d)*r,y=f*o,_=f+(g-y)*a/1e3,v=f*a/1e3+c;return Math.abs(v-d)<Yy&&Math.abs(_)<Yy?[d,0]:[v,_]};return l.isStepper=!0,l.dt=a,l},wCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return KD(i);case"spring":return _Ce();default:if(i.split("(")[0]==="cubic-bezier")return KD(i)}return typeof i=="function"?i:null};function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function JD(t){return ECe(t)||TCe(t)||Yq(t)||bCe()}function bCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ECe(t){if(Array.isArray(t))return HE(t)}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){GE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GE(t,e,n){return e=xCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xCe(t){var e=SCe(t,"string");return qh(e)==="symbol"?e:String(e)}function SCe(t,e){if(qh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ICe(t,e){return CCe(t)||PCe(t,e)||Yq(t,e)||ACe()}function ACe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yq(t,e){if(t){if(typeof t=="string")return HE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HE(t,e)}}function HE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function CCe(t){if(Array.isArray(t))return t}var Qy=function(e,n,r){return e+(n-e)*r},WE=function(e){var n=e.from,r=e.to;return n!==r},RCe=function t(e,n,r){var i=Nf(function(o,s){if(WE(s)){var a=e(s.from,s.to,s.velocity),l=ICe(a,2),u=l[0],c=l[1];return mn(mn({},s),{},{from:u,velocity:c})}return s},n);return r<1?Nf(function(o,s){return WE(s)?mn(mn({},s),{},{velocity:Qy(s.velocity,i[o].velocity,r),from:Qy(s.from,i[o].from,r)}):s},n):t(e,i,r-1)};const NCe=function(t,e,n,r,i){var o=aCe(t,e),s=o.reduce(function(v,b){return mn(mn({},v),{},GE({},b,[t[b],e[b]]))},{}),a=o.reduce(function(v,b){return mn(mn({},v),{},GE({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,u,c,d=function(){return null},f=function(){return Nf(function(b,T){return T.from},a)},g=function(){return!Object.values(a).filter(WE).length},y=function(b){u||(u=b);var T=b-u,x=T/n.dt;a=RCe(n,a,x),i(mn(mn(mn({},t),e),f())),u=b,g()||(l=requestAnimationFrame(d))},_=function(b){c||(c=b);var T=(b-c)/r,x=Nf(function(E,A){return Qy.apply(void 0,JD(A).concat([n(T)]))},s);if(i(mn(mn(mn({},t),e),x)),T<1)l=requestAnimationFrame(d);else{var C=Nf(function(E,A){return Qy.apply(void 0,JD(A).concat([n(1)]))},s);i(mn(mn(mn({},t),e),C))}};return d=n.isStepper?y:_,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}var kCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function OCe(t,e){if(t==null)return{};var n=MCe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MCe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ww(t){return VCe(t)||$Ce(t)||LCe(t)||DCe()}function DCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(t,e){if(t){if(typeof t=="string")return KE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(t,e)}}function $Ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VCe(t){if(Array.isArray(t))return KE(t)}function KE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){lf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lf(t,e,n){return e=Qq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qq(r.key),r)}}function BCe(t,e,n){return e&&UCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qq(t){var e=jCe(t,"string");return gc(e)==="symbol"?e:String(e)}function jCe(t,e){if(gc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JE(t,e)}function JE(t,e){return JE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JE(t,e)}function qCe(t){var e=GCe();return function(){var r=Xy(t),i;if(e){var o=Xy(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return YE(this,i)}}function YE(t,e){if(e&&(gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QE(t)}function QE(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xy(t){return Xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xy(t)}var Co=function(t){zCe(n,t);var e=qCe(n);function n(r,i){var o;FCe(this,n),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,u=s.from,c=s.to,d=s.steps,f=s.children,g=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(QE(o)),o.changeStyle=o.changeStyle.bind(QE(o)),!a||g<=0)return o.state={style:{}},typeof f=="function"&&(o.state={style:c}),YE(o);if(d&&d.length)o.state={style:d[0].style};else if(u){if(typeof f=="function")return o.state={style:u},YE(o);o.state={style:l?lf({},l,u):u}}else o.state={style:{}};return o}return BCe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,c=o.to,d=o.from,f=this.state.style;if(a){if(!s){var g={style:l?lf({},l,c):c};this.state&&f&&(l&&f[l]!==c||!l&&f!==c)&&this.setState(g);return}if(!(QPe(i.to,c)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var _=y||u?d:i.to;if(this.state&&f){var v={style:l?lf({},l,_):_};(l&&f[l]!==_||!l&&f!==_)&&this.setState(v)}this.runAnimation(ni(ni({},this.props),{},{from:_,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,g=NCe(s,a,wCe(u),l,this.changeStyle),y=function(){o.stopJSAnimation=g()};this.manager.start([f,c,y,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,u=s[0],c=u.style,d=u.duration,f=d===void 0?0:d,g=function(_,v,b){if(b===0)return _;var T=v.duration,x=v.easing,C=x===void 0?"ease":x,E=v.style,A=v.properties,S=v.onAnimationEnd,P=b>0?s[b-1]:v,R=A||Object.keys(E);if(typeof C=="function"||C==="spring")return[].concat(Ww(_),[o.runJSAnimation.bind(o,{from:P.style,to:E,duration:T,easing:C}),T]);var k=HD(R,T,C),O=ni(ni(ni({},P.style),E),{},{transition:k});return[].concat(Ww(_),[O,T,S]).filter(lCe)};return this.manager.start([l].concat(Ww(s.reduce(g,[c,Math.max(f,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=iCe());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var _=a?lf({},a,l):l,v=HD(Object.keys(_),s,u);y.start([c,o,ni(ni({},_),{},{transition:v}),s,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=OCe(i,kCe),u=$.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!a||u===0||s<=0)return o;var d=function(g){var y=g.props,_=y.style,v=_===void 0?{}:_,b=y.className,T=$.cloneElement(g,ni(ni({},l),{},{style:ni(ni({},v),c),className:b}));return T};return u===1?d($.Children.only(o)):V.createElement("div",null,$.Children.map(o,function(f){return d(f)}))}}]),n}($.PureComponent);Co.displayName="Animate";Co.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Co.propTypes={from:Ge.oneOfType([Ge.object,Ge.string]),to:Ge.oneOfType([Ge.object,Ge.string]),attributeName:Ge.string,duration:Ge.number,begin:Ge.number,easing:Ge.oneOfType([Ge.string,Ge.func]),steps:Ge.arrayOf(Ge.shape({duration:Ge.number.isRequired,style:Ge.object.isRequired,easing:Ge.oneOfType([Ge.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ge.func]),properties:Ge.arrayOf("string"),onAnimationEnd:Ge.func})),children:Ge.oneOfType([Ge.node,Ge.func]),isActive:Ge.bool,canBegin:Ge.bool,onAnimationEnd:Ge.func,shouldReAnimate:Ge.bool,onAnimationStart:Ge.func,onAnimationReStart:Ge.func};function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function Zy(){return Zy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy.apply(this,arguments)}function HCe(t,e){return YCe(t)||JCe(t,e)||KCe(t,e)||WCe()}function WCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KCe(t,e){if(t){if(typeof t=="string")return XD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XD(t,e)}}function XD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function YCe(t){if(Array.isArray(t))return t}function ZD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(n),!0).forEach(function(r){QCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QCe(t,e,n){return e=XCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XCe(t){var e=ZCe(t,"string");return Gh(e)=="symbol"?e:e+""}function ZCe(t,e){if(Gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tL=function(e,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(s>0&&o instanceof Array){for(var d=[0,0,0,0],f=0,g=4;f<g;f++)d[f]=o[f]>s?s:o[f];c="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+a*d[1])),c+="L ".concat(e+r,",").concat(n+i-a*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),c+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-a*d[3])),c+="Z"}else if(s>0&&o===+o&&o>0){var y=Math.min(s,o);c="M ".concat(e,",").concat(n+a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+a*y,`
            L `).concat(e+r,",").concat(n+i-a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-a*y," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},eRe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var u=Math.min(o,o+a),c=Math.max(o,o+a),d=Math.min(s,s+l),f=Math.max(s,s+l);return r>=u&&r<=c&&i>=d&&i<=f}return!1},tRe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hP=function(e){var n=eL(eL({},tRe),e),r=$.useRef(),i=$.useState(-1),o=HCe(i,2),s=o[0],a=o[1];$.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&a(C)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,f=n.radius,g=n.className,y=n.animationEasing,_=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,T=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var x=Fe("recharts-rectangle",g);return T?V.createElement(Co,{canBegin:s>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:_,animationEasing:y,isActive:T},function(C){var E=C.width,A=C.height,S=C.x,P=C.y;return V.createElement(Co,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:_,isActive:b,easing:y},V.createElement("path",Zy({},Ne(n,!0),{className:x,d:tL(S,P,E,A,f),ref:r})))}):V.createElement("path",Zy({},Ne(n,!0),{className:x,d:tL(l,u,c,d,f)}))};function XE(){return XE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XE.apply(this,arguments)}var pP=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,s=Fe("recharts-dot",o);return n===+n&&r===+r&&i===+i?$.createElement("circle",XE({},Ne(e,!1),gy(e),{className:s,cx:n,cy:r,r:i})):null};function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}var nRe=["x","y","top","left","width","height","className"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZE.apply(this,arguments)}function nL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rRe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(n),!0).forEach(function(r){iRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iRe(t,e,n){return e=oRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oRe(t){var e=sRe(t,"string");return Hh(e)=="symbol"?e:e+""}function sRe(t,e){if(Hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aRe(t,e){if(t==null)return{};var n=lRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var uRe=function(e,n,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},cRe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,f=e.height,g=f===void 0?0:f,y=e.className,_=aRe(e,nRe),v=rRe({x:r,y:o,top:a,left:u,width:d,height:g},_);return!oe(r)||!oe(o)||!oe(d)||!oe(g)||!oe(a)||!oe(u)?null:V.createElement("path",ZE({},Ne(v,!0),{className:Fe("recharts-cross",y),d:uRe(r,o,d,g,a,u)}))},dRe=f4,fRe=dRe(Object.getPrototypeOf,Object),hRe=fRe,pRe=Vo,mRe=hRe,gRe=Fo,yRe="[object Object]",vRe=Function.prototype,_Re=Object.prototype,Xq=vRe.toString,wRe=_Re.hasOwnProperty,bRe=Xq.call(Object);function TRe(t){if(!gRe(t)||pRe(t)!=yRe)return!1;var e=mRe(t);if(e===null)return!0;var n=wRe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Xq.call(n)==bRe}var ERe=TRe;const xRe=tt(ERe);var SRe=Vo,IRe=Fo,ARe="[object Boolean]";function PRe(t){return t===!0||t===!1||IRe(t)&&SRe(t)==ARe}var CRe=PRe;const RRe=tt(CRe);function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function ev(){return ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ev.apply(this,arguments)}function NRe(t,e){return DRe(t)||MRe(t,e)||ORe(t,e)||kRe()}function kRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ORe(t,e){if(t){if(typeof t=="string")return rL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rL(t,e)}}function rL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function DRe(t){if(Array.isArray(t))return t}function iL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(n),!0).forEach(function(r){LRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LRe(t,e,n){return e=$Re(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Re(t){var e=VRe(t,"string");return Wh(e)=="symbol"?e:e+""}function VRe(t,e){if(Wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sL=function(e,n,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+o),a+="L ".concat(e+r-s/2-i,",").concat(n+o),a+="L ".concat(e,",").concat(n," Z"),a},FRe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},URe=function(e){var n=oL(oL({},FRe),e),r=$.useRef(),i=$.useState(-1),o=NRe(i,2),s=o[0],a=o[1];$.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,f=n.height,g=n.className,y=n.animationEasing,_=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||f!==+f||c===0&&d===0||f===0)return null;var T=Fe("recharts-trapezoid",g);return b?V.createElement(Co,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:f,x:l,y:u},duration:_,animationEasing:y,isActive:b},function(x){var C=x.upperWidth,E=x.lowerWidth,A=x.height,S=x.x,P=x.y;return V.createElement(Co,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:_,easing:y},V.createElement("path",ev({},Ne(n,!0),{className:T,d:sL(S,P,C,E,A),ref:r})))}):V.createElement("g",null,V.createElement("path",ev({},Ne(n,!0),{className:T,d:sL(l,u,c,d,f)})))},BRe=["option","shapeType","propTransformer","activeClassName","isActive"];function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function jRe(t,e){if(t==null)return{};var n=zRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){qRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qRe(t,e,n){return e=GRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GRe(t){var e=HRe(t,"string");return Kh(e)=="symbol"?e:e+""}function HRe(t,e){if(Kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WRe(t,e){return tv(tv({},e),t)}function KRe(t,e){return t==="symbols"}function lL(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return V.createElement(hP,n);case"trapezoid":return V.createElement(URe,n);case"sector":return V.createElement(Bq,n);case"symbols":if(KRe(e))return V.createElement(kA,n);break;default:return null}}function JRe(t){return $.isValidElement(t)?t.props:t}function YRe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?WRe:r,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=jRe(t,BRe),u;if($.isValidElement(e))u=$.cloneElement(e,tv(tv({},l),JRe(e)));else if(Pe(e))u=e(l);else if(xRe(e)&&!RRe(e)){var c=i(e,l);u=V.createElement(lL,{shapeType:n,elementProps:c})}else{var d=l;u=V.createElement(lL,{shapeType:n,elementProps:d})}return a?V.createElement(Tt,{className:s},u):u}function e0(t,e){return e!=null&&"trapezoids"in t.props}function t0(t,e){return e!=null&&"sectors"in t.props}function Jh(t,e){return e!=null&&"points"in t.props}function QRe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function XRe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ZRe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function e1e(t,e){var n;return e0(t,e)?n=QRe:t0(t,e)?n=XRe:Jh(t,e)&&(n=ZRe),n}function t1e(t,e){var n;return e0(t,e)?n="trapezoids":t0(t,e)?n="sectors":Jh(t,e)&&(n="points"),n}function n1e(t,e){if(e0(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(t0(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Jh(t,e)?e.payload:{}}function r1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=t1e(n,e),o=n1e(n,e),s=r.filter(function(l,u){var c=kh(o,l),d=n.props[i].filter(function(y){var _=e1e(n,e);return _(y,e)}),f=n.props[i].indexOf(d[d.length-1]),g=u===f;return c&&g}),a=r.indexOf(s[s.length-1]);return a}var i1e=Math.ceil,o1e=Math.max;function s1e(t,e,n,r){for(var i=-1,o=o1e(i1e((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}var a1e=s1e,l1e=N4,uL=1/0,u1e=17976931348623157e292;function c1e(t){if(!t)return t===0?t:0;if(t=l1e(t),t===uL||t===-uL){var e=t<0?-1:1;return e*u1e}return t===t?t:0}var Zq=c1e,d1e=a1e,f1e=z_,Kw=Zq;function h1e(t){return function(e,n,r){return r&&typeof r!="number"&&f1e(e,n,r)&&(n=r=void 0),e=Kw(e),n===void 0?(n=e,e=0):n=Kw(n),r=r===void 0?e<n?1:-1:Kw(r),d1e(e,n,r,t)}}var p1e=h1e,m1e=p1e,g1e=m1e(),y1e=g1e;const nv=tt(y1e);function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function cL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cL(Object(n),!0).forEach(function(r){eG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eG(t,e,n){return e=v1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=_1e(t,"string");return Yh(e)=="symbol"?e:e+""}function _1e(t,e){if(Yh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w1e=["Webkit","Moz","O","ms"],b1e=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=w1e.reduce(function(o,s){return dL(dL({},o),{},eG({},s+r,n))},{});return i[e]=n,i};function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(t)}function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rv.apply(this,arguments)}function fL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fL(Object(n),!0).forEach(function(r){yr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nG(r.key),r)}}function E1e(t,e,n){return e&&hL(t.prototype,e),n&&hL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x1e(t,e,n){return e=iv(e),S1e(t,tG()?Reflect.construct(e,n||[],iv(t).constructor):e.apply(t,n))}function S1e(t,e){if(e&&(yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I1e(t)}function I1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tG=function(){return!!t})()}function iv(t){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iv(t)}function A1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ex(t,e)}function ex(t,e){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ex(t,e)}function yr(t,e,n){return e=nG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nG(t){var e=P1e(t,"string");return yc(e)=="symbol"?e:e+""}function P1e(t,e){if(yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C1e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Pf().domain(nv(0,l)).range([o,o+s-a]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},pL=function(e){return e.changedTouches&&!!e.changedTouches.length},vc=function(t){function e(n){var r;return T1e(this,e),r=x1e(this,e,[n]),yr(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),yr(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),yr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),yr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),yr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),yr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),yr(r,"handleSlideDragStart",function(i){var o=pL(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return A1e(e,t),E1e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,u=a.data,c=u.length-1,d=Math.min(i,o),f=Math.max(i,o),g=e.getIndexInRange(s,d),y=e.getIndexInRange(s,f);return{startIndex:g-g%l,endIndex:y===c?c:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=Pr(o[r],a,r);return Pe(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,f=l.startIndex,g=l.endIndex,y=l.onChange,_=r.pageX-o;_>0?_=Math.min(_,u+c-d-a,u+c-d-s):_<0&&(_=Math.max(_,u-s,u-a));var v=this.getIndex({startX:s+_,endX:a+_});(v.startIndex!==f||v.endIndex!==g)&&y&&y(v),this.setState({startX:s+_,endX:a+_,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=pL(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,u=this.state[s],c=this.props,d=c.x,f=c.width,g=c.travellerWidth,y=c.onChange,_=c.gap,v=c.data,b={startX:this.state.startX,endX:this.state.endX},T=r.pageX-o;T>0?T=Math.min(T,d+f-g-u):T<0&&(T=Math.max(T,d-u)),b[s]=u+T;var x=this.getIndex(b),C=x.startIndex,E=x.endIndex,A=function(){var P=v.length-1;return s==="startX"&&(a>l?C%_===0:E%_===0)||a<l&&E===P||s==="endX"&&(a>l?E%_===0:C%_===0)||a>l&&E===P};this.setState(yr(yr({},s,u+T),"brushMoveStartX",r.pageX),function(){y&&A()&&y(x)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,u=s.endX,c=this.state[i],d=a.indexOf(c);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var g=a[f];i==="startX"&&g>=u||i==="endX"&&g<=l||this.setState(yr({},i,g),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,u=r.stroke;return V.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,u=r.children,c=r.padding,d=$.Children.only(u);return d?V.cloneElement(d,{x:i,y:o,width:s,height:a,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,a=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,f=l.traveller,g=l.ariaLabel,y=l.data,_=l.startIndex,v=l.endIndex,b=Math.max(r,this.props.x),T=Jw(Jw({},Ne(this.props,!1)),{},{x:b,y:u,width:c,height:d}),x=g||"Min value: ".concat((o=y[_])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=y[v])===null||s===void 0?void 0:s.name);return V.createElement(Tt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),a.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,T))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,u=o.travellerWidth,c=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:s,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,f=c.endX,g=5,y={pointerEvents:"none",fill:u};return V.createElement(Tt,{className:"recharts-brush-texts"},V.createElement(Ny,rv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-g,y:s+a/2},y),this.getTextOfTick(i)),V.createElement(Ny,rv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+g,y:s+a/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,f=this.state,g=f.startX,y=f.endX,_=f.isTextActive,v=f.isSlideMoving,b=f.isTravellerMoving,T=f.isTravellerFocused;if(!i||!i.length||!oe(a)||!oe(l)||!oe(u)||!oe(c)||u<=0||c<=0)return null;var x=Fe("recharts-brush",o),C=V.Children.count(s)===1,E=b1e("userSelect","none");return V.createElement(Tt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(_||v||b||T||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,u=Math.floor(o+a/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),V.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return V.isValidElement(r)?o=V.cloneElement(r,i):Pe(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return Jw({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s},o&&o.length?C1e({data:o,width:s,x:a,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var f=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}])}($.PureComponent);yr(vc,"displayName","Brush");yr(vc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var R1e=FA;function N1e(t,e){var n;return R1e(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var k1e=N1e,O1e=i4,M1e=Hs,D1e=k1e,L1e=mr,$1e=z_;function V1e(t,e,n){var r=L1e(t)?O1e:D1e;return n&&$1e(t,e,n)&&(e=void 0),r(t,M1e(e))}var F1e=V1e;const U1e=tt(F1e);var Fi=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},mL=I4;function B1e(t,e,n){e=="__proto__"&&mL?mL(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var j1e=B1e,z1e=j1e,q1e=x4,G1e=Hs;function H1e(t,e){var n={};return e=G1e(e),q1e(t,function(r,i,o){z1e(n,i,e(r,i,o))}),n}var W1e=H1e;const K1e=tt(W1e);function J1e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Y1e=J1e,Q1e=FA;function X1e(t,e){var n=!0;return Q1e(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var Z1e=X1e,eNe=Y1e,tNe=Z1e,nNe=Hs,rNe=mr,iNe=z_;function oNe(t,e,n){var r=rNe(t)?eNe:tNe;return n&&iNe(t,e,n)&&(e=void 0),r(t,nNe(e))}var sNe=oNe;const rG=tt(sNe);var aNe=["x","y"];function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function tx(){return tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tx.apply(this,arguments)}function gL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(n),!0).forEach(function(r){lNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lNe(t,e,n){return e=uNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uNe(t){var e=cNe(t,"string");return Qh(e)=="symbol"?e:e+""}function cNe(t,e){if(Qh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dNe(t,e){if(t==null)return{};var n=fNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hNe(t,e){var n=t.x,r=t.y,i=dNe(t,aNe),o="".concat(n),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),u="".concat(e.height||i.height),c=parseInt(u,10),d="".concat(e.width||i.width),f=parseInt(d,10);return Kd(Kd(Kd(Kd(Kd({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:c,width:f,name:e.name,radius:e.radius})}function yL(t){return V.createElement(YRe,tx({shapeType:"rectangle",propTransformer:hNe,activeClassName:"recharts-active-bar"},t))}var pNe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=oe(r)||Ife(r);return o?e(r,i):(o||hl(),n)}},mNe=["value","background"],iG;function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function gNe(t,e){if(t==null)return{};var n=yNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}function vL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(n),!0).forEach(function(r){ds(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sG(r.key),r)}}function _Ne(t,e,n){return e&&_L(t.prototype,e),n&&_L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wNe(t,e,n){return e=sv(e),bNe(t,oG()?Reflect.construct(e,n||[],sv(t).constructor):e.apply(t,n))}function bNe(t,e){if(e&&(_c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TNe(t)}function TNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oG=function(){return!!t})()}function sv(t){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sv(t)}function ENe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nx(t,e)}function nx(t,e){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nx(t,e)}function ds(t,e,n){return e=sG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sG(t){var e=xNe(t,"string");return _c(e)=="symbol"?e:e+""}function xNe(t,e){if(_c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mp=function(t){function e(){var n;vNe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=wNe(this,e,[].concat(i)),ds(n,"state",{isAnimationFinished:!1}),ds(n,"id",Pp("recharts-bar-")),ds(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),ds(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return ENe(e,t),_Ne(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,u=o.activeBar,c=Ne(this.props,!1);return r&&r.map(function(d,f){var g=f===l,y=g?u:s,_=zt(zt(zt({},c),d),{},{isActive:g,option:y,index:f,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return V.createElement(Tt,ov({className:"recharts-bar-rectangle"},yy(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),V.createElement(yL,_))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,d=i.animationId,f=this.state.prevData;return V.createElement(Co,{begin:l,duration:u,isActive:a,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,_=o.map(function(v,b){var T=f&&f[b];if(T){var x=Fr(T.x,v.x),C=Fr(T.y,v.y),E=Fr(T.width,v.width),A=Fr(T.height,v.height);return zt(zt({},v),{},{x:x(y),y:C(y),width:E(y),height:A(y)})}if(s==="horizontal"){var S=Fr(0,v.height),P=S(y);return zt(zt({},v),{},{y:v.y+v.height-P,height:P})}var R=Fr(0,v.width),k=R(y);return zt(zt({},v),{},{width:k})});return V.createElement(Tt,null,r.renderRectanglesStatically(_))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!kh(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=Ne(this.props.background,!1);return o.map(function(u,c){u.value;var d=u.background,f=gNe(u,mNe);if(!d)return null;var g=zt(zt(zt(zt(zt({},f),{},{fill:"#eee"},d),l),yy(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:c,className:"recharts-bar-background-rectangle"});return V.createElement(yL,ov({key:"background-bar-".concat(c),option:r.props.background,isActive:c===a},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,u=o.layout,c=o.children,d=hi(c,Z_);if(!d)return null;var f=u==="vertical"?s[0].height/2:s[0].width/2,g=function(v,b){var T=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:T,errorVal:Pr(v,b)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return V.createElement(Tt,y,d.map(function(_){return V.cloneElement(_,{key:"error-bar-".concat(i,"-").concat(_.props.dataKey),data:s,xAxis:a,yAxis:l,layout:u,offset:f,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,f=r.height,g=r.isAnimationActive,y=r.background,_=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=Fe("recharts-bar",s),T=a&&a.allowDataOverflow,x=l&&l.allowDataOverflow,C=T||x,E=De(_)?this.id:_;return V.createElement(Tt,{className:b},T||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(E)},V.createElement("rect",{x:T?u:u-d/2,y:x?c:c-f/2,width:T?d:d*2,height:x?f:f*2}))):null,V.createElement(Tt,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(E,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,E),(!g||v)&&Ts.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}($.PureComponent);iG=Mp;ds(Mp,"displayName","Bar");ds(Mp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rd.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ds(Mp,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,f=t.offset,g=YIe(r,n);if(!g)return null;var y=e.layout,_=n.type.defaultProps,v=_!==void 0?zt(zt({},_),n.props):n.props,b=v.dataKey,T=v.children,x=v.minPointSize,C=y==="horizontal"?s:o,E=u?C.scale.domain():null,A=iAe({numericAxis:C}),S=hi(T,O4),P=d.map(function(R,k){var O,M,D,j,q,Y;u?O=QIe(u[c+k],E):(O=Pr(R,b),Array.isArray(O)||(O=[A,O]));var X=pNe(x,iG.defaultProps.minPointSize)(O[1],k);if(y==="horizontal"){var U,J=[s.scale(O[0]),s.scale(O[1])],Q=J[0],le=J[1];M=bD({axis:o,ticks:a,bandSize:i,offset:g.offset,entry:R,index:k}),D=(U=le??Q)!==null&&U!==void 0?U:void 0,j=g.size;var ne=Q-le;if(q=Number.isNaN(ne)?0:ne,Y={x:M,y:s.y,width:j,height:s.height},Math.abs(X)>0&&Math.abs(q)<Math.abs(X)){var fe=li(q||X)*(Math.abs(X)-Math.abs(q));D-=fe,q+=fe}}else{var Ce=[o.scale(O[0]),o.scale(O[1])],Ue=Ce[0],st=Ce[1];if(M=Ue,D=bD({axis:s,ticks:l,bandSize:i,offset:g.offset,entry:R,index:k}),j=st-Ue,q=g.size,Y={x:o.x,y:D,width:o.width,height:q},Math.abs(X)>0&&Math.abs(j)<Math.abs(X)){var Ut=li(j||X)*(Math.abs(X)-Math.abs(j));j+=Ut}}return zt(zt(zt({},R),{},{x:M,y:D,width:j,height:q,value:u?O:O[1],payload:R,background:Y},S&&S[k]&&S[k].props),{},{tooltipPayload:[Vq(n,R)],tooltipPosition:{x:M+j/2,y:D+q/2}})});return zt({data:P,layout:y},f)});function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}function SNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aG(r.key),r)}}function INe(t,e,n){return e&&wL(t.prototype,e),n&&wL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(n),!0).forEach(function(r){n0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n0(t,e,n){return e=aG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aG(t){var e=ANe(t,"string");return Xh(e)=="symbol"?e:e+""}function ANe(t,e){if(Xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PNe=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!_r(u,Mp);return c.reduce(function(g,y){var _=n[y],v=_.orientation,b=_.domain,T=_.padding,x=T===void 0?{}:T,C=_.mirror,E=_.reversed,A="".concat(v).concat(C?"Mirror":""),S,P,R,k,O;if(_.type==="number"&&(_.padding==="gap"||_.padding==="no-gap")){var M=b[1]-b[0],D=1/0,j=_.categoricalDomain.sort(Cfe);if(j.forEach(function(Ce,Ue){Ue>0&&(D=Math.min((Ce||0)-(j[Ue-1]||0),D))}),Number.isFinite(D)){var q=D/M,Y=_.layout==="vertical"?r.height:r.width;if(_.padding==="gap"&&(S=q*Y/2),_.padding==="no-gap"){var X=dl(e.barCategoryGap,q*Y),U=q*Y/2;S=U-X-(U-X)/Y*X}}}i==="xAxis"?P=[r.left+(x.left||0)+(S||0),r.left+r.width-(x.right||0)-(S||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+(S||0),r.top+r.height-(x.bottom||0)-(S||0)]:P=_.range,E&&(P=[P[1],P[0]]);var J=KIe(_,o,f),Q=J.scale,le=J.realScaleType;Q.domain(b).range(P),JIe(Q);var ne=rAe(Q,oi(oi({},_),{},{realScaleType:le}));i==="xAxis"?(O=v==="top"&&!C||v==="bottom"&&C,R=r.left,k=d[A]-O*_.height):i==="yAxis"&&(O=v==="left"&&!C||v==="right"&&C,R=d[A]-O*_.width,k=r.top);var fe=oi(oi(oi({},_),ne),{},{realScaleType:le,x:R,y:k,scale:Q,width:i==="xAxis"?r.width:_.width,height:i==="yAxis"?r.height:_.height});return fe.bandSize=Hy(fe,ne),!_.hide&&i==="xAxis"?d[A]+=(O?-1:1)*fe.height:_.hide||(d[A]+=(O?-1:1)*fe.width),oi(oi({},g),{},n0({},y,fe))},{})},lG=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},CNe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return lG({x:n,y:r},{x:i,y:o})},uG=function(){function t(e){SNe(this,t),this.scale=e}return INe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();n0(uG,"EPS",1e-4);var mP=function(e){var n=Object.keys(e).reduce(function(r,i){return oi(oi({},r),{},n0({},i,uG.create(e[i])))},{});return oi(oi({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return K1e(i,function(l,u){return n[u].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return rG(i,function(o,s){return n[s].isInRange(o)})}})};function RNe(t){return(t%180+180)%180}var NNe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=RNe(i),s=o*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},kNe=Hs,ONe=Cp,MNe=B_;function DNe(t){return function(e,n,r){var i=Object(e);if(!ONe(e)){var o=kNe(n);e=MNe(e),n=function(a){return o(i[a],a,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var LNe=DNe,$Ne=Zq;function VNe(t){var e=$Ne(t),n=e%1;return e===e?n?e-n:e:0}var FNe=VNe,UNe=v4,BNe=Hs,jNe=FNe,zNe=Math.max;function qNe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:jNe(n);return i<0&&(i=zNe(r+i,0)),UNe(t,BNe(e),i)}var GNe=qNe,HNe=LNe,WNe=GNe,KNe=HNe(WNe),JNe=KNe;const YNe=tt(JNe);var QNe=kde(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),gP=$.createContext(void 0),yP=$.createContext(void 0),cG=$.createContext(void 0),dG=$.createContext({}),fG=$.createContext(void 0),hG=$.createContext(0),pG=$.createContext(0),TL=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=e.clipPathId,a=e.children,l=e.width,u=e.height,c=QNe(o);return V.createElement(gP.Provider,{value:r},V.createElement(yP.Provider,{value:i},V.createElement(dG.Provider,{value:o},V.createElement(cG.Provider,{value:c},V.createElement(fG.Provider,{value:s},V.createElement(hG.Provider,{value:u},V.createElement(pG.Provider,{value:l},a)))))))},XNe=function(){return $.useContext(fG)},mG=function(e){var n=$.useContext(gP);n==null&&hl();var r=n[e];return r==null&&hl(),r},ZNe=function(){var e=$.useContext(gP);return os(e)},eke=function(){var e=$.useContext(yP),n=YNe(e,function(r){return rG(r.domain,Number.isFinite)});return n||os(e)},gG=function(e){var n=$.useContext(yP);n==null&&hl();var r=n[e];return r==null&&hl(),r},tke=function(){var e=$.useContext(cG);return e},nke=function(){return $.useContext(dG)},vP=function(){return $.useContext(pG)},_P=function(){return $.useContext(hG)};function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function rke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ike(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vG(r.key),r)}}function oke(t,e,n){return e&&ike(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ske(t,e,n){return e=av(e),ake(t,yG()?Reflect.construct(e,n||[],av(t).constructor):e.apply(t,n))}function ake(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lke(t)}function lke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yG=function(){return!!t})()}function av(t){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},av(t)}function uke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rx(t,e)}function rx(t,e){return rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rx(t,e)}function EL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(n),!0).forEach(function(r){wP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wP(t,e,n){return e=vG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vG(t){var e=cke(t,"string");return wc(e)=="symbol"?e:e+""}function cke(t,e){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dke(t,e){return mke(t)||pke(t,e)||hke(t,e)||fke()}function fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hke(t,e){if(t){if(typeof t=="string")return SL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SL(t,e)}}function SL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function mke(t){if(Array.isArray(t))return t}function ix(){return ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ix.apply(this,arguments)}var gke=function(e,n){var r;return V.isValidElement(e)?r=V.cloneElement(e,n):Pe(e)?r=e(n):r=V.createElement("line",ix({},n,{className:"recharts-reference-line-line"})),r},yke=function(e,n,r,i,o,s,a,l,u){var c=o.x,d=o.y,f=o.width,g=o.height;if(r){var y=u.y,_=e.y.apply(y,{position:s});if(Fi(u,"discard")&&!e.y.isInRange(_))return null;var v=[{x:c+f,y:_},{x:c,y:_}];return l==="left"?v.reverse():v}if(n){var b=u.x,T=e.x.apply(b,{position:s});if(Fi(u,"discard")&&!e.x.isInRange(T))return null;var x=[{x:T,y:d+g},{x:T,y:d}];return a==="top"?x.reverse():x}if(i){var C=u.segment,E=C.map(function(A){return e.apply(A,{position:s})});return Fi(u,"discard")&&U1e(E,function(A){return!e.isInRange(A)})?null:E}return null};function vke(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,u=XNe(),c=mG(i),d=gG(o),f=tke();if(!u||!f)return null;mo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=mP({x:c.scale,y:d.scale}),y=Xt(e),_=Xt(n),v=r&&r.length===2,b=yke(g,y,_,v,f,t.position,c.orientation,d.orientation,t);if(!b)return null;var T=dke(b,2),x=T[0],C=x.x,E=x.y,A=T[1],S=A.x,P=A.y,R=Fi(t,"hidden")?"url(#".concat(u,")"):void 0,k=xL(xL({clipPath:R},Ne(t,!0)),{},{x1:C,y1:E,x2:S,y2:P});return V.createElement(Tt,{className:Fe("recharts-reference-line",a)},gke(s,k),kn.renderCallByParent(t,CNe({x1:C,y1:E,x2:S,y2:P})))}var bP=function(t){function e(){return rke(this,e),ske(this,e,arguments)}return uke(e,t),oke(e,[{key:"render",value:function(){return V.createElement(vke,this.props)}}])}(V.Component);wP(bP,"displayName","ReferenceLine");wP(bP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ox(){return ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ox.apply(this,arguments)}function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function IL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IL(Object(n),!0).forEach(function(r){r0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wG(r.key),r)}}function bke(t,e,n){return e&&wke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tke(t,e,n){return e=lv(e),Eke(t,_G()?Reflect.construct(e,n||[],lv(t).constructor):e.apply(t,n))}function Eke(t,e){if(e&&(bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(t)}function xke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _G(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_G=function(){return!!t})()}function lv(t){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lv(t)}function Ske(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}function sx(t,e){return sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sx(t,e)}function r0(t,e,n){return e=wG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wG(t){var e=Ike(t,"string");return bc(e)=="symbol"?e:e+""}function Ike(t,e){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ake=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=mP({x:i.scale,y:o.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return Fi(e,"discard")&&!s.isInRange(a)?null:a},i0=function(t){function e(){return _ke(this,e),Tke(this,e,arguments)}return Ske(e,t),bke(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,s=r.r,a=r.alwaysShow,l=r.clipPathId,u=Xt(i),c=Xt(o);if(mo(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=Ake(this.props);if(!d)return null;var f=d.x,g=d.y,y=this.props,_=y.shape,v=y.className,b=Fi(this.props,"hidden")?"url(#".concat(l,")"):void 0,T=AL(AL({clipPath:b},Ne(this.props,!0)),{},{cx:f,cy:g});return V.createElement(Tt,{className:Fe("recharts-reference-dot",v)},e.renderDot(_,T),kn.renderCallByParent(this.props,{x:f-s,y:g-s,width:2*s,height:2*s}))}}])}(V.Component);r0(i0,"displayName","ReferenceDot");r0(i0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});r0(i0,"renderDot",function(t,e){var n;return V.isValidElement(t)?n=V.cloneElement(t,e):Pe(t)?n=t(e):n=V.createElement(pP,ox({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function ax(){return ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ax.apply(this,arguments)}function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function PL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(n),!0).forEach(function(r){o0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TG(r.key),r)}}function Rke(t,e,n){return e&&Cke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nke(t,e,n){return e=uv(e),kke(t,bG()?Reflect.construct(e,n||[],uv(t).constructor):e.apply(t,n))}function kke(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oke(t)}function Oke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bG=function(){return!!t})()}function uv(t){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uv(t)}function Mke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lx(t,e)}function lx(t,e){return lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lx(t,e)}function o0(t,e,n){return e=TG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TG(t){var e=Dke(t,"string");return Tc(e)=="symbol"?e:e+""}function Dke(t,e){if(Tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lke=function(e,n,r,i,o){var s=o.x1,a=o.x2,l=o.y1,u=o.y2,c=o.xAxis,d=o.yAxis;if(!c||!d)return null;var f=mP({x:c.scale,y:d.scale}),g={x:e?f.x.apply(s,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},y={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Fi(o,"discard")&&(!f.isInRange(g)||!f.isInRange(y))?null:lG(g,y)},s0=function(t){function e(){return Pke(this,e),Nke(this,e,arguments)}return Mke(e,t),Rke(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,s=r.y1,a=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;mo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Xt(i),f=Xt(o),g=Xt(s),y=Xt(a),_=this.props.shape;if(!d&&!f&&!g&&!y&&!_)return null;var v=Lke(d,f,g,y,this.props);if(!v&&!_)return null;var b=Fi(this.props,"hidden")?"url(#".concat(c,")"):void 0;return V.createElement(Tt,{className:Fe("recharts-reference-area",l)},e.renderRect(_,CL(CL({clipPath:b},Ne(this.props,!0)),v)),kn.renderCallByParent(this.props,v))}}])}(V.Component);o0(s0,"displayName","ReferenceArea");o0(s0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o0(s0,"renderRect",function(t,e){var n;return V.isValidElement(t)?n=V.cloneElement(t,e):Pe(t)?n=t(e):n=V.createElement(hP,ax({},e,{className:"recharts-reference-area-rect"})),n});function EG(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function $ke(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return NNe(r,n)}function Vke(t,e,n){var r=n==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function cv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Fke(t,e){return EG(t,e+1)}function Uke(t,e,n,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,u=1,c=s,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:EG(r,u)};var _=l,v,b=function(){return v===void 0&&(v=n(y,_)),v},T=y.coordinate,x=l===0||cv(t,T,b,c,a);x||(l=0,c=s,u+=1),x&&(c=T+t*(b()/2+i),l+=u)},f;u<=o.length;)if(f=d(),f)return f.v;return[]}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function RL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(n),!0).forEach(function(r){Bke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bke(t,e,n){return e=jke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jke(t){var e=zke(t,"string");return Zh(e)=="symbol"?e:e+""}function zke(t,e){if(Zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qke(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,u=function(f){var g=o[f],y,_=function(){return y===void 0&&(y=n(g,f)),y};if(f===s-1){var v=t*(g.coordinate+t*_()/2-l);o[f]=g=Rn(Rn({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else o[f]=g=Rn(Rn({},g),{},{tickCoord:g.coordinate});var b=cv(t,g.tickCoord,_,a,l);b&&(l=g.tickCoord-t*(_()/2+i),o[f]=Rn(Rn({},g),{},{isShow:!0}))},c=s-1;c>=0;c--)u(c);return o}function Gke(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,u=e.end;if(o){var c=r[a-1],d=n(c,a-1),f=t*(c.coordinate+t*d/2-u);s[a-1]=c=Rn(Rn({},c),{},{tickCoord:f>0?c.coordinate-f*t:c.coordinate});var g=cv(t,c.tickCoord,function(){return d},l,u);g&&(u=c.tickCoord-t*(d/2+i),s[a-1]=Rn(Rn({},c),{},{isShow:!0}))}for(var y=o?a-1:a,_=function(T){var x=s[T],C,E=function(){return C===void 0&&(C=n(x,T)),C};if(T===0){var A=t*(x.coordinate-t*E()/2-l);s[T]=x=Rn(Rn({},x),{},{tickCoord:A<0?x.coordinate-A*t:x.coordinate})}else s[T]=x=Rn(Rn({},x),{},{tickCoord:x.coordinate});var S=cv(t,x.tickCoord,E,l,u);S&&(l=x.tickCoord+t*(E()/2+i),s[T]=Rn(Rn({},x),{},{isShow:!0}))},v=0;v<y;v++)_(v);return s}function TP(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(oe(l)||rd.isSsr)return Fke(i,typeof l=="number"&&oe(l)?l:0);var f=[],g=a==="top"||a==="bottom"?"width":"height",y=c&&g==="width"?Af(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},_=function(x,C){var E=Pe(u)?u(x.value,C):x.value;return g==="width"?$ke(Af(E,{fontSize:e,letterSpacing:n}),y,d):Af(E,{fontSize:e,letterSpacing:n})[g]},v=i.length>=2?li(i[1].coordinate-i[0].coordinate):1,b=Vke(o,v,g);return l==="equidistantPreserveStart"?Uke(v,b,_,i,s):(l==="preserveStart"||l==="preserveStartEnd"?f=Gke(v,b,_,i,s,l==="preserveStartEnd"):f=qke(v,b,_,i,s),f.filter(function(T){return T.isShow}))}var Hke=["viewBox"],Wke=["viewBox"],Kke=["ticks"];function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pu.apply(this,arguments)}function NL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(n),!0).forEach(function(r){EP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yw(t,e){if(t==null)return{};var n=Jke(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SG(r.key),r)}}function Qke(t,e,n){return e&&kL(t.prototype,e),n&&kL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xke(t,e,n){return e=dv(e),Zke(t,xG()?Reflect.construct(e,n||[],dv(t).constructor):e.apply(t,n))}function Zke(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eOe(t)}function eOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xG=function(){return!!t})()}function dv(t){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dv(t)}function tOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ux(t,e)}function ux(t,e){return ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ux(t,e)}function EP(t,e,n){return e=SG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SG(t){var e=nOe(t,"string");return Ec(e)=="symbol"?e:e+""}function nOe(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ad=function(t){function e(n){var r;return Yke(this,e),r=Xke(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return tOe(e,t),Qke(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=Yw(r,Hke),a=this.props,l=a.viewBox,u=Yw(a,Wke);return!ku(o,l)||!ku(s,u)||!ku(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,u=i.orientation,c=i.tickSize,d=i.mirror,f=i.tickMargin,g,y,_,v,b,T,x=d?-1:1,C=r.tickSize||c,E=oe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":g=y=r.coordinate,v=s+ +!d*l,_=v-x*C,T=_-x*f,b=E;break;case"left":_=v=r.coordinate,y=o+ +!d*a,g=y-x*C,b=g-x*f,T=E;break;case"right":_=v=r.coordinate,y=o+ +d*a,g=y+x*C,b=g+x*f,T=E;break;default:g=y=r.coordinate,v=s+ +d*l,_=v+x*C,T=_+x*f,b=E;break}return{line:{x1:g,y1:_,x2:y,y2:v},tick:{x:b,y:T}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=Kt(Kt(Kt({},Ne(this.props,!1)),Ne(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!u||l==="bottom"&&u);d=Kt(Kt({},d),{},{x1:i,y1:o+f*a,x2:i+s,y2:o+f*a})}else{var g=+(l==="left"&&!u||l==="right"&&u);d=Kt(Kt({},d),{},{x1:i+g*s,y1:o,x2:i+g*s,y2:o+a})}return V.createElement("line",pu({},d,{className:Fe("recharts-cartesian-axis-line",Hr(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,u=a.stroke,c=a.tick,d=a.tickFormatter,f=a.unit,g=TP(Kt(Kt({},this.props),{},{ticks:r}),i,o),y=this.getTickTextAnchor(),_=this.getTickVerticalAnchor(),v=Ne(this.props,!1),b=Ne(c,!1),T=Kt(Kt({},v),{},{fill:"none"},Ne(l,!1)),x=g.map(function(C,E){var A=s.getTickLineCoord(C),S=A.line,P=A.tick,R=Kt(Kt(Kt(Kt({textAnchor:y,verticalAnchor:_},v),{},{stroke:"none",fill:u},b),P),{},{index:E,payload:C,visibleTicksCount:g.length,tickFormatter:d});return V.createElement(Tt,pu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},yy(s.props,C,E)),l&&V.createElement("line",pu({},T,S,{className:Fe("recharts-cartesian-axis-tick-line",Hr(l,"className"))})),c&&e.renderTickItem(c,R,"".concat(Pe(d)?d(C.value,E):C.value).concat(f||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var d=this.props,f=d.ticks,g=Yw(d,Kke),y=f;return Pe(l)&&(y=f&&f.length>0?l(this.props):l(g)),s<=0||a<=0||!y||!y.length?null:V.createElement(Tt,{className:Fe("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),kn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s,a=Fe(i.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?s=V.cloneElement(r,Kt(Kt({},i),{},{className:a})):Pe(r)?s=r(Kt(Kt({},i),{},{className:a})):s=V.createElement(Ny,pu({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}($.Component);EP(ad,"displayName","CartesianAxis");EP(ad,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var rOe=["x1","y1","x2","y2","key"],iOe=["offset"];function pl(t){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(t)}function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(n),!0).forEach(function(r){oOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oOe(t,e,n){return e=sOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sOe(t){var e=aOe(t,"string");return pl(e)=="symbol"?e:e+""}function aOe(t,e){if(pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}function ML(t,e){if(t==null)return{};var n=lOe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var uOe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,s=e.width,a=e.height,l=e.ry;return V.createElement("rect",{x:i,y:o,ry:l,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function IG(t,e){var n;if(V.isValidElement(t))n=V.cloneElement(t,e);else if(Pe(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=e.key,l=ML(e,rOe),u=Ne(l,!1);u.offset;var c=ML(u,iOe);n=V.createElement("line",ka({},c,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:a}))}return n}function cOe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var u=On(On({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return IG(i,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function dOe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var u=On(On({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return IG(i,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function fOe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=a.map(function(f){return Math.round(f+i-i)}).sort(function(f,g){return f-g});i!==c[0]&&c.unshift(0);var d=c.map(function(f,g){var y=!c[g+1],_=y?i+s-f:c[g+1]-f;if(_<=0)return null;var v=g%e.length;return V.createElement("rect",{key:"react-".concat(g),y:f,x:r,height:_,width:o,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function hOe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,s=t.y,a=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(f){return Math.round(f+o-o)}).sort(function(f,g){return f-g});o!==c[0]&&c.unshift(0);var d=c.map(function(f,g){var y=!c[g+1],_=y?o+a-f:c[g+1]-f;if(_<=0)return null;var v=g%r.length;return V.createElement("rect",{key:"react-".concat(g),x:f,y:s,width:_,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var pOe=function(e,n){var r=e.xAxis,i=e.width,o=e.height,s=e.offset;return Lq(TP(On(On(On({},ad.defaultProps),r),{},{ticks:uo(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},mOe=function(e,n){var r=e.yAxis,i=e.width,o=e.height,s=e.offset;return Lq(TP(On(On(On({},ad.defaultProps),r),{},{ticks:uo(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},jl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function AG(t){var e,n,r,i,o,s,a=vP(),l=_P(),u=nke(),c=On(On({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:jl.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:jl.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:jl.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:jl.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:jl.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:jl.verticalFill,x:oe(t.x)?t.x:u.left,y:oe(t.y)?t.y:u.top,width:oe(t.width)?t.width:u.width,height:oe(t.height)?t.height:u.height}),d=c.x,f=c.y,g=c.width,y=c.height,_=c.syncWithTicks,v=c.horizontalValues,b=c.verticalValues,T=ZNe(),x=eke();if(!oe(g)||g<=0||!oe(y)||y<=0||!oe(d)||d!==+d||!oe(f)||f!==+f)return null;var C=c.verticalCoordinatesGenerator||pOe,E=c.horizontalCoordinatesGenerator||mOe,A=c.horizontalPoints,S=c.verticalPoints;if((!A||!A.length)&&Pe(E)){var P=v&&v.length,R=E({yAxis:x?On(On({},x),{},{ticks:P?v:x.ticks}):void 0,width:a,height:l,offset:u},P?!0:_);mo(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pl(R),"]")),Array.isArray(R)&&(A=R)}if((!S||!S.length)&&Pe(C)){var k=b&&b.length,O=C({xAxis:T?On(On({},T),{},{ticks:k?b:T.ticks}):void 0,width:a,height:l,offset:u},k?!0:_);mo(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pl(O),"]")),Array.isArray(O)&&(S=O)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(uOe,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),V.createElement(cOe,ka({},c,{offset:u,horizontalPoints:A,xAxis:T,yAxis:x})),V.createElement(dOe,ka({},c,{offset:u,verticalPoints:S,xAxis:T,yAxis:x})),V.createElement(fOe,ka({},c,{horizontalPoints:A})),V.createElement(hOe,ka({},c,{verticalPoints:S})))}AG.displayName="CartesianGrid";var gOe=["layout","type","stroke","connectNulls","isRange","ref"],yOe=["key"],PG;function xc(t){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xc(t)}function CG(t,e){if(t==null)return{};var n=vOe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oa.apply(this,arguments)}function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){ki(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NG(r.key),r)}}function wOe(t,e,n){return e&&LL(t.prototype,e),n&&LL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bOe(t,e,n){return e=fv(e),TOe(t,RG()?Reflect.construct(e,n||[],fv(t).constructor):e.apply(t,n))}function TOe(t,e){if(e&&(xc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EOe(t)}function EOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RG=function(){return!!t})()}function fv(t){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fv(t)}function xOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cx(t,e)}function cx(t,e){return cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cx(t,e)}function ki(t,e,n){return e=NG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NG(t){var e=SOe(t,"string");return xc(e)=="symbol"?e:e+""}function SOe(t,e){if(xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ys=function(t){function e(){var n;_Oe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=bOe(this,e,[].concat(i)),ki(n,"state",{isAnimationFinished:!0}),ki(n,"id",Pp("recharts-area-")),ki(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Pe(s)&&s()}),ki(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Pe(s)&&s()}),n}return xOe(e,t),wOe(e,[{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(s&&!a)return null;var l=this.props,u=l.dot,c=l.points,d=l.dataKey,f=Ne(this.props,!1),g=Ne(u,!0),y=c.map(function(v,b){var T=Qo(Qo(Qo({key:"dot-".concat(b),r:3},f),g),{},{index:b,cx:v.x,cy:v.y,dataKey:d,value:v.value,payload:v.payload,points:c});return e.renderDotItem(u,T)}),_={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return V.createElement(Tt,Oa({className:"recharts-area-dots"},_),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].x,u=s[s.length-1].x,c=r*Math.abs(l-u),d=cs(s.map(function(f){return f.y||0}));return oe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(cs(o.map(function(f){return f.y||0})),d)),oe(d)?V.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,s=i.points,a=i.strokeWidth,l=s[0].y,u=s[s.length-1].y,c=r*Math.abs(l-u),d=cs(s.map(function(f){return f.x||0}));return oe(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(cs(o.map(function(f){return f.x||0})),d)),oe(d)?V.createElement("rect",{x:0,y:l<u?l:l-c,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,s){var a=this.props,l=a.layout,u=a.type,c=a.stroke,d=a.connectNulls,f=a.isRange;a.ref;var g=CG(a,gOe);return V.createElement(Tt,{clipPath:o?"url(#clipPath-".concat(s,")"):null},V.createElement(Rf,Oa({},Ne(g,!0),{points:r,connectNulls:d,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&V.createElement(Rf,Oa({},Ne(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:r})),c!=="none"&&f&&V.createElement(Rf,Oa({},Ne(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.baseLine,u=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,f=s.animationEasing,g=s.animationId,y=this.state,_=y.prevPoints,v=y.prevBaseLine;return V.createElement(Co,{begin:c,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t;if(_){var x=_.length/a.length,C=a.map(function(P,R){var k=Math.floor(R*x);if(_[k]){var O=_[k],M=Fr(O.x,P.x),D=Fr(O.y,P.y);return Qo(Qo({},P),{},{x:M(T),y:D(T)})}return P}),E;if(oe(l)&&typeof l=="number"){var A=Fr(v,l);E=A(T)}else if(De(l)||Zc(l)){var S=Fr(v,0);E=S(T)}else E=l.map(function(P,R){var k=Math.floor(R*x);if(v[k]){var O=v[k],M=Fr(O.x,P.x),D=Fr(O.y,P.y);return Qo(Qo({},P),{},{x:M(T),y:D(T)})}return P});return o.renderAreaStatically(C,E,r,i)}return V.createElement(Tt,null,V.createElement("defs",null,V.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(T))),V.createElement(Tt,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(a,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,s=o.points,a=o.baseLine,l=o.isAnimationActive,u=this.state,c=u.prevPoints,d=u.prevBaseLine,f=u.totalLength;return l&&s&&s.length&&(!c&&f>0||!kh(c,s)||!kh(d,a))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,a,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,u=i.top,c=i.left,d=i.xAxis,f=i.yAxis,g=i.width,y=i.height,_=i.isAnimationActive,v=i.id;if(o||!a||!a.length)return null;var b=this.state.isAnimationFinished,T=a.length===1,x=Fe("recharts-area",l),C=d&&d.allowDataOverflow,E=f&&f.allowDataOverflow,A=C||E,S=De(v)?this.id:v,P=(r=Ne(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},R=P.r,k=R===void 0?3:R,O=P.strokeWidth,M=O===void 0?2:O,D=Vfe(s)?s:{},j=D.clipDot,q=j===void 0?!0:j,Y=k*2+M;return V.createElement(Tt,{className:x},C||E?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(S)},V.createElement("rect",{x:C?c:c-g/2,y:E?u:u-y/2,width:C?g:g*2,height:E?y:y*2})),!q&&V.createElement("clipPath",{id:"clipPath-dots-".concat(S)},V.createElement("rect",{x:c-Y/2,y:u-Y/2,width:g+Y,height:y+Y}))):null,T?null:this.renderArea(A,S),(s||T)&&this.renderDots(A,q,S),(!_||b)&&Ts.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}($.PureComponent);PG=Ys;ki(Ys,"displayName","Area");ki(Ys,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!rd.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ki(Ys,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,s=e.props.baseValue,a=s??o;if(oe(a)&&typeof a=="number")return a;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return a==="dataMin"?d:a==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return a==="dataMin"?u[0]:a==="dataMax"?u[1]:u[0]});ki(Ys,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,s=t.yAxisTicks,a=t.bandSize,l=t.dataKey,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,f=t.offset,g=e.layout,y=u&&u.length,_=PG.getBaseValue(e,n,r,i),v=g==="horizontal",b=!1,T=d.map(function(C,E){var A;y?A=u[c+E]:(A=Pr(C,l),Array.isArray(A)?b=!0:A=[_,A]);var S=A[1]==null||y&&Pr(C,l)==null;return v?{x:wD({axis:r,ticks:o,bandSize:a,entry:C,index:E}),y:S?null:i.scale(A[1]),value:A,payload:C}:{x:S?null:r.scale(A[1]),y:wD({axis:i,ticks:s,bandSize:a,entry:C,index:E}),value:A,payload:C}}),x;return y||b?x=T.map(function(C){var E=Array.isArray(C.value)?C.value[0]:null;return v?{x:C.x,y:E!=null&&C.y!=null?i.scale(E):null}:{x:E!=null?r.scale(E):null,y:C.y}}):x=v?i.scale(_):r.scale(_),Qo({points:T,baseLine:x,layout:g,isRange:b},f)});ki(Ys,"renderDotItem",function(t,e){var n;if(V.isValidElement(t))n=V.cloneElement(t,e);else if(Pe(t))n=t(e);else{var r=Fe("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=CG(e,yOe);n=V.createElement(pP,Oa({},o,{key:i,className:r}))}return n});function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function IOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MG(r.key),r)}}function POe(t,e,n){return e&&AOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function COe(t,e,n){return e=hv(e),ROe(t,kG()?Reflect.construct(e,n||[],hv(t).constructor):e.apply(t,n))}function ROe(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NOe(t)}function NOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kG=function(){return!!t})()}function hv(t){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hv(t)}function kOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dx(t,e)}function dx(t,e){return dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dx(t,e)}function OG(t,e,n){return e=MG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MG(t){var e=OOe(t,"string");return Sc(e)=="symbol"?e:e+""}function OOe(t,e){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(this,arguments)}function MOe(t){var e=t.xAxisId,n=vP(),r=_P(),i=mG(e);return i==null?null:$.createElement(ad,fx({},i,{className:Fe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return uo(s,!0)}}))}var a0=function(t){function e(){return IOe(this,e),COe(this,e,arguments)}return kOe(e,t),POe(e,[{key:"render",value:function(){return $.createElement(MOe,this.props)}}])}($.Component);OG(a0,"displayName","XAxis");OG(a0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function DOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$G(r.key),r)}}function $Oe(t,e,n){return e&&LOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VOe(t,e,n){return e=pv(e),FOe(t,DG()?Reflect.construct(e,n||[],pv(t).constructor):e.apply(t,n))}function FOe(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UOe(t)}function UOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DG=function(){return!!t})()}function pv(t){return pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pv(t)}function BOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hx(t,e)}function hx(t,e){return hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hx(t,e)}function LG(t,e,n){return e=$G(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $G(t){var e=jOe(t,"string");return Ic(e)=="symbol"?e:e+""}function jOe(t,e){if(Ic(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ic(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(this,arguments)}var zOe=function(e){var n=e.yAxisId,r=vP(),i=_P(),o=gG(n);return o==null?null:$.createElement(ad,px({},o,{className:Fe("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return uo(a,!0)}}))},l0=function(t){function e(){return DOe(this,e),VOe(this,e,arguments)}return BOe(e,t),$Oe(e,[{key:"render",value:function(){return $.createElement(zOe,this.props)}}])}($.Component);LG(l0,"displayName","YAxis");LG(l0,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $L(t){return WOe(t)||HOe(t)||GOe(t)||qOe()}function qOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GOe(t,e){if(t){if(typeof t=="string")return mx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mx(t,e)}}function HOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WOe(t){if(Array.isArray(t))return mx(t)}function mx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gx=function(e,n,r,i,o){var s=hi(e,bP),a=hi(e,i0),l=[].concat($L(s),$L(a)),u=hi(e,s0),c="".concat(i,"Id"),d=i[0],f=n;if(l.length&&(f=l.reduce(function(_,v){if(v.props[c]===r&&Fi(v.props,"extendDomain")&&oe(v.props[d])){var b=v.props[d];return[Math.min(_[0],b),Math.max(_[1],b)]}return _},f)),u.length){var g="".concat(d,"1"),y="".concat(d,"2");f=u.reduce(function(_,v){if(v.props[c]===r&&Fi(v.props,"extendDomain")&&oe(v.props[g])&&oe(v.props[y])){var b=v.props[g],T=v.props[y];return[Math.min(_[0],b,T),Math.max(_[1],b,T)]}return _},f)}return o&&o.length&&(f=o.reduce(function(_,v){return oe(v)?[Math.min(_[0],v),Math.max(_[1],v)]:_},f)),f},VG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,d||l,f),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,g=d.length,y=new Array(g);f<g;f++)y[f]=d[f].fn;return y},a.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,g,y){var _=n?n+u:u;if(!this._events[_])return!1;var v=this._events[_],b=arguments.length,T,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,f),!0;case 5:return v.fn.call(v.context,c,d,f,g),!0;case 6:return v.fn.call(v.context,c,d,f,g,y),!0}for(x=1,T=new Array(b-1);x<b;x++)T[x-1]=arguments[x];v.fn.apply(v.context,T)}else{var C=v.length,E;for(x=0;x<C;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),b){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,c);break;case 3:v[x].fn.call(v[x].context,c,d);break;case 4:v[x].fn.call(v[x].context,c,d,f);break;default:if(!T)for(E=1,T=new Array(b-1);E<b;E++)T[E-1]=arguments[E];v[x].fn.apply(v[x].context,T)}}return!0},a.prototype.on=function(u,c,d){return o(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return o(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var g=n?n+u:u;if(!this._events[g])return this;if(!c)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===c&&(!f||y.once)&&(!d||y.context===d)&&s(this,g);else{for(var _=0,v=[],b=y.length;_<b;_++)(y[_].fn!==c||f&&!y[_].once||d&&y[_].context!==d)&&v.push(y[_]);v.length?this._events[g]=v.length===1?v[0]:v:s(this,g)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(VG);var KOe=VG.exports;const JOe=tt(KOe);var Qw=new JOe,Xw="recharts.syncMouseEvents";function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function YOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FG(r.key),r)}}function XOe(t,e,n){return e&&QOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zw(t,e,n){return e=FG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FG(t){var e=ZOe(t,"string");return ep(e)=="symbol"?e:e+""}function ZOe(t,e){if(ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eMe=function(){function t(){YOe(this,t),Zw(this,"activeIndex",0),Zw(this,"coordinateList",[]),Zw(this,"layout","horizontal")}return XOe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,a=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,f=n.mouseHandlerCallback,g=f===void 0?null:f;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+l+u,f=s+this.offset.top+a/2+c;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function tMe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&oe(r)&&oe(i))return!0}return!1}function nMe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function UG(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,s=_n(e,n,r,i),a=_n(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function rMe(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,f=_n(a,l,u,d),g=_n(a,l,c,d);r=f.x,i=f.y,o=g.x,s=g.y}else return UG(e);return[{x:r,y:i},{x:o,y:s}]}function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){iMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iMe(t,e,n){return e=oMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oMe(t){var e=sMe(t,"string");return tp(e)=="symbol"?e:e+""}function sMe(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aMe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,s=t.activeCoordinate,a=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!o||!s||f!=="ScatterChart"&&i!=="axis")return null;var y,_=Rf;if(f==="ScatterChart")y=s,_=cRe;else if(f==="BarChart")y=nMe(d,s,l,c),_=hP;else if(d==="radial"){var v=UG(s),b=v.cx,T=v.cy,x=v.radius,C=v.startAngle,E=v.endAngle;y={cx:b,cy:T,startAngle:C,endAngle:E,innerRadius:x,outerRadius:x},_=Bq}else y={points:rMe(d,s,l)},_=Rf;var A=Fm(Fm(Fm(Fm({stroke:"#ccc",pointerEvents:"none"},l),y),Ne(g,!1)),{},{payload:a,payloadIndex:u,className:Fe("recharts-tooltip-cursor",g.className)});return $.isValidElement(g)?$.cloneElement(g,A):$.createElement(_,A)}var lMe=["item"],uMe=["children","className","width","height","style","compact","title","desc"];function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mu.apply(this,arguments)}function FL(t,e){return fMe(t)||dMe(t,e)||jG(t,e)||cMe()}function cMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function fMe(t){if(Array.isArray(t))return t}function UL(t,e){if(t==null)return{};var n=hMe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zG(r.key),r)}}function gMe(t,e,n){return e&&mMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yMe(t,e,n){return e=mv(e),vMe(t,BG()?Reflect.construct(e,n||[],mv(t).constructor):e.apply(t,n))}function vMe(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Me(t)}function _Me(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BG=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(t)}function wMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yx(t,e)}function yx(t,e){return yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yx(t,e)}function Pc(t){return EMe(t)||TMe(t)||jG(t)||bMe()}function bMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jG(t,e){if(t){if(typeof t=="string")return vx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vx(t,e)}}function TMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EMe(t){if(Array.isArray(t))return vx(t)}function vx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(n),!0).forEach(function(r){we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function we(t,e,n){return e=zG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zG(t){var e=xMe(t,"string");return Ac(e)=="symbol"?e:e+""}function xMe(t,e){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SMe={xAxis:["bottom","top"],yAxis:["left","right"]},IMe={width:"100%",height:"100%"},qG={x:0,y:0};function Um(t){return t}var AMe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},PMe=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return K(K(K({},i),_n(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,u=i.angle;return K(K(K({},i),_n(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return qG},u0=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var u=l.props.data;return u&&u.length?[].concat(Pc(a),Pc(u)):a},[]);return s.length>0?s:e&&e.length&&oe(i)&&oe(o)?e.slice(i,o+1):[]};function GG(t){return t==="number"?[0,"auto"]:void 0}var _x=function(e,n,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=u0(n,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(s.dataKey&&!s.allowDuplicatedCategory){var g=d===void 0?a:d;f=my(g,s.dataKey,i)}else f=d&&d[r]||a[r];return f?[].concat(Pc(l),[Vq(u,f)]):l},[])},jL=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},s=AMe(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=jIe(s,a,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,f=_x(e,n,c,d),g=PMe(r,a,c,o);return{activeTooltipIndex:c,activeLabel:d,activePayload:f,activeCoordinate:g}}return null},CMe=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=e.stackOffset,g=Dq(c,o);return r.reduce(function(y,_){var v,b=_.type.defaultProps!==void 0?K(K({},_.type.defaultProps),_.props):_.props,T=b.type,x=b.dataKey,C=b.allowDataOverflow,E=b.allowDuplicatedCategory,A=b.scale,S=b.ticks,P=b.includeHidden,R=b[s];if(y[R])return y;var k=u0(e.data,{graphicalItems:i.filter(function(ne){var fe,Ce=s in ne.props?ne.props[s]:(fe=ne.type.defaultProps)===null||fe===void 0?void 0:fe[s];return Ce===R}),dataStartIndex:l,dataEndIndex:u}),O=k.length,M,D,j;tMe(b.domain,C,T)&&(M=VE(b.domain,null,C),g&&(T==="number"||A!=="auto")&&(j=Cf(k,x,"category")));var q=GG(T);if(!M||M.length===0){var Y,X=(Y=b.domain)!==null&&Y!==void 0?Y:q;if(x){if(M=Cf(k,x,T),T==="category"&&g){var U=Pfe(M);E&&U?(D=M,M=nv(0,O)):E||(M=xD(X,M,_).reduce(function(ne,fe){return ne.indexOf(fe)>=0?ne:[].concat(Pc(ne),[fe])},[]))}else if(T==="category")E?M=M.filter(function(ne){return ne!==""&&!De(ne)}):M=xD(X,M,_).reduce(function(ne,fe){return ne.indexOf(fe)>=0||fe===""||De(fe)?ne:[].concat(Pc(ne),[fe])},[]);else if(T==="number"){var J=WIe(k,i.filter(function(ne){var fe,Ce,Ue=s in ne.props?ne.props[s]:(fe=ne.type.defaultProps)===null||fe===void 0?void 0:fe[s],st="hide"in ne.props?ne.props.hide:(Ce=ne.type.defaultProps)===null||Ce===void 0?void 0:Ce.hide;return Ue===R&&(P||!st)}),x,o,c);J&&(M=J)}g&&(T==="number"||A!=="auto")&&(j=Cf(k,x,"category"))}else g?M=nv(0,O):a&&a[R]&&a[R].hasStack&&T==="number"?M=f==="expand"?[0,1]:$q(a[R].stackGroups,l,u):M=Mq(k,i.filter(function(ne){var fe=s in ne.props?ne.props[s]:ne.type.defaultProps[s],Ce="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return fe===R&&(P||!Ce)}),T,c,!0);if(T==="number")M=gx(d,M,R,o,S),X&&(M=VE(X,M,C));else if(T==="category"&&X){var Q=X,le=M.every(function(ne){return Q.indexOf(ne)>=0});le&&(M=Q)}}return K(K({},y),{},we({},R,K(K({},b),{},{axisType:o,domain:M,categoricalDomain:j,duplicateDomain:D,originalDomain:(v=b.domain)!==null&&v!==void 0?v:q,isCategorical:g,layout:c})))},{})},RMe=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,f=u0(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),g=f.length,y=Dq(c,o),_=-1;return r.reduce(function(v,b){var T=b.type.defaultProps!==void 0?K(K({},b.type.defaultProps),b.props):b.props,x=T[s],C=GG("number");if(!v[x]){_++;var E;return y?E=nv(0,g):a&&a[x]&&a[x].hasStack?(E=$q(a[x].stackGroups,l,u),E=gx(d,E,x,o)):(E=VE(C,Mq(f,r.filter(function(A){var S,P,R=s in A.props?A.props[s]:(S=A.type.defaultProps)===null||S===void 0?void 0:S[s],k="hide"in A.props?A.props.hide:(P=A.type.defaultProps)===null||P===void 0?void 0:P.hide;return R===x&&!k}),"number",c),i.defaultProps.allowDataOverflow),E=gx(d,E,x,o)),K(K({},v),{},we({},x,K(K({axisType:o},i.defaultProps),{},{hide:!0,orientation:Hr(SMe,"".concat(o,".").concat(_%2),null),domain:E,originalDomain:C,isCategorical:y,layout:c})))}return v},{})},NMe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(i,"Id"),f=hi(c,o),g={};return f&&f.length?g=CMe(e,{axes:f,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(g=RMe(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:u})),g},kMe=function(e){var n=os(e),r=uo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:UA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Hy(n,r)}},zL=function(e){var n=e.children,r=e.defaultShowTooltip,i=_r(n,vc),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},OMe=function(e){return!e||!e.length?!1:e.some(function(n){var r=po(n&&n.type);return r&&r.indexOf("Bar")>=0})},qL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},MMe=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,u=r.width,c=r.height,d=r.children,f=r.margin||{},g=_r(d,vc),y=_r(d,Ou),_=Object.keys(l).reduce(function(E,A){var S=l[A],P=S.orientation;return!S.mirror&&!S.hide?K(K({},E),{},we({},P,E[P]+S.width)):E},{left:f.left||0,right:f.right||0}),v=Object.keys(s).reduce(function(E,A){var S=s[A],P=S.orientation;return!S.mirror&&!S.hide?K(K({},E),{},we({},P,Hr(E,"".concat(P))+S.height)):E},{top:f.top||0,bottom:f.bottom||0}),b=K(K({},v),_),T=b.bottom;g&&(b.bottom+=g.props.height||vc.defaultProps.height),y&&n&&(b=GIe(b,i,r,n));var x=u-b.left-b.right,C=c-b.top-b.bottom;return K(K({brushBottom:T},b),{},{width:Math.max(x,0),height:Math.max(C,0)})},DMe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},LMe=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,s=e.validateTooltipEventTypes,a=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,f=function(b,T){var x=T.graphicalItems,C=T.stackGroups,E=T.offset,A=T.updateId,S=T.dataStartIndex,P=T.dataEndIndex,R=b.barSize,k=b.layout,O=b.barGap,M=b.barCategoryGap,D=b.maxBarSize,j=qL(k),q=j.numericAxisName,Y=j.cateAxisName,X=OMe(x),U=[];return x.forEach(function(J,Q){var le=u0(b.data,{graphicalItems:[J],dataStartIndex:S,dataEndIndex:P}),ne=J.type.defaultProps!==void 0?K(K({},J.type.defaultProps),J.props):J.props,fe=ne.dataKey,Ce=ne.maxBarSize,Ue=ne["".concat(q,"Id")],st=ne["".concat(Y,"Id")],Ut={},Wt=l.reduce(function(Or,tr){var Dt=T["".concat(tr.axisType,"Map")],Bo=ne["".concat(tr.axisType,"Id")];Dt&&Dt[Bo]||tr.axisType==="zAxis"||hl();var Qs=Dt[Bo];return K(K({},Or),{},we(we({},tr.axisType,Qs),"".concat(tr.axisType,"Ticks"),uo(Qs)))},Ut),ce=Wt[Y],be=Wt["".concat(Y,"Ticks")],Te=C&&C[Ue]&&C[Ue].hasStack&&oAe(J,C[Ue].stackGroups),Z=po(J.type).indexOf("Bar")>=0,He=Hy(ce,be),Ie=[],at=X&&zIe({barSize:R,stackGroups:C,totalSize:DMe(Wt,Y)});if(Z){var lt,nn,Nr=De(Ce)?D:Ce,kr=(lt=(nn=Hy(ce,be,!0))!==null&&nn!==void 0?nn:Nr)!==null&&lt!==void 0?lt:0;Ie=qIe({barGap:O,barCategoryGap:M,bandSize:kr!==He?kr:He,sizeList:at[st],maxBarSize:Nr}),kr!==He&&(Ie=Ie.map(function(Or){return K(K({},Or),{},{position:K(K({},Or.position),{},{offset:Or.position.offset-kr/2})})}))}var _i=J&&J.type&&J.type.getComposedData;_i&&U.push({props:K(K({},_i(K(K({},Wt),{},{displayedData:le,props:b,dataKey:fe,item:J,bandSize:He,barPosition:Ie,offset:E,stackedData:Te,layout:k,dataStartIndex:S,dataEndIndex:P}))),{},we(we(we({key:J.key||"item-".concat(Q)},q,Wt[q]),Y,Wt[Y]),"animationId",A)),childIndex:Bfe(J,b.children),item:J})}),U},g=function(b,T){var x=b.props,C=b.dataStartIndex,E=b.dataEndIndex,A=b.updateId;if(!yO({props:x}))return null;var S=x.children,P=x.layout,R=x.stackOffset,k=x.data,O=x.reverseStackOrder,M=qL(P),D=M.numericAxisName,j=M.cateAxisName,q=hi(S,r),Y=nAe(k,q,"".concat(D,"Id"),"".concat(j,"Id"),R,O),X=l.reduce(function(ne,fe){var Ce="".concat(fe.axisType,"Map");return K(K({},ne),{},we({},Ce,NMe(x,K(K({},fe),{},{graphicalItems:q,stackGroups:fe.axisType===D&&Y,dataStartIndex:C,dataEndIndex:E}))))},{}),U=MMe(K(K({},X),{},{props:x,graphicalItems:q}),T==null?void 0:T.legendBBox);Object.keys(X).forEach(function(ne){X[ne]=c(x,X[ne],U,ne.replace("Map",""),n)});var J=X["".concat(j,"Map")],Q=kMe(J),le=f(x,K(K({},X),{},{dataStartIndex:C,dataEndIndex:E,updateId:A,graphicalItems:q,stackGroups:Y,offset:U}));return K(K({formattedGraphicalItems:le,graphicalItems:q,offset:U,stackGroups:Y},Q),X)},y=function(v){function b(T){var x,C,E;return pMe(this,b),E=yMe(this,b,[T]),we(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),we(E,"accessibilityManager",new eMe),we(E,"handleLegendBBoxUpdate",function(A){if(A){var S=E.state,P=S.dataStartIndex,R=S.dataEndIndex,k=S.updateId;E.setState(K({legendBBox:A},g({props:E.props,dataStartIndex:P,dataEndIndex:R,updateId:k},K(K({},E.state),{},{legendBBox:A}))))}}),we(E,"handleReceiveSyncEvent",function(A,S,P){if(E.props.syncId===A){if(P===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(S)}}),we(E,"handleBrushChange",function(A){var S=A.startIndex,P=A.endIndex;if(S!==E.state.dataStartIndex||P!==E.state.dataEndIndex){var R=E.state.updateId;E.setState(function(){return K({dataStartIndex:S,dataEndIndex:P},g({props:E.props,dataStartIndex:S,dataEndIndex:P,updateId:R},E.state))}),E.triggerSyncEvent({dataStartIndex:S,dataEndIndex:P})}}),we(E,"handleMouseEnter",function(A){var S=E.getMouseInfo(A);if(S){var P=K(K({},S),{},{isTooltipActive:!0});E.setState(P),E.triggerSyncEvent(P);var R=E.props.onMouseEnter;Pe(R)&&R(P,A)}}),we(E,"triggeredAfterMouseMove",function(A){var S=E.getMouseInfo(A),P=S?K(K({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(P),E.triggerSyncEvent(P);var R=E.props.onMouseMove;Pe(R)&&R(P,A)}),we(E,"handleItemMouseEnter",function(A){E.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),we(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),we(E,"handleMouseMove",function(A){A.persist(),E.throttleTriggeredAfterMouseMove(A)}),we(E,"handleMouseLeave",function(A){E.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};E.setState(S),E.triggerSyncEvent(S);var P=E.props.onMouseLeave;Pe(P)&&P(S,A)}),we(E,"handleOuterEvent",function(A){var S=Ufe(A),P=Hr(E.props,"".concat(S));if(S&&Pe(P)){var R,k;/.*touch.*/i.test(S)?k=E.getMouseInfo(A.changedTouches[0]):k=E.getMouseInfo(A),P((R=k)!==null&&R!==void 0?R:{},A)}}),we(E,"handleClick",function(A){var S=E.getMouseInfo(A);if(S){var P=K(K({},S),{},{isTooltipActive:!0});E.setState(P),E.triggerSyncEvent(P);var R=E.props.onClick;Pe(R)&&R(P,A)}}),we(E,"handleMouseDown",function(A){var S=E.props.onMouseDown;if(Pe(S)){var P=E.getMouseInfo(A);S(P,A)}}),we(E,"handleMouseUp",function(A){var S=E.props.onMouseUp;if(Pe(S)){var P=E.getMouseInfo(A);S(P,A)}}),we(E,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),we(E,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseDown(A.changedTouches[0])}),we(E,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseUp(A.changedTouches[0])}),we(E,"handleDoubleClick",function(A){var S=E.props.onDoubleClick;if(Pe(S)){var P=E.getMouseInfo(A);S(P,A)}}),we(E,"handleContextMenu",function(A){var S=E.props.onContextMenu;if(Pe(S)){var P=E.getMouseInfo(A);S(P,A)}}),we(E,"triggerSyncEvent",function(A){E.props.syncId!==void 0&&Qw.emit(Xw,E.props.syncId,A,E.eventEmitterSymbol)}),we(E,"applySyncEvent",function(A){var S=E.props,P=S.layout,R=S.syncMethod,k=E.state.updateId,O=A.dataStartIndex,M=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)E.setState(K({dataStartIndex:O,dataEndIndex:M},g({props:E.props,dataStartIndex:O,dataEndIndex:M,updateId:k},E.state)));else if(A.activeTooltipIndex!==void 0){var D=A.chartX,j=A.chartY,q=A.activeTooltipIndex,Y=E.state,X=Y.offset,U=Y.tooltipTicks;if(!X)return;if(typeof R=="function")q=R(U,A);else if(R==="value"){q=-1;for(var J=0;J<U.length;J++)if(U[J].value===A.activeLabel){q=J;break}}var Q=K(K({},X),{},{x:X.left,y:X.top}),le=Math.min(D,Q.x+Q.width),ne=Math.min(j,Q.y+Q.height),fe=U[q]&&U[q].value,Ce=_x(E.state,E.props.data,q),Ue=U[q]?{x:P==="horizontal"?U[q].coordinate:le,y:P==="horizontal"?ne:U[q].coordinate}:qG;E.setState(K(K({},A),{},{activeLabel:fe,activeCoordinate:Ue,activePayload:Ce,activeTooltipIndex:q}))}else E.setState(A)}),we(E,"renderCursor",function(A){var S,P=E.state,R=P.isTooltipActive,k=P.activeCoordinate,O=P.activePayload,M=P.offset,D=P.activeTooltipIndex,j=P.tooltipAxisBandSize,q=E.getTooltipEventType(),Y=(S=A.props.active)!==null&&S!==void 0?S:R,X=E.props.layout,U=A.key||"_recharts-cursor";return V.createElement(aMe,{key:U,activeCoordinate:k,activePayload:O,activeTooltipIndex:D,chartName:n,element:A,isActive:Y,layout:X,offset:M,tooltipAxisBandSize:j,tooltipEventType:q})}),we(E,"renderPolarAxis",function(A,S,P){var R=Hr(A,"type.axisType"),k=Hr(E.state,"".concat(R,"Map")),O=A.type.defaultProps,M=O!==void 0?K(K({},O),A.props):A.props,D=k&&k[M["".concat(R,"Id")]];return $.cloneElement(A,K(K({},D),{},{className:Fe(R,D.className),key:A.key||"".concat(S,"-").concat(P),ticks:uo(D,!0)}))}),we(E,"renderPolarGrid",function(A){var S=A.props,P=S.radialLines,R=S.polarAngles,k=S.polarRadius,O=E.state,M=O.radiusAxisMap,D=O.angleAxisMap,j=os(M),q=os(D),Y=q.cx,X=q.cy,U=q.innerRadius,J=q.outerRadius;return $.cloneElement(A,{polarAngles:Array.isArray(R)?R:uo(q,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(k)?k:uo(j,!0).map(function(Q){return Q.coordinate}),cx:Y,cy:X,innerRadius:U,outerRadius:J,key:A.key||"polar-grid",radialLines:P})}),we(E,"renderLegend",function(){var A=E.state.formattedGraphicalItems,S=E.props,P=S.children,R=S.width,k=S.height,O=E.props.margin||{},M=R-(O.left||0)-(O.right||0),D=kq({children:P,formattedGraphicalItems:A,legendWidth:M,legendContent:u});if(!D)return null;var j=D.item,q=UL(D,lMe);return $.cloneElement(j,K(K({},q),{},{chartWidth:R,chartHeight:k,margin:O,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),we(E,"renderTooltip",function(){var A,S=E.props,P=S.children,R=S.accessibilityLayer,k=_r(P,Ti);if(!k)return null;var O=E.state,M=O.isTooltipActive,D=O.activeCoordinate,j=O.activePayload,q=O.activeLabel,Y=O.offset,X=(A=k.props.active)!==null&&A!==void 0?A:M;return $.cloneElement(k,{viewBox:K(K({},Y),{},{x:Y.left,y:Y.top}),active:X,label:q,payload:X?j:[],coordinate:D,accessibilityLayer:R})}),we(E,"renderBrush",function(A){var S=E.props,P=S.margin,R=S.data,k=E.state,O=k.offset,M=k.dataStartIndex,D=k.dataEndIndex,j=k.updateId;return $.cloneElement(A,{key:A.key||"_recharts-brush",onChange:Dm(E.handleBrushChange,A.props.onChange),data:R,x:oe(A.props.x)?A.props.x:O.left,y:oe(A.props.y)?A.props.y:O.top+O.height+O.brushBottom-(P.bottom||0),width:oe(A.props.width)?A.props.width:O.width,startIndex:M,endIndex:D,updateId:"brush-".concat(j)})}),we(E,"renderReferenceElement",function(A,S,P){if(!A)return null;var R=E,k=R.clipPathId,O=E.state,M=O.xAxisMap,D=O.yAxisMap,j=O.offset,q=A.type.defaultProps||{},Y=A.props,X=Y.xAxisId,U=X===void 0?q.xAxisId:X,J=Y.yAxisId,Q=J===void 0?q.yAxisId:J;return $.cloneElement(A,{key:A.key||"".concat(S,"-").concat(P),xAxis:M[U],yAxis:D[Q],viewBox:{x:j.left,y:j.top,width:j.width,height:j.height},clipPathId:k})}),we(E,"renderActivePoints",function(A){var S=A.item,P=A.activePoint,R=A.basePoint,k=A.childIndex,O=A.isRange,M=[],D=S.props.key,j=S.item.type.defaultProps!==void 0?K(K({},S.item.type.defaultProps),S.item.props):S.item.props,q=j.activeDot,Y=j.dataKey,X=K(K({index:k,dataKey:Y,cx:P.x,cy:P.y,r:4,fill:fP(S.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ne(q,!1)),gy(q));return M.push(b.renderActiveDot(q,X,"".concat(D,"-activePoint-").concat(k))),R?M.push(b.renderActiveDot(q,K(K({},X),{},{cx:R.x,cy:R.y}),"".concat(D,"-basePoint-").concat(k))):O&&M.push(null),M}),we(E,"renderGraphicChild",function(A,S,P){var R=E.filterFormatItem(A,S,P);if(!R)return null;var k=E.getTooltipEventType(),O=E.state,M=O.isTooltipActive,D=O.tooltipAxis,j=O.activeTooltipIndex,q=O.activeLabel,Y=E.props.children,X=_r(Y,Ti),U=R.props,J=U.points,Q=U.isRange,le=U.baseLine,ne=R.item.type.defaultProps!==void 0?K(K({},R.item.type.defaultProps),R.item.props):R.item.props,fe=ne.activeDot,Ce=ne.hide,Ue=ne.activeBar,st=ne.activeShape,Ut=!!(!Ce&&M&&X&&(fe||Ue||st)),Wt={};k!=="axis"&&X&&X.props.trigger==="click"?Wt={onClick:Dm(E.handleItemMouseEnter,A.props.onClick)}:k!=="axis"&&(Wt={onMouseLeave:Dm(E.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:Dm(E.handleItemMouseEnter,A.props.onMouseEnter)});var ce=$.cloneElement(A,K(K({},R.props),Wt));function be(tr){return typeof D.dataKey=="function"?D.dataKey(tr.payload):null}if(Ut)if(j>=0){var Te,Z;if(D.dataKey&&!D.allowDuplicatedCategory){var He=typeof D.dataKey=="function"?be:"payload.".concat(D.dataKey.toString());Te=my(J,He,q),Z=Q&&le&&my(le,He,q)}else Te=J==null?void 0:J[j],Z=Q&&le&&le[j];if(st||Ue){var Ie=A.props.activeIndex!==void 0?A.props.activeIndex:j;return[$.cloneElement(A,K(K(K({},R.props),Wt),{},{activeIndex:Ie})),null,null]}if(!De(Te))return[ce].concat(Pc(E.renderActivePoints({item:R,activePoint:Te,basePoint:Z,childIndex:j,isRange:Q})))}else{var at,lt=(at=E.getItemByXY(E.state.activeCoordinate))!==null&&at!==void 0?at:{graphicalItem:ce},nn=lt.graphicalItem,Nr=nn.item,kr=Nr===void 0?A:Nr,_i=nn.childIndex,Or=K(K(K({},R.props),Wt),{},{activeIndex:_i});return[$.cloneElement(kr,Or),null,null]}return Q?[ce,null,null]:[ce,null]}),we(E,"renderCustomized",function(A,S,P){return $.cloneElement(A,K(K({key:"recharts-customized-".concat(P)},E.props),E.state))}),we(E,"renderMap",{CartesianGrid:{handler:Um,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:Um},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:Um},YAxis:{handler:Um},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((x=T.id)!==null&&x!==void 0?x:Pp("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=k4(E.triggeredAfterMouseMove,(C=T.throttleDelay)!==null&&C!==void 0?C:1e3/60),E.state={},E}return wMe(b,v),gMe(b,[{key:"componentDidMount",value:function(){var x,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,C=x.children,E=x.data,A=x.height,S=x.layout,P=_r(C,Ti);if(P){var R=P.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,O=_x(this.state,E,R,k),M=this.state.tooltipTicks[R].coordinate,D=(this.state.offset.top+A)/2,j=S==="horizontal",q=j?{x:M,y:D}:{y:M,x:D},Y=this.state.formattedGraphicalItems.find(function(U){var J=U.item;return J.type.name==="Scatter"});Y&&(q=K(K({},q),Y.props.points[R].tooltipPosition),O=Y.props.points[R].tooltipPayload);var X={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:k,activePayload:O,activeCoordinate:q};this.setState(X),this.renderCursor(P),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var E,A;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(x){ZT([_r(x.children,Ti)],[_r(this.props.children,Ti)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=_r(this.props.children,Ti);if(x&&typeof x.props.shared=="boolean"){var C=x.props.shared?"axis":"item";return a.indexOf(C)>=0?C:o}return o}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var C=this.container,E=C.getBoundingClientRect(),A=pTe(E),S={chartX:Math.round(x.pageX-A.left),chartY:Math.round(x.pageY-A.top)},P=E.width/C.offsetWidth||1,R=this.inRange(S.chartX,S.chartY,P);if(!R)return null;var k=this.state,O=k.xAxisMap,M=k.yAxisMap,D=this.getTooltipEventType(),j=jL(this.state,this.props.data,this.props.layout,R);if(D!=="axis"&&O&&M){var q=os(O).scale,Y=os(M).scale,X=q&&q.invert?q.invert(S.chartX):null,U=Y&&Y.invert?Y.invert(S.chartY):null;return K(K({},S),{},{xValue:X,yValue:U},j)}return j?K(K({},S),j):null}},{key:"inRange",value:function(x,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,S=x/E,P=C/E;if(A==="horizontal"||A==="vertical"){var R=this.state.offset,k=S>=R.left&&S<=R.left+R.width&&P>=R.top&&P<=R.top+R.height;return k?{x:S,y:P}:null}var O=this.state,M=O.angleAxisMap,D=O.radiusAxisMap;if(M&&D){var j=os(M);return AD({x:S,y:P},j)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,C=this.getTooltipEventType(),E=_r(x,Ti),A={};E&&C==="axis"&&(E.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=gy(this.props,this.handleOuterEvent);return K(K({},S),A)}},{key:"addListener",value:function(){Qw.on(Xw,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Qw.removeListener(Xw,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,C,E){for(var A=this.state.formattedGraphicalItems,S=0,P=A.length;S<P;S++){var R=A[S];if(R.item===x||R.props.key===x.key||C===po(R.item.type)&&E===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,C=this.state.offset,E=C.left,A=C.top,S=C.height,P=C.width;return V.createElement("defs",null,V.createElement("clipPath",{id:x},V.createElement("rect",{x:E,y:A,height:S,width:P})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(C,E){var A=FL(E,2),S=A[0],P=A[1];return K(K({},C),{},we({},S,P.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(C,E){var A=FL(E,2),S=A[0],P=A[1];return K(K({},C),{},we({},S,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[x])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(x){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[x])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(x){var C=this.state,E=C.formattedGraphicalItems,A=C.activeItem;if(E&&E.length)for(var S=0,P=E.length;S<P;S++){var R=E[S],k=R.props,O=R.item,M=O.type.defaultProps!==void 0?K(K({},O.type.defaultProps),O.props):O.props,D=po(O.type);if(D==="Bar"){var j=(k.data||[]).find(function(U){return eRe(x,U)});if(j)return{graphicalItem:R,payload:j}}else if(D==="RadialBar"){var q=(k.data||[]).find(function(U){return AD(x,U)});if(q)return{graphicalItem:R,payload:q}}else if(e0(R,A)||t0(R,A)||Jh(R,A)){var Y=r1e({graphicalItem:R,activeTooltipItem:A,itemData:M.data}),X=M.activeIndex===void 0?Y:M.activeIndex;return{graphicalItem:K(K({},R),{},{childIndex:X}),payload:Jh(R,A)?M.data[Y]:R.props.data[Y]}}}return null}},{key:"render",value:function(){var x=this;if(!yO(this))return null;var C=this.props,E=C.children,A=C.className,S=C.width,P=C.height,R=C.style,k=C.compact,O=C.title,M=C.desc,D=UL(C,uMe),j=Ne(D,!1);if(k)return V.createElement(TL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(tE,mu({},j,{width:S,height:P,title:O,desc:M}),this.renderClipPath(),_O(E,this.renderMap)));if(this.props.accessibilityLayer){var q,Y;j.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,j.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",j.onKeyDown=function(U){x.accessibilityManager.keyboardEvent(U)},j.onFocus=function(){x.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return V.createElement(TL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",mu({className:Fe("recharts-wrapper",A),style:K({position:"relative",cursor:"default",width:S,height:P},R)},X,{ref:function(J){x.container=J}}),V.createElement(tE,mu({},j,{width:S,height:P,title:O,desc:M,style:IMe}),this.renderClipPath(),_O(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}($.Component);we(y,"displayName",n),we(y,"defaultProps",K({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),we(y,"getDerivedStateFromProps",function(v,b){var T=v.dataKey,x=v.data,C=v.children,E=v.width,A=v.height,S=v.layout,P=v.stackOffset,R=v.margin,k=b.dataStartIndex,O=b.dataEndIndex;if(b.updateId===void 0){var M=zL(v);return K(K(K({},M),{},{updateId:0},g(K(K({props:v},M),{},{updateId:0}),b)),{},{prevDataKey:T,prevData:x,prevWidth:E,prevHeight:A,prevLayout:S,prevStackOffset:P,prevMargin:R,prevChildren:C})}if(T!==b.prevDataKey||x!==b.prevData||E!==b.prevWidth||A!==b.prevHeight||S!==b.prevLayout||P!==b.prevStackOffset||!ku(R,b.prevMargin)){var D=zL(v),j={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},q=K(K({},jL(b,x,S)),{},{updateId:b.updateId+1}),Y=K(K(K({},D),j),q);return K(K(K({},Y),g(K({props:v},Y),b)),{},{prevDataKey:T,prevData:x,prevWidth:E,prevHeight:A,prevLayout:S,prevStackOffset:P,prevMargin:R,prevChildren:C})}if(!ZT(C,b.prevChildren)){var X,U,J,Q,le=_r(C,vc),ne=le&&(X=(U=le.props)===null||U===void 0?void 0:U.startIndex)!==null&&X!==void 0?X:k,fe=le&&(J=(Q=le.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&J!==void 0?J:O,Ce=ne!==k||fe!==O,Ue=!De(x),st=Ue&&!Ce?b.updateId:b.updateId+1;return K(K({updateId:st},g(K(K({props:v},b),{},{updateId:st,dataStartIndex:ne,dataEndIndex:fe}),b)),{},{prevChildren:C,dataStartIndex:ne,dataEndIndex:fe})}return null}),we(y,"renderActiveDot",function(v,b,T){var x;return $.isValidElement(v)?x=$.cloneElement(v,b):Pe(v)?x=v(b):x=V.createElement(pP,b),V.createElement(Tt,{className:"recharts-active-dot",key:T},x)});var _=$.forwardRef(function(b,T){return V.createElement(y,mu({},b,{ref:T}))});return _.displayName=y.displayName,_},$Me=LMe({chartName:"AreaChart",GraphicalChild:Ys,axisComponents:[{axisType:"xAxis",AxisComp:a0},{axisType:"yAxis",AxisComp:l0}],formatAxisMap:PNe});const VMe={evaluationDate:new Date().toISOString().split("T")[0],profession:"",maritalStatus:"",goals:{hypertrophy:!1,fatLoss:!1,conditioning:!1,qualityOfLife:!1,rehabilitation:!1},clinicalHistory:{cardiovascular:"",metabolic:"",respiratory:"",osteoarticular:"",medications:"",others:""},lifestyle:{smoking:"",alcohol:"",physicalActivityLevel:"",sleepHours:"",stressLevel:"",hydration:""}};function FMe({user:t,onComplete:e}){const[n,r]=$.useState(VMe),[i,o]=$.useState(!1),s=(u,c,d)=>{r(f=>({...f,[u]:{...f[u],[c]:d}}))},a=(u,c)=>{r(d=>({...d,[u]:c}))},l=async u=>{u.preventDefault(),o(!0);try{await sc(un(Le,"users",t.uid,"anamnesis"),n),await m_(Mn(Le,"users",t.uid),{hasCompletedAnamnesis:!0}),e()}catch(c){console.error("Error saving anamnesis:",c),alert("Ocorreu um erro ao salvar suas informaes.")}finally{o(!1)}};return w.jsx("div",{className:"fixed inset-0 bg-zinc-950 z-50 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-2xl h-full bg-zinc-900 border border-zinc-800 rounded-2xl shadow-2xl flex flex-col",children:[w.jsxs("div",{className:"p-6 border-b border-zinc-800",children:[w.jsx("h1",{className:"text-2xl font-bold text-white",children:"Questionrio Inicial"}),w.jsxs("p",{className:"text-zinc-400 text-sm",children:["Ol, ",t.name,"! Por favor, preencha este formulrio para comearmos."]})]}),w.jsxs("form",{onSubmit:l,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[w.jsx(Bm,{legend:"Informaes Pessoais",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[w.jsx(zl,{label:"Data da Avaliao",type:"date",value:n.evaluationDate,onChange:u=>a("evaluationDate",u.target.value)}),w.jsx(zl,{label:"Profisso",value:n.profession,onChange:u=>a("profession",u.target.value)}),w.jsx(zl,{label:"Estado Civil",value:n.maritalStatus,onChange:u=>a("maritalStatus",u.target.value)})]})}),w.jsx(Bm,{legend:"Seus Objetivos",children:w.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[w.jsx(Jd,{label:"Hipertrofia",checked:n.goals.hypertrophy,onChange:u=>s("goals","hypertrophy",u.target.checked)}),w.jsx(Jd,{label:"Emagrecimento",checked:n.goals.fatLoss,onChange:u=>s("goals","fatLoss",u.target.checked)}),w.jsx(Jd,{label:"Condicionamento",checked:n.goals.conditioning,onChange:u=>s("goals","conditioning",u.target.checked)}),w.jsx(Jd,{label:"Qualidade de Vida",checked:n.goals.qualityOfLife,onChange:u=>s("goals","qualityOfLife",u.target.checked)}),w.jsx(Jd,{label:"Reabilitao",checked:n.goals.rehabilitation,onChange:u=>s("goals","rehabilitation",u.target.checked)})]})}),w.jsxs(Bm,{legend:"Histrico Clnico",children:[w.jsx(ql,{label:"Problemas Cardiovasculares (Pessoal e Familiar)",value:n.clinicalHistory.cardiovascular,onChange:u=>s("clinicalHistory","cardiovascular",u.target.value)}),w.jsx(ql,{label:"Problemas Metablicos (Diabetes, Colesterol)",value:n.clinicalHistory.metabolic,onChange:u=>s("clinicalHistory","metabolic",u.target.value)}),w.jsx(ql,{label:"Problemas Respiratrios",value:n.clinicalHistory.respiratory,onChange:u=>s("clinicalHistory","respiratory",u.target.value)}),w.jsx(ql,{label:"Leses ou Dores Osteoarticulares",value:n.clinicalHistory.osteoarticular,onChange:u=>s("clinicalHistory","osteoarticular",u.target.value)}),w.jsx(ql,{label:"Medicamentos em Uso Contnuo",value:n.clinicalHistory.medications,onChange:u=>s("clinicalHistory","medications",u.target.value)}),w.jsx(ql,{label:"Outras Condies (Labirintite, Alergias, etc.)",value:n.clinicalHistory.others,onChange:u=>s("clinicalHistory","others",u.target.value)})]}),w.jsx(Bm,{legend:"Estilo de Vida e Hbitos",children:w.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[w.jsxs(eb,{label:"Tabagismo",value:n.lifestyle.smoking,onChange:u=>s("lifestyle","smoking",u.target.value),children:[w.jsx("option",{value:"",children:"Selecione..."}),w.jsx("option",{value:"non-smoker",children:"No fumante"}),w.jsx("option",{value:"ex-smoker",children:"Ex-fumante"}),w.jsx("option",{value:"smoker",children:"Fumante"})]}),w.jsx(zl,{label:"Consumo de lcool (frequncia)",value:n.lifestyle.alcohol,onChange:u=>s("lifestyle","alcohol",u.target.value)}),w.jsxs(eb,{label:"Nvel de Atividade Fsica",value:n.lifestyle.physicalActivityLevel,onChange:u=>s("lifestyle","physicalActivityLevel",u.target.value),children:[w.jsx("option",{value:"",children:"Selecione..."}),w.jsx("option",{value:"sedentary",children:"Sedentrio"}),w.jsx("option",{value:"moderately_active",children:"Moderadamente Ativo"}),w.jsx("option",{value:"active",children:"Ativo"})]}),w.jsx(zl,{label:"Horas de Sono por noite",value:n.lifestyle.sleepHours,onChange:u=>s("lifestyle","sleepHours",u.target.value)}),w.jsxs(eb,{label:"Nvel de Estresse",value:n.lifestyle.stressLevel,onChange:u=>s("lifestyle","stressLevel",u.target.value),children:[w.jsx("option",{value:"",children:"Selecione..."}),w.jsx("option",{value:"low",children:"Baixo"}),w.jsx("option",{value:"medium",children:"Mdio"}),w.jsx("option",{value:"high",children:"Alto"})]}),w.jsx(zl,{label:"Consumo dirio de gua (litros)",value:n.lifestyle.hydration,onChange:u=>s("lifestyle","hydration",u.target.value)})]})})]}),w.jsx("div",{className:"p-6 border-t border-zinc-800",children:w.jsx("button",{onClick:l,disabled:i,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-3 rounded-lg transition-all active:scale-95 disabled:opacity-50",children:i?"SALVANDO...":"SALVAR E CONTINUAR"})})]})})}const Bm=({legend:t,children:e})=>w.jsxs("fieldset",{className:"border border-zinc-800 p-4 rounded-lg",children:[w.jsx("legend",{className:"px-2 text-sm font-medium text-emerald-400",children:t}),w.jsx("div",{className:"space-y-4",children:e})]}),zl=({label:t,...e})=>w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:t}),w.jsx("input",{...e,className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none"})]}),ql=({label:t,...e})=>w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:t}),w.jsx("textarea",{...e,rows:2,className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm resize-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none"})]}),eb=({label:t,children:e,...n})=>w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:t}),w.jsx("select",{...n,className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none",children:e})]}),Jd=({label:t,...e})=>w.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg bg-zinc-800 border border-transparent has-[:checked]:border-emerald-500 has-[:checked]:bg-emerald-900/50 cursor-pointer",children:[w.jsx("input",{type:"checkbox",...e,className:"w-4 h-4 rounded bg-zinc-700 border-zinc-600 text-emerald-500 focus:ring-emerald-600"}),w.jsx("span",{className:"text-sm font-medium",children:t})]}),tb=({icon:t,label:e,active:n,onClick:r})=>w.jsxs("button",{onClick:r,className:`flex flex-col items-center gap-1 transition-colors ${n?"text-emerald-400":"text-zinc-500 hover:text-white"}`,children:[w.jsx("i",{className:`ph ${n?"ph-fill":"ph"} ph-${t} text-2xl`}),w.jsx("span",{className:"text-xs font-medium",children:e})]}),nb=({title:t,data:e})=>w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-4 rounded-xl",children:[w.jsx("h3",{className:"font-bold text-emerald-400 mb-2",children:t}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-4 gap-y-2 text-sm",children:Object.entries(e).map(([n,r])=>w.jsxs("div",{children:[w.jsxs("span",{className:"text-zinc-400 capitalize",children:[n.replace(/([A-Z])/g," $1"),": "]}),w.jsx("span",{className:"font-semibold text-white",children:String(r)})]},n))})]}),UMe=({onSave:t,onClose:e,duration:n})=>{const[r,i]=$.useState(5),[o,s]=$.useState("");return w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",children:w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl p-6 w-full max-w-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-1",children:"Registrar Treino"}),w.jsxs("p",{className:"text-zinc-400 text-sm mb-4",children:["Durao total: ",w.jsx("span",{className:"font-bold text-emerald-400",children:n})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Percepo de Esforo (RPE 1-10)"}),w.jsx("input",{type:"range",min:"1",max:"10",value:r,onChange:a=>i(Number(a.target.value)),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),w.jsx("div",{className:"text-center font-bold text-emerald-400 mt-1",children:r})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Comentrios (opcional)"}),w.jsx("textarea",{value:o,onChange:a=>s(a.target.value),rows:3,className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:e,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 font-bold py-3 rounded-lg",children:"Cancelar"}),w.jsx("button",{onClick:()=>t(r,o),className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-black font-bold py-3 rounded-lg",children:"Salvar"})]})]})]})})},BMe=({onSave:t,onClose:e,logData:n})=>{const[r,i]=$.useState(5),[o,s]=$.useState(""),[a,l]=$.useState("");return w.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 animate-fade-in",children:w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl p-6 w-full max-w-sm",children:[w.jsx("h2",{className:"text-lg font-bold mb-1",children:"Registrar Corrida"}),w.jsxs("p",{className:"text-zinc-400 text-sm mb-4",children:[n.day,": ",w.jsx("span",{className:"text-white",children:n.workout})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Durao (HH:MM:SS)"}),w.jsx("input",{type:"text",value:a,onChange:u=>l(u.target.value),placeholder:"00:45:30",className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Percepo de Esforo (RPE 1-10)"}),w.jsx("input",{type:"range",min:"1",max:"10",value:r,onChange:u=>i(Number(u.target.value)),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),w.jsx("div",{className:"text-center font-bold text-emerald-400 mt-1",children:r})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-1",children:"Comentrios (opcional)"}),w.jsx("textarea",{value:o,onChange:u=>s(u.target.value),rows:2,className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-sm"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:e,className:"flex-1 bg-zinc-700 hover:bg-zinc-600 font-bold py-3 rounded-lg",children:"Cancelar"}),w.jsx("button",{onClick:()=>t(r,o,a),className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-black font-bold py-3 rounded-lg",children:"Salvar"})]})]})]})})},jMe=({isActive:t,duration:e,onAdd:n,onSkip:r,onComplete:i})=>{const[o,s]=$.useState(e);return $.useEffect(()=>{s(e)},[e,t]),$.useEffect(()=>{let a;return t&&o>0&&(a=setInterval(()=>{s(l=>l<=1?(clearInterval(a),i(),0):l-1)},1e3)),()=>clearInterval(a)},[t,o,i]),t?w.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-black via-zinc-900 to-zinc-900/95 backdrop-blur-lg border-t border-emerald-500/30 p-6 pb-8 z-[60] shadow-[0_-5px_20px_rgba(0,0,0,0.5)] animate-slide-up",children:w.jsxs("div",{className:"max-w-md mx-auto flex flex-col items-center",children:[w.jsx("div",{className:"text-zinc-400 text-xs uppercase tracking-widest font-bold mb-2",children:"Descanso"}),w.jsxs("div",{className:"text-5xl font-mono font-bold text-white mb-6 tabular-nums tracking-tighter",children:[Math.floor(o/60).toString().padStart(2,"0"),":",Math.floor(o%60).toString().padStart(2,"0")]}),w.jsxs("div",{className:"flex gap-3 w-full",children:[w.jsx("button",{onClick:()=>n(15),className:"flex-1 bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-xl font-bold text-sm transition-colors border border-zinc-700",children:"+15s"}),w.jsx("button",{onClick:()=>n(30),className:"flex-1 bg-zinc-800 hover:bg-zinc-700 text-white py-3 rounded-xl font-bold text-sm transition-colors border border-zinc-700",children:"+30s"}),w.jsx("button",{onClick:r,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-black py-3 rounded-xl font-bold text-sm transition-colors shadow-lg shadow-emerald-900/20",children:"Pular"})]})]})}):null},zMe=({item:t,sessionData:e,onUpdateSet:n})=>{const r=parseInt(t.displayString.split("x")[0])||3,i=e[t.id]||Array(r).fill({weight:"",completed:!1}),s=i.filter(a=>a.completed).length/r*100;return w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl overflow-hidden mb-4 shadow-lg",children:[w.jsxs("div",{className:"flex p-4 gap-4 bg-zinc-950/30",children:[t.img?w.jsx("img",{src:t.img,className:"w-20 h-20 rounded-lg object-cover bg-black border border-zinc-800",alt:t.exercise}):w.jsx("div",{className:"w-20 h-20 rounded-lg bg-zinc-800 flex items-center justify-center text-zinc-600",children:w.jsx("i",{className:"ph-fill ph-barbell text-3xl"})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"text-xs text-emerald-500 font-bold uppercase tracking-wider mb-1",children:t.target}),w.jsx("h3",{className:"font-bold text-lg leading-tight text-white mb-1 truncate",children:t.exercise}),w.jsx("div",{className:"text-zinc-400 text-sm",children:t.displayString}),t.notes&&w.jsx("div",{className:"text-xs text-zinc-500 mt-1 italic line-clamp-2",children:t.notes})]})]}),w.jsx("div",{className:"h-1 w-full bg-zinc-800",children:w.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${s}%`}})}),w.jsxs("div",{className:"p-4 space-y-2",children:[w.jsxs("div",{className:"flex text-xs text-zinc-500 font-medium px-2 mb-1",children:[w.jsx("div",{className:"w-10 text-center",children:"Srie"}),w.jsx("div",{className:"flex-1 text-center",children:"Carga (kg)"}),w.jsx("div",{className:"w-16 text-center",children:"Status"})]}),i.map((a,l)=>w.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-colors ${a.completed?"bg-emerald-900/10 border border-emerald-500/20":"bg-zinc-950 border border-zinc-800"}`,children:[w.jsx("div",{className:"w-10 text-center font-bold text-zinc-400",children:l+1}),w.jsx("input",{type:"number",placeholder:"kg",value:a.weight,onChange:u=>n(t.id,l,{weight:u.target.value}),className:`flex-1 bg-transparent text-center font-bold outline-none ${a.completed?"text-emerald-400":"text-white"}`,disabled:a.completed}),w.jsx("button",{onClick:()=>n(t.id,l,{completed:!a.completed}),className:`w-16 h-8 rounded-md flex items-center justify-center transition-all ${a.completed?"bg-emerald-500 text-black shadow-[0_0_10px_rgba(16,185,129,0.3)]":"bg-zinc-800 text-zinc-500 hover:bg-zinc-700"}`,children:a.completed?w.jsx("i",{className:"ph-fill ph-check-circle text-xl"}):w.jsx("i",{className:"ph ph-circle text-xl"})})]},l))]})]})},qMe=({userUid:t,workout:e,onClose:n})=>{const[r,i]=$.useState({}),[o]=$.useState(Date.now()),[s,a]=$.useState("00:00:00"),[l,u]=$.useState(!1),[c,d]=$.useState({active:!1,duration:60});$.useEffect(()=>{const y={};e.items.forEach(_=>{if(_.type==="exercise"){const v=parseInt(_.displayString.split("x")[0])||3;y[_.id]=Array(v).fill({weight:"",completed:!1})}}),i(y)},[e]),$.useEffect(()=>{const y=setInterval(()=>a(new Date(Math.floor((Date.now()-o)/1e3)*1e3).toISOString().substr(11,8)),1e3);return()=>clearInterval(y)},[o]);const f=(y,_,v)=>{i(b=>{const T=[...b[y]||[]],x=T[_].completed;if(T[_]={...T[_],...v},v.completed===!0&&!x){const C=e.items.find(A=>A.id===y),E=(C==null?void 0:C.timerValue)||60;d({active:!0,duration:E})}return{...b,[y]:T}})},g=async(y,_)=>{let v=`${_}

Resumo de Cargas:
`;e.items.forEach(b=>{if(b.type==="exercise"&&r[b.id]){const x=r[b.id].map((C,E)=>C.weight?`S${E+1}:${C.weight}kg`:null).filter(Boolean).join(", ");x&&(v+=`- ${b.exercise}: [${x}]
`)}});try{await sc(un(Le,"users",t,"history"),{date:new Date().toISOString(),workoutName:e.id,duration:s,rpe:y,comment:v}),n()}catch(b){console.error(b),alert("Erro ao salvar treino.")}};return w.jsxs("div",{className:"animate-fade-in relative",children:[l&&w.jsx(UMe,{onClose:()=>u(!1),onSave:g,duration:s}),w.jsx("div",{className:"sticky top-16 z-30 bg-zinc-950/95 backdrop-blur border-b border-zinc-800 pb-4 pt-2 mb-4 px-1",children:w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold text-white",children:e.id}),w.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-mono text-sm",children:[w.jsx("i",{className:"ph-fill ph-timer"}),s]})]}),w.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-zinc-900 border border-zinc-800 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800",children:w.jsx("i",{className:"ph ph-x text-xl"})})]})}),w.jsx("div",{className:"space-y-6 pb-32 px-1",children:e.items.map(y=>y.type==="header"?w.jsxs("div",{className:"relative py-4",children:[w.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:w.jsx("div",{className:"w-full border-t border-zinc-800"})}),w.jsx("div",{className:"relative flex justify-center",children:w.jsx("span",{className:"bg-zinc-950 px-4 text-sm font-bold text-emerald-500 uppercase tracking-widest",children:y.label})})]},y.id):w.jsx(zMe,{item:y,sessionData:r,onUpdateSet:f},y.id))}),w.jsx("div",{className:"fixed bottom-20 right-4 z-40",children:w.jsxs("button",{onClick:()=>u(!0),className:"bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-3 px-6 rounded-full shadow-[0_0_20px_rgba(16,185,129,0.4)] flex items-center gap-2 transition-transform active:scale-95",children:[w.jsx("i",{className:"ph-fill ph-check-circle text-xl"}),"Finalizar"]})}),w.jsx(jMe,{isActive:c.active,duration:c.duration,onAdd:y=>d(_=>({..._,duration:_.duration+y})),onSkip:()=>d(y=>({...y,active:!1})),onComplete:()=>d(y=>({...y,active:!1}))})]})},GMe=({userUid:t,plan:e,onClose:n})=>{const[r,i]=$.useState(0),[o,s]=$.useState(!1),[a,l]=$.useState(null),u=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],c=new Date().getDay(),[d,f]=$.useState(u[c]),g=(x,C,E)=>{const A=typeof E=="string"?E:E.type;l({week:x,day:C,workout:A||"Corrida Livre"}),s(!0)},y=async(x,C,E)=>{if(a)try{await sc(un(Le,"users",t,"history"),{date:new Date().toISOString(),workoutName:`Corrida: ${a.day}`,duration:E,rpe:x,comment:C}),s(!1),l(null)}catch(A){console.error(A),alert("Erro ao salvar corrida.")}},_=e.weeks[r],v={monday:"Segunda",tuesday:"Tera",wednesday:"Quarta",thursday:"Quinta",friday:"Sexta",saturday:"Sbado",sunday:"Domingo"},b={monday:"SEG",tuesday:"TER",wednesday:"QUA",thursday:"QUI",friday:"SEX",saturday:"SAB",sunday:"DOM"},T=_.days[d];return w.jsxs("div",{className:"animate-fade-in pb-20",children:[o&&w.jsx(BMe,{onSave:y,onClose:()=>s(!1),logData:a}),w.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-16 bg-zinc-950 z-20 pt-2 pb-2 border-b border-zinc-800",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-bold",children:e.name}),w.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[w.jsx("button",{disabled:r===0,onClick:()=>i(x=>x-1),className:"hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-left"})}),w.jsx("span",{children:_.weekLabel}),w.jsx("button",{disabled:r===e.weeks.length-1,onClick:()=>i(x=>x+1),className:"hover:text-white disabled:opacity-30",children:w.jsx("i",{className:"ph ph-caret-right"})})]})]}),w.jsx("button",{onClick:n,className:"text-zinc-400 hover:text-white bg-zinc-900 w-10 h-10 rounded-full flex items-center justify-center border border-zinc-800",children:w.jsx("i",{className:"ph ph-x text-xl"})})]}),w.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar",children:u.map((x,C)=>{const E=x===d,A=!!_.days[x];return w.jsxs("button",{onClick:()=>f(x),className:`flex flex-col items-center justify-center min-w-[3.5rem] h-14 rounded-xl border transition-all ${E?"bg-emerald-500 text-black border-emerald-500 font-bold":"bg-zinc-900 text-zinc-500 border-zinc-800"} ${A&&!E?"border-zinc-600 text-zinc-300":""}`,children:[w.jsx("span",{className:"text-[10px] uppercase",children:b[x]}),A&&w.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${E?"bg-black":"bg-emerald-500"}`})]},x)})}),w.jsx("div",{className:"min-h-[300px]",children:T?w.jsx(HMe,{dayLabel:v[d],workout:T,onLog:()=>g(_.weekLabel,v[d],T)}):w.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-zinc-500 border-2 border-dashed border-zinc-800 rounded-xl bg-zinc-900/30",children:[w.jsx("i",{className:"ph ph-coffee text-4xl mb-3"}),w.jsx("p",{className:"text-lg font-medium",children:"Dia de Descanso"}),w.jsx("p",{className:"text-sm",children:"Aproveite para recuperar as energias."})]})})]})},HMe=({dayLabel:t,workout:e,onLog:n})=>{const[r,i]=$.useState([]),[o,s]=$.useState([]);$.useEffect(()=>{let d="";if(typeof e=="string")d=e;else{const v=[];e.warmup&&v.push(`Aquecimento: ${e.warmup}`),e.main&&v.push(`Principal: ${e.main}`),e.cooldown&&v.push(`Desaquecimento: ${e.cooldown}`),d=v.join(" + ")}const f=/\n|[+\/]|(?:\s+e\s+)/i,g=d.split(f).map(v=>v.trim()).filter(v=>v.length>0),y=[],_=/^(\d+)\s*x\s*(.+)/i;g.forEach(v=>{const b=v.match(_);if(b){const T=parseInt(b[1]),x=b[2];for(let C=1;C<=T;C++)y.push(`${x} (${C}/${T})`)}else y.push(v)}),s(y),i(new Array(y.length).fill(!1))},[e]);const a=d=>{const f=[...r];f[d]=!f[d],i(f)},l=typeof e!="string",u=l?e.type:"Treino do Dia",c=Math.round(r.filter(Boolean).length/o.length*100)||0;return w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl overflow-hidden shadow-lg animate-slide-up",children:[w.jsx("div",{className:"p-6 pb-4 bg-gradient-to-br from-zinc-800 to-zinc-900 border-b border-zinc-700",children:w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-sm font-bold text-emerald-400 uppercase tracking-wider mb-1",children:t}),w.jsx("h3",{className:"text-2xl font-bold text-white leading-tight",children:u}),l&&e.zone&&w.jsxs("span",{className:"inline-block mt-2 text-xs font-mono bg-black/40 text-zinc-300 px-2 py-1 rounded",children:["Zona Alvo: ",w.jsx("span",{className:"text-emerald-400 font-bold",children:e.zone})]})]}),w.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-400 border border-emerald-500/20",children:w.jsx("i",{className:"ph-fill ph-person-simple-run text-2xl"})})]})}),w.jsx("div",{className:"p-2 bg-zinc-950",children:w.jsx("div",{className:"h-1 w-full bg-zinc-800 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${c}%`}})})}),w.jsx("div",{className:"p-4 space-y-3",children:o.map((d,f)=>w.jsxs("button",{onClick:()=>a(f),className:`w-full text-left p-4 rounded-xl border transition-all flex items-start gap-4 ${r[f]?"bg-emerald-900/10 border-emerald-500/30":"bg-zinc-950 border-zinc-800 hover:border-zinc-700"}`,children:[w.jsx("div",{className:`mt-0.5 w-6 h-6 rounded-full border flex items-center justify-center shrink-0 transition-colors ${r[f]?"bg-emerald-500 border-emerald-500 text-black":"border-zinc-600 text-transparent"}`,children:w.jsx("i",{className:"ph-bold ph-check text-sm"})}),w.jsx("span",{className:`text-sm leading-relaxed ${r[f]?"text-zinc-500 line-through":"text-zinc-200"}`,children:d})]},f))}),w.jsx("div",{className:"p-4 pt-2",children:w.jsxs("button",{onClick:n,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-black font-bold py-4 rounded-xl shadow-lg shadow-emerald-900/20 flex items-center justify-center gap-2 transition-transform active:scale-95",children:[w.jsx("i",{className:"ph-bold ph-check-circle text-xl"}),"Concluir Treino"]})})]})},WMe=({assessments:t,onClose:e})=>{var i;const[n,r]=$.useState(null);return n?w.jsxs("div",{className:"animate-fade-in",children:[w.jsxs("button",{onClick:()=>r(null),className:"flex items-center gap-2 text-sm text-emerald-400 hover:text-emerald-300 mb-4",children:[w.jsx("i",{className:"ph ph-arrow-left"})," Voltar"]}),w.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Avaliao de ",new Date(n.date).toLocaleDateString("pt-BR")]}),w.jsxs("div",{className:"space-y-4",children:[n.anthropometry&&w.jsx(nb,{title:"Antropometria",data:{Peso:`${n.anthropometry.weight} kg`,Altura:`${n.anthropometry.height} m`,IMC:(i=n.anthropometry.bmi)==null?void 0:i.toFixed(2)}}),n.perimetry&&w.jsx(nb,{title:"Permetros (cm)",data:n.perimetry}),n.skinfolds&&w.jsx(nb,{title:"Dobras Cutneas (mm)",data:n.skinfolds})]})]}):w.jsxs("div",{className:"animate-fade-in",children:[w.jsx("h2",{className:"text-xl font-bold mb-4",children:"Suas Avaliaes"}),t.length===0&&w.jsx("p",{className:"text-zinc-500",children:"Nenhuma avaliao fsica registrada."}),w.jsx("div",{className:"space-y-3",children:t.map(o=>w.jsxs("button",{onClick:()=>r(o),className:"w-full text-left bg-zinc-900 border border-zinc-800 p-4 rounded-xl flex justify-between items-center hover:border-emerald-500",children:[w.jsxs("span",{className:"font-bold",children:["Avaliao de ",new Date(o.date).toLocaleDateString("pt-BR")]}),w.jsx("i",{className:"ph ph-caret-right"})]},o.id))})]})};function KMe({user:t,onLogout:e}){const[n,r]=$.useState(t),[i,o]=$.useState(!t.hasCompletedAnamnesis);return i?w.jsx(FMe,{user:n,onComplete:()=>{o(!1),r(s=>({...s,hasCompletedAnamnesis:!0}))}}):w.jsx(JMe,{Shelluser:n,onLogout:e})}const JMe=({Shelluser:t,onLogout:e})=>{const[n,r]=$.useState(t),[i,o]=$.useState("main"),[s,a]=$.useState([]),[l,u]=$.useState([]),[c,d]=$.useState([]),[f,g]=$.useState([]),[y,_]=$.useState(null),[v,b]=$.useState(null),[T,x]=$.useState(null);$.useEffect(()=>{if(!n.uid)return;const A=_a(Mn(Le,"users",n.uid),O=>{O.exists&&r({uid:O.id,...O.data()})},O=>console.error("Error fetching user document:",O)),S=_a(un(Le,"users",n.uid,"workouts"),O=>a(O.docs.map(M=>({id:M.id,...M.data()}))),O=>console.error("Error fetching workouts:",O)),P=_a(un(Le,"users",n.uid,"runningPlans"),O=>u(O.docs.map(M=>({id:M.id,...M.data()}))),O=>console.error("Error fetching running plans:",O)),R=_a(wa(un(Le,"users",n.uid,"history"),cu("date","desc")),O=>d(O.docs.map(M=>({id:M.id,...M.data()}))),O=>console.error("Error fetching history:",O)),k=_a(wa(un(Le,"users",n.uid,"assessments"),cu("date","desc")),O=>g(O.docs.map(M=>({id:M.id,...M.data()}))),O=>console.error("Error fetching assessments:",O));return()=>{A(),S(),P(),R(),k()}},[n.uid]),$.useEffect(()=>{if(!fg)return;(async()=>{try{if(!("Notification"in window)){console.log("Desktop notifications not supported in this browser/environment");return}if(await Notification.requestPermission()==="granted"){const R=await yj(fg).catch(()=>null);R&&await m_(Mn(Le,"users",n.uid),{fcmToken:R})}}catch(P){console.error("Error with notifications",P)}})();const S=vj(fg,P=>{P.notification&&(x({title:P.notification.title||"Nova Mensagem",body:P.notification.body||""}),setTimeout(()=>x(null),5e3))});return()=>S()},[n.uid]);const C=[...c].sort((A,S)=>new Date(A.date).getTime()-new Date(S.date).getTime()).slice(-7).map(A=>{var P;const S=(P=A.duration)!=null&&P.includes(":")?A.duration.split(":").map(Number).reduce((R,k)=>60*R+k,0)/60:parseFloat(A.duration)||0;return{date:new Date(A.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),rpe:Number(A.rpe)||0,duration:parseFloat(S.toFixed(1))}}),E=()=>{var A;return i==="workout"&&y?w.jsx(qMe,{userUid:n.uid,workout:y,onClose:()=>o("main")}):i==="plan"&&v?w.jsx(GMe,{userUid:n.uid,plan:v,onClose:()=>o("main")}):i==="assessments"?w.jsx(WMe,{assessments:f,onClose:()=>o("main")}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"mb-6",children:[w.jsxs("h1",{className:"text-xl font-bold",children:["Ol, ",w.jsx("span",{className:"text-emerald-400",children:((A=n.name)==null?void 0:A.split(" ")[0])||n.email}),"!"]}),w.jsx("p",{className:"text-zinc-500 text-sm",children:"Selecione sua atividade de hoje."})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[s.map(S=>w.jsxs("button",{onClick:()=>{_(S),o("workout")},className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 text-center hover:border-emerald-500 transition-colors",children:[w.jsx("i",{className:"ph ph-barbell text-2xl text-emerald-400"}),w.jsx("div",{className:"font-semibold text-white mt-2",children:S.id}),w.jsxs("div",{className:"text-xs text-zinc-500",children:[S.items.filter(P=>P.type==="exercise").length," Exerccios"]})]},S.id)),l.map(S=>w.jsxs("button",{onClick:()=>{b(S),o("plan")},className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6 text-center hover:border-emerald-500 transition-colors",children:[w.jsx("i",{className:"ph ph-person-simple-run text-2xl text-emerald-400"}),w.jsx("div",{className:"font-semibold text-white mt-2",children:S.name}),w.jsxs("div",{className:"text-xs text-zinc-500",children:[S.weeks.length," Semanas"]})]},S.id)),s.length===0&&l.length===0&&w.jsx("div",{className:"col-span-2 text-center text-zinc-500 py-10",children:"Nenhum treino disponvel."})]}),C.length>0&&w.jsxs("div",{className:"mb-8",children:[w.jsx("h2",{className:"text-lg font-bold",children:"Sua Evoluo Recente"}),w.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 h-64 w-full",children:w.jsx(aTe,{width:"100%",height:"100%",children:w.jsxs($Me,{data:C,children:[w.jsx(AG,{strokeDasharray:"3 3",stroke:"#27272a"}),w.jsx(a0,{dataKey:"date",stroke:"#71717a",fontSize:10}),w.jsx(l0,{stroke:"#71717a",fontSize:10,domain:["dataMin - 1","dataMax + 1"]}),w.jsx(Ti,{contentStyle:{backgroundColor:"#18181b",borderColor:"#27272a"}}),w.jsx(Ys,{type:"monotone",dataKey:"rpe",stroke:"#10b981",fill:"#10b981",fillOpacity:.2,name:"RPE"})]})})})]}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-bold",children:"Histrico"}),c.slice(0,5).map(S=>w.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 p-4 rounded-xl my-2 flex justify-between items-center",children:[w.jsxs("div",{children:[w.jsx("div",{className:"font-semibold",children:S.workoutName}),w.jsx("div",{className:"text-xs text-zinc-500",children:new Date(S.date).toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"short"})})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-emerald-400",children:S.duration}),w.jsxs("div",{className:"text-xs text-zinc-500",children:["RPE ",S.rpe]})]})]},S.id)),c.length===0&&w.jsx("p",{className:"text-zinc-500 text-sm",children:"Nenhum treino registrado."})]})]})};return w.jsxs("div",{className:"min-h-screen bg-zinc-950 flex flex-col",children:[w.jsxs("header",{className:"fixed top-0 left-0 right-0 h-16 bg-zinc-900/80 backdrop-blur border-b border-zinc-800 flex items-center justify-between px-4 z-50",children:[w.jsxs("div",{className:"font-bold text-lg",children:["Fit",w.jsx("span",{className:"text-emerald-400",children:"Life"})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:n.avatar,className:"w-8 h-8 rounded-full border border-emerald-500",alt:""}),w.jsx("button",{onClick:e,className:"text-zinc-400 hover:text-white",children:w.jsx("i",{className:"ph ph-sign-out text-xl"})})]})]}),w.jsx("main",{className:"flex-1 pt-20 p-4 pb-24",children:E()}),w.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 h-16 bg-zinc-900 border-t border-zinc-800 flex justify-around items-center z-40",children:[w.jsx(tb,{icon:"house",label:"Incio",active:i==="main",onClick:()=>o("main")}),w.jsx(tb,{icon:"ruler",label:"Avaliaes",active:i==="assessments",onClick:()=>o("assessments")}),w.jsx(tb,{icon:"user",label:"Perfil",active:!1,onClick:()=>{}})]})]})};function YMe(){const[t,e]=$.useState("login"),[n,r]=$.useState(null),[i,o]=$.useState(!0);$.useEffect(()=>{const l=mte(Cu,async u=>{if(u){const c=Mn(Le,"users",u.uid),d=await xj(c);if(d.exists){const f={uid:u.uid,...d.data()};r(f),e("dashboard")}else await xN(Cu),r(null),e("login")}else r(null),e("login");o(!1)});return()=>l()},[]);const s=l=>{r(l),e("dashboard")},a=async()=>{await xN(Cu),r(null),e("login")};return i?w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-950 text-emerald-400",children:w.jsx("div",{className:"animate-spin text-4xl",children:w.jsx("i",{className:"ph ph-spinner"})})}):w.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white selection:bg-emerald-500/30 selection:text-emerald-200",children:[t==="login"&&w.jsx(gte,{onLoginSuccess:s,onNavigateRegister:()=>e("register")}),t==="register"&&w.jsx(yte,{onNavigateLogin:()=>e("login")}),t==="dashboard"&&n&&w.jsx(w.Fragment,{children:n.workoutType==="admin"||n.workoutType==="trainer"?w.jsx(jle,{user:n,onLogout:a}):w.jsx(KMe,{user:n,onLogout:a})})]})}const HG=document.getElementById("root");if(!HG)throw new Error("Could not find root element to mount to");const QMe=rb.createRoot(HG);QMe.render(w.jsx(V.StrictMode,{children:w.jsx(YMe,{})}));
